%uczenie predyktora oe
clear all;
n=0; farx(n+1)=4.539149e+003; foe(n+1)=4.490017e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=2.926218e+003; foe(n+1)=2.726954e+003; krok(n+1)=5.391128e-004; ng(n+1)=5.658619e+003;
n=2; farx(n+1)=1.143158e+003; foe(n+1)=9.326381e+002; krok(n+1)=1.651908e-003; ng(n+1)=3.516080e+003;
n=3; farx(n+1)=1.301797e+003; foe(n+1)=5.407474e+002; krok(n+1)=2.232764e-004; ng(n+1)=8.097087e+003;
n=4; farx(n+1)=1.260986e+003; foe(n+1)=5.047069e+002; krok(n+1)=5.186798e-003; ng(n+1)=1.116153e+003;
n=5; farx(n+1)=1.036002e+003; foe(n+1)=4.706712e+002; krok(n+1)=4.925838e-004; ng(n+1)=1.768314e+003;
n=6; farx(n+1)=1.006468e+003; foe(n+1)=4.677500e+002; krok(n+1)=2.661414e-004; ng(n+1)=2.907704e+003;
n=7; farx(n+1)=5.741834e+002; foe(n+1)=4.155143e+002; krok(n+1)=8.861138e-004; ng(n+1)=2.994552e+003;
n=8; farx(n+1)=4.112053e+002; foe(n+1)=3.955441e+002; krok(n+1)=3.226735e-004; ng(n+1)=4.602392e+003;
n=9; farx(n+1)=2.875246e+002; foe(n+1)=3.776172e+002; krok(n+1)=1.276921e-003; ng(n+1)=4.382259e+003;
n=10; farx(n+1)=2.028740e+002; foe(n+1)=3.466970e+002; krok(n+1)=3.984680e-003; ng(n+1)=5.454703e+003;
n=11; farx(n+1)=1.859548e+002; foe(n+1)=3.406880e+002; krok(n+1)=2.308086e-004; ng(n+1)=2.737561e+003;
n=12; farx(n+1)=1.775084e+002; foe(n+1)=3.357396e+002; krok(n+1)=2.431442e-003; ng(n+1)=2.448714e+003;
n=13; farx(n+1)=1.837700e+002; foe(n+1)=3.170529e+002; krok(n+1)=2.827577e-003; ng(n+1)=2.055686e+003;
n=14; farx(n+1)=2.449994e+002; foe(n+1)=2.704040e+002; krok(n+1)=7.530795e-003; ng(n+1)=1.485567e+003;
n=15; farx(n+1)=2.431426e+002; foe(n+1)=2.686824e+002; krok(n+1)=4.863834e-004; ng(n+1)=6.274721e+002;
n=16; farx(n+1)=2.424571e+002; foe(n+1)=2.663367e+002; krok(n+1)=1.317301e-003; ng(n+1)=5.615740e+002;
n=17; farx(n+1)=1.690546e+002; foe(n+1)=2.505562e+002; krok(n+1)=2.118041e-002; ng(n+1)=6.513756e+002;
n=18; farx(n+1)=1.011599e+002; foe(n+1)=2.212168e+002; krok(n+1)=1.231621e-003; ng(n+1)=2.030779e+003;
n=19; farx(n+1)=9.577702e+001; foe(n+1)=2.194239e+002; krok(n+1)=1.468353e-004; ng(n+1)=1.417540e+003;
n=20; farx(n+1)=7.587250e+001; foe(n+1)=2.155682e+002; krok(n+1)=5.945944e-003; ng(n+1)=1.259770e+003;
n=21; farx(n+1)=6.486622e+001; foe(n+1)=2.104452e+002; krok(n+1)=1.423724e-003; ng(n+1)=1.842667e+003;
n=22; farx(n+1)=5.617943e+001; foe(n+1)=2.038655e+002; krok(n+1)=1.876224e-003; ng(n+1)=3.159062e+003;
n=23; farx(n+1)=3.492055e+001; foe(n+1)=1.716361e+002; krok(n+1)=5.186798e-003; ng(n+1)=5.016704e+003;
n=24; farx(n+1)=3.417252e+001; foe(n+1)=1.695744e+002; krok(n+1)=5.962617e-005; ng(n+1)=1.452256e+004;
n=25; farx(n+1)=3.697816e+001; foe(n+1)=1.623556e+002; krok(n+1)=3.174920e-003; ng(n+1)=1.667153e+004;
%odnowa zmiennej metryki
n=26; farx(n+1)=2.494811e+001; foe(n+1)=1.313209e+002; krok(n+1)=5.005977e-006; ng(n+1)=1.443445e+004;
n=27; farx(n+1)=2.138389e+001; foe(n+1)=9.624888e+001; krok(n+1)=3.780400e-005; ng(n+1)=3.287475e+003;
n=28; farx(n+1)=1.236198e+001; foe(n+1)=8.089990e+001; krok(n+1)=1.491544e-004; ng(n+1)=2.061813e+003;
n=29; farx(n+1)=1.005690e+001; foe(n+1)=4.307352e+001; krok(n+1)=7.286672e-004; ng(n+1)=1.685293e+003;
n=30; farx(n+1)=9.032299e+000; foe(n+1)=3.852083e+001; krok(n+1)=1.144049e-004; ng(n+1)=1.083252e+003;
n=31; farx(n+1)=6.917045e+000; foe(n+1)=2.653191e+001; krok(n+1)=3.990929e-003; ng(n+1)=1.799588e+003;
n=32; farx(n+1)=6.148315e+000; foe(n+1)=2.343520e+001; krok(n+1)=1.016331e-003; ng(n+1)=9.202535e+002;
n=33; farx(n+1)=5.503692e+000; foe(n+1)=1.750696e+001; krok(n+1)=3.248447e-003; ng(n+1)=1.551665e+003;
n=34; farx(n+1)=5.375433e+000; foe(n+1)=1.564816e+001; krok(n+1)=1.047905e-003; ng(n+1)=1.650401e+003;
n=35; farx(n+1)=4.751147e+000; foe(n+1)=1.303498e+001; krok(n+1)=1.828656e-003; ng(n+1)=7.371688e+002;
n=36; farx(n+1)=3.665816e+000; foe(n+1)=1.003387e+001; krok(n+1)=9.016309e-003; ng(n+1)=8.276600e+002;
n=37; farx(n+1)=3.264088e+000; foe(n+1)=8.781771e+000; krok(n+1)=4.241720e-003; ng(n+1)=1.104011e+003;
n=38; farx(n+1)=3.046989e+000; foe(n+1)=8.075428e+000; krok(n+1)=6.511197e-003; ng(n+1)=4.582319e+002;
n=39; farx(n+1)=2.790398e+000; foe(n+1)=7.311619e+000; krok(n+1)=4.352152e-003; ng(n+1)=5.182600e+002;
n=40; farx(n+1)=2.481062e+000; foe(n+1)=6.562491e+000; krok(n+1)=1.633292e-002; ng(n+1)=1.702629e+002;
n=41; farx(n+1)=2.434073e+000; foe(n+1)=6.374726e+000; krok(n+1)=2.252591e-003; ng(n+1)=4.327414e+002;
n=42; farx(n+1)=2.330847e+000; foe(n+1)=6.088690e+000; krok(n+1)=9.576149e-003; ng(n+1)=3.088283e+002;
n=43; farx(n+1)=2.058581e+000; foe(n+1)=5.039290e+000; krok(n+1)=9.476825e-003; ng(n+1)=5.244232e+002;
n=44; farx(n+1)=1.935676e+000; foe(n+1)=4.453211e+000; krok(n+1)=1.786211e-003; ng(n+1)=4.583249e+002;
n=45; farx(n+1)=1.901657e+000; foe(n+1)=4.227199e+000; krok(n+1)=8.751130e-003; ng(n+1)=4.137355e+002;
n=46; farx(n+1)=1.901130e+000; foe(n+1)=4.115026e+000; krok(n+1)=8.426649e-003; ng(n+1)=9.420208e+001;
n=47; farx(n+1)=1.917309e+000; foe(n+1)=4.037592e+000; krok(n+1)=3.174920e-003; ng(n+1)=3.218982e+002;
n=48; farx(n+1)=1.952471e+000; foe(n+1)=3.813197e+000; krok(n+1)=2.173419e-002; ng(n+1)=3.267857e+002;
n=49; farx(n+1)=1.891756e+000; foe(n+1)=3.632672e+000; krok(n+1)=2.399905e-002; ng(n+1)=3.132121e+002;
n=50; farx(n+1)=1.889888e+000; foe(n+1)=3.470145e+000; krok(n+1)=1.046652e-002; ng(n+1)=2.492458e+002;
%odnowa zmiennej metryki
n=51; farx(n+1)=1.888088e+000; foe(n+1)=3.454580e+000; krok(n+1)=3.932457e-006; ng(n+1)=2.815964e+002;
n=52; farx(n+1)=1.888207e+000; foe(n+1)=3.449849e+000; krok(n+1)=8.423638e-006; ng(n+1)=9.946209e+001;
n=53; farx(n+1)=1.881999e+000; foe(n+1)=3.432364e+000; krok(n+1)=6.655052e-005; ng(n+1)=6.063532e+001;
n=54; farx(n+1)=1.883471e+000; foe(n+1)=3.421385e+000; krok(n+1)=6.836820e-005; ng(n+1)=6.298874e+001;
n=55; farx(n+1)=1.902439e+000; foe(n+1)=3.332730e+000; krok(n+1)=1.689356e-003; ng(n+1)=3.467902e+001;
n=56; farx(n+1)=1.896440e+000; foe(n+1)=3.235613e+000; krok(n+1)=2.914778e-003; ng(n+1)=3.543124e+001;
n=57; farx(n+1)=1.880544e+000; foe(n+1)=3.113437e+000; krok(n+1)=4.669112e-003; ng(n+1)=2.842212e+001;
n=58; farx(n+1)=1.825311e+000; foe(n+1)=3.021625e+000; krok(n+1)=3.758503e-003; ng(n+1)=2.349965e+002;
n=59; farx(n+1)=1.704882e+000; foe(n+1)=2.838932e+000; krok(n+1)=9.374654e-003; ng(n+1)=6.809747e+002;
n=60; farx(n+1)=1.645248e+000; foe(n+1)=2.654641e+000; krok(n+1)=7.632150e-003; ng(n+1)=6.477497e+002;
n=61; farx(n+1)=1.566912e+000; foe(n+1)=2.500139e+000; krok(n+1)=4.667933e-003; ng(n+1)=5.238182e+002;
n=62; farx(n+1)=1.518625e+000; foe(n+1)=2.369724e+000; krok(n+1)=5.999763e-003; ng(n+1)=4.325114e+002;
n=63; farx(n+1)=1.480660e+000; foe(n+1)=2.270349e+000; krok(n+1)=1.308616e-002; ng(n+1)=9.104832e+001;
n=64; farx(n+1)=1.468177e+000; foe(n+1)=2.174196e+000; krok(n+1)=1.750226e-002; ng(n+1)=2.701969e+002;
n=65; farx(n+1)=1.469293e+000; foe(n+1)=2.092692e+000; krok(n+1)=1.684825e-002; ng(n+1)=3.163904e+002;
n=66; farx(n+1)=1.453534e+000; foe(n+1)=2.029322e+000; krok(n+1)=1.178924e-002; ng(n+1)=2.621067e+002;
n=67; farx(n+1)=1.439315e+000; foe(n+1)=1.980617e+000; krok(n+1)=1.303276e-002; ng(n+1)=2.209770e+002;
n=68; farx(n+1)=1.320113e+000; foe(n+1)=1.821976e+000; krok(n+1)=5.285294e-002; ng(n+1)=3.021345e+002;
n=69; farx(n+1)=1.292405e+000; foe(n+1)=1.795267e+000; krok(n+1)=7.032104e-003; ng(n+1)=1.657100e+002;
n=70; farx(n+1)=1.248745e+000; foe(n+1)=1.739358e+000; krok(n+1)=2.118041e-002; ng(n+1)=2.825468e+002;
n=71; farx(n+1)=1.184710e+000; foe(n+1)=1.635507e+000; krok(n+1)=3.582758e-002; ng(n+1)=2.232100e+002;
n=72; farx(n+1)=1.174657e+000; foe(n+1)=1.497046e+000; krok(n+1)=4.973429e-002; ng(n+1)=4.306359e+002;
n=73; farx(n+1)=1.174180e+000; foe(n+1)=1.425380e+000; krok(n+1)=1.911063e-002; ng(n+1)=6.525852e+002;
n=74; farx(n+1)=1.196261e+000; foe(n+1)=1.377098e+000; krok(n+1)=4.134280e-002; ng(n+1)=1.509317e+002;
n=75; farx(n+1)=1.212588e+000; foe(n+1)=1.343087e+000; krok(n+1)=2.165649e-002; ng(n+1)=1.848910e+002;
%odnowa zmiennej metryki
n=76; farx(n+1)=1.212631e+000; foe(n+1)=1.339987e+000; krok(n+1)=2.219980e-006; ng(n+1)=1.585628e+002;
n=77; farx(n+1)=1.213365e+000; foe(n+1)=1.332104e+000; krok(n+1)=8.932063e-006; ng(n+1)=1.173150e+002;
n=78; farx(n+1)=1.213332e+000; foe(n+1)=1.331641e+000; krok(n+1)=5.667521e-006; ng(n+1)=3.925741e+001;
n=79; farx(n+1)=1.212935e+000; foe(n+1)=1.330074e+000; krok(n+1)=6.537935e-005; ng(n+1)=2.466210e+001;
n=80; farx(n+1)=1.212734e+000; foe(n+1)=1.323289e+000; krok(n+1)=8.713055e-004; ng(n+1)=1.429476e+001;
n=81; farx(n+1)=1.211147e+000; foe(n+1)=1.319125e+000; krok(n+1)=8.786586e-004; ng(n+1)=1.300551e+001;
n=82; farx(n+1)=1.202033e+000; foe(n+1)=1.288870e+000; krok(n+1)=5.627734e-003; ng(n+1)=1.574703e+001;
n=83; farx(n+1)=1.201645e+000; foe(n+1)=1.262906e+000; krok(n+1)=3.790265e-003; ng(n+1)=1.302022e+002;
n=84; farx(n+1)=1.200597e+000; foe(n+1)=1.254316e+000; krok(n+1)=2.023016e-003; ng(n+1)=3.590483e+002;
n=85; farx(n+1)=1.197117e+000; foe(n+1)=1.217174e+000; krok(n+1)=2.502768e-002; ng(n+1)=4.535683e+002;
n=86; farx(n+1)=1.196130e+000; foe(n+1)=1.204098e+000; krok(n+1)=6.099924e-003; ng(n+1)=1.495943e+002;
n=87; farx(n+1)=1.194467e+000; foe(n+1)=1.200863e+000; krok(n+1)=3.146871e-003; ng(n+1)=7.987183e+001;
n=88; farx(n+1)=1.197578e+000; foe(n+1)=1.186606e+000; krok(n+1)=4.669156e-002; ng(n+1)=1.189207e+002;
n=89; farx(n+1)=1.212038e+000; foe(n+1)=1.169041e+000; krok(n+1)=2.083339e-002; ng(n+1)=1.515448e+002;
n=90; farx(n+1)=1.234891e+000; foe(n+1)=1.144578e+000; krok(n+1)=1.779884e-002; ng(n+1)=2.050961e+002;
n=91; farx(n+1)=1.240099e+000; foe(n+1)=1.131009e+000; krok(n+1)=2.419175e-002; ng(n+1)=5.452951e+001;
n=92; farx(n+1)=1.248564e+000; foe(n+1)=1.115758e+000; krok(n+1)=2.000182e-002; ng(n+1)=2.377097e+002;
n=93; farx(n+1)=1.262314e+000; foe(n+1)=1.091373e+000; krok(n+1)=3.137471e-003; ng(n+1)=5.577894e+002;
n=94; farx(n+1)=1.271743e+000; foe(n+1)=1.083466e+000; krok(n+1)=1.082825e-002; ng(n+1)=2.349806e+002;
n=95; farx(n+1)=1.311842e+000; foe(n+1)=1.056925e+000; krok(n+1)=6.266827e-002; ng(n+1)=2.880891e+002;
n=96; farx(n+1)=1.333166e+000; foe(n+1)=1.041720e+000; krok(n+1)=1.647425e-002; ng(n+1)=8.102165e+001;
n=97; farx(n+1)=1.362002e+000; foe(n+1)=1.019241e+000; krok(n+1)=2.024365e-002; ng(n+1)=3.057890e+002;
n=98; farx(n+1)=1.409213e+000; foe(n+1)=9.804217e-001; krok(n+1)=3.497807e-002; ng(n+1)=3.133965e+002;
n=99; farx(n+1)=1.433925e+000; foe(n+1)=9.622125e-001; krok(n+1)=2.243330e-002; ng(n+1)=2.464654e+002;
n=100; farx(n+1)=1.452703e+000; foe(n+1)=9.432879e-001; krok(n+1)=3.222183e-002; ng(n+1)=4.120336e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
