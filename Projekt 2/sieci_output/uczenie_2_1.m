%uczenie predyktora oe
clear all;
n=0; farx(n+1)=4.079877e+003; foe(n+1)=4.063164e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=3.009546e+003; foe(n+1)=3.024111e+003; krok(n+1)=4.927090e-004; ng(n+1)=2.187791e+003;
n=2; farx(n+1)=1.079957e+003; foe(n+1)=1.085488e+003; krok(n+1)=8.103099e-003; ng(n+1)=4.753956e+002;
n=3; farx(n+1)=1.115356e+003; foe(n+1)=1.031011e+003; krok(n+1)=1.290553e-005; ng(n+1)=6.513564e+003;
n=4; farx(n+1)=2.160742e+003; foe(n+1)=7.487087e+002; krok(n+1)=6.126315e-004; ng(n+1)=7.614393e+003;
n=5; farx(n+1)=2.054879e+003; foe(n+1)=6.807189e+002; krok(n+1)=2.660052e-003; ng(n+1)=1.993658e+003;
n=6; farx(n+1)=1.798914e+003; foe(n+1)=6.608663e+002; krok(n+1)=5.557598e-003; ng(n+1)=2.304794e+003;
n=7; farx(n+1)=1.254140e+003; foe(n+1)=6.215501e+002; krok(n+1)=1.146661e-003; ng(n+1)=2.321653e+003;
n=8; farx(n+1)=9.733632e+002; foe(n+1)=6.046388e+002; krok(n+1)=3.146663e-005; ng(n+1)=5.380411e+003;
n=9; farx(n+1)=7.746000e+002; foe(n+1)=5.852029e+002; krok(n+1)=2.608382e-004; ng(n+1)=1.122468e+004;
n=10; farx(n+1)=7.921621e+002; foe(n+1)=4.529200e+002; krok(n+1)=2.067140e-002; ng(n+1)=1.402376e+004;
n=11; farx(n+1)=9.129800e+002; foe(n+1)=4.496582e+002; krok(n+1)=9.206336e-005; ng(n+1)=4.957646e+003;
n=12; farx(n+1)=1.000151e+003; foe(n+1)=4.455963e+002; krok(n+1)=2.855545e-003; ng(n+1)=3.366203e+003;
n=13; farx(n+1)=9.968694e+002; foe(n+1)=4.358373e+002; krok(n+1)=1.890204e-001; ng(n+1)=3.412163e+003;
n=14; farx(n+1)=8.036691e+002; foe(n+1)=4.171939e+002; krok(n+1)=1.101559e-001; ng(n+1)=2.479342e+003;
n=15; farx(n+1)=7.030020e+002; foe(n+1)=4.027465e+002; krok(n+1)=9.464845e-002; ng(n+1)=5.011943e+003;
n=16; farx(n+1)=5.946200e+002; foe(n+1)=3.798169e+002; krok(n+1)=3.287969e-001; ng(n+1)=2.778030e+003;
n=17; farx(n+1)=4.879482e+002; foe(n+1)=3.463250e+002; krok(n+1)=6.511688e-001; ng(n+1)=1.593501e+003;
n=18; farx(n+1)=3.469344e+002; foe(n+1)=3.244632e+002; krok(n+1)=1.236406e+000; ng(n+1)=4.938671e+002;
n=19; farx(n+1)=2.844915e+002; foe(n+1)=3.087523e+002; krok(n+1)=3.854790e-001; ng(n+1)=6.007356e+002;
n=20; farx(n+1)=1.944954e+002; foe(n+1)=2.865422e+002; krok(n+1)=9.372047e-001; ng(n+1)=4.359211e+002;
n=21; farx(n+1)=1.702766e+002; foe(n+1)=2.749598e+002; krok(n+1)=7.545111e-001; ng(n+1)=5.886852e+002;
n=22; farx(n+1)=1.016933e+002; foe(n+1)=2.396754e+002; krok(n+1)=1.139125e+000; ng(n+1)=9.445031e+002;
n=23; farx(n+1)=8.131208e+001; foe(n+1)=2.268428e+002; krok(n+1)=5.657309e-001; ng(n+1)=8.669054e+002;
n=24; farx(n+1)=5.712124e+001; foe(n+1)=1.951379e+002; krok(n+1)=1.221144e-001; ng(n+1)=2.265342e+003;
n=25; farx(n+1)=5.699508e+001; foe(n+1)=1.703460e+002; krok(n+1)=1.460546e-001; ng(n+1)=3.172203e+003;
%odnowa zmiennej metryki
n=26; farx(n+1)=5.596555e+001; foe(n+1)=1.687729e+002; krok(n+1)=1.168963e-006; ng(n+1)=3.438380e+003;
n=27; farx(n+1)=2.518294e+001; foe(n+1)=1.411333e+002; krok(n+1)=9.926586e-005; ng(n+1)=1.551342e+003;
n=28; farx(n+1)=1.666850e+001; foe(n+1)=1.145503e+002; krok(n+1)=1.347782e-004; ng(n+1)=2.216419e+003;
n=29; farx(n+1)=1.466156e+001; foe(n+1)=1.017055e+002; krok(n+1)=8.335919e-004; ng(n+1)=4.618543e+002;
n=30; farx(n+1)=1.482803e+001; foe(n+1)=9.370125e+001; krok(n+1)=1.212360e-003; ng(n+1)=1.136415e+003;
n=31; farx(n+1)=1.251832e+001; foe(n+1)=7.974340e+001; krok(n+1)=7.663457e-004; ng(n+1)=1.810866e+003;
n=32; farx(n+1)=1.116166e+001; foe(n+1)=7.140688e+001; krok(n+1)=2.914778e-003; ng(n+1)=9.933639e+002;
n=33; farx(n+1)=1.027927e+001; foe(n+1)=6.623074e+001; krok(n+1)=1.317301e-003; ng(n+1)=1.167514e+003;
n=34; farx(n+1)=1.031893e+001; foe(n+1)=6.551627e+001; krok(n+1)=4.179199e-004; ng(n+1)=1.317763e+003;
n=35; farx(n+1)=1.053987e+001; foe(n+1)=6.501507e+001; krok(n+1)=6.192369e-003; ng(n+1)=1.290636e+003;
n=36; farx(n+1)=1.148886e+001; foe(n+1)=6.142237e+001; krok(n+1)=1.321526e-002; ng(n+1)=1.751909e+003;
n=37; farx(n+1)=1.061314e+001; foe(n+1)=5.420313e+001; krok(n+1)=1.150668e-001; ng(n+1)=1.529703e+003;
n=38; farx(n+1)=6.917154e+000; foe(n+1)=5.016349e+001; krok(n+1)=8.388517e-002; ng(n+1)=1.852449e+003;
n=39; farx(n+1)=6.720892e+000; foe(n+1)=4.634754e+001; krok(n+1)=3.346481e-001; ng(n+1)=1.182211e+003;
n=40; farx(n+1)=5.782411e+000; foe(n+1)=4.487510e+001; krok(n+1)=5.312625e-001; ng(n+1)=2.356962e+002;
n=41; farx(n+1)=5.412825e+000; foe(n+1)=4.434257e+001; krok(n+1)=2.465387e-001; ng(n+1)=3.263442e+002;
n=42; farx(n+1)=4.763386e+000; foe(n+1)=4.315426e+001; krok(n+1)=4.110512e-001; ng(n+1)=5.908244e+002;
n=43; farx(n+1)=5.024101e+000; foe(n+1)=4.125642e+001; krok(n+1)=8.922169e-001; ng(n+1)=6.651712e+002;
n=44; farx(n+1)=4.943820e+000; foe(n+1)=4.016785e+001; krok(n+1)=8.707243e-001; ng(n+1)=1.945341e+002;
n=45; farx(n+1)=3.678638e+000; foe(n+1)=3.864519e+001; krok(n+1)=1.322970e+000; ng(n+1)=8.531536e+002;
n=46; farx(n+1)=3.403278e+000; foe(n+1)=3.754713e+001; krok(n+1)=5.202472e-001; ng(n+1)=1.373778e+003;
n=47; farx(n+1)=3.206100e+000; foe(n+1)=3.622046e+001; krok(n+1)=6.871474e-001; ng(n+1)=7.912758e+002;
n=48; farx(n+1)=3.070248e+000; foe(n+1)=3.433350e+001; krok(n+1)=5.108389e-001; ng(n+1)=6.271402e+002;
n=49; farx(n+1)=2.843986e+000; foe(n+1)=3.303800e+001; krok(n+1)=1.778431e-001; ng(n+1)=7.964010e+002;
n=50; farx(n+1)=2.653632e+000; foe(n+1)=3.011737e+001; krok(n+1)=7.021280e-001; ng(n+1)=1.489246e+003;
%odnowa zmiennej metryki
n=51; farx(n+1)=2.699767e+000; foe(n+1)=2.910065e+001; krok(n+1)=8.718915e-007; ng(n+1)=2.841015e+003;
n=52; farx(n+1)=2.629203e+000; foe(n+1)=2.877645e+001; krok(n+1)=3.044565e-006; ng(n+1)=9.233726e+002;
n=53; farx(n+1)=2.596352e+000; foe(n+1)=2.857789e+001; krok(n+1)=3.282104e-005; ng(n+1)=2.401413e+002;
n=54; farx(n+1)=2.683358e+000; foe(n+1)=2.771049e+001; krok(n+1)=5.353361e-004; ng(n+1)=2.783722e+002;
n=55; farx(n+1)=2.774215e+000; foe(n+1)=2.650912e+001; krok(n+1)=1.505777e-003; ng(n+1)=2.691069e+002;
n=56; farx(n+1)=2.881716e+000; foe(n+1)=2.592828e+001; krok(n+1)=6.946998e-004; ng(n+1)=2.235220e+002;
n=57; farx(n+1)=2.748023e+000; foe(n+1)=2.500207e+001; krok(n+1)=1.934289e-003; ng(n+1)=8.111817e+002;
n=58; farx(n+1)=2.744332e+000; foe(n+1)=2.360028e+001; krok(n+1)=1.758026e-003; ng(n+1)=2.379164e+003;
n=59; farx(n+1)=2.605432e+000; foe(n+1)=2.317748e+001; krok(n+1)=6.543079e-003; ng(n+1)=5.717871e+002;
n=60; farx(n+1)=2.672641e+000; foe(n+1)=2.227804e+001; krok(n+1)=3.111701e-002; ng(n+1)=1.309216e+003;
n=61; farx(n+1)=2.565248e+000; foe(n+1)=2.199350e+001; krok(n+1)=3.638604e-002; ng(n+1)=1.898372e+003;
n=62; farx(n+1)=2.240679e+000; foe(n+1)=2.110342e+001; krok(n+1)=2.331518e-002; ng(n+1)=8.469321e+002;
n=63; farx(n+1)=2.473976e+000; foe(n+1)=1.984974e+001; krok(n+1)=5.732413e-001; ng(n+1)=1.683079e+003;
n=64; farx(n+1)=1.978066e+000; foe(n+1)=1.768520e+001; krok(n+1)=2.183343e-001; ng(n+1)=1.928277e+003;
n=65; farx(n+1)=1.955187e+000; foe(n+1)=1.578683e+001; krok(n+1)=3.648074e-001; ng(n+1)=1.094941e+003;
n=66; farx(n+1)=2.022288e+000; foe(n+1)=1.429454e+001; krok(n+1)=5.520515e-001; ng(n+1)=1.895391e+003;
n=67; farx(n+1)=2.081076e+000; foe(n+1)=1.392937e+001; krok(n+1)=2.073757e-001; ng(n+1)=2.410997e+002;
n=68; farx(n+1)=2.472530e+000; foe(n+1)=1.334971e+001; krok(n+1)=2.272257e-001; ng(n+1)=8.093512e+002;
n=69; farx(n+1)=2.476376e+000; foe(n+1)=1.298460e+001; krok(n+1)=9.639418e-001; ng(n+1)=7.127417e+002;
n=70; farx(n+1)=2.010213e+000; foe(n+1)=1.203637e+001; krok(n+1)=1.814761e+000; ng(n+1)=6.907016e+002;
n=71; farx(n+1)=2.115553e+000; foe(n+1)=1.154089e+001; krok(n+1)=5.680678e-001; ng(n+1)=1.013915e+003;
n=72; farx(n+1)=2.144623e+000; foe(n+1)=1.118355e+001; krok(n+1)=9.110982e-001; ng(n+1)=9.641001e+002;
n=73; farx(n+1)=1.911476e+000; foe(n+1)=1.086496e+001; krok(n+1)=1.093437e+000; ng(n+1)=2.707489e+002;
n=74; farx(n+1)=1.770767e+000; foe(n+1)=1.065161e+001; krok(n+1)=9.429061e-001; ng(n+1)=3.654810e+002;
n=75; farx(n+1)=1.807082e+000; foe(n+1)=1.057856e+001; krok(n+1)=1.007999e+000; ng(n+1)=1.142402e+002;
%odnowa zmiennej metryki
n=76; farx(n+1)=1.807090e+000; foe(n+1)=1.056487e+001; krok(n+1)=1.544062e-006; ng(n+1)=2.788874e+002;
n=77; farx(n+1)=1.805694e+000; foe(n+1)=1.055915e+001; krok(n+1)=1.307974e-006; ng(n+1)=1.701236e+002;
n=78; farx(n+1)=1.795824e+000; foe(n+1)=1.054974e+001; krok(n+1)=2.230894e-005; ng(n+1)=6.850250e+001;
n=79; farx(n+1)=1.790496e+000; foe(n+1)=1.038383e+001; krok(n+1)=4.532388e-004; ng(n+1)=4.766747e+001;
n=80; farx(n+1)=1.792542e+000; foe(n+1)=1.025124e+001; krok(n+1)=8.145737e-004; ng(n+1)=2.229436e+002;
n=81; farx(n+1)=1.878767e+000; foe(n+1)=1.011115e+001; krok(n+1)=1.791247e-003; ng(n+1)=3.729809e+002;
n=82; farx(n+1)=1.913462e+000; foe(n+1)=1.000583e+001; krok(n+1)=1.238677e-002; ng(n+1)=9.398640e+002;
n=83; farx(n+1)=1.989627e+000; foe(n+1)=9.925482e+000; krok(n+1)=1.548285e-002; ng(n+1)=1.275279e+003;
n=84; farx(n+1)=1.947860e+000; foe(n+1)=9.902761e+000; krok(n+1)=3.707198e-002; ng(n+1)=8.126835e+002;
n=85; farx(n+1)=2.262088e+000; foe(n+1)=9.637056e+000; krok(n+1)=2.729349e-001; ng(n+1)=7.974655e+002;
n=86; farx(n+1)=2.188178e+000; foe(n+1)=9.549834e+000; krok(n+1)=1.000091e-002; ng(n+1)=4.772624e+002;
n=87; farx(n+1)=2.117588e+000; foe(n+1)=9.439922e+000; krok(n+1)=1.686145e-001; ng(n+1)=6.530858e+002;
n=88; farx(n+1)=2.021453e+000; foe(n+1)=9.071107e+000; krok(n+1)=1.567018e-001; ng(n+1)=4.993221e+002;
n=89; farx(n+1)=1.993241e+000; foe(n+1)=8.628043e+000; krok(n+1)=7.382907e-001; ng(n+1)=2.660114e+002;
n=90; farx(n+1)=2.001911e+000; foe(n+1)=8.162794e+000; krok(n+1)=1.190847e-001; ng(n+1)=5.843705e+002;
n=91; farx(n+1)=1.968526e+000; foe(n+1)=7.912749e+000; krok(n+1)=9.963479e-002; ng(n+1)=1.366496e+003;
n=92; farx(n+1)=1.948651e+000; foe(n+1)=7.678538e+000; krok(n+1)=1.139041e-001; ng(n+1)=8.554388e+002;
n=93; farx(n+1)=2.032454e+000; foe(n+1)=6.915473e+000; krok(n+1)=5.692710e-001; ng(n+1)=9.320393e+002;
n=94; farx(n+1)=2.106611e+000; foe(n+1)=6.030939e+000; krok(n+1)=7.536472e-001; ng(n+1)=8.069952e+001;
n=95; farx(n+1)=2.223180e+000; foe(n+1)=5.594102e+000; krok(n+1)=1.668649e-001; ng(n+1)=5.862742e+002;
n=96; farx(n+1)=2.341162e+000; foe(n+1)=5.336423e+000; krok(n+1)=2.710777e-001; ng(n+1)=7.064882e+002;
n=97; farx(n+1)=2.530285e+000; foe(n+1)=5.129183e+000; krok(n+1)=2.921091e-001; ng(n+1)=5.059462e+002;
n=98; farx(n+1)=2.536546e+000; foe(n+1)=5.058637e+000; krok(n+1)=4.114269e-001; ng(n+1)=3.439487e+002;
n=99; farx(n+1)=2.531839e+000; foe(n+1)=4.985570e+000; krok(n+1)=3.106282e-001; ng(n+1)=5.349812e+002;
n=100; farx(n+1)=2.593691e+000; foe(n+1)=4.968909e+000; krok(n+1)=9.073805e-001; ng(n+1)=7.080738e+001;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
