%uczenie predyktora oe
clear all;
n=0; farx(n+1)=4.865414e+003; foe(n+1)=4.908917e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=3.816804e+003; foe(n+1)=3.905437e+003; krok(n+1)=3.355212e-004; ng(n+1)=2.734022e+003;
n=2; farx(n+1)=6.627363e+002; foe(n+1)=8.234164e+002; krok(n+1)=7.981858e-003; ng(n+1)=6.499091e+002;
n=3; farx(n+1)=5.819327e+002; foe(n+1)=7.676512e+002; krok(n+1)=1.089132e-004; ng(n+1)=2.100071e+003;
n=4; farx(n+1)=6.916515e+002; foe(n+1)=5.519262e+002; krok(n+1)=4.616173e-004; ng(n+1)=2.917121e+003;
n=5; farx(n+1)=6.342448e+002; foe(n+1)=4.884660e+002; krok(n+1)=1.955288e-004; ng(n+1)=2.167516e+003;
n=6; farx(n+1)=4.126624e+002; foe(n+1)=4.507555e+002; krok(n+1)=5.208348e-003; ng(n+1)=1.319121e+003;
n=7; farx(n+1)=4.871230e+002; foe(n+1)=4.406358e+002; krok(n+1)=2.269758e-003; ng(n+1)=1.148234e+003;
n=8; farx(n+1)=5.132528e+002; foe(n+1)=4.326543e+002; krok(n+1)=6.669234e-003; ng(n+1)=8.278606e+002;
n=9; farx(n+1)=4.625970e+002; foe(n+1)=4.251006e+002; krok(n+1)=7.899173e-003; ng(n+1)=7.886499e+002;
n=10; farx(n+1)=4.524927e+002; foe(n+1)=4.199218e+002; krok(n+1)=3.739948e-003; ng(n+1)=4.848427e+002;
n=11; farx(n+1)=4.471388e+002; foe(n+1)=4.126368e+002; krok(n+1)=1.563831e-003; ng(n+1)=7.466080e+002;
n=12; farx(n+1)=4.432630e+002; foe(n+1)=4.093689e+002; krok(n+1)=6.407656e-002; ng(n+1)=7.094346e+002;
n=13; farx(n+1)=3.994525e+002; foe(n+1)=4.042202e+002; krok(n+1)=7.322178e-002; ng(n+1)=7.525742e+002;
n=14; farx(n+1)=1.849371e+002; foe(n+1)=3.438714e+002; krok(n+1)=4.411592e-001; ng(n+1)=1.267662e+003;
n=15; farx(n+1)=1.556730e+002; foe(n+1)=3.326971e+002; krok(n+1)=1.261335e-001; ng(n+1)=1.098904e+003;
n=16; farx(n+1)=1.533817e+002; foe(n+1)=3.164475e+002; krok(n+1)=4.584092e-001; ng(n+1)=1.507607e+003;
n=17; farx(n+1)=1.150613e+002; foe(n+1)=2.798140e+002; krok(n+1)=1.044009e-001; ng(n+1)=1.569339e+003;
n=18; farx(n+1)=7.170416e+001; foe(n+1)=2.557247e+002; krok(n+1)=3.261226e-001; ng(n+1)=5.758881e+002;
n=19; farx(n+1)=3.821691e+001; foe(n+1)=2.118949e+002; krok(n+1)=2.408726e-001; ng(n+1)=1.235445e+003;
n=20; farx(n+1)=3.603792e+001; foe(n+1)=1.997561e+002; krok(n+1)=6.345766e-002; ng(n+1)=2.704309e+003;
n=21; farx(n+1)=3.341236e+001; foe(n+1)=1.536154e+002; krok(n+1)=2.522670e-001; ng(n+1)=4.163758e+003;
n=22; farx(n+1)=3.776263e+001; foe(n+1)=1.201304e+002; krok(n+1)=1.827549e-001; ng(n+1)=5.172801e+003;
n=23; farx(n+1)=3.428918e+001; foe(n+1)=1.094999e+002; krok(n+1)=2.408726e-001; ng(n+1)=9.704655e+002;
n=24; farx(n+1)=2.872326e+001; foe(n+1)=1.014847e+002; krok(n+1)=4.686024e-001; ng(n+1)=1.873706e+003;
n=25; farx(n+1)=1.935586e+001; foe(n+1)=8.351632e+001; krok(n+1)=1.083912e+000; ng(n+1)=6.450282e+002;
%odnowa zmiennej metryki
n=26; farx(n+1)=1.908523e+001; foe(n+1)=8.190070e+001; krok(n+1)=6.210948e-006; ng(n+1)=1.525073e+003;
n=27; farx(n+1)=1.906884e+001; foe(n+1)=8.183874e+001; krok(n+1)=4.441655e-006; ng(n+1)=3.333409e+002;
n=28; farx(n+1)=1.918386e+001; foe(n+1)=8.149079e+001; krok(n+1)=1.412779e-004; ng(n+1)=1.324748e+002;
n=29; farx(n+1)=1.768991e+001; foe(n+1)=7.859714e+001; krok(n+1)=6.371543e-004; ng(n+1)=2.102713e+002;
n=30; farx(n+1)=1.577351e+001; foe(n+1)=7.113197e+001; krok(n+1)=1.290694e-003; ng(n+1)=3.116275e+002;
n=31; farx(n+1)=1.520203e+001; foe(n+1)=7.034878e+001; krok(n+1)=7.394073e-004; ng(n+1)=8.482245e+002;
n=32; farx(n+1)=1.483249e+001; foe(n+1)=6.963765e+001; krok(n+1)=4.258262e-003; ng(n+1)=1.279387e+003;
n=33; farx(n+1)=1.449102e+001; foe(n+1)=6.896901e+001; krok(n+1)=5.038654e-003; ng(n+1)=1.335019e+003;
n=34; farx(n+1)=1.352309e+001; foe(n+1)=6.449368e+001; krok(n+1)=3.118548e-002; ng(n+1)=1.682827e+003;
n=35; farx(n+1)=1.046355e+001; foe(n+1)=6.077543e+001; krok(n+1)=1.428969e-002; ng(n+1)=1.110181e+003;
n=36; farx(n+1)=8.965994e+000; foe(n+1)=5.961829e+001; krok(n+1)=5.294040e-003; ng(n+1)=1.397778e+003;
n=37; farx(n+1)=8.956243e+000; foe(n+1)=5.781073e+001; krok(n+1)=1.507961e-001; ng(n+1)=9.298915e+002;
n=38; farx(n+1)=8.043815e+000; foe(n+1)=5.716165e+001; krok(n+1)=4.879939e-002; ng(n+1)=8.949809e+002;
n=39; farx(n+1)=8.827797e+000; foe(n+1)=5.332128e+001; krok(n+1)=6.930078e-001; ng(n+1)=1.018688e+003;
n=40; farx(n+1)=6.616646e+000; foe(n+1)=5.074270e+001; krok(n+1)=1.098329e+000; ng(n+1)=9.313404e+002;
n=41; farx(n+1)=5.527103e+000; foe(n+1)=4.807617e+001; krok(n+1)=7.448368e-001; ng(n+1)=7.561501e+002;
n=42; farx(n+1)=5.605107e+000; foe(n+1)=4.670052e+001; krok(n+1)=4.096582e-001; ng(n+1)=1.279243e+003;
n=43; farx(n+1)=6.065184e+000; foe(n+1)=4.561259e+001; krok(n+1)=3.636509e-001; ng(n+1)=4.851505e+002;
n=44; farx(n+1)=6.469926e+000; foe(n+1)=4.433648e+001; krok(n+1)=1.981558e-001; ng(n+1)=9.761400e+002;
n=45; farx(n+1)=5.924430e+000; foe(n+1)=4.268884e+001; krok(n+1)=5.968867e-001; ng(n+1)=1.148194e+003;
n=46; farx(n+1)=4.346652e+000; foe(n+1)=4.112727e+001; krok(n+1)=1.157790e+000; ng(n+1)=9.268035e+002;
n=47; farx(n+1)=4.156334e+000; foe(n+1)=4.024178e+001; krok(n+1)=3.730776e-001; ng(n+1)=8.713408e+002;
n=48; farx(n+1)=3.664049e+000; foe(n+1)=3.890065e+001; krok(n+1)=4.300038e-001; ng(n+1)=2.528596e+002;
n=49; farx(n+1)=3.049922e+000; foe(n+1)=3.818824e+001; krok(n+1)=6.888628e-001; ng(n+1)=7.191326e+002;
n=50; farx(n+1)=2.787304e+000; foe(n+1)=3.790657e+001; krok(n+1)=2.785672e-001; ng(n+1)=7.419760e+002;
%odnowa zmiennej metryki
n=51; farx(n+1)=2.767380e+000; foe(n+1)=3.784220e+001; krok(n+1)=2.079704e-006; ng(n+1)=5.626177e+002;
n=52; farx(n+1)=2.764467e+000; foe(n+1)=3.782274e+001; krok(n+1)=2.909532e-006; ng(n+1)=2.586193e+002;
n=53; farx(n+1)=2.823907e+000; foe(n+1)=3.764689e+001; krok(n+1)=3.955346e-005; ng(n+1)=1.989521e+002;
n=54; farx(n+1)=2.814662e+000; foe(n+1)=3.757550e+001; krok(n+1)=2.170937e-005; ng(n+1)=1.518540e+002;
n=55; farx(n+1)=2.706575e+000; foe(n+1)=3.687697e+001; krok(n+1)=7.459822e-004; ng(n+1)=9.855438e+001;
n=56; farx(n+1)=2.623251e+000; foe(n+1)=3.663986e+001; krok(n+1)=8.259539e-004; ng(n+1)=1.618158e+002;
n=57; farx(n+1)=2.272389e+000; foe(n+1)=3.638892e+001; krok(n+1)=1.046652e-002; ng(n+1)=3.005186e+002;
n=58; farx(n+1)=2.028107e+000; foe(n+1)=3.618608e+001; krok(n+1)=2.223039e-002; ng(n+1)=5.847430e+002;
n=59; farx(n+1)=1.951667e+000; foe(n+1)=3.608644e+001; krok(n+1)=4.573216e-003; ng(n+1)=7.664354e+002;
n=60; farx(n+1)=1.822118e+000; foe(n+1)=3.574614e+001; krok(n+1)=3.832769e-002; ng(n+1)=7.348656e+002;
n=61; farx(n+1)=1.825200e+000; foe(n+1)=3.556919e+001; krok(n+1)=6.947618e-003; ng(n+1)=1.113865e+003;
n=62; farx(n+1)=1.709320e+000; foe(n+1)=3.544320e+001; krok(n+1)=3.637216e-002; ng(n+1)=1.046924e+003;
n=63; farx(n+1)=1.608608e+000; foe(n+1)=3.516121e+001; krok(n+1)=1.961845e-001; ng(n+1)=1.198484e+003;
n=64; farx(n+1)=1.484759e+000; foe(n+1)=3.470285e+001; krok(n+1)=1.619492e-001; ng(n+1)=9.424302e+002;
n=65; farx(n+1)=1.435880e+000; foe(n+1)=3.444941e+001; krok(n+1)=3.780408e-001; ng(n+1)=8.127683e+002;
n=66; farx(n+1)=1.234451e+000; foe(n+1)=3.410108e+001; krok(n+1)=5.551463e-001; ng(n+1)=3.061954e+002;
n=67; farx(n+1)=1.108665e+000; foe(n+1)=3.393696e+001; krok(n+1)=7.927530e-001; ng(n+1)=9.079464e+002;
n=68; farx(n+1)=1.075631e+000; foe(n+1)=3.376041e+001; krok(n+1)=9.528451e-001; ng(n+1)=4.028011e+002;
n=69; farx(n+1)=1.065085e+000; foe(n+1)=3.365685e+001; krok(n+1)=3.276650e-001; ng(n+1)=9.151526e+002;
n=70; farx(n+1)=1.054390e+000; foe(n+1)=3.362045e+001; krok(n+1)=1.951976e-001; ng(n+1)=1.625147e+002;
n=71; farx(n+1)=1.028622e+000; foe(n+1)=3.352043e+001; krok(n+1)=3.493083e-001; ng(n+1)=7.239848e+002;
n=72; farx(n+1)=9.911858e-001; foe(n+1)=3.345501e+001; krok(n+1)=5.949654e-001; ng(n+1)=7.454575e+002;
n=73; farx(n+1)=9.785040e-001; foe(n+1)=3.340804e+001; krok(n+1)=4.363710e-001; ng(n+1)=7.472478e+002;
n=74; farx(n+1)=9.505615e-001; foe(n+1)=3.333785e+001; krok(n+1)=5.525859e-001; ng(n+1)=3.893516e+002;
n=75; farx(n+1)=9.454529e-001; foe(n+1)=3.329475e+001; krok(n+1)=1.634459e-001; ng(n+1)=3.219881e+002;
%odnowa zmiennej metryki
n=76; farx(n+1)=9.453903e-001; foe(n+1)=3.326906e+001; krok(n+1)=4.033308e-007; ng(n+1)=7.084143e+002;
n=77; farx(n+1)=9.453093e-001; foe(n+1)=3.326427e+001; krok(n+1)=3.136099e-007; ng(n+1)=3.797716e+002;
n=78; farx(n+1)=9.443562e-001; foe(n+1)=3.326255e+001; krok(n+1)=6.476813e-006; ng(n+1)=5.139727e+001;
n=79; farx(n+1)=9.446903e-001; foe(n+1)=3.324763e+001; krok(n+1)=4.013634e-005; ng(n+1)=4.642611e+001;
n=80; farx(n+1)=9.437978e-001; foe(n+1)=3.323299e+001; krok(n+1)=1.707914e-005; ng(n+1)=8.473678e+001;
n=81; farx(n+1)=9.500077e-001; foe(n+1)=3.317274e+001; krok(n+1)=2.080994e-003; ng(n+1)=1.895889e+001;
n=82; farx(n+1)=9.704780e-001; foe(n+1)=3.296342e+001; krok(n+1)=2.000848e-003; ng(n+1)=1.175072e+002;
n=83; farx(n+1)=9.660163e-001; foe(n+1)=3.294965e+001; krok(n+1)=1.611746e-003; ng(n+1)=1.302356e+003;
n=84; farx(n+1)=9.562514e-001; foe(n+1)=3.292745e+001; krok(n+1)=1.389524e-002; ng(n+1)=1.410401e+003;
n=85; farx(n+1)=9.541584e-001; foe(n+1)=3.292504e+001; krok(n+1)=5.608324e-003; ng(n+1)=1.485451e+003;
n=86; farx(n+1)=9.678516e-001; foe(n+1)=3.291530e+001; krok(n+1)=1.142218e-002; ng(n+1)=1.567655e+003;
n=87; farx(n+1)=9.733946e-001; foe(n+1)=3.287395e+001; krok(n+1)=6.659180e-002; ng(n+1)=1.588566e+003;
n=88; farx(n+1)=9.234845e-001; foe(n+1)=3.274837e+001; krok(n+1)=5.801457e-002; ng(n+1)=1.772383e+003;
n=89; farx(n+1)=9.202401e-001; foe(n+1)=3.249891e+001; krok(n+1)=1.400181e-001; ng(n+1)=2.396714e+003;
n=90; farx(n+1)=9.164833e-001; foe(n+1)=3.236241e+001; krok(n+1)=4.114269e-001; ng(n+1)=1.822509e+003;
n=91; farx(n+1)=9.045086e-001; foe(n+1)=3.178088e+001; krok(n+1)=1.001603e+000; ng(n+1)=1.230861e+003;
n=92; farx(n+1)=8.998657e-001; foe(n+1)=3.161796e+001; krok(n+1)=1.447238e-001; ng(n+1)=2.527207e+003;
n=93; farx(n+1)=9.424203e-001; foe(n+1)=3.098487e+001; krok(n+1)=1.026286e+000; ng(n+1)=2.429824e+003;
n=94; farx(n+1)=9.626085e-001; foe(n+1)=3.070801e+001; krok(n+1)=1.874735e-001; ng(n+1)=3.829510e+003;
n=95; farx(n+1)=1.005754e+000; foe(n+1)=3.018928e+001; krok(n+1)=1.124683e-001; ng(n+1)=9.310180e+002;
n=96; farx(n+1)=1.019199e+000; foe(n+1)=2.994824e+001; krok(n+1)=1.200783e-001; ng(n+1)=2.377135e+003;
n=97; farx(n+1)=9.982361e-001; foe(n+1)=2.962932e+001; krok(n+1)=2.382113e-001; ng(n+1)=5.511915e+003;
n=98; farx(n+1)=9.938295e-001; foe(n+1)=2.931892e+001; krok(n+1)=2.301315e-001; ng(n+1)=5.331496e+003;
n=99; farx(n+1)=9.981860e-001; foe(n+1)=2.914256e+001; krok(n+1)=2.134155e-001; ng(n+1)=2.996665e+003;
n=100; farx(n+1)=9.947631e-001; foe(n+1)=2.896133e+001; krok(n+1)=2.515310e-001; ng(n+1)=3.886294e+003;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
