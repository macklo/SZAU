%uczenie predyktora oe
clear all;
n=0; farx(n+1)=3.991848e+003; foe(n+1)=3.991756e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=3.039588e+003; foe(n+1)=3.020334e+003; krok(n+1)=5.081655e-004; ng(n+1)=1.933915e+003;
n=2; farx(n+1)=7.568381e+002; foe(n+1)=6.414111e+002; krok(n+1)=1.004449e-002; ng(n+1)=5.208975e+002;
n=3; farx(n+1)=7.417617e+002; foe(n+1)=5.545388e+002; krok(n+1)=1.042068e-004; ng(n+1)=2.534304e+003;
n=4; farx(n+1)=8.285136e+002; foe(n+1)=4.449088e+002; krok(n+1)=1.792149e-003; ng(n+1)=2.393297e+003;
n=5; farx(n+1)=4.964987e+002; foe(n+1)=3.963130e+002; krok(n+1)=3.473809e-003; ng(n+1)=4.518721e+002;
n=6; farx(n+1)=3.744455e+002; foe(n+1)=3.380540e+002; krok(n+1)=6.130766e-003; ng(n+1)=5.523740e+002;
n=7; farx(n+1)=3.646956e+002; foe(n+1)=3.356845e+002; krok(n+1)=2.581388e-003; ng(n+1)=4.626566e+002;
n=8; farx(n+1)=3.293926e+002; foe(n+1)=3.243533e+002; krok(n+1)=1.740861e-002; ng(n+1)=4.753939e+002;
n=9; farx(n+1)=2.954549e+002; foe(n+1)=3.126793e+002; krok(n+1)=3.153338e-002; ng(n+1)=3.365318e+002;
n=10; farx(n+1)=2.939287e+002; foe(n+1)=3.075444e+002; krok(n+1)=8.483440e-003; ng(n+1)=5.096896e+002;
n=11; farx(n+1)=2.975453e+002; foe(n+1)=3.034205e+002; krok(n+1)=1.431809e-001; ng(n+1)=3.167607e+002;
n=12; farx(n+1)=2.876391e+002; foe(n+1)=2.977720e+002; krok(n+1)=9.809225e-002; ng(n+1)=2.512198e+002;
n=13; farx(n+1)=2.811807e+002; foe(n+1)=2.957105e+002; krok(n+1)=2.191235e-002; ng(n+1)=4.847403e+002;
n=14; farx(n+1)=2.282901e+002; foe(n+1)=2.811165e+002; krok(n+1)=1.481341e-001; ng(n+1)=6.883361e+002;
n=15; farx(n+1)=1.355126e+002; foe(n+1)=2.427549e+002; krok(n+1)=3.979978e-002; ng(n+1)=2.270511e+003;
n=16; farx(n+1)=1.327521e+002; foe(n+1)=2.424350e+002; krok(n+1)=4.494757e-004; ng(n+1)=1.015674e+003;
n=17; farx(n+1)=6.861935e+001; foe(n+1)=2.094521e+002; krok(n+1)=2.575123e-001; ng(n+1)=1.844855e+003;
n=18; farx(n+1)=5.595511e+001; foe(n+1)=2.014327e+002; krok(n+1)=1.684825e-002; ng(n+1)=1.276769e+004;
n=19; farx(n+1)=3.313324e+001; foe(n+1)=1.540333e+002; krok(n+1)=1.914311e-001; ng(n+1)=3.075019e+003;
n=20; farx(n+1)=3.681083e+001; foe(n+1)=1.377810e+002; krok(n+1)=2.788178e-002; ng(n+1)=6.539903e+003;
n=21; farx(n+1)=2.233703e+001; foe(n+1)=1.135382e+002; krok(n+1)=5.076613e-001; ng(n+1)=2.416178e+003;
n=22; farx(n+1)=2.127008e+001; foe(n+1)=1.063879e+002; krok(n+1)=5.203615e-001; ng(n+1)=1.023149e+003;
n=23; farx(n+1)=1.912052e+001; foe(n+1)=1.013185e+002; krok(n+1)=1.478545e-001; ng(n+1)=1.851710e+003;
n=24; farx(n+1)=1.590361e+001; foe(n+1)=9.262449e+001; krok(n+1)=3.604099e-001; ng(n+1)=1.803459e+003;
n=25; farx(n+1)=1.599925e+001; foe(n+1)=7.898497e+001; krok(n+1)=8.341234e-001; ng(n+1)=2.146698e+003;
%odnowa zmiennej metryki
n=26; farx(n+1)=1.566434e+001; foe(n+1)=7.760024e+001; krok(n+1)=2.208309e-006; ng(n+1)=2.388426e+003;
n=27; farx(n+1)=1.704880e+001; foe(n+1)=7.312268e+001; krok(n+1)=9.374630e-005; ng(n+1)=6.253441e+002;
n=28; farx(n+1)=1.895981e+001; foe(n+1)=7.122847e+001; krok(n+1)=2.677366e-005; ng(n+1)=8.754474e+002;
n=29; farx(n+1)=1.689042e+001; foe(n+1)=6.487718e+001; krok(n+1)=4.168272e-004; ng(n+1)=7.255698e+002;
n=30; farx(n+1)=1.646357e+001; foe(n+1)=5.576841e+001; krok(n+1)=9.352282e-004; ng(n+1)=3.005631e+003;
n=31; farx(n+1)=1.640385e+001; foe(n+1)=5.396519e+001; krok(n+1)=1.031514e-003; ng(n+1)=5.643914e+003;
n=32; farx(n+1)=1.644403e+001; foe(n+1)=5.363552e+001; krok(n+1)=1.184603e-003; ng(n+1)=4.485413e+003;
n=33; farx(n+1)=1.607293e+001; foe(n+1)=5.322493e+001; krok(n+1)=1.970836e-003; ng(n+1)=4.332222e+003;
n=34; farx(n+1)=1.488271e+001; foe(n+1)=5.097411e+001; krok(n+1)=3.303815e-003; ng(n+1)=3.497347e+003;
n=35; farx(n+1)=1.477427e+001; foe(n+1)=4.875864e+001; krok(n+1)=6.486639e-002; ng(n+1)=2.578860e+003;
n=36; farx(n+1)=1.465796e+001; foe(n+1)=4.743823e+001; krok(n+1)=7.866273e-002; ng(n+1)=1.111523e+003;
n=37; farx(n+1)=1.285678e+001; foe(n+1)=4.234793e+001; krok(n+1)=1.221956e-001; ng(n+1)=2.275264e+003;
n=38; farx(n+1)=1.281980e+001; foe(n+1)=4.062927e+001; krok(n+1)=3.404866e-001; ng(n+1)=1.260748e+003;
n=39; farx(n+1)=1.235701e+001; foe(n+1)=3.965375e+001; krok(n+1)=7.461831e-001; ng(n+1)=1.628610e+003;
n=40; farx(n+1)=1.142530e+001; foe(n+1)=3.834422e+001; krok(n+1)=6.608354e-001; ng(n+1)=1.391224e+003;
n=41; farx(n+1)=1.079555e+001; foe(n+1)=3.733145e+001; krok(n+1)=7.238598e-001; ng(n+1)=6.436261e+002;
n=42; farx(n+1)=1.052509e+001; foe(n+1)=3.683849e+001; krok(n+1)=6.400584e-001; ng(n+1)=1.299805e+003;
n=43; farx(n+1)=1.055211e+001; foe(n+1)=3.643409e+001; krok(n+1)=5.491644e-001; ng(n+1)=1.497630e+003;
n=44; farx(n+1)=1.031397e+001; foe(n+1)=3.626224e+001; krok(n+1)=1.073054e+000; ng(n+1)=4.396282e+002;
n=45; farx(n+1)=1.038749e+001; foe(n+1)=3.612809e+001; krok(n+1)=8.576098e-001; ng(n+1)=4.201361e+001;
n=46; farx(n+1)=1.017912e+001; foe(n+1)=3.603020e+001; krok(n+1)=8.289013e-001; ng(n+1)=9.196640e+001;
n=47; farx(n+1)=1.014038e+001; foe(n+1)=3.598902e+001; krok(n+1)=5.732413e-001; ng(n+1)=1.088455e+002;
n=48; farx(n+1)=1.015721e+001; foe(n+1)=3.595805e+001; krok(n+1)=1.492310e+000; ng(n+1)=5.045407e+001;
n=49; farx(n+1)=1.022372e+001; foe(n+1)=3.593878e+001; krok(n+1)=1.138542e+000; ng(n+1)=4.209812e+001;
n=50; farx(n+1)=1.026832e+001; foe(n+1)=3.592791e+001; krok(n+1)=1.566431e+000; ng(n+1)=5.836465e+001;
%odnowa zmiennej metryki
n=51; farx(n+1)=1.026838e+001; foe(n+1)=3.592693e+001; krok(n+1)=1.343288e-006; ng(n+1)=7.949018e+001;
n=52; farx(n+1)=1.026776e+001; foe(n+1)=3.592666e+001; krok(n+1)=1.031748e-005; ng(n+1)=1.601898e+001;
n=53; farx(n+1)=1.026823e+001; foe(n+1)=3.592528e+001; krok(n+1)=2.266194e-004; ng(n+1)=5.817683e+000;
n=54; farx(n+1)=1.026194e+001; foe(n+1)=3.592467e+001; krok(n+1)=6.153829e-005; ng(n+1)=9.313034e+000;
n=55; farx(n+1)=1.025503e+001; foe(n+1)=3.592305e+001; krok(n+1)=3.919520e-004; ng(n+1)=6.016508e+000;
n=56; farx(n+1)=1.024165e+001; foe(n+1)=3.592242e+001; krok(n+1)=1.146884e-003; ng(n+1)=2.456099e+000;
n=57; farx(n+1)=1.024293e+001; foe(n+1)=3.592157e+001; krok(n+1)=9.576184e-004; ng(n+1)=2.761254e+000;
n=58; farx(n+1)=1.024563e+001; foe(n+1)=3.591927e+001; krok(n+1)=1.109636e-002; ng(n+1)=1.411807e+000;
n=59; farx(n+1)=1.019761e+001; foe(n+1)=3.591149e+001; krok(n+1)=3.715822e-002; ng(n+1)=4.309523e+000;
n=60; farx(n+1)=1.023962e+001; foe(n+1)=3.587348e+001; krok(n+1)=1.892883e-001; ng(n+1)=2.970196e+000;
n=61; farx(n+1)=1.021208e+001; foe(n+1)=3.586704e+001; krok(n+1)=1.269153e-001; ng(n+1)=1.394938e+002;
n=62; farx(n+1)=1.025868e+001; foe(n+1)=3.582783e+001; krok(n+1)=1.554381e+000; ng(n+1)=1.454786e+002;
n=63; farx(n+1)=1.028837e+001; foe(n+1)=3.582015e+001; krok(n+1)=1.495129e-001; ng(n+1)=1.415561e+002;
n=64; farx(n+1)=1.021717e+001; foe(n+1)=3.578218e+001; krok(n+1)=1.494130e+000; ng(n+1)=5.225521e+001;
n=65; farx(n+1)=1.020341e+001; foe(n+1)=3.576272e+001; krok(n+1)=1.919189e-001; ng(n+1)=2.176724e+001;
n=66; farx(n+1)=1.022568e+001; foe(n+1)=3.574132e+001; krok(n+1)=1.027715e+000; ng(n+1)=1.899861e+002;
n=67; farx(n+1)=1.027056e+001; foe(n+1)=3.572049e+001; krok(n+1)=1.601363e+000; ng(n+1)=1.166230e+002;
n=68; farx(n+1)=1.026066e+001; foe(n+1)=3.570657e+001; krok(n+1)=4.858657e-001; ng(n+1)=4.421960e+001;
n=69; farx(n+1)=1.025392e+001; foe(n+1)=3.568918e+001; krok(n+1)=7.610808e-001; ng(n+1)=1.441006e+002;
n=70; farx(n+1)=1.023425e+001; foe(n+1)=3.567115e+001; krok(n+1)=1.120145e+000; ng(n+1)=1.253032e+002;
n=71; farx(n+1)=1.023646e+001; foe(n+1)=3.565955e+001; krok(n+1)=6.167589e-001; ng(n+1)=4.625053e+001;
n=72; farx(n+1)=1.026864e+001; foe(n+1)=3.564052e+001; krok(n+1)=8.088973e-001; ng(n+1)=1.792402e+002;
n=73; farx(n+1)=1.025441e+001; foe(n+1)=3.563265e+001; krok(n+1)=3.619299e-001; ng(n+1)=1.581954e+002;
n=74; farx(n+1)=1.025790e+001; foe(n+1)=3.562024e+001; krok(n+1)=5.344503e-001; ng(n+1)=1.458849e+002;
n=75; farx(n+1)=1.024917e+001; foe(n+1)=3.560323e+001; krok(n+1)=9.512526e-001; ng(n+1)=1.582096e+001;
%odnowa zmiennej metryki
n=76; farx(n+1)=1.024876e+001; foe(n+1)=3.560060e+001; krok(n+1)=1.001277e-006; ng(n+1)=1.586719e+002;
n=77; farx(n+1)=1.025051e+001; foe(n+1)=3.559819e+001; krok(n+1)=6.521697e-006; ng(n+1)=6.077394e+001;
n=78; farx(n+1)=1.026226e+001; foe(n+1)=3.559591e+001; krok(n+1)=2.167257e-005; ng(n+1)=2.852559e+001;
n=79; farx(n+1)=1.026341e+001; foe(n+1)=3.559545e+001; krok(n+1)=1.494724e-004; ng(n+1)=5.305736e+000;
n=80; farx(n+1)=1.026590e+001; foe(n+1)=3.559536e+001; krok(n+1)=5.758264e-004; ng(n+1)=1.164746e+000;
n=81; farx(n+1)=1.026183e+001; foe(n+1)=3.559526e+001; krok(n+1)=8.605927e-004; ng(n+1)=1.099145e+000;
n=82; farx(n+1)=1.025860e+001; foe(n+1)=3.559518e+001; krok(n+1)=1.651908e-003; ng(n+1)=7.499450e-001;
n=83; farx(n+1)=1.025952e+001; foe(n+1)=3.559493e+001; krok(n+1)=1.038090e-002; ng(n+1)=5.845713e-001;
n=84; farx(n+1)=1.024504e+001; foe(n+1)=3.559048e+001; krok(n+1)=1.067078e-001; ng(n+1)=8.092685e-001;
n=85; farx(n+1)=1.024834e+001; foe(n+1)=3.558063e+001; krok(n+1)=2.205796e-001; ng(n+1)=5.022985e+000;
n=86; farx(n+1)=1.027013e+001; foe(n+1)=3.557768e+001; krok(n+1)=4.346837e-002; ng(n+1)=6.983937e+001;
n=87; farx(n+1)=1.024347e+001; foe(n+1)=3.557516e+001; krok(n+1)=1.523673e-001; ng(n+1)=1.228756e+002;
n=88; farx(n+1)=1.026341e+001; foe(n+1)=3.555986e+001; krok(n+1)=1.254669e+000; ng(n+1)=1.418900e+002;
n=89; farx(n+1)=1.025392e+001; foe(n+1)=3.554879e+001; krok(n+1)=1.021441e+000; ng(n+1)=6.091313e+001;
n=90; farx(n+1)=1.025823e+001; foe(n+1)=3.553862e+001; krok(n+1)=6.449478e-001; ng(n+1)=1.545902e+002;
n=91; farx(n+1)=1.024388e+001; foe(n+1)=3.552733e+001; krok(n+1)=1.177790e+000; ng(n+1)=8.349197e+001;
n=92; farx(n+1)=1.024266e+001; foe(n+1)=3.551827e+001; krok(n+1)=6.698571e-001; ng(n+1)=1.576889e+002;
n=93; farx(n+1)=1.024465e+001; foe(n+1)=3.550930e+001; krok(n+1)=8.957909e-001; ng(n+1)=6.245008e+001;
n=94; farx(n+1)=1.027557e+001; foe(n+1)=3.549992e+001; krok(n+1)=7.808753e-001; ng(n+1)=1.119051e+002;
n=95; farx(n+1)=1.025921e+001; foe(n+1)=3.549101e+001; krok(n+1)=1.402391e+000; ng(n+1)=6.698627e+001;
n=96; farx(n+1)=1.024602e+001; foe(n+1)=3.548283e+001; krok(n+1)=5.534700e-001; ng(n+1)=1.962349e+002;
n=97; farx(n+1)=1.023406e+001; foe(n+1)=3.547655e+001; krok(n+1)=5.045340e-001; ng(n+1)=7.479817e+001;
n=98; farx(n+1)=1.025016e+001; foe(n+1)=3.546967e+001; krok(n+1)=9.073805e-001; ng(n+1)=8.443028e+001;
n=99; farx(n+1)=1.026969e+001; foe(n+1)=3.546517e+001; krok(n+1)=6.537835e-001; ng(n+1)=1.507124e+002;
n=100; farx(n+1)=1.026541e+001; foe(n+1)=3.545639e+001; krok(n+1)=1.216368e+000; ng(n+1)=2.556201e+001;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
