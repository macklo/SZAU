%uczenie predyktora oe
clear all;
n=0; farx(n+1)=4.083085e+003; foe(n+1)=4.064359e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=2.892840e+003; foe(n+1)=2.931595e+003; krok(n+1)=4.994367e-004; ng(n+1)=3.995496e+003;
n=2; farx(n+1)=9.627190e+002; foe(n+1)=8.364544e+002; krok(n+1)=3.625910e-003; ng(n+1)=1.626135e+003;
n=3; farx(n+1)=9.848459e+002; foe(n+1)=5.841528e+002; krok(n+1)=2.108238e-004; ng(n+1)=5.024791e+003;
n=4; farx(n+1)=1.166736e+003; foe(n+1)=4.981985e+002; krok(n+1)=6.650130e-004; ng(n+1)=4.056435e+003;
n=5; farx(n+1)=7.438450e+002; foe(n+1)=4.140577e+002; krok(n+1)=6.118871e-003; ng(n+1)=4.830552e+002;
n=6; farx(n+1)=3.594554e+002; foe(n+1)=3.263496e+002; krok(n+1)=4.974973e-003; ng(n+1)=1.318286e+003;
n=7; farx(n+1)=3.289884e+002; foe(n+1)=3.160348e+002; krok(n+1)=6.946998e-004; ng(n+1)=7.467129e+002;
n=8; farx(n+1)=2.998539e+002; foe(n+1)=3.088418e+002; krok(n+1)=3.671029e-003; ng(n+1)=4.336556e+002;
n=9; farx(n+1)=2.424629e+002; foe(n+1)=3.002660e+002; krok(n+1)=5.201755e-003; ng(n+1)=2.819337e+002;
n=10; farx(n+1)=1.784484e+002; foe(n+1)=2.838621e+002; krok(n+1)=6.401705e-003; ng(n+1)=4.247052e+002;
n=11; farx(n+1)=1.404980e+002; foe(n+1)=2.682473e+002; krok(n+1)=1.106947e-003; ng(n+1)=8.278554e+002;
n=12; farx(n+1)=1.168069e+002; foe(n+1)=2.604020e+002; krok(n+1)=1.243743e-003; ng(n+1)=1.053998e+003;
n=13; farx(n+1)=8.836572e+001; foe(n+1)=2.530395e+002; krok(n+1)=1.593673e-003; ng(n+1)=1.015214e+003;
n=14; farx(n+1)=6.669132e+001; foe(n+1)=2.450738e+002; krok(n+1)=3.090387e-004; ng(n+1)=2.655972e+003;
n=15; farx(n+1)=5.003721e+001; foe(n+1)=2.262650e+002; krok(n+1)=3.383827e-004; ng(n+1)=2.214163e+003;
n=16; farx(n+1)=4.865633e+001; foe(n+1)=2.248072e+002; krok(n+1)=9.998579e-005; ng(n+1)=2.563513e+003;
n=17; farx(n+1)=4.653375e+001; foe(n+1)=2.166783e+002; krok(n+1)=7.663457e-004; ng(n+1)=5.151842e+003;
n=18; farx(n+1)=4.524909e+001; foe(n+1)=2.141367e+002; krok(n+1)=5.587912e-005; ng(n+1)=1.358700e+004;
n=19; farx(n+1)=5.270981e+001; foe(n+1)=1.516451e+002; krok(n+1)=4.179825e-004; ng(n+1)=5.508713e+003;
n=20; farx(n+1)=5.272318e+001; foe(n+1)=1.516411e+002; krok(n+1)=2.502989e-006; ng(n+1)=1.762077e+004;
n=21; farx(n+1)=5.278860e+001; foe(n+1)=1.513998e+002; krok(n+1)=2.151397e-004; ng(n+1)=1.696382e+004;
n=22; farx(n+1)=4.971722e+001; foe(n+1)=1.440923e+002; krok(n+1)=4.042588e-003; ng(n+1)=1.526951e+004;
n=23; farx(n+1)=5.354212e+001; foe(n+1)=1.353848e+002; krok(n+1)=2.316587e-003; ng(n+1)=3.298098e+003;
n=24; farx(n+1)=4.961151e+001; foe(n+1)=1.205616e+002; krok(n+1)=5.682045e-003; ng(n+1)=2.157200e+003;
n=25; farx(n+1)=4.548427e+001; foe(n+1)=1.177435e+002; krok(n+1)=1.889294e-003; ng(n+1)=1.810360e+003;
%odnowa zmiennej metryki
n=26; farx(n+1)=4.574892e+001; foe(n+1)=1.061620e+002; krok(n+1)=4.461789e-005; ng(n+1)=2.030804e+003;
n=27; farx(n+1)=4.848880e+001; foe(n+1)=1.025632e+002; krok(n+1)=3.858161e-005; ng(n+1)=9.890573e+002;
n=28; farx(n+1)=4.266336e+001; foe(n+1)=9.708158e+001; krok(n+1)=1.275622e-004; ng(n+1)=6.955037e+002;
n=29; farx(n+1)=4.028143e+001; foe(n+1)=8.493660e+001; krok(n+1)=5.623867e-004; ng(n+1)=4.430592e+003;
n=30; farx(n+1)=3.980151e+001; foe(n+1)=8.440305e+001; krok(n+1)=2.253084e-005; ng(n+1)=4.756353e+003;
n=31; farx(n+1)=3.127065e+001; foe(n+1)=7.457595e+001; krok(n+1)=5.287230e-006; ng(n+1)=8.364695e+003;
n=32; farx(n+1)=2.718042e+001; foe(n+1)=6.797090e+001; krok(n+1)=1.284763e-003; ng(n+1)=5.748262e+003;
n=33; farx(n+1)=2.656646e+001; foe(n+1)=6.228841e+001; krok(n+1)=4.060817e-003; ng(n+1)=2.645383e+003;
n=34; farx(n+1)=2.702860e+001; foe(n+1)=5.848099e+001; krok(n+1)=3.624433e-004; ng(n+1)=6.540128e+003;
n=35; farx(n+1)=2.656881e+001; foe(n+1)=5.617582e+001; krok(n+1)=2.118327e-003; ng(n+1)=1.198057e+003;
n=36; farx(n+1)=2.664010e+001; foe(n+1)=5.290821e+001; krok(n+1)=4.095033e-005; ng(n+1)=5.154655e+004;
n=37; farx(n+1)=2.519230e+001; foe(n+1)=5.065038e+001; krok(n+1)=1.340015e-002; ng(n+1)=1.445612e+003;
n=38; farx(n+1)=2.450653e+001; foe(n+1)=4.932085e+001; krok(n+1)=2.552474e-003; ng(n+1)=1.542966e+003;
n=39; farx(n+1)=2.418948e+001; foe(n+1)=4.909651e+001; krok(n+1)=4.217733e-004; ng(n+1)=1.575012e+003;
n=40; farx(n+1)=2.247141e+001; foe(n+1)=4.821563e+001; krok(n+1)=1.108189e-003; ng(n+1)=1.619628e+004;
n=41; farx(n+1)=1.964968e+001; foe(n+1)=4.624043e+001; krok(n+1)=9.396257e-004; ng(n+1)=4.389463e+004;
n=42; farx(n+1)=1.911849e+001; foe(n+1)=4.575742e+001; krok(n+1)=2.482161e-003; ng(n+1)=3.526421e+003;
n=43; farx(n+1)=1.776935e+001; foe(n+1)=4.460934e+001; krok(n+1)=4.255284e-003; ng(n+1)=7.480791e+003;
n=44; farx(n+1)=1.172145e+001; foe(n+1)=3.892050e+001; krok(n+1)=3.881594e-002; ng(n+1)=2.457214e+003;
n=45; farx(n+1)=1.313024e+001; foe(n+1)=3.734877e+001; krok(n+1)=2.852289e-004; ng(n+1)=6.651210e+003;
n=46; farx(n+1)=1.619813e+001; foe(n+1)=3.624426e+001; krok(n+1)=6.496894e-003; ng(n+1)=2.294270e+003;
n=47; farx(n+1)=1.772385e+001; foe(n+1)=3.478029e+001; krok(n+1)=1.033570e-002; ng(n+1)=1.035182e+003;
n=48; farx(n+1)=1.820901e+001; foe(n+1)=3.286231e+001; krok(n+1)=4.388300e-002; ng(n+1)=1.053205e+003;
n=49; farx(n+1)=1.510551e+001; foe(n+1)=2.798998e+001; krok(n+1)=8.153064e-002; ng(n+1)=8.458432e+002;
n=50; farx(n+1)=1.345666e+001; foe(n+1)=2.566430e+001; krok(n+1)=1.829287e-002; ng(n+1)=1.076307e+003;
%odnowa zmiennej metryki
n=51; farx(n+1)=1.217898e+001; foe(n+1)=2.324731e+001; krok(n+1)=6.522877e-005; ng(n+1)=7.347316e+002;
n=52; farx(n+1)=1.237548e+001; foe(n+1)=2.175817e+001; krok(n+1)=2.885108e-005; ng(n+1)=9.154681e+002;
n=53; farx(n+1)=1.160566e+001; foe(n+1)=1.679850e+001; krok(n+1)=8.106441e-004; ng(n+1)=3.136162e+002;
n=54; farx(n+1)=1.129521e+001; foe(n+1)=1.635646e+001; krok(n+1)=1.767187e-004; ng(n+1)=3.420324e+002;
n=55; farx(n+1)=1.054015e+001; foe(n+1)=1.561170e+001; krok(n+1)=1.093891e-003; ng(n+1)=3.660427e+002;
n=56; farx(n+1)=9.499482e+000; foe(n+1)=1.447255e+001; krok(n+1)=2.778799e-003; ng(n+1)=4.637153e+002;
n=57; farx(n+1)=8.691624e+000; foe(n+1)=1.376462e+001; krok(n+1)=1.809047e-002; ng(n+1)=2.350186e+002;
n=58; farx(n+1)=7.704295e+000; foe(n+1)=1.290781e+001; krok(n+1)=7.833534e-003; ng(n+1)=1.434363e+002;
n=59; farx(n+1)=6.567926e+000; foe(n+1)=1.210707e+001; krok(n+1)=7.251821e-003; ng(n+1)=4.333654e+002;
n=60; farx(n+1)=6.096623e+000; foe(n+1)=1.179944e+001; krok(n+1)=1.772228e-003; ng(n+1)=5.749026e+002;
n=61; farx(n+1)=5.502285e+000; foe(n+1)=1.116777e+001; krok(n+1)=1.825682e-002; ng(n+1)=2.484839e+002;
n=62; farx(n+1)=5.005975e+000; foe(n+1)=1.047737e+001; krok(n+1)=1.803826e-002; ng(n+1)=2.961413e+002;
n=63; farx(n+1)=5.068151e+000; foe(n+1)=9.664599e+000; krok(n+1)=1.041670e-002; ng(n+1)=1.873504e+002;
n=64; farx(n+1)=4.764182e+000; foe(n+1)=9.350544e+000; krok(n+1)=2.592196e-002; ng(n+1)=2.831318e+002;
n=65; farx(n+1)=4.476972e+000; foe(n+1)=9.166975e+000; krok(n+1)=2.946581e-002; ng(n+1)=3.656199e+002;
n=66; farx(n+1)=3.825482e+000; foe(n+1)=8.800955e+000; krok(n+1)=4.076532e-002; ng(n+1)=2.023315e+002;
n=67; farx(n+1)=3.240567e+000; foe(n+1)=8.389999e+000; krok(n+1)=2.476948e-002; ng(n+1)=2.578618e+002;
n=68; farx(n+1)=3.154180e+000; foe(n+1)=8.258236e+000; krok(n+1)=5.200687e-003; ng(n+1)=3.391268e+002;
n=69; farx(n+1)=2.879865e+000; foe(n+1)=7.898143e+000; krok(n+1)=1.547432e-002; ng(n+1)=2.333471e+002;
n=70; farx(n+1)=2.421181e+000; foe(n+1)=6.632274e+000; krok(n+1)=3.413297e-002; ng(n+1)=3.217652e+002;
n=71; farx(n+1)=1.943121e+000; foe(n+1)=5.733149e+000; krok(n+1)=9.513510e-002; ng(n+1)=5.565771e+002;
n=72; farx(n+1)=1.701862e+000; foe(n+1)=5.122027e+000; krok(n+1)=4.356626e-002; ng(n+1)=1.303966e+003;
n=73; farx(n+1)=1.623836e+000; foe(n+1)=4.473296e+000; krok(n+1)=5.671128e-002; ng(n+1)=7.879433e+002;
n=74; farx(n+1)=1.582150e+000; foe(n+1)=3.996599e+000; krok(n+1)=4.134280e-002; ng(n+1)=5.363917e+002;
n=75; farx(n+1)=1.429065e+000; foe(n+1)=3.111634e+000; krok(n+1)=1.134226e-001; ng(n+1)=3.489740e+002;
%odnowa zmiennej metryki
n=76; farx(n+1)=1.415608e+000; foe(n+1)=3.006793e+000; krok(n+1)=8.186754e-006; ng(n+1)=4.695090e+002;
n=77; farx(n+1)=1.406016e+000; foe(n+1)=2.929676e+000; krok(n+1)=9.622040e-006; ng(n+1)=3.613684e+002;
n=78; farx(n+1)=1.395155e+000; foe(n+1)=2.890443e+000; krok(n+1)=5.210339e-005; ng(n+1)=1.148835e+002;
n=79; farx(n+1)=1.378720e+000; foe(n+1)=2.812449e+000; krok(n+1)=1.842068e-004; ng(n+1)=8.785046e+001;
n=80; farx(n+1)=1.355623e+000; foe(n+1)=2.776079e+000; krok(n+1)=6.847610e-004; ng(n+1)=3.861698e+001;
n=81; farx(n+1)=1.314383e+000; foe(n+1)=2.663578e+000; krok(n+1)=1.772025e-003; ng(n+1)=4.087677e+001;
n=82; farx(n+1)=1.263032e+000; foe(n+1)=2.544613e+000; krok(n+1)=1.548092e-003; ng(n+1)=1.324034e+002;
n=83; farx(n+1)=1.218425e+000; foe(n+1)=2.505637e+000; krok(n+1)=4.751121e-003; ng(n+1)=3.220680e+002;
n=84; farx(n+1)=1.177931e+000; foe(n+1)=2.457852e+000; krok(n+1)=3.625910e-003; ng(n+1)=2.827930e+002;
n=85; farx(n+1)=1.154470e+000; foe(n+1)=2.428085e+000; krok(n+1)=2.918223e-003; ng(n+1)=2.269605e+002;
n=86; farx(n+1)=1.161433e+000; foe(n+1)=2.303346e+000; krok(n+1)=4.382471e-002; ng(n+1)=2.390782e+002;
n=87; farx(n+1)=1.161370e+000; foe(n+1)=2.267641e+000; krok(n+1)=1.660018e-002; ng(n+1)=3.268770e+002;
n=88; farx(n+1)=1.166975e+000; foe(n+1)=2.148409e+000; krok(n+1)=2.219272e-002; ng(n+1)=3.722914e+002;
n=89; farx(n+1)=1.171367e+000; foe(n+1)=2.112593e+000; krok(n+1)=1.974372e-002; ng(n+1)=2.158828e+002;
n=90; farx(n+1)=1.179029e+000; foe(n+1)=2.053778e+000; krok(n+1)=1.618413e-002; ng(n+1)=1.818065e+002;
n=91; farx(n+1)=1.181598e+000; foe(n+1)=2.025655e+000; krok(n+1)=1.333847e-002; ng(n+1)=2.011077e+002;
n=92; farx(n+1)=1.179382e+000; foe(n+1)=1.942797e+000; krok(n+1)=1.328156e-001; ng(n+1)=1.724828e+002;
n=93; farx(n+1)=1.244170e+000; foe(n+1)=1.831706e+000; krok(n+1)=4.757597e-002; ng(n+1)=2.196834e+002;
n=94; farx(n+1)=1.243028e+000; foe(n+1)=1.771972e+000; krok(n+1)=5.405940e-002; ng(n+1)=2.264029e+002;
n=95; farx(n+1)=1.250225e+000; foe(n+1)=1.744551e+000; krok(n+1)=1.210728e-002; ng(n+1)=4.087720e+002;
n=96; farx(n+1)=1.265304e+000; foe(n+1)=1.667151e+000; krok(n+1)=1.931257e-001; ng(n+1)=2.979038e+002;
n=97; farx(n+1)=1.280108e+000; foe(n+1)=1.582905e+000; krok(n+1)=7.866273e-002; ng(n+1)=3.188285e+002;
n=98; farx(n+1)=1.283696e+000; foe(n+1)=1.534053e+000; krok(n+1)=9.790078e-002; ng(n+1)=1.525186e+002;
n=99; farx(n+1)=1.297616e+000; foe(n+1)=1.482309e+000; krok(n+1)=7.795080e-002; ng(n+1)=1.912430e+002;
n=100; farx(n+1)=1.264624e+000; foe(n+1)=1.373312e+000; krok(n+1)=1.728230e-001; ng(n+1)=2.994002e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
