%uczenie predyktora oe
clear all;
n=0; farx(n+1)=4.926781e+003; foe(n+1)=4.893228e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=3.852510e+003; foe(n+1)=3.847056e+003; krok(n+1)=3.423805e-004; ng(n+1)=3.492247e+003;
n=2; farx(n+1)=9.578688e+002; foe(n+1)=8.487838e+002; krok(n+1)=2.999882e-003; ng(n+1)=1.869161e+003;
n=3; farx(n+1)=9.796008e+002; foe(n+1)=8.256961e+002; krok(n+1)=2.681146e-004; ng(n+1)=1.119594e+003;
n=4; farx(n+1)=8.848651e+002; foe(n+1)=8.148881e+002; krok(n+1)=4.912716e-004; ng(n+1)=8.485172e+002;
n=5; farx(n+1)=6.702007e+002; foe(n+1)=6.824355e+002; krok(n+1)=1.420248e-003; ng(n+1)=1.885589e+003;
n=6; farx(n+1)=5.798197e+002; foe(n+1)=6.274495e+002; krok(n+1)=8.374265e-004; ng(n+1)=2.633199e+003;
n=7; farx(n+1)=5.635590e+002; foe(n+1)=5.138062e+002; krok(n+1)=1.130654e-003; ng(n+1)=3.689591e+003;
n=8; farx(n+1)=5.277879e+002; foe(n+1)=4.873884e+002; krok(n+1)=3.620082e-004; ng(n+1)=2.691391e+003;
n=9; farx(n+1)=5.365571e+002; foe(n+1)=4.843120e+002; krok(n+1)=8.440914e-005; ng(n+1)=2.353616e+003;
n=10; farx(n+1)=3.885260e+002; foe(n+1)=4.235853e+002; krok(n+1)=5.654998e-003; ng(n+1)=2.223741e+003;
n=11; farx(n+1)=3.426534e+002; foe(n+1)=4.112250e+002; krok(n+1)=8.106441e-004; ng(n+1)=3.106294e+003;
n=12; farx(n+1)=3.445625e+002; foe(n+1)=3.952689e+002; krok(n+1)=3.146871e-003; ng(n+1)=3.273172e+003;
n=13; farx(n+1)=3.230938e+002; foe(n+1)=3.781741e+002; krok(n+1)=1.723278e-003; ng(n+1)=2.420886e+003;
n=14; farx(n+1)=3.150270e+002; foe(n+1)=3.615469e+002; krok(n+1)=5.915258e-003; ng(n+1)=1.592505e+003;
n=15; farx(n+1)=2.675405e+002; foe(n+1)=3.351346e+002; krok(n+1)=6.607631e-003; ng(n+1)=8.050021e+002;
n=16; farx(n+1)=1.442191e+002; foe(n+1)=2.989159e+002; krok(n+1)=1.345640e-002; ng(n+1)=1.026658e+003;
n=17; farx(n+1)=9.397759e+001; foe(n+1)=2.757129e+002; krok(n+1)=1.925691e-003; ng(n+1)=7.235276e+002;
n=18; farx(n+1)=8.691432e+001; foe(n+1)=2.680371e+002; krok(n+1)=1.427772e-003; ng(n+1)=1.194901e+003;
n=19; farx(n+1)=6.995382e+001; foe(n+1)=2.506066e+002; krok(n+1)=1.548092e-003; ng(n+1)=2.684761e+003;
n=20; farx(n+1)=6.063753e+001; foe(n+1)=2.359662e+002; krok(n+1)=2.293321e-003; ng(n+1)=1.651494e+003;
n=21; farx(n+1)=5.223408e+001; foe(n+1)=2.289181e+002; krok(n+1)=1.818608e-002; ng(n+1)=2.332811e+003;
n=22; farx(n+1)=4.393611e+001; foe(n+1)=2.106351e+002; krok(n+1)=1.940797e-002; ng(n+1)=2.969529e+003;
n=23; farx(n+1)=4.024043e+001; foe(n+1)=1.960828e+002; krok(n+1)=3.928808e-003; ng(n+1)=4.569139e+003;
n=24; farx(n+1)=4.015986e+001; foe(n+1)=1.958201e+002; krok(n+1)=2.808967e-004; ng(n+1)=1.173836e+004;
n=25; farx(n+1)=3.744067e+001; foe(n+1)=1.637180e+002; krok(n+1)=2.617232e-002; ng(n+1)=4.878912e+003;
%odnowa zmiennej metryki
n=26; farx(n+1)=3.716273e+001; foe(n+1)=1.587798e+002; krok(n+1)=1.829642e-005; ng(n+1)=2.628113e+003;
n=27; farx(n+1)=3.635099e+001; foe(n+1)=1.454688e+002; krok(n+1)=4.037383e-005; ng(n+1)=2.381805e+003;
n=28; farx(n+1)=3.468159e+001; foe(n+1)=1.396336e+002; krok(n+1)=5.005977e-006; ng(n+1)=2.935095e+003;
n=29; farx(n+1)=2.812864e+001; foe(n+1)=1.265864e+002; krok(n+1)=8.147519e-005; ng(n+1)=3.175554e+003;
n=30; farx(n+1)=2.974926e+001; foe(n+1)=1.193058e+002; krok(n+1)=1.141051e-003; ng(n+1)=9.750489e+002;
n=31; farx(n+1)=2.550380e+001; foe(n+1)=1.149034e+002; krok(n+1)=6.250570e-004; ng(n+1)=7.883205e+002;
n=32; farx(n+1)=1.818131e+001; foe(n+1)=1.064481e+002; krok(n+1)=1.078226e-003; ng(n+1)=1.199802e+003;
n=33; farx(n+1)=1.890641e+001; foe(n+1)=9.779777e+001; krok(n+1)=1.116025e-003; ng(n+1)=1.290027e+003;
n=34; farx(n+1)=1.900232e+001; foe(n+1)=8.989424e+001; krok(n+1)=2.742688e-003; ng(n+1)=1.722603e+003;
n=35; farx(n+1)=1.943531e+001; foe(n+1)=8.677108e+001; krok(n+1)=3.113587e-003; ng(n+1)=2.712962e+003;
n=36; farx(n+1)=1.878993e+001; foe(n+1)=8.006614e+001; krok(n+1)=1.193571e-002; ng(n+1)=2.413733e+003;
n=37; farx(n+1)=1.866508e+001; foe(n+1)=7.408036e+001; krok(n+1)=1.264842e-002; ng(n+1)=2.400006e+003;
n=38; farx(n+1)=1.881625e+001; foe(n+1)=6.284957e+001; krok(n+1)=3.779257e-003; ng(n+1)=1.268307e+003;
n=39; farx(n+1)=1.986495e+001; foe(n+1)=6.189319e+001; krok(n+1)=2.742688e-003; ng(n+1)=1.115784e+003;
n=40; farx(n+1)=1.906252e+001; foe(n+1)=6.027739e+001; krok(n+1)=7.805422e-003; ng(n+1)=1.479776e+003;
n=41; farx(n+1)=1.707226e+001; foe(n+1)=5.588335e+001; krok(n+1)=3.899772e-003; ng(n+1)=1.325362e+003;
n=42; farx(n+1)=9.805289e+000; foe(n+1)=4.756135e+001; krok(n+1)=1.973299e-002; ng(n+1)=1.374599e+003;
n=43; farx(n+1)=8.837910e+000; foe(n+1)=4.335593e+001; krok(n+1)=2.183177e-002; ng(n+1)=1.285007e+003;
n=44; farx(n+1)=7.285865e+000; foe(n+1)=3.272515e+001; krok(n+1)=4.953895e-002; ng(n+1)=1.308422e+003;
n=45; farx(n+1)=5.866030e+000; foe(n+1)=2.992609e+001; krok(n+1)=3.616714e-002; ng(n+1)=1.117403e+003;
n=46; farx(n+1)=4.841149e+000; foe(n+1)=2.574450e+001; krok(n+1)=2.251094e-002; ng(n+1)=8.686097e+002;
n=47; farx(n+1)=6.266889e+000; foe(n+1)=2.101168e+001; krok(n+1)=3.098659e-001; ng(n+1)=5.607905e+002;
n=48; farx(n+1)=5.848161e+000; foe(n+1)=1.872457e+001; krok(n+1)=2.760258e-001; ng(n+1)=3.742490e+002;
n=49; farx(n+1)=5.148044e+000; foe(n+1)=1.723432e+001; krok(n+1)=1.067078e-001; ng(n+1)=5.889362e+002;
n=50; farx(n+1)=5.298997e+000; foe(n+1)=1.627012e+001; krok(n+1)=3.282103e-001; ng(n+1)=3.790499e+002;
%odnowa zmiennej metryki
n=51; farx(n+1)=5.350735e+000; foe(n+1)=1.612686e+001; krok(n+1)=2.307378e-005; ng(n+1)=2.917193e+002;
n=52; farx(n+1)=5.347871e+000; foe(n+1)=1.607096e+001; krok(n+1)=3.369455e-005; ng(n+1)=1.493892e+002;
n=53; farx(n+1)=5.465124e+000; foe(n+1)=1.515305e+001; krok(n+1)=2.000284e-004; ng(n+1)=2.357127e+002;
n=54; farx(n+1)=5.540778e+000; foe(n+1)=1.505760e+001; krok(n+1)=1.197023e-004; ng(n+1)=1.048022e+002;
n=55; farx(n+1)=5.551602e+000; foe(n+1)=1.445851e+001; krok(n+1)=5.704577e-004; ng(n+1)=1.303268e+002;
n=56; farx(n+1)=5.626260e+000; foe(n+1)=1.410147e+001; krok(n+1)=1.191878e-003; ng(n+1)=1.213511e+002;
n=57; farx(n+1)=5.377021e+000; foe(n+1)=1.360111e+001; krok(n+1)=9.752865e-003; ng(n+1)=2.256047e+002;
n=58; farx(n+1)=5.256248e+000; foe(n+1)=1.335273e+001; krok(n+1)=6.192369e-003; ng(n+1)=1.135774e+002;
n=59; farx(n+1)=4.980264e+000; foe(n+1)=1.299488e+001; krok(n+1)=3.386820e-003; ng(n+1)=2.295974e+002;
n=60; farx(n+1)=4.576341e+000; foe(n+1)=1.252479e+001; krok(n+1)=1.299379e-002; ng(n+1)=4.161686e+002;
n=61; farx(n+1)=3.405530e+000; foe(n+1)=1.100526e+001; krok(n+1)=8.378898e-003; ng(n+1)=4.180477e+002;
n=62; farx(n+1)=3.300023e+000; foe(n+1)=1.079604e+001; krok(n+1)=4.083230e-003; ng(n+1)=3.684943e+002;
n=63; farx(n+1)=3.183615e+000; foe(n+1)=1.048359e+001; krok(n+1)=4.149438e-002; ng(n+1)=2.671140e+002;
n=64; farx(n+1)=3.120745e+000; foe(n+1)=1.005075e+001; krok(n+1)=1.109636e-002; ng(n+1)=4.703020e+002;
n=65; farx(n+1)=3.132782e+000; foe(n+1)=9.502414e+000; krok(n+1)=2.331822e-002; ng(n+1)=5.411471e+002;
n=66; farx(n+1)=3.059508e+000; foe(n+1)=9.190908e+000; krok(n+1)=2.768235e-002; ng(n+1)=2.997777e+002;
n=67; farx(n+1)=2.831736e+000; foe(n+1)=8.581355e+000; krok(n+1)=6.101994e-002; ng(n+1)=3.176033e+002;
n=68; farx(n+1)=2.634682e+000; foe(n+1)=8.129154e+000; krok(n+1)=1.032026e-001; ng(n+1)=3.256914e+002;
n=69; farx(n+1)=2.444262e+000; foe(n+1)=7.748100e+000; krok(n+1)=2.186494e-001; ng(n+1)=3.499190e+002;
n=70; farx(n+1)=2.330135e+000; foe(n+1)=7.384749e+000; krok(n+1)=1.943277e-001; ng(n+1)=5.475706e+002;
n=71; farx(n+1)=2.382708e+000; foe(n+1)=7.128437e+000; krok(n+1)=2.088513e-001; ng(n+1)=2.717775e+002;
n=72; farx(n+1)=2.299809e+000; foe(n+1)=6.980010e+000; krok(n+1)=1.913888e-001; ng(n+1)=2.710701e+002;
n=73; farx(n+1)=2.313129e+000; foe(n+1)=6.873481e+000; krok(n+1)=1.269153e-001; ng(n+1)=9.451504e+001;
n=74; farx(n+1)=2.324602e+000; foe(n+1)=6.698556e+000; krok(n+1)=2.577747e-001; ng(n+1)=2.137884e+002;
n=75; farx(n+1)=2.240475e+000; foe(n+1)=6.508975e+000; krok(n+1)=1.663330e-001; ng(n+1)=1.098014e+002;
%odnowa zmiennej metryki
n=76; farx(n+1)=2.241229e+000; foe(n+1)=6.466341e+000; krok(n+1)=2.980900e-006; ng(n+1)=4.498974e+002;
n=77; farx(n+1)=2.241554e+000; foe(n+1)=6.459769e+000; krok(n+1)=1.430061e-005; ng(n+1)=7.429531e+001;
n=78; farx(n+1)=2.231554e+000; foe(n+1)=6.410418e+000; krok(n+1)=3.921839e-004; ng(n+1)=4.045661e+001;
n=79; farx(n+1)=2.207390e+000; foe(n+1)=6.354263e+000; krok(n+1)=6.197037e-005; ng(n+1)=1.068402e+002;
n=80; farx(n+1)=2.194357e+000; foe(n+1)=6.326274e+000; krok(n+1)=4.430569e-004; ng(n+1)=2.949333e+001;
n=81; farx(n+1)=2.189366e+000; foe(n+1)=6.314288e+000; krok(n+1)=4.755968e-004; ng(n+1)=2.605787e+001;
n=82; farx(n+1)=2.144140e+000; foe(n+1)=6.262489e+000; krok(n+1)=2.298967e-003; ng(n+1)=3.622869e+001;
n=83; farx(n+1)=2.103115e+000; foe(n+1)=6.202912e+000; krok(n+1)=4.742276e-003; ng(n+1)=1.762489e+002;
n=84; farx(n+1)=2.092737e+000; foe(n+1)=6.146156e+000; krok(n+1)=3.209934e-003; ng(n+1)=4.024150e+002;
n=85; farx(n+1)=2.053873e+000; foe(n+1)=6.094952e+000; krok(n+1)=5.208348e-003; ng(n+1)=5.481100e+002;
n=86; farx(n+1)=1.897995e+000; foe(n+1)=5.904127e+000; krok(n+1)=2.847603e-002; ng(n+1)=4.888769e+002;
n=87; farx(n+1)=1.845898e+000; foe(n+1)=5.870200e+000; krok(n+1)=1.450364e-002; ng(n+1)=3.903541e+002;
n=88; farx(n+1)=1.743733e+000; foe(n+1)=5.808046e+000; krok(n+1)=5.234463e-002; ng(n+1)=5.556049e+002;
n=89; farx(n+1)=1.700927e+000; foe(n+1)=5.778133e+000; krok(n+1)=1.618413e-002; ng(n+1)=5.035455e+002;
n=90; farx(n+1)=1.634230e+000; foe(n+1)=5.705197e+000; krok(n+1)=4.852216e-002; ng(n+1)=4.956357e+002;
n=91; farx(n+1)=1.600168e+000; foe(n+1)=5.632138e+000; krok(n+1)=1.451056e-001; ng(n+1)=4.306719e+002;
n=92; farx(n+1)=1.566631e+000; foe(n+1)=5.493179e+000; krok(n+1)=7.959957e-002; ng(n+1)=5.250509e+002;
n=93; farx(n+1)=1.568107e+000; foe(n+1)=5.379581e+000; krok(n+1)=1.702433e-001; ng(n+1)=2.484893e+002;
n=94; farx(n+1)=1.587491e+000; foe(n+1)=5.317236e+000; krok(n+1)=1.204622e-002; ng(n+1)=6.122982e+002;
n=95; farx(n+1)=1.583851e+000; foe(n+1)=5.203471e+000; krok(n+1)=1.482616e-001; ng(n+1)=2.880485e+002;
n=96; farx(n+1)=1.530630e+000; foe(n+1)=5.072385e+000; krok(n+1)=1.583927e-001; ng(n+1)=3.337352e+002;
n=97; farx(n+1)=1.469345e+000; foe(n+1)=4.900697e+000; krok(n+1)=1.619492e-001; ng(n+1)=7.238707e+002;
n=98; farx(n+1)=1.371675e+000; foe(n+1)=4.770072e+000; krok(n+1)=1.802050e-001; ng(n+1)=3.085347e+002;
n=99; farx(n+1)=1.184555e+000; foe(n+1)=4.675244e+000; krok(n+1)=1.534454e-001; ng(n+1)=3.226898e+002;
n=100; farx(n+1)=1.115216e+000; foe(n+1)=4.548039e+000; krok(n+1)=2.230542e-001; ng(n+1)=7.257258e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
