%uczenie predyktora oe
clear all;
n=0; farx(n+1)=4.097911e+003; foe(n+1)=4.056201e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=3.007867e+003; foe(n+1)=2.973229e+003; krok(n+1)=5.069434e-004; ng(n+1)=3.198604e+003;
n=2; farx(n+1)=1.051939e+003; foe(n+1)=9.691274e+002; krok(n+1)=4.004785e-003; ng(n+1)=1.292137e+003;
n=3; farx(n+1)=1.163814e+003; foe(n+1)=7.581565e+002; krok(n+1)=7.846985e-005; ng(n+1)=7.365926e+003;
n=4; farx(n+1)=1.781563e+003; foe(n+1)=5.420180e+002; krok(n+1)=4.053221e-004; ng(n+1)=8.995757e+003;
n=5; farx(n+1)=1.141799e+003; foe(n+1)=4.370642e+002; krok(n+1)=3.595838e-003; ng(n+1)=7.155179e+002;
n=6; farx(n+1)=4.628128e+002; foe(n+1)=3.334367e+002; krok(n+1)=1.568349e-003; ng(n+1)=1.183809e+003;
n=7; farx(n+1)=4.437647e+002; foe(n+1)=3.291351e+002; krok(n+1)=8.318815e-006; ng(n+1)=4.896038e+003;
n=8; farx(n+1)=4.401136e+002; foe(n+1)=3.239063e+002; krok(n+1)=1.587460e-003; ng(n+1)=1.648466e+003;
n=9; farx(n+1)=4.014163e+002; foe(n+1)=3.197725e+002; krok(n+1)=2.081087e-003; ng(n+1)=9.304489e+002;
n=10; farx(n+1)=3.489967e+002; foe(n+1)=3.153776e+002; krok(n+1)=2.607264e-003; ng(n+1)=1.157363e+003;
n=11; farx(n+1)=2.877429e+002; foe(n+1)=3.109829e+002; krok(n+1)=3.452691e-003; ng(n+1)=3.828043e+002;
n=12; farx(n+1)=2.241464e+002; foe(n+1)=3.000357e+002; krok(n+1)=3.880673e-003; ng(n+1)=1.585583e+003;
n=13; farx(n+1)=1.864689e+002; foe(n+1)=2.893700e+002; krok(n+1)=4.126056e-003; ng(n+1)=5.581806e+002;
n=14; farx(n+1)=7.831370e+001; foe(n+1)=2.128600e+002; krok(n+1)=2.647020e-003; ng(n+1)=2.721159e+003;
n=15; farx(n+1)=7.176897e+001; foe(n+1)=2.089276e+002; krok(n+1)=3.870095e-005; ng(n+1)=4.232119e+003;
n=16; farx(n+1)=7.070424e+001; foe(n+1)=2.067727e+002; krok(n+1)=8.138997e-004; ng(n+1)=4.783920e+003;
n=17; farx(n+1)=7.544004e+001; foe(n+1)=1.942373e+002; krok(n+1)=8.558166e-003; ng(n+1)=5.690608e+003;
n=18; farx(n+1)=7.490372e+001; foe(n+1)=1.894002e+002; krok(n+1)=1.532691e-003; ng(n+1)=4.932653e+003;
n=19; farx(n+1)=6.607310e+001; foe(n+1)=1.848154e+002; krok(n+1)=4.008930e-003; ng(n+1)=3.063983e+003;
n=20; farx(n+1)=6.667969e+001; foe(n+1)=1.721411e+002; krok(n+1)=1.076348e-002; ng(n+1)=2.723004e+003;
n=21; farx(n+1)=6.228543e+001; foe(n+1)=1.615301e+002; krok(n+1)=2.707062e-003; ng(n+1)=3.183729e+003;
n=22; farx(n+1)=5.692553e+001; foe(n+1)=1.512464e+002; krok(n+1)=1.358387e-003; ng(n+1)=6.628026e+003;
n=23; farx(n+1)=5.090798e+001; foe(n+1)=1.385988e+002; krok(n+1)=1.841613e-003; ng(n+1)=9.026042e+003;
n=24; farx(n+1)=4.149443e+001; foe(n+1)=1.185743e+002; krok(n+1)=1.139839e-002; ng(n+1)=9.816243e+003;
n=25; farx(n+1)=4.117137e+001; foe(n+1)=1.170713e+002; krok(n+1)=3.192302e-004; ng(n+1)=5.072696e+003;
%odnowa zmiennej metryki
n=26; farx(n+1)=4.103924e+001; foe(n+1)=1.148014e+002; krok(n+1)=5.298884e-006; ng(n+1)=2.948478e+003;
n=27; farx(n+1)=4.070724e+001; foe(n+1)=1.048519e+002; krok(n+1)=1.961815e-005; ng(n+1)=2.367513e+003;
n=28; farx(n+1)=4.108067e+001; foe(n+1)=9.821389e+001; krok(n+1)=1.764835e-004; ng(n+1)=8.308242e+002;
n=29; farx(n+1)=3.822541e+001; foe(n+1)=9.433739e+001; krok(n+1)=1.081342e-004; ng(n+1)=8.334130e+002;
n=30; farx(n+1)=3.161145e+001; foe(n+1)=8.141759e+001; krok(n+1)=1.563831e-003; ng(n+1)=7.120961e+002;
n=31; farx(n+1)=2.711550e+001; foe(n+1)=7.644300e+001; krok(n+1)=1.499367e-003; ng(n+1)=3.006502e+003;
n=32; farx(n+1)=2.229169e+001; foe(n+1)=6.265333e+001; krok(n+1)=5.333789e-004; ng(n+1)=6.373741e+003;
n=33; farx(n+1)=2.244904e+001; foe(n+1)=5.865878e+001; krok(n+1)=1.156180e-003; ng(n+1)=1.850965e+003;
n=34; farx(n+1)=1.620103e+001; foe(n+1)=5.146619e+001; krok(n+1)=6.118871e-003; ng(n+1)=1.923835e+003;
n=35; farx(n+1)=1.600380e+001; foe(n+1)=5.062113e+001; krok(n+1)=1.821736e-004; ng(n+1)=7.710485e+002;
n=36; farx(n+1)=1.514143e+001; foe(n+1)=4.715566e+001; krok(n+1)=1.599773e-003; ng(n+1)=1.219179e+003;
n=37; farx(n+1)=1.213159e+001; foe(n+1)=4.173435e+001; krok(n+1)=2.501815e-003; ng(n+1)=1.697982e+003;
n=38; farx(n+1)=1.003564e+001; foe(n+1)=3.844119e+001; krok(n+1)=1.852313e-003; ng(n+1)=1.017897e+003;
n=39; farx(n+1)=7.114243e+000; foe(n+1)=2.834430e+001; krok(n+1)=7.342058e-003; ng(n+1)=1.782264e+003;
n=40; farx(n+1)=6.545751e+000; foe(n+1)=2.639052e+001; krok(n+1)=9.854180e-004; ng(n+1)=1.838962e+003;
n=41; farx(n+1)=6.236589e+000; foe(n+1)=2.373413e+001; krok(n+1)=5.167850e-003; ng(n+1)=6.550227e+002;
n=42; farx(n+1)=5.615487e+000; foe(n+1)=2.170500e+001; krok(n+1)=2.593399e-003; ng(n+1)=4.229814e+002;
n=43; farx(n+1)=5.269872e+000; foe(n+1)=1.940661e+001; krok(n+1)=1.390246e-002; ng(n+1)=7.539376e+002;
n=44; farx(n+1)=4.905194e+000; foe(n+1)=1.719067e+001; krok(n+1)=2.147336e-002; ng(n+1)=7.243385e+002;
n=45; farx(n+1)=4.827918e+000; foe(n+1)=1.662469e+001; krok(n+1)=1.483652e-002; ng(n+1)=9.317269e+002;
n=46; farx(n+1)=3.987737e+000; foe(n+1)=1.475654e+001; krok(n+1)=2.629130e-002; ng(n+1)=9.306983e+002;
n=47; farx(n+1)=3.837649e+000; foe(n+1)=1.430939e+001; krok(n+1)=1.023953e-002; ng(n+1)=5.683926e+002;
n=48; farx(n+1)=3.594315e+000; foe(n+1)=1.352657e+001; krok(n+1)=6.813219e-002; ng(n+1)=5.826667e+002;
n=49; farx(n+1)=3.324241e+000; foe(n+1)=1.253276e+001; krok(n+1)=4.732206e-002; ng(n+1)=3.881330e+002;
n=50; farx(n+1)=3.121517e+000; foe(n+1)=1.119910e+001; krok(n+1)=8.000730e-002; ng(n+1)=7.128484e+002;
%odnowa zmiennej metryki
n=51; farx(n+1)=3.085884e+000; foe(n+1)=1.098318e+001; krok(n+1)=3.773212e-005; ng(n+1)=2.869125e+002;
n=52; farx(n+1)=3.025136e+000; foe(n+1)=1.089812e+001; krok(n+1)=1.444886e-005; ng(n+1)=2.886772e+002;
n=53; farx(n+1)=3.005535e+000; foe(n+1)=1.084280e+001; krok(n+1)=4.403374e-005; ng(n+1)=1.187768e+002;
n=54; farx(n+1)=2.922999e+000; foe(n+1)=1.033369e+001; krok(n+1)=4.476652e-004; ng(n+1)=1.228704e+002;
n=55; farx(n+1)=2.890227e+000; foe(n+1)=9.979376e+000; krok(n+1)=6.180774e-004; ng(n+1)=8.050876e+001;
n=56; farx(n+1)=2.866014e+000; foe(n+1)=9.290385e+000; krok(n+1)=8.062699e-004; ng(n+1)=1.187686e+002;
n=57; farx(n+1)=2.717106e+000; foe(n+1)=8.801824e+000; krok(n+1)=2.739044e-003; ng(n+1)=5.255119e+002;
n=58; farx(n+1)=2.439061e+000; foe(n+1)=7.789212e+000; krok(n+1)=1.423591e-002; ng(n+1)=6.903290e+002;
n=59; farx(n+1)=2.263165e+000; foe(n+1)=6.948090e+000; krok(n+1)=5.557598e-003; ng(n+1)=4.482094e+002;
n=60; farx(n+1)=2.185779e+000; foe(n+1)=6.694958e+000; krok(n+1)=2.513970e-003; ng(n+1)=5.354218e+002;
n=61; farx(n+1)=2.082459e+000; foe(n+1)=6.358452e+000; krok(n+1)=5.819038e-003; ng(n+1)=5.788622e+002;
n=62; farx(n+1)=2.045107e+000; foe(n+1)=6.238961e+000; krok(n+1)=6.130766e-003; ng(n+1)=6.101555e+002;
n=63; farx(n+1)=1.977438e+000; foe(n+1)=5.952688e+000; krok(n+1)=1.586441e-002; ng(n+1)=7.161224e+002;
n=64; farx(n+1)=1.936997e+000; foe(n+1)=5.782940e+000; krok(n+1)=9.769926e-003; ng(n+1)=2.368416e+002;
n=65; farx(n+1)=1.914613e+000; foe(n+1)=5.651487e+000; krok(n+1)=2.251094e-002; ng(n+1)=1.624181e+002;
n=66; farx(n+1)=1.853941e+000; foe(n+1)=5.465220e+000; krok(n+1)=3.054889e-002; ng(n+1)=2.066982e+002;
n=67; farx(n+1)=1.831370e+000; foe(n+1)=5.340265e+000; krok(n+1)=2.366103e-002; ng(n+1)=1.972648e+002;
n=68; farx(n+1)=1.789441e+000; foe(n+1)=4.898250e+000; krok(n+1)=8.892157e-002; ng(n+1)=2.782014e+002;
n=69; farx(n+1)=1.722529e+000; foe(n+1)=4.628408e+000; krok(n+1)=8.000730e-002; ng(n+1)=5.425829e+002;
n=70; farx(n+1)=1.699853e+000; foe(n+1)=4.420064e+000; krok(n+1)=3.377395e-002; ng(n+1)=3.007553e+002;
n=71; farx(n+1)=1.690138e+000; foe(n+1)=4.203138e+000; krok(n+1)=5.120727e-002; ng(n+1)=1.972679e+002;
n=72; farx(n+1)=1.646924e+000; foe(n+1)=3.669619e+000; krok(n+1)=1.269153e-001; ng(n+1)=1.680119e+002;
n=73; farx(n+1)=1.680247e+000; foe(n+1)=3.429259e+000; krok(n+1)=3.192743e-002; ng(n+1)=2.028126e+002;
n=74; farx(n+1)=1.654746e+000; foe(n+1)=3.235762e+000; krok(n+1)=1.032026e-001; ng(n+1)=2.774228e+002;
n=75; farx(n+1)=1.653700e+000; foe(n+1)=3.042432e+000; krok(n+1)=4.165943e-002; ng(n+1)=3.598772e+002;
%odnowa zmiennej metryki
n=76; farx(n+1)=1.650005e+000; foe(n+1)=3.024945e+000; krok(n+1)=4.269784e-006; ng(n+1)=2.144261e+002;
n=77; farx(n+1)=1.649499e+000; foe(n+1)=3.023234e+000; krok(n+1)=1.071362e-005; ng(n+1)=4.825761e+001;
n=78; farx(n+1)=1.644639e+000; foe(n+1)=3.005675e+000; krok(n+1)=2.326282e-004; ng(n+1)=3.349916e+001;
n=79; farx(n+1)=1.645572e+000; foe(n+1)=2.927338e+000; krok(n+1)=3.018569e-004; ng(n+1)=6.788520e+001;
n=80; farx(n+1)=1.639246e+000; foe(n+1)=2.906697e+000; krok(n+1)=5.534736e-004; ng(n+1)=2.589462e+001;
n=81; farx(n+1)=1.617949e+000; foe(n+1)=2.877951e+000; krok(n+1)=3.715831e-003; ng(n+1)=2.297409e+001;
n=82; farx(n+1)=1.593945e+000; foe(n+1)=2.767447e+000; krok(n+1)=2.570124e-002; ng(n+1)=3.255085e+001;
n=83; farx(n+1)=1.592708e+000; foe(n+1)=2.702587e+000; krok(n+1)=2.883948e-003; ng(n+1)=1.070253e+002;
n=84; farx(n+1)=1.569333e+000; foe(n+1)=2.647556e+000; krok(n+1)=1.183052e-002; ng(n+1)=1.720447e+002;
n=85; farx(n+1)=1.553373e+000; foe(n+1)=2.596718e+000; krok(n+1)=1.251384e-002; ng(n+1)=2.860600e+002;
n=86; farx(n+1)=1.509010e+000; foe(n+1)=2.545730e+000; krok(n+1)=1.142218e-002; ng(n+1)=1.907623e+002;
n=87; farx(n+1)=1.368662e+000; foe(n+1)=2.405551e+000; krok(n+1)=3.707198e-002; ng(n+1)=1.642574e+002;
n=88; farx(n+1)=1.320265e+000; foe(n+1)=2.329933e+000; krok(n+1)=1.305321e-002; ng(n+1)=3.792857e+002;
n=89; farx(n+1)=1.329637e+000; foe(n+1)=2.239193e+000; krok(n+1)=8.276012e-002; ng(n+1)=2.194495e+002;
n=90; farx(n+1)=1.334389e+000; foe(n+1)=2.208650e+000; krok(n+1)=2.362755e-002; ng(n+1)=3.102731e+002;
n=91; farx(n+1)=1.342404e+000; foe(n+1)=2.164727e+000; krok(n+1)=3.002384e-002; ng(n+1)=1.920148e+002;
n=92; farx(n+1)=1.351696e+000; foe(n+1)=2.131113e+000; krok(n+1)=2.727111e-002; ng(n+1)=2.821630e+002;
n=93; farx(n+1)=1.385166e+000; foe(n+1)=2.058685e+000; krok(n+1)=9.035956e-002; ng(n+1)=1.241905e+002;
n=94; farx(n+1)=1.384373e+000; foe(n+1)=1.950693e+000; krok(n+1)=2.894475e-001; ng(n+1)=1.059749e+002;
n=95; farx(n+1)=1.395072e+000; foe(n+1)=1.910405e+000; krok(n+1)=2.876670e-002; ng(n+1)=2.608810e+002;
n=96; farx(n+1)=1.337402e+000; foe(n+1)=1.871137e+000; krok(n+1)=2.663672e-001; ng(n+1)=4.806953e+001;
n=97; farx(n+1)=1.360192e+000; foe(n+1)=1.850453e+000; krok(n+1)=1.090928e-001; ng(n+1)=1.324816e+002;
n=98; farx(n+1)=1.356725e+000; foe(n+1)=1.835975e+000; krok(n+1)=2.186494e-001; ng(n+1)=1.522291e+002;
n=99; farx(n+1)=1.307544e+000; foe(n+1)=1.806220e+000; krok(n+1)=4.228884e-001; ng(n+1)=1.717812e+002;
n=100; farx(n+1)=1.305456e+000; foe(n+1)=1.783164e+000; krok(n+1)=2.671770e-001; ng(n+1)=1.769539e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
