%uczenie predyktora oe
clear all;
n=0; farx(n+1)=4.607327e+003; foe(n+1)=4.566616e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=2.857033e+003; foe(n+1)=2.797320e+003; krok(n+1)=5.097061e-004; ng(n+1)=4.108968e+003;
n=2; farx(n+1)=1.081914e+003; foe(n+1)=1.010385e+003; krok(n+1)=1.876490e-003; ng(n+1)=2.664306e+003;
n=3; farx(n+1)=1.193395e+003; foe(n+1)=6.014646e+002; krok(n+1)=2.162683e-004; ng(n+1)=7.008737e+003;
n=4; farx(n+1)=1.554362e+003; foe(n+1)=5.411809e+002; krok(n+1)=7.068943e-004; ng(n+1)=4.083788e+003;
n=5; farx(n+1)=1.112883e+003; foe(n+1)=4.704811e+002; krok(n+1)=7.119007e-003; ng(n+1)=6.437313e+002;
n=6; farx(n+1)=7.432935e+002; foe(n+1)=4.010310e+002; krok(n+1)=2.106935e-003; ng(n+1)=1.740001e+003;
n=7; farx(n+1)=6.769409e+002; foe(n+1)=3.941722e+002; krok(n+1)=1.333319e-004; ng(n+1)=1.441702e+003;
n=8; farx(n+1)=6.169466e+002; foe(n+1)=3.840347e+002; krok(n+1)=3.323859e-004; ng(n+1)=2.833134e+003;
n=9; farx(n+1)=4.849490e+002; foe(n+1)=3.514350e+002; krok(n+1)=5.608324e-003; ng(n+1)=1.424583e+003;
n=10; farx(n+1)=3.874438e+002; foe(n+1)=3.245622e+002; krok(n+1)=4.494346e-003; ng(n+1)=1.198067e+003;
n=11; farx(n+1)=3.753902e+002; foe(n+1)=3.208617e+002; krok(n+1)=3.473809e-003; ng(n+1)=3.052079e+002;
n=12; farx(n+1)=3.255569e+002; foe(n+1)=3.070807e+002; krok(n+1)=1.603572e-002; ng(n+1)=4.648080e+002;
n=13; farx(n+1)=2.526172e+002; foe(n+1)=2.866406e+002; krok(n+1)=4.175393e-003; ng(n+1)=6.037954e+002;
n=14; farx(n+1)=2.346225e+002; foe(n+1)=2.844422e+002; krok(n+1)=9.447205e-005; ng(n+1)=6.340289e+002;
n=15; farx(n+1)=2.065041e+002; foe(n+1)=2.709327e+002; krok(n+1)=5.887869e-003; ng(n+1)=1.093866e+003;
n=16; farx(n+1)=2.000561e+002; foe(n+1)=2.687891e+002; krok(n+1)=5.823194e-004; ng(n+1)=7.484775e+002;
n=17; farx(n+1)=1.842651e+002; foe(n+1)=2.601986e+002; krok(n+1)=9.385969e-003; ng(n+1)=8.450656e+002;
n=18; farx(n+1)=1.802017e+002; foe(n+1)=2.551086e+002; krok(n+1)=4.776032e-003; ng(n+1)=1.025830e+003;
n=19; farx(n+1)=1.489828e+002; foe(n+1)=2.399203e+002; krok(n+1)=9.397462e-003; ng(n+1)=1.123701e+003;
n=20; farx(n+1)=1.156156e+002; foe(n+1)=2.067096e+002; krok(n+1)=1.830478e-003; ng(n+1)=2.889452e+003;
n=21; farx(n+1)=1.122463e+002; foe(n+1)=2.053850e+002; krok(n+1)=3.072763e-004; ng(n+1)=1.025311e+003;
n=22; farx(n+1)=1.089166e+002; foe(n+1)=2.020542e+002; krok(n+1)=4.611188e-003; ng(n+1)=2.258254e+003;
n=23; farx(n+1)=9.627265e+001; foe(n+1)=1.909479e+002; krok(n+1)=5.711090e-003; ng(n+1)=2.876063e+003;
n=24; farx(n+1)=9.044721e+001; foe(n+1)=1.806528e+002; krok(n+1)=6.256921e-003; ng(n+1)=2.170466e+003;
n=25; farx(n+1)=5.909413e+001; foe(n+1)=1.144732e+002; krok(n+1)=4.215364e-002; ng(n+1)=3.204184e+003;
%odnowa zmiennej metryki
n=26; farx(n+1)=5.843802e+001; foe(n+1)=1.126673e+002; krok(n+1)=5.005977e-006; ng(n+1)=2.391908e+003;
n=27; farx(n+1)=5.232413e+001; foe(n+1)=8.834009e+001; krok(n+1)=1.042068e-004; ng(n+1)=1.541599e+003;
n=28; farx(n+1)=5.215537e+001; foe(n+1)=8.423921e+001; krok(n+1)=2.078166e-005; ng(n+1)=5.998285e+003;
n=29; farx(n+1)=4.980731e+001; foe(n+1)=7.316376e+001; krok(n+1)=3.684136e-004; ng(n+1)=4.423659e+003;
n=30; farx(n+1)=4.524127e+001; foe(n+1)=6.099192e+001; krok(n+1)=7.632150e-003; ng(n+1)=6.166355e+003;
n=31; farx(n+1)=4.235661e+001; foe(n+1)=5.559629e+001; krok(n+1)=1.217394e-003; ng(n+1)=1.740580e+003;
n=32; farx(n+1)=4.097538e+001; foe(n+1)=5.406679e+001; krok(n+1)=5.018139e-004; ng(n+1)=1.321681e+003;
n=33; farx(n+1)=3.558438e+001; foe(n+1)=4.978313e+001; krok(n+1)=3.340601e-003; ng(n+1)=7.311161e+002;
n=34; farx(n+1)=3.107552e+001; foe(n+1)=4.387825e+001; krok(n+1)=3.880673e-003; ng(n+1)=5.140167e+002;
n=35; farx(n+1)=2.895149e+001; foe(n+1)=4.171390e+001; krok(n+1)=1.033570e-002; ng(n+1)=1.044691e+003;
n=36; farx(n+1)=2.784331e+001; foe(n+1)=4.070292e+001; krok(n+1)=4.432757e-003; ng(n+1)=8.104905e+002;
n=37; farx(n+1)=2.276095e+001; foe(n+1)=3.815813e+001; krok(n+1)=9.690117e-003; ng(n+1)=1.074625e+003;
n=38; farx(n+1)=2.117149e+001; foe(n+1)=3.466488e+001; krok(n+1)=2.369912e-002; ng(n+1)=1.934029e+003;
n=39; farx(n+1)=1.970031e+001; foe(n+1)=3.230668e+001; krok(n+1)=6.947618e-003; ng(n+1)=1.500280e+003;
n=40; farx(n+1)=1.898073e+001; foe(n+1)=2.749163e+001; krok(n+1)=2.243330e-002; ng(n+1)=4.657488e+002;
n=41; farx(n+1)=1.858300e+001; foe(n+1)=2.707799e+001; krok(n+1)=3.804775e-003; ng(n+1)=1.181108e+003;
n=42; farx(n+1)=1.730898e+001; foe(n+1)=2.454449e+001; krok(n+1)=5.414124e-003; ng(n+1)=1.591380e+003;
n=43; farx(n+1)=1.772093e+001; foe(n+1)=2.372941e+001; krok(n+1)=1.523788e-002; ng(n+1)=8.069642e+002;
n=44; farx(n+1)=1.810970e+001; foe(n+1)=2.255670e+001; krok(n+1)=6.024636e-002; ng(n+1)=4.519047e+002;
n=45; farx(n+1)=1.766130e+001; foe(n+1)=2.214582e+001; krok(n+1)=9.590335e-003; ng(n+1)=9.272389e+002;
n=46; farx(n+1)=1.310758e+001; foe(n+1)=1.987372e+001; krok(n+1)=8.057849e-002; ng(n+1)=1.436386e+003;
n=47; farx(n+1)=1.214226e+001; foe(n+1)=1.953551e+001; krok(n+1)=6.545122e-003; ng(n+1)=2.999869e+003;
n=48; farx(n+1)=1.147535e+001; foe(n+1)=1.792129e+001; krok(n+1)=7.142563e-002; ng(n+1)=9.243003e+002;
n=49; farx(n+1)=1.067444e+001; foe(n+1)=1.701263e+001; krok(n+1)=1.734832e-002; ng(n+1)=3.624913e+003;
n=50; farx(n+1)=8.107092e+000; foe(n+1)=1.445886e+001; krok(n+1)=2.317569e-001; ng(n+1)=2.352999e+003;
%odnowa zmiennej metryki
n=51; farx(n+1)=8.127541e+000; foe(n+1)=1.425206e+001; krok(n+1)=3.009992e-006; ng(n+1)=1.123902e+003;
n=52; farx(n+1)=8.384280e+000; foe(n+1)=1.377630e+001; krok(n+1)=2.067984e-005; ng(n+1)=5.925885e+002;
n=53; farx(n+1)=7.994313e+000; foe(n+1)=1.310482e+001; krok(n+1)=8.370634e-005; ng(n+1)=4.260836e+002;
n=54; farx(n+1)=7.856755e+000; foe(n+1)=1.291953e+001; krok(n+1)=1.306299e-004; ng(n+1)=1.439246e+003;
n=55; farx(n+1)=7.726038e+000; foe(n+1)=1.266679e+001; krok(n+1)=7.433745e-004; ng(n+1)=6.749985e+002;
n=56; farx(n+1)=7.322207e+000; foe(n+1)=1.215485e+001; krok(n+1)=1.427772e-003; ng(n+1)=1.602644e+003;
n=57; farx(n+1)=6.789810e+000; foe(n+1)=1.177492e+001; krok(n+1)=1.926084e-003; ng(n+1)=1.171766e+003;
n=58; farx(n+1)=6.727849e+000; foe(n+1)=1.153009e+001; krok(n+1)=3.516052e-003; ng(n+1)=1.207187e+003;
n=59; farx(n+1)=5.941920e+000; foe(n+1)=1.037115e+001; krok(n+1)=1.432736e-002; ng(n+1)=1.633620e+003;
n=60; farx(n+1)=5.684967e+000; foe(n+1)=9.955576e+000; krok(n+1)=1.093891e-003; ng(n+1)=1.467109e+003;
n=61; farx(n+1)=5.260653e+000; foe(n+1)=9.529100e+000; krok(n+1)=4.403244e-003; ng(n+1)=8.434096e+002;
n=62; farx(n+1)=5.137391e+000; foe(n+1)=9.295903e+000; krok(n+1)=2.339183e-003; ng(n+1)=2.700958e+002;
n=63; farx(n+1)=4.798013e+000; foe(n+1)=8.935929e+000; krok(n+1)=3.535818e-002; ng(n+1)=1.242262e+003;
n=64; farx(n+1)=4.741798e+000; foe(n+1)=8.786608e+000; krok(n+1)=1.012568e-002; ng(n+1)=9.845018e+002;
n=65; farx(n+1)=4.684981e+000; foe(n+1)=8.678019e+000; krok(n+1)=1.399673e-002; ng(n+1)=2.628073e+002;
n=66; farx(n+1)=4.506061e+000; foe(n+1)=8.507214e+000; krok(n+1)=6.518600e-003; ng(n+1)=8.941391e+002;
n=67; farx(n+1)=4.347735e+000; foe(n+1)=8.327561e+000; krok(n+1)=2.024365e-002; ng(n+1)=4.232638e+002;
n=68; farx(n+1)=4.239392e+000; foe(n+1)=8.209503e+000; krok(n+1)=2.025137e-002; ng(n+1)=1.008926e+003;
n=69; farx(n+1)=4.135835e+000; foe(n+1)=8.129715e+000; krok(n+1)=5.042484e-002; ng(n+1)=3.724074e+002;
n=70; farx(n+1)=4.079079e+000; foe(n+1)=7.836030e+000; krok(n+1)=1.071906e-001; ng(n+1)=3.837283e+002;
n=71; farx(n+1)=4.065218e+000; foe(n+1)=7.639168e+000; krok(n+1)=5.483245e-002; ng(n+1)=9.883936e+002;
n=72; farx(n+1)=3.945415e+000; foe(n+1)=7.199436e+000; krok(n+1)=1.701816e-001; ng(n+1)=3.482116e+002;
n=73; farx(n+1)=3.831056e+000; foe(n+1)=6.911111e+000; krok(n+1)=1.630613e-001; ng(n+1)=4.807273e+002;
n=74; farx(n+1)=3.766448e+000; foe(n+1)=6.713040e+000; krok(n+1)=4.517978e-002; ng(n+1)=1.218335e+003;
n=75; farx(n+1)=3.632602e+000; foe(n+1)=6.533089e+000; krok(n+1)=7.549232e-002; ng(n+1)=3.607740e+002;
%odnowa zmiennej metryki
n=76; farx(n+1)=3.631646e+000; foe(n+1)=6.517473e+000; krok(n+1)=1.045578e-006; ng(n+1)=5.323846e+002;
n=77; farx(n+1)=3.609687e+000; foe(n+1)=6.477020e+000; krok(n+1)=1.197415e-005; ng(n+1)=2.451097e+002;
n=78; farx(n+1)=3.597031e+000; foe(n+1)=6.381101e+000; krok(n+1)=9.874235e-005; ng(n+1)=1.327350e+002;
n=79; farx(n+1)=3.552206e+000; foe(n+1)=6.327466e+000; krok(n+1)=8.216032e-004; ng(n+1)=5.906437e+001;
n=80; farx(n+1)=3.525139e+000; foe(n+1)=6.271362e+000; krok(n+1)=3.467612e-004; ng(n+1)=1.455741e+002;
n=81; farx(n+1)=3.436445e+000; foe(n+1)=6.153881e+000; krok(n+1)=1.870456e-003; ng(n+1)=2.011409e+002;
n=82; farx(n+1)=3.419891e+000; foe(n+1)=5.988064e+000; krok(n+1)=7.144846e-003; ng(n+1)=3.413292e+002;
n=83; farx(n+1)=3.199249e+000; foe(n+1)=5.679281e+000; krok(n+1)=3.076926e-002; ng(n+1)=5.829975e+002;
n=84; farx(n+1)=3.077582e+000; foe(n+1)=5.539718e+000; krok(n+1)=1.740861e-002; ng(n+1)=8.197929e+002;
n=85; farx(n+1)=3.059480e+000; foe(n+1)=5.444086e+000; krok(n+1)=8.534063e-003; ng(n+1)=6.027987e+002;
n=86; farx(n+1)=3.079676e+000; foe(n+1)=5.352043e+000; krok(n+1)=9.173286e-003; ng(n+1)=4.346189e+002;
n=87; farx(n+1)=3.045893e+000; foe(n+1)=5.258621e+000; krok(n+1)=1.012568e-002; ng(n+1)=4.156895e+002;
n=88; farx(n+1)=3.096668e+000; foe(n+1)=5.044998e+000; krok(n+1)=9.990853e-002; ng(n+1)=7.333921e+002;
n=89; farx(n+1)=3.108479e+000; foe(n+1)=4.975765e+000; krok(n+1)=1.082825e-002; ng(n+1)=4.078080e+002;
n=90; farx(n+1)=3.010870e+000; foe(n+1)=4.866671e+000; krok(n+1)=3.841036e-002; ng(n+1)=4.598207e+002;
n=91; farx(n+1)=2.971421e+000; foe(n+1)=4.830989e+000; krok(n+1)=7.662549e-003; ng(n+1)=8.311171e+002;
n=92; farx(n+1)=2.897783e+000; foe(n+1)=4.671673e+000; krok(n+1)=1.084302e-001; ng(n+1)=3.625221e+002;
n=93; farx(n+1)=2.883222e+000; foe(n+1)=4.580569e+000; krok(n+1)=3.300845e-002; ng(n+1)=7.857294e+002;
n=94; farx(n+1)=2.861128e+000; foe(n+1)=4.498343e+000; krok(n+1)=3.790730e-002; ng(n+1)=7.971209e+001;
n=95; farx(n+1)=2.703862e+000; foe(n+1)=4.195113e+000; krok(n+1)=8.892157e-002; ng(n+1)=5.269975e+002;
n=96; farx(n+1)=2.546823e+000; foe(n+1)=4.049675e+000; krok(n+1)=1.865458e-001; ng(n+1)=1.893210e+002;
n=97; farx(n+1)=2.485008e+000; foe(n+1)=3.954019e+000; krok(n+1)=7.000904e-002; ng(n+1)=3.367085e+002;
n=98; farx(n+1)=2.299829e+000; foe(n+1)=3.756666e+000; krok(n+1)=1.380129e-001; ng(n+1)=7.317756e+002;
n=99; farx(n+1)=2.044786e+000; foe(n+1)=3.250667e+000; krok(n+1)=4.741921e-001; ng(n+1)=2.558868e+002;
n=100; farx(n+1)=1.834549e+000; foe(n+1)=2.903952e+000; krok(n+1)=6.024636e-002; ng(n+1)=7.579032e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
