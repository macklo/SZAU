%uczenie predyktora oe
clear all;
n=0; farx(n+1)=4.929202e+003; foe(n+1)=4.829374e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=3.960629e+003; foe(n+1)=3.722185e+003; krok(n+1)=3.771986e-004; ng(n+1)=4.599862e+003;
n=2; farx(n+1)=1.234154e+003; foe(n+1)=9.078714e+002; krok(n+1)=1.742611e-003; ng(n+1)=3.431807e+003;
n=3; farx(n+1)=1.377872e+003; foe(n+1)=8.342935e+002; krok(n+1)=2.390962e-004; ng(n+1)=3.058447e+003;
n=4; farx(n+1)=1.169893e+003; foe(n+1)=8.142623e+002; krok(n+1)=5.126539e-004; ng(n+1)=9.129101e+002;
n=5; farx(n+1)=6.926764e+002; foe(n+1)=6.812295e+002; krok(n+1)=4.008930e-003; ng(n+1)=1.491137e+003;
n=6; farx(n+1)=4.848700e+002; foe(n+1)=6.325344e+002; krok(n+1)=1.053016e-003; ng(n+1)=1.755183e+003;
n=7; farx(n+1)=2.545806e+002; foe(n+1)=5.109503e+002; krok(n+1)=5.993959e-004; ng(n+1)=4.529262e+003;
n=8; farx(n+1)=2.437546e+002; foe(n+1)=5.088215e+002; krok(n+1)=3.371192e-006; ng(n+1)=6.195707e+003;
n=9; farx(n+1)=2.131165e+002; foe(n+1)=5.030172e+002; krok(n+1)=1.043660e-003; ng(n+1)=7.736677e+003;
n=10; farx(n+1)=1.754610e+002; foe(n+1)=4.608988e+002; krok(n+1)=1.636169e-003; ng(n+1)=8.281168e+003;
n=11; farx(n+1)=1.277700e+002; foe(n+1)=3.319395e+002; krok(n+1)=1.688016e-003; ng(n+1)=7.431883e+003;
n=12; farx(n+1)=1.246995e+002; foe(n+1)=3.219035e+002; krok(n+1)=9.371042e-005; ng(n+1)=4.435381e+003;
n=13; farx(n+1)=1.322514e+002; foe(n+1)=2.898999e+002; krok(n+1)=4.714228e-003; ng(n+1)=2.272693e+003;
n=14; farx(n+1)=1.245192e+002; foe(n+1)=2.784979e+002; krok(n+1)=1.284363e-003; ng(n+1)=1.212889e+003;
n=15; farx(n+1)=1.246397e+002; foe(n+1)=2.704300e+002; krok(n+1)=2.117016e-003; ng(n+1)=1.209227e+003;
n=16; farx(n+1)=8.720642e+001; foe(n+1)=2.441042e+002; krok(n+1)=8.989595e-004; ng(n+1)=1.131730e+003;
n=17; farx(n+1)=5.249352e+001; foe(n+1)=1.853702e+002; krok(n+1)=2.804162e-003; ng(n+1)=3.179761e+003;
n=18; farx(n+1)=4.930210e+001; foe(n+1)=1.830867e+002; krok(n+1)=2.349064e-004; ng(n+1)=3.381716e+003;
n=19; farx(n+1)=4.856316e+001; foe(n+1)=1.812234e+002; krok(n+1)=5.840350e-004; ng(n+1)=5.304421e+003;
n=20; farx(n+1)=4.695396e+001; foe(n+1)=1.769979e+002; krok(n+1)=8.861138e-004; ng(n+1)=2.297067e+003;
n=21; farx(n+1)=4.687273e+001; foe(n+1)=1.761412e+002; krok(n+1)=1.357061e-004; ng(n+1)=4.759151e+003;
n=22; farx(n+1)=4.536841e+001; foe(n+1)=1.723288e+002; krok(n+1)=1.970836e-003; ng(n+1)=6.938371e+003;
n=23; farx(n+1)=4.463473e+001; foe(n+1)=1.552568e+002; krok(n+1)=6.390530e-003; ng(n+1)=9.353701e+003;
n=24; farx(n+1)=4.267565e+001; foe(n+1)=1.465732e+002; krok(n+1)=1.216238e-002; ng(n+1)=1.086254e+003;
n=25; farx(n+1)=4.360860e+001; foe(n+1)=1.411339e+002; krok(n+1)=3.096185e-003; ng(n+1)=4.470093e+003;
%odnowa zmiennej metryki
n=26; farx(n+1)=4.326139e+001; foe(n+1)=1.394746e+002; krok(n+1)=5.772899e-006; ng(n+1)=1.717101e+003;
n=27; farx(n+1)=3.689287e+001; foe(n+1)=1.284400e+002; krok(n+1)=3.619667e-005; ng(n+1)=1.858269e+003;
n=28; farx(n+1)=3.447199e+001; foe(n+1)=1.212637e+002; krok(n+1)=7.964429e-005; ng(n+1)=1.451160e+003;
n=29; farx(n+1)=3.339031e+001; foe(n+1)=1.150385e+002; krok(n+1)=4.302964e-004; ng(n+1)=2.393387e+003;
n=30; farx(n+1)=2.656667e+001; foe(n+1)=9.256708e+001; krok(n+1)=9.878835e-004; ng(n+1)=1.076132e+003;
n=31; farx(n+1)=2.684647e+001; foe(n+1)=8.455971e+001; krok(n+1)=8.489916e-005; ng(n+1)=2.922070e+003;
n=32; farx(n+1)=2.568723e+001; foe(n+1)=8.076776e+001; krok(n+1)=2.326282e-004; ng(n+1)=4.257135e+003;
n=33; farx(n+1)=2.337206e+001; foe(n+1)=7.460700e+001; krok(n+1)=1.846469e-003; ng(n+1)=1.831837e+003;
n=34; farx(n+1)=2.210502e+001; foe(n+1)=7.075572e+001; krok(n+1)=1.310706e-003; ng(n+1)=2.622306e+003;
n=35; farx(n+1)=1.910104e+001; foe(n+1)=6.471212e+001; krok(n+1)=2.077331e-003; ng(n+1)=3.907319e+003;
n=36; farx(n+1)=1.744803e+001; foe(n+1)=6.057540e+001; krok(n+1)=1.635770e-003; ng(n+1)=3.795275e+003;
n=37; farx(n+1)=1.724823e+001; foe(n+1)=5.744345e+001; krok(n+1)=1.019412e-003; ng(n+1)=2.495724e+003;
n=38; farx(n+1)=1.471984e+001; foe(n+1)=3.869209e+001; krok(n+1)=1.142218e-002; ng(n+1)=1.103915e+003;
n=39; farx(n+1)=1.107611e+001; foe(n+1)=3.334466e+001; krok(n+1)=1.291963e-003; ng(n+1)=1.903797e+003;
n=40; farx(n+1)=8.034292e+000; foe(n+1)=2.640242e+001; krok(n+1)=1.427772e-003; ng(n+1)=3.143551e+003;
n=41; farx(n+1)=7.432934e+000; foe(n+1)=2.322528e+001; krok(n+1)=9.824964e-004; ng(n+1)=2.283303e+003;
n=42; farx(n+1)=5.039848e+000; foe(n+1)=1.732828e+001; krok(n+1)=2.340953e-002; ng(n+1)=6.251860e+002;
n=43; farx(n+1)=4.550169e+000; foe(n+1)=1.609895e+001; krok(n+1)=5.368339e-003; ng(n+1)=4.997324e+002;
n=44; farx(n+1)=3.668527e+000; foe(n+1)=1.425500e+001; krok(n+1)=1.207035e-002; ng(n+1)=3.179903e+002;
n=45; farx(n+1)=3.087388e+000; foe(n+1)=1.305354e+001; krok(n+1)=3.625910e-003; ng(n+1)=1.062549e+003;
n=46; farx(n+1)=2.359017e+000; foe(n+1)=1.093503e+001; krok(n+1)=8.799720e-003; ng(n+1)=8.359871e+002;
n=47; farx(n+1)=2.042807e+000; foe(n+1)=9.713104e+000; krok(n+1)=4.615511e-003; ng(n+1)=4.508712e+002;
n=48; farx(n+1)=1.921604e+000; foe(n+1)=8.422644e+000; krok(n+1)=1.605804e-002; ng(n+1)=6.292201e+002;
n=49; farx(n+1)=1.809698e+000; foe(n+1)=7.688258e+000; krok(n+1)=3.281725e-002; ng(n+1)=8.742747e+002;
n=50; farx(n+1)=1.777064e+000; foe(n+1)=7.086100e+000; krok(n+1)=3.473024e-002; ng(n+1)=4.956156e+002;
%odnowa zmiennej metryki
n=51; farx(n+1)=1.725876e+000; foe(n+1)=6.630570e+000; krok(n+1)=4.359474e-006; ng(n+1)=1.118016e+003;
n=52; farx(n+1)=1.735862e+000; foe(n+1)=6.535693e+000; krok(n+1)=2.047978e-005; ng(n+1)=2.305467e+002;
n=53; farx(n+1)=1.693417e+000; foe(n+1)=6.333234e+000; krok(n+1)=2.162683e-004; ng(n+1)=9.511674e+001;
n=54; farx(n+1)=1.695431e+000; foe(n+1)=5.878768e+000; krok(n+1)=1.581535e-004; ng(n+1)=2.119691e+002;
n=55; farx(n+1)=1.645595e+000; foe(n+1)=5.625479e+000; krok(n+1)=4.031350e-004; ng(n+1)=1.079907e+002;
n=56; farx(n+1)=1.601881e+000; foe(n+1)=5.463372e+000; krok(n+1)=1.330026e-003; ng(n+1)=7.176458e+001;
n=57; farx(n+1)=1.508962e+000; foe(n+1)=5.069991e+000; krok(n+1)=5.042985e-003; ng(n+1)=1.436993e+002;
n=58; farx(n+1)=1.393691e+000; foe(n+1)=4.647757e+000; krok(n+1)=3.621201e-003; ng(n+1)=1.307478e+002;
n=59; farx(n+1)=1.301342e+000; foe(n+1)=4.369500e+000; krok(n+1)=5.172508e-003; ng(n+1)=8.539823e+001;
n=60; farx(n+1)=1.290267e+000; foe(n+1)=4.228021e+000; krok(n+1)=1.572069e-002; ng(n+1)=1.181532e+002;
n=61; farx(n+1)=1.293468e+000; foe(n+1)=4.158753e+000; krok(n+1)=6.400909e-003; ng(n+1)=3.174639e+002;
n=62; farx(n+1)=1.363923e+000; foe(n+1)=4.058069e+000; krok(n+1)=2.024365e-002; ng(n+1)=1.862761e+002;
n=63; farx(n+1)=1.400405e+000; foe(n+1)=3.838261e+000; krok(n+1)=4.382471e-002; ng(n+1)=8.887328e+001;
n=64; farx(n+1)=1.421841e+000; foe(n+1)=3.722052e+000; krok(n+1)=8.349282e-003; ng(n+1)=2.324047e+002;
n=65; farx(n+1)=1.450537e+000; foe(n+1)=3.673956e+000; krok(n+1)=4.403244e-003; ng(n+1)=2.503155e+002;
n=66; farx(n+1)=1.437210e+000; foe(n+1)=3.600899e+000; krok(n+1)=1.734832e-002; ng(n+1)=3.419710e+002;
n=67; farx(n+1)=1.376539e+000; foe(n+1)=3.489637e+000; krok(n+1)=2.439969e-002; ng(n+1)=6.672397e+001;
n=68; farx(n+1)=1.245038e+000; foe(n+1)=3.392680e+000; krok(n+1)=7.959957e-002; ng(n+1)=2.364043e+002;
n=69; farx(n+1)=1.174719e+000; foe(n+1)=3.319571e+000; krok(n+1)=1.698891e-002; ng(n+1)=3.181777e+002;
n=70; farx(n+1)=1.088704e+000; foe(n+1)=3.213998e+000; krok(n+1)=3.068686e-002; ng(n+1)=1.031561e+002;
n=71; farx(n+1)=9.826919e-001; foe(n+1)=3.072184e+000; krok(n+1)=1.059021e-002; ng(n+1)=3.276869e+002;
n=72; farx(n+1)=8.769914e-001; foe(n+1)=2.898709e+000; krok(n+1)=2.011176e-002; ng(n+1)=2.920023e+002;
n=73; farx(n+1)=8.518802e-001; foe(n+1)=2.750642e+000; krok(n+1)=8.172294e-002; ng(n+1)=5.455937e+002;
n=74; farx(n+1)=7.151551e-001; foe(n+1)=2.628896e+000; krok(n+1)=7.951813e-002; ng(n+1)=3.838166e+002;
n=75; farx(n+1)=6.811310e-001; foe(n+1)=2.590148e+000; krok(n+1)=1.281894e-002; ng(n+1)=7.348404e+002;
%odnowa zmiennej metryki
n=76; farx(n+1)=6.796547e-001; foe(n+1)=2.567560e+000; krok(n+1)=1.592539e-006; ng(n+1)=4.044145e+002;
n=77; farx(n+1)=6.784585e-001; foe(n+1)=2.552706e+000; krok(n+1)=6.137476e-006; ng(n+1)=1.933538e+002;
n=78; farx(n+1)=6.786464e-001; foe(n+1)=2.535095e+000; krok(n+1)=6.503398e-005; ng(n+1)=7.780195e+001;
n=79; farx(n+1)=6.777209e-001; foe(n+1)=2.526567e+000; krok(n+1)=4.916986e-005; ng(n+1)=5.495329e+001;
n=80; farx(n+1)=6.809252e-001; foe(n+1)=2.513007e+000; krok(n+1)=6.553529e-004; ng(n+1)=1.899012e+001;
n=81; farx(n+1)=6.916665e-001; foe(n+1)=2.479730e+000; krok(n+1)=2.583925e-003; ng(n+1)=1.912481e+001;
n=82; farx(n+1)=7.150297e-001; foe(n+1)=2.427371e+000; krok(n+1)=2.818159e-003; ng(n+1)=4.370856e+001;
n=83; farx(n+1)=7.578665e-001; foe(n+1)=2.317098e+000; krok(n+1)=5.414124e-003; ng(n+1)=1.436697e+002;
n=84; farx(n+1)=7.879863e-001; foe(n+1)=2.226169e+000; krok(n+1)=4.933247e-003; ng(n+1)=6.491067e+002;
n=85; farx(n+1)=7.883070e-001; foe(n+1)=2.197127e+000; krok(n+1)=4.563662e-003; ng(n+1)=1.377199e+002;
n=86; farx(n+1)=7.447296e-001; foe(n+1)=2.085642e+000; krok(n+1)=1.043894e-002; ng(n+1)=2.094750e+002;
n=87; farx(n+1)=7.066890e-001; foe(n+1)=2.009365e+000; krok(n+1)=1.071180e-002; ng(n+1)=2.967585e+002;
n=88; farx(n+1)=6.791722e-001; foe(n+1)=1.929070e+000; krok(n+1)=6.100588e-003; ng(n+1)=6.191220e+002;
n=89; farx(n+1)=6.474745e-001; foe(n+1)=1.875208e+000; krok(n+1)=1.095618e-002; ng(n+1)=3.888338e+002;
n=90; farx(n+1)=5.985938e-001; foe(n+1)=1.808320e+000; krok(n+1)=1.725161e-002; ng(n+1)=1.614143e+002;
n=91; farx(n+1)=5.638266e-001; foe(n+1)=1.741093e+000; krok(n+1)=3.911298e-002; ng(n+1)=1.049755e+002;
n=92; farx(n+1)=5.140872e-001; foe(n+1)=1.601505e+000; krok(n+1)=2.954351e-002; ng(n+1)=2.154995e+002;
n=93; farx(n+1)=5.075130e-001; foe(n+1)=1.572288e+000; krok(n+1)=6.023109e-003; ng(n+1)=1.848613e+002;
n=94; farx(n+1)=5.078342e-001; foe(n+1)=1.525533e+000; krok(n+1)=8.324349e-003; ng(n+1)=2.869741e+002;
n=95; farx(n+1)=5.017104e-001; foe(n+1)=1.484844e+000; krok(n+1)=3.281725e-002; ng(n+1)=3.066910e+002;
n=96; farx(n+1)=4.851172e-001; foe(n+1)=1.458755e+000; krok(n+1)=2.477353e-002; ng(n+1)=3.231907e+002;
n=97; farx(n+1)=4.700002e-001; foe(n+1)=1.410044e+000; krok(n+1)=5.382558e-002; ng(n+1)=4.134233e+002;
n=98; farx(n+1)=4.934337e-001; foe(n+1)=1.355953e+000; krok(n+1)=5.558094e-002; ng(n+1)=3.714614e+002;
n=99; farx(n+1)=4.670409e-001; foe(n+1)=1.291508e+000; krok(n+1)=7.071636e-002; ng(n+1)=2.560204e+002;
n=100; farx(n+1)=4.345614e-001; foe(n+1)=1.240342e+000; krok(n+1)=5.576355e-002; ng(n+1)=2.678482e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
