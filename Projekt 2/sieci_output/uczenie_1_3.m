%uczenie predyktora oe
clear all;
n=0; farx(n+1)=4.098790e+003; foe(n+1)=3.984375e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=3.098919e+003; foe(n+1)=2.992989e+003; krok(n+1)=5.236811e-004; ng(n+1)=1.837111e+003;
n=2; farx(n+1)=1.040106e+003; foe(n+1)=7.963896e+002; krok(n+1)=6.450159e-003; ng(n+1)=5.518764e+002;
n=3; farx(n+1)=1.039731e+003; foe(n+1)=6.902118e+002; krok(n+1)=1.085565e-004; ng(n+1)=2.499697e+003;
n=4; farx(n+1)=1.885154e+003; foe(n+1)=6.241108e+002; krok(n+1)=5.767896e-003; ng(n+1)=2.372798e+003;
n=5; farx(n+1)=1.272754e+003; foe(n+1)=5.916714e+002; krok(n+1)=1.111520e-002; ng(n+1)=9.148294e+002;
n=6; farx(n+1)=1.218788e+003; foe(n+1)=5.637362e+002; krok(n+1)=9.137743e-002; ng(n+1)=9.469475e+002;
n=7; farx(n+1)=6.577978e+002; foe(n+1)=4.927433e+002; krok(n+1)=1.008497e-001; ng(n+1)=9.388020e+002;
n=8; farx(n+1)=3.324758e+002; foe(n+1)=3.603840e+002; krok(n+1)=6.970601e-001; ng(n+1)=1.265707e+003;
n=9; farx(n+1)=2.596171e+002; foe(n+1)=3.149169e+002; krok(n+1)=5.172307e-001; ng(n+1)=6.503875e+002;
n=10; farx(n+1)=2.527671e+002; foe(n+1)=3.126951e+002; krok(n+1)=1.372747e-001; ng(n+1)=3.123640e+002;
n=11; farx(n+1)=2.456631e+002; foe(n+1)=2.987951e+002; krok(n+1)=5.752763e-001; ng(n+1)=4.469899e+002;
n=12; farx(n+1)=2.440516e+002; foe(n+1)=2.981224e+002; krok(n+1)=8.877087e-002; ng(n+1)=8.483460e+001;
n=13; farx(n+1)=5.550924e+001; foe(n+1)=2.710406e+002; krok(n+1)=4.465844e+000; ng(n+1)=1.620539e+002;
n=14; farx(n+1)=4.955701e+001; foe(n+1)=2.692855e+002; krok(n+1)=1.521910e-002; ng(n+1)=1.128161e+003;
n=15; farx(n+1)=2.279427e+001; foe(n+1)=2.212465e+002; krok(n+1)=3.806077e-001; ng(n+1)=1.533676e+003;
n=16; farx(n+1)=1.952752e+001; foe(n+1)=2.148729e+002; krok(n+1)=2.343419e-002; ng(n+1)=2.623768e+003;
n=17; farx(n+1)=2.708145e+001; foe(n+1)=1.616257e+002; krok(n+1)=3.867248e-001; ng(n+1)=2.514753e+003;
n=18; farx(n+1)=2.577852e+001; foe(n+1)=1.560507e+002; krok(n+1)=2.250273e-001; ng(n+1)=9.576614e+002;
n=19; farx(n+1)=2.272815e+001; foe(n+1)=1.490823e+002; krok(n+1)=4.674985e-002; ng(n+1)=6.701495e+002;
n=20; farx(n+1)=2.213568e+001; foe(n+1)=1.415515e+002; krok(n+1)=6.930078e-001; ng(n+1)=6.836694e+002;
n=21; farx(n+1)=2.272300e+001; foe(n+1)=1.315399e+002; krok(n+1)=5.770438e-001; ng(n+1)=5.214752e+002;
n=22; farx(n+1)=1.831399e+001; foe(n+1)=1.210692e+002; krok(n+1)=2.254461e+000; ng(n+1)=9.425654e+002;
n=23; farx(n+1)=1.688032e+001; foe(n+1)=1.193113e+002; krok(n+1)=7.101669e-001; ng(n+1)=6.970976e+002;
n=24; farx(n+1)=1.649657e+001; foe(n+1)=1.119991e+002; krok(n+1)=1.921254e+000; ng(n+1)=2.134949e+002;
n=25; farx(n+1)=1.482742e+001; foe(n+1)=1.067232e+002; krok(n+1)=4.854776e-001; ng(n+1)=7.127612e+002;
%odnowa zmiennej metryki
n=26; farx(n+1)=1.375884e+001; foe(n+1)=1.033771e+002; krok(n+1)=4.765565e-005; ng(n+1)=5.147552e+002;
n=27; farx(n+1)=1.212684e+001; foe(n+1)=1.019108e+002; krok(n+1)=2.139878e-005; ng(n+1)=5.747214e+002;
n=28; farx(n+1)=1.152980e+001; foe(n+1)=9.957838e+001; krok(n+1)=7.941269e-004; ng(n+1)=1.172770e+002;
n=29; farx(n+1)=1.122603e+001; foe(n+1)=9.825040e+001; krok(n+1)=4.261436e-004; ng(n+1)=1.701326e+002;
n=30; farx(n+1)=1.117958e+001; foe(n+1)=9.305727e+001; krok(n+1)=9.446471e-004; ng(n+1)=6.388379e+002;
n=31; farx(n+1)=1.164028e+001; foe(n+1)=9.251552e+001; krok(n+1)=1.325801e-003; ng(n+1)=1.252119e+003;
n=32; farx(n+1)=1.182997e+001; foe(n+1)=9.218897e+001; krok(n+1)=5.852382e-003; ng(n+1)=1.042923e+003;
n=33; farx(n+1)=1.054077e+001; foe(n+1)=8.855094e+001; krok(n+1)=1.020283e+000; ng(n+1)=8.464264e+002;
n=34; farx(n+1)=1.045035e+001; foe(n+1)=8.694849e+001; krok(n+1)=4.353621e-001; ng(n+1)=2.865004e+002;
n=35; farx(n+1)=1.021048e+001; foe(n+1)=8.550130e+001; krok(n+1)=9.359461e-002; ng(n+1)=4.416593e+002;
n=36; farx(n+1)=9.741671e+000; foe(n+1)=8.475851e+001; krok(n+1)=5.039997e-001; ng(n+1)=3.583727e+002;
n=37; farx(n+1)=9.974523e+000; foe(n+1)=8.351051e+001; krok(n+1)=1.569476e+000; ng(n+1)=2.124549e+002;
n=38; farx(n+1)=9.864947e+000; foe(n+1)=8.333998e+001; krok(n+1)=4.033988e-001; ng(n+1)=1.474394e+002;
n=39; farx(n+1)=9.787651e+000; foe(n+1)=8.318676e+001; krok(n+1)=5.250759e-001; ng(n+1)=2.734833e+002;
n=40; farx(n+1)=9.703297e+000; foe(n+1)=8.310197e+001; krok(n+1)=5.045340e-001; ng(n+1)=1.036309e+002;
n=41; farx(n+1)=9.752095e+000; foe(n+1)=8.305673e+001; krok(n+1)=1.334889e+000; ng(n+1)=7.854192e+001;
n=42; farx(n+1)=9.709279e+000; foe(n+1)=8.304970e+001; krok(n+1)=1.435731e+000; ng(n+1)=3.635881e+001;
n=43; farx(n+1)=9.674962e+000; foe(n+1)=8.304461e+001; krok(n+1)=1.934637e+000; ng(n+1)=2.998871e+001;
n=44; farx(n+1)=9.643818e+000; foe(n+1)=8.303766e+001; krok(n+1)=2.254461e+000; ng(n+1)=2.266059e+001;
n=45; farx(n+1)=9.624916e+000; foe(n+1)=8.303515e+001; krok(n+1)=1.896768e+000; ng(n+1)=1.507955e+001;
n=46; farx(n+1)=9.588806e+000; foe(n+1)=8.302940e+001; krok(n+1)=6.124441e+000; ng(n+1)=2.525579e+001;
n=47; farx(n+1)=9.585964e+000; foe(n+1)=8.302748e+001; krok(n+1)=1.514306e+000; ng(n+1)=3.247763e+001;
n=48; farx(n+1)=9.488165e+000; foe(n+1)=8.302430e+001; krok(n+1)=1.237519e+001; ng(n+1)=1.060523e+001;
n=49; farx(n+1)=9.346016e+000; foe(n+1)=8.301305e+001; krok(n+1)=6.939536e+000; ng(n+1)=1.101225e+001;
n=50; farx(n+1)=9.248500e+000; foe(n+1)=8.300719e+001; krok(n+1)=2.136786e+000; ng(n+1)=2.902185e+001;
%odnowa zmiennej metryki
n=51; farx(n+1)=9.250497e+000; foe(n+1)=8.300709e+001; krok(n+1)=3.163836e-006; ng(n+1)=1.121055e+001;
n=52; farx(n+1)=9.252712e+000; foe(n+1)=8.300700e+001; krok(n+1)=3.345851e-005; ng(n+1)=3.608533e+000;
n=53; farx(n+1)=9.255691e+000; foe(n+1)=8.300692e+001; krok(n+1)=6.946355e-005; ng(n+1)=2.625227e+000;
n=54; farx(n+1)=9.237203e+000; foe(n+1)=8.300669e+001; krok(n+1)=5.548179e-003; ng(n+1)=4.494918e-001;
n=55; farx(n+1)=9.227827e+000; foe(n+1)=8.300655e+001; krok(n+1)=1.089156e-002; ng(n+1)=2.819615e-001;
n=56; farx(n+1)=9.171775e+000; foe(n+1)=8.300587e+001; krok(n+1)=3.836134e-002; ng(n+1)=2.905952e-001;
n=57; farx(n+1)=9.137227e+000; foe(n+1)=8.300561e+001; krok(n+1)=4.076532e-002; ng(n+1)=1.040525e+000;
n=58; farx(n+1)=9.135156e+000; foe(n+1)=8.300561e+001; krok(n+1)=1.098329e+000; ng(n+1)=9.254275e-001;
n=59; farx(n+1)=9.134801e+000; foe(n+1)=8.300561e+001; krok(n+1)=1.045307e+000; ng(n+1)=8.663694e-002;
n=60; farx(n+1)=9.134801e+000; foe(n+1)=8.300561e+001; krok(n+1)=5.349696e-006; ng(n+1)=2.937082e-003;
n=61; farx(n+1)=9.134801e+000; foe(n+1)=8.300561e+001; krok(n+1)=2.479276e-007; ng(n+1)=2.937066e-003;
n=62; farx(n+1)=9.134801e+000; foe(n+1)=8.300561e+001; krok(n+1)=1.476376e-009; ng(n+1)=2.937066e-003;
n=63; farx(n+1)=9.134801e+000; foe(n+1)=8.300561e+001; krok(n+1)=1.527110e-009; ng(n+1)=2.937066e-003;
 % z造 kierunek w metodzie zm - odnowa 
n=64; farx(n+1)=9.134801e+000; foe(n+1)=8.300561e+001; krok(n+1)=2.969678e-006; ng(n+1)=2.937066e-003;
n=65; farx(n+1)=9.134801e+000; foe(n+1)=8.300561e+001; krok(n+1)=2.418894e-005; ng(n+1)=7.733252e-004;
n=66; farx(n+1)=9.134802e+000; foe(n+1)=8.300561e+001; krok(n+1)=2.752027e-004; ng(n+1)=3.336302e-004;
n=67; farx(n+1)=9.134803e+000; foe(n+1)=8.300561e+001; krok(n+1)=1.178095e-003; ng(n+1)=3.526683e-004;
n=68; farx(n+1)=9.134803e+000; foe(n+1)=8.300561e+001; krok(n+1)=5.446519e-009; ng(n+1)=1.939737e-004;
n=69; farx(n+1)=9.134803e+000; foe(n+1)=8.300561e+001; krok(n+1)=3.210362e-006; ng(n+1)=1.939737e-004;
n=70; farx(n+1)=9.134803e+000; foe(n+1)=8.300561e+001; krok(n+1)=8.564185e-006; ng(n+1)=1.939736e-004;
n=71; farx(n+1)=9.134803e+000; foe(n+1)=8.300561e+001; krok(n+1)=1.430061e-005; ng(n+1)=1.939708e-004;
n=72; farx(n+1)=9.134803e+000; foe(n+1)=8.300561e+001; krok(n+1)=8.060528e-008; ng(n+1)=1.939676e-004;
 % z造 kierunek w metodzie zm - odnowa 
n=73; farx(n+1)=9.134803e+000; foe(n+1)=8.300561e+001; krok(n+1)=1.760946e-013; ng(n+1)=1.939676e-004;
 % z造 kierunek w metodzie zm - odnowa 
 % z造 kierunek w metodzie zm po wykonaniu odnowy

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
