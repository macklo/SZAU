%uczenie predyktora oe
clear all;
n=0; farx(n+1)=3.932922e+003; foe(n+1)=3.994098e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=2.990938e+003; foe(n+1)=3.030934e+003; krok(n+1)=5.011162e-004; ng(n+1)=1.859463e+003;
n=2; farx(n+1)=6.361212e+002; foe(n+1)=5.738293e+002; krok(n+1)=1.183052e-002; ng(n+1)=4.546344e+002;
n=3; farx(n+1)=6.622698e+002; foe(n+1)=5.161748e+002; krok(n+1)=6.060680e-005; ng(n+1)=2.718750e+003;
n=4; farx(n+1)=8.210836e+002; foe(n+1)=4.777903e+002; krok(n+1)=3.778882e-004; ng(n+1)=2.803610e+003;
n=5; farx(n+1)=3.499718e+002; foe(n+1)=3.198716e+002; krok(n+1)=6.816078e-003; ng(n+1)=4.006146e+002;
n=6; farx(n+1)=2.973406e+002; foe(n+1)=3.045565e+002; krok(n+1)=1.002232e-003; ng(n+1)=5.861743e+002;
n=7; farx(n+1)=2.907799e+002; foe(n+1)=3.013398e+002; krok(n+1)=3.569431e-004; ng(n+1)=6.206650e+002;
n=8; farx(n+1)=2.350954e+002; foe(n+1)=2.774008e+002; krok(n+1)=1.085685e-003; ng(n+1)=8.947857e+002;
n=9; farx(n+1)=1.251427e+002; foe(n+1)=2.604159e+002; krok(n+1)=5.548179e-003; ng(n+1)=6.116317e+002;
n=10; farx(n+1)=9.568467e+001; foe(n+1)=2.518620e+002; krok(n+1)=3.942116e-003; ng(n+1)=6.741885e+002;
n=11; farx(n+1)=8.342408e+001; foe(n+1)=2.474921e+002; krok(n+1)=5.478088e-003; ng(n+1)=9.121221e+002;
n=12; farx(n+1)=7.444272e+001; foe(n+1)=2.357483e+002; krok(n+1)=2.298909e-003; ng(n+1)=1.732332e+003;
n=13; farx(n+1)=7.629702e+001; foe(n+1)=2.328003e+002; krok(n+1)=2.920175e-004; ng(n+1)=3.381108e+003;
n=14; farx(n+1)=7.704934e+001; foe(n+1)=2.308080e+002; krok(n+1)=1.345435e-003; ng(n+1)=2.856708e+003;
n=15; farx(n+1)=7.914624e+001; foe(n+1)=2.288450e+002; krok(n+1)=2.501815e-003; ng(n+1)=2.478662e+003;
n=16; farx(n+1)=7.456777e+001; foe(n+1)=2.254363e+002; krok(n+1)=1.000726e-002; ng(n+1)=3.772445e+003;
n=17; farx(n+1)=7.275632e+001; foe(n+1)=2.229829e+002; krok(n+1)=1.073668e-002; ng(n+1)=4.177215e+003;
n=18; farx(n+1)=7.661802e+001; foe(n+1)=1.561365e+002; krok(n+1)=4.322425e-001; ng(n+1)=4.703344e+003;
n=19; farx(n+1)=6.140289e+001; foe(n+1)=1.229545e+002; krok(n+1)=3.360874e-002; ng(n+1)=1.982156e+003;
n=20; farx(n+1)=5.821211e+001; foe(n+1)=8.614133e+001; krok(n+1)=3.500452e-002; ng(n+1)=4.540815e+003;
n=21; farx(n+1)=6.084284e+001; foe(n+1)=7.941838e+001; krok(n+1)=1.012183e-002; ng(n+1)=5.177495e+003;
n=22; farx(n+1)=5.530239e+001; foe(n+1)=7.207500e+001; krok(n+1)=7.887873e-002; ng(n+1)=2.696972e+003;
n=23; farx(n+1)=4.373082e+001; foe(n+1)=5.804329e+001; krok(n+1)=4.372988e-001; ng(n+1)=1.619699e+003;
n=24; farx(n+1)=3.000410e+001; foe(n+1)=4.777456e+001; krok(n+1)=5.249576e-001; ng(n+1)=9.611575e+002;
n=25; farx(n+1)=2.731351e+001; foe(n+1)=4.362090e+001; krok(n+1)=4.128102e-001; ng(n+1)=2.102630e+003;
%odnowa zmiennej metryki
n=26; farx(n+1)=2.753945e+001; foe(n+1)=4.318767e+001; krok(n+1)=1.044207e-005; ng(n+1)=5.414819e+002;
n=27; farx(n+1)=2.732201e+001; foe(n+1)=4.230000e+001; krok(n+1)=1.395478e-005; ng(n+1)=8.918547e+002;
n=28; farx(n+1)=2.708374e+001; foe(n+1)=4.110971e+001; krok(n+1)=6.272673e-005; ng(n+1)=5.050808e+002;
n=29; farx(n+1)=2.680510e+001; foe(n+1)=4.054839e+001; krok(n+1)=2.383591e-004; ng(n+1)=1.843065e+002;
n=30; farx(n+1)=2.716700e+001; foe(n+1)=3.942186e+001; krok(n+1)=7.971656e-004; ng(n+1)=2.423938e+002;
n=31; farx(n+1)=2.405343e+001; foe(n+1)=3.700884e+001; krok(n+1)=3.792736e-003; ng(n+1)=1.963379e+002;
n=32; farx(n+1)=2.056207e+001; foe(n+1)=3.364088e+001; krok(n+1)=3.141811e-003; ng(n+1)=4.274453e+002;
n=33; farx(n+1)=1.817217e+001; foe(n+1)=3.097880e+001; krok(n+1)=1.605804e-002; ng(n+1)=1.489366e+003;
n=34; farx(n+1)=1.688642e+001; foe(n+1)=2.951908e+001; krok(n+1)=4.221744e-003; ng(n+1)=1.183832e+003;
n=35; farx(n+1)=1.527320e+001; foe(n+1)=2.782614e+001; krok(n+1)=5.445782e-003; ng(n+1)=7.910904e+002;
n=36; farx(n+1)=1.363354e+001; foe(n+1)=2.643657e+001; krok(n+1)=8.494456e-003; ng(n+1)=1.119458e+003;
n=37; farx(n+1)=1.131544e+001; foe(n+1)=2.477598e+001; krok(n+1)=1.220118e-002; ng(n+1)=2.251308e+003;
n=38; farx(n+1)=1.048968e+001; foe(n+1)=2.363206e+001; krok(n+1)=1.034736e-002; ng(n+1)=1.652591e+003;
n=39; farx(n+1)=8.126959e+000; foe(n+1)=2.168018e+001; krok(n+1)=7.406706e-002; ng(n+1)=1.745974e+003;
n=40; farx(n+1)=5.001027e+000; foe(n+1)=1.723177e+001; krok(n+1)=1.664795e-002; ng(n+1)=3.641854e+003;
n=41; farx(n+1)=2.716584e+000; foe(n+1)=1.248700e+001; krok(n+1)=4.785778e-002; ng(n+1)=4.232589e+003;
n=42; farx(n+1)=2.763100e+000; foe(n+1)=9.595277e+000; krok(n+1)=5.281623e-001; ng(n+1)=2.940378e+003;
n=43; farx(n+1)=2.363668e+000; foe(n+1)=7.717124e+000; krok(n+1)=8.970072e-001; ng(n+1)=1.325606e+003;
n=44; farx(n+1)=2.358389e+000; foe(n+1)=7.190160e+000; krok(n+1)=2.906512e-001; ng(n+1)=2.496602e+002;
n=45; farx(n+1)=2.397992e+000; foe(n+1)=6.531346e+000; krok(n+1)=2.991387e-001; ng(n+1)=2.747859e+002;
n=46; farx(n+1)=2.382853e+000; foe(n+1)=6.147061e+000; krok(n+1)=1.926134e-001; ng(n+1)=3.590629e+002;
n=47; farx(n+1)=2.290390e+000; foe(n+1)=5.863196e+000; krok(n+1)=5.045340e-001; ng(n+1)=3.760008e+002;
n=48; farx(n+1)=2.174083e+000; foe(n+1)=5.637685e+000; krok(n+1)=8.457767e-001; ng(n+1)=4.976024e+002;
n=49; farx(n+1)=2.025333e+000; foe(n+1)=5.368546e+000; krok(n+1)=1.321671e+000; ng(n+1)=1.796705e+002;
n=50; farx(n+1)=1.790564e+000; foe(n+1)=5.081488e+000; krok(n+1)=9.471081e-001; ng(n+1)=6.288309e+001;
%odnowa zmiennej metryki
n=51; farx(n+1)=1.785671e+000; foe(n+1)=5.010169e+000; krok(n+1)=1.873474e-006; ng(n+1)=6.923965e+002;
n=52; farx(n+1)=1.779609e+000; foe(n+1)=4.978291e+000; krok(n+1)=1.720017e-005; ng(n+1)=1.541584e+002;
n=53; farx(n+1)=1.771526e+000; foe(n+1)=4.965317e+000; krok(n+1)=3.502676e-005; ng(n+1)=6.205526e+001;
n=54; farx(n+1)=1.742981e+000; foe(n+1)=4.920891e+000; krok(n+1)=5.162212e-005; ng(n+1)=9.498025e+001;
n=55; farx(n+1)=1.667144e+000; foe(n+1)=4.744538e+000; krok(n+1)=6.854056e-003; ng(n+1)=1.948707e+001;
n=56; farx(n+1)=1.658837e+000; foe(n+1)=4.685286e+000; krok(n+1)=2.855545e-003; ng(n+1)=1.374289e+002;
n=57; farx(n+1)=1.642823e+000; foe(n+1)=4.626486e+000; krok(n+1)=2.162140e-003; ng(n+1)=2.247206e+002;
n=58; farx(n+1)=1.637856e+000; foe(n+1)=4.530896e+000; krok(n+1)=7.088910e-003; ng(n+1)=2.781200e+002;
n=59; farx(n+1)=1.600794e+000; foe(n+1)=4.369546e+000; krok(n+1)=3.096569e-002; ng(n+1)=2.830728e+002;
n=60; farx(n+1)=1.544646e+000; foe(n+1)=4.272163e+000; krok(n+1)=1.881038e-002; ng(n+1)=3.945573e+002;
n=61; farx(n+1)=1.508673e+000; foe(n+1)=4.170069e+000; krok(n+1)=3.805310e-002; ng(n+1)=3.231416e+002;
n=62; farx(n+1)=1.450274e+000; foe(n+1)=3.883389e+000; krok(n+1)=6.105720e-002; ng(n+1)=4.542349e+002;
n=63; farx(n+1)=1.501599e+000; foe(n+1)=3.663728e+000; krok(n+1)=8.085176e-003; ng(n+1)=7.602040e+002;
n=64; farx(n+1)=1.480741e+000; foe(n+1)=3.613569e+000; krok(n+1)=2.017194e-002; ng(n+1)=4.384766e+002;
n=65; farx(n+1)=1.282736e+000; foe(n+1)=3.373015e+000; krok(n+1)=1.044603e-001; ng(n+1)=6.820354e+002;
n=66; farx(n+1)=1.214727e+000; foe(n+1)=3.207438e+000; krok(n+1)=3.355407e-001; ng(n+1)=7.077856e+002;
n=67; farx(n+1)=1.259191e+000; foe(n+1)=3.151687e+000; krok(n+1)=2.818076e-001; ng(n+1)=1.554982e+002;
n=68; farx(n+1)=1.279981e+000; foe(n+1)=3.100538e+000; krok(n+1)=6.954939e-001; ng(n+1)=1.577088e+002;
n=69; farx(n+1)=1.256283e+000; foe(n+1)=3.050268e+000; krok(n+1)=5.989693e-001; ng(n+1)=6.422139e+001;
n=70; farx(n+1)=1.271018e+000; foe(n+1)=3.002529e+000; krok(n+1)=1.307567e+000; ng(n+1)=6.957536e+001;
n=71; farx(n+1)=1.266760e+000; foe(n+1)=2.964461e+000; krok(n+1)=1.285312e+000; ng(n+1)=1.855832e+002;
n=72; farx(n+1)=1.269404e+000; foe(n+1)=2.947536e+000; krok(n+1)=8.812124e-001; ng(n+1)=1.096171e+002;
n=73; farx(n+1)=1.299251e+000; foe(n+1)=2.938873e+000; krok(n+1)=7.926233e-001; ng(n+1)=7.480283e+001;
n=74; farx(n+1)=1.323948e+000; foe(n+1)=2.932457e+000; krok(n+1)=1.120145e+000; ng(n+1)=8.470353e+001;
n=75; farx(n+1)=1.335256e+000; foe(n+1)=2.924725e+000; krok(n+1)=1.090364e+000; ng(n+1)=1.264413e+001;
%odnowa zmiennej metryki
n=76; farx(n+1)=1.335485e+000; foe(n+1)=2.923536e+000; krok(n+1)=2.794872e-006; ng(n+1)=6.219550e+001;
n=77; farx(n+1)=1.334690e+000; foe(n+1)=2.922064e+000; krok(n+1)=9.572367e-006; ng(n+1)=4.054414e+001;
n=78; farx(n+1)=1.334131e+000; foe(n+1)=2.921445e+000; krok(n+1)=1.240823e-005; ng(n+1)=2.587729e+001;
n=79; farx(n+1)=1.336870e+000; foe(n+1)=2.919634e+000; krok(n+1)=5.333277e-004; ng(n+1)=6.749138e+000;
n=80; farx(n+1)=1.328479e+000; foe(n+1)=2.915141e+000; krok(n+1)=2.407737e-003; ng(n+1)=5.212266e+000;
n=81; farx(n+1)=1.326511e+000; foe(n+1)=2.903589e+000; krok(n+1)=5.711090e-003; ng(n+1)=6.728306e+000;
n=82; farx(n+1)=1.308198e+000; foe(n+1)=2.892623e+000; krok(n+1)=6.518600e-003; ng(n+1)=4.001557e+001;
n=83; farx(n+1)=1.284262e+000; foe(n+1)=2.880469e+000; krok(n+1)=2.508493e-002; ng(n+1)=9.262671e+001;
n=84; farx(n+1)=1.287720e+000; foe(n+1)=2.878281e+000; krok(n+1)=5.828795e-003; ng(n+1)=9.167583e+001;
n=85; farx(n+1)=1.300748e+000; foe(n+1)=2.872789e+000; krok(n+1)=5.801457e-002; ng(n+1)=1.112393e+002;
n=86; farx(n+1)=1.275999e+000; foe(n+1)=2.862753e+000; krok(n+1)=9.513510e-002; ng(n+1)=1.408349e+002;
n=87; farx(n+1)=1.240326e+000; foe(n+1)=2.844705e+000; krok(n+1)=4.000365e-002; ng(n+1)=1.659579e+002;
n=88; farx(n+1)=1.241514e+000; foe(n+1)=2.839710e+000; krok(n+1)=1.496365e-002; ng(n+1)=1.215464e+002;
n=89; farx(n+1)=1.242109e+000; foe(n+1)=2.833554e+000; krok(n+1)=9.004374e-002; ng(n+1)=1.502905e+002;
n=90; farx(n+1)=1.264869e+000; foe(n+1)=2.820498e+000; krok(n+1)=1.015974e-001; ng(n+1)=1.013321e+002;
n=91; farx(n+1)=1.278208e+000; foe(n+1)=2.792699e+000; krok(n+1)=5.921069e-001; ng(n+1)=9.516929e+001;
n=92; farx(n+1)=1.272301e+000; foe(n+1)=2.775206e+000; krok(n+1)=9.001093e-001; ng(n+1)=1.134122e+002;
n=93; farx(n+1)=1.255152e+000; foe(n+1)=2.760920e+000; krok(n+1)=5.872046e-001; ng(n+1)=1.219340e+002;
n=94; farx(n+1)=1.238668e+000; foe(n+1)=2.744818e+000; krok(n+1)=5.045340e-001; ng(n+1)=1.464062e+002;
n=95; farx(n+1)=1.226502e+000; foe(n+1)=2.730589e+000; krok(n+1)=1.296088e+000; ng(n+1)=8.886520e+001;
n=96; farx(n+1)=1.236336e+000; foe(n+1)=2.720300e+000; krok(n+1)=8.771846e-001; ng(n+1)=8.177580e+001;
n=97; farx(n+1)=1.246539e+000; foe(n+1)=2.711004e+000; krok(n+1)=7.825000e-001; ng(n+1)=8.541941e+001;
n=98; farx(n+1)=1.248076e+000; foe(n+1)=2.695368e+000; krok(n+1)=7.927530e-001; ng(n+1)=3.019458e+001;
n=99; farx(n+1)=1.243241e+000; foe(n+1)=2.679813e+000; krok(n+1)=9.001093e-001; ng(n+1)=5.995421e+001;
n=100; farx(n+1)=1.251663e+000; foe(n+1)=2.638640e+000; krok(n+1)=6.151726e-001; ng(n+1)=1.783793e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
