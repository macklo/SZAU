%uczenie predyktora oe
clear all;
n=0; farx(n+1)=4.051380e+003; foe(n+1)=4.059206e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=3.006808e+003; foe(n+1)=3.016126e+003; krok(n+1)=5.057541e-004; ng(n+1)=2.221872e+003;
n=2; farx(n+1)=7.425741e+002; foe(n+1)=7.268082e+002; krok(n+1)=8.516524e-003; ng(n+1)=4.480942e+002;
n=3; farx(n+1)=7.563356e+002; foe(n+1)=6.674883e+002; krok(n+1)=4.341873e-005; ng(n+1)=3.185984e+003;
n=4; farx(n+1)=1.472379e+003; foe(n+1)=5.508341e+002; krok(n+1)=3.992263e-003; ng(n+1)=3.461164e+003;
n=5; farx(n+1)=1.225450e+003; foe(n+1)=5.102401e+002; krok(n+1)=2.684169e-003; ng(n+1)=1.010126e+003;
n=6; farx(n+1)=7.260262e+002; foe(n+1)=4.518214e+002; krok(n+1)=3.197692e-003; ng(n+1)=6.146929e+002;
n=7; farx(n+1)=5.950256e+002; foe(n+1)=4.375730e+002; krok(n+1)=2.027773e-003; ng(n+1)=6.617752e+002;
n=8; farx(n+1)=4.752593e+002; foe(n+1)=3.934996e+002; krok(n+1)=6.130766e-003; ng(n+1)=6.715886e+002;
n=9; farx(n+1)=4.248238e+002; foe(n+1)=3.561539e+002; krok(n+1)=3.212398e-002; ng(n+1)=9.973477e+002;
n=10; farx(n+1)=4.245477e+002; foe(n+1)=3.560825e+002; krok(n+1)=1.471428e-004; ng(n+1)=5.773506e+002;
n=11; farx(n+1)=4.109246e+002; foe(n+1)=3.527908e+002; krok(n+1)=3.595838e-003; ng(n+1)=8.120840e+002;
n=12; farx(n+1)=3.341694e+002; foe(n+1)=3.347895e+002; krok(n+1)=1.420161e-002; ng(n+1)=2.314645e+003;
n=13; farx(n+1)=3.395352e+002; foe(n+1)=3.329432e+002; krok(n+1)=2.097129e-002; ng(n+1)=1.464498e+003;
n=14; farx(n+1)=2.548651e+002; foe(n+1)=3.043765e+002; krok(n+1)=1.565000e+000; ng(n+1)=3.451756e+002;
n=15; farx(n+1)=2.158623e+002; foe(n+1)=2.907479e+002; krok(n+1)=3.288994e-001; ng(n+1)=7.407086e+002;
n=16; farx(n+1)=1.558120e+002; foe(n+1)=2.595599e+002; krok(n+1)=3.589369e-001; ng(n+1)=1.424053e+003;
n=17; farx(n+1)=1.248782e+002; foe(n+1)=2.420773e+002; krok(n+1)=1.827549e-001; ng(n+1)=1.762715e+003;
n=18; farx(n+1)=1.193246e+002; foe(n+1)=2.297946e+002; krok(n+1)=1.752988e-001; ng(n+1)=1.265214e+003;
n=19; farx(n+1)=1.077998e+002; foe(n+1)=2.243126e+002; krok(n+1)=3.380830e-001; ng(n+1)=4.118219e+002;
n=20; farx(n+1)=3.583635e+001; foe(n+1)=1.440006e+002; krok(n+1)=9.282331e-001; ng(n+1)=6.168391e+002;
n=21; farx(n+1)=3.115460e+001; foe(n+1)=1.383300e+002; krok(n+1)=1.569333e-001; ng(n+1)=1.331685e+003;
n=22; farx(n+1)=2.846027e+001; foe(n+1)=1.331545e+002; krok(n+1)=5.623415e-002; ng(n+1)=1.207612e+003;
n=23; farx(n+1)=2.231867e+001; foe(n+1)=1.227929e+002; krok(n+1)=4.837349e-001; ng(n+1)=1.947533e+003;
n=24; farx(n+1)=2.185448e+001; foe(n+1)=1.102478e+002; krok(n+1)=6.241834e-001; ng(n+1)=7.118580e+002;
n=25; farx(n+1)=1.594439e+001; foe(n+1)=1.032497e+002; krok(n+1)=3.404866e-001; ng(n+1)=1.337151e+003;
%odnowa zmiennej metryki
n=26; farx(n+1)=1.448299e+001; foe(n+1)=9.958859e+001; krok(n+1)=9.564320e-006; ng(n+1)=1.472822e+003;
n=27; farx(n+1)=1.437026e+001; foe(n+1)=9.847828e+001; krok(n+1)=1.062896e-004; ng(n+1)=2.159460e+002;
n=28; farx(n+1)=1.327161e+001; foe(n+1)=9.722482e+001; krok(n+1)=6.263953e-005; ng(n+1)=3.685043e+002;
n=29; farx(n+1)=1.325949e+001; foe(n+1)=9.260212e+001; krok(n+1)=2.314595e-003; ng(n+1)=1.973117e+002;
n=30; farx(n+1)=1.258615e+001; foe(n+1)=9.086327e+001; krok(n+1)=9.016309e-003; ng(n+1)=6.581647e+002;
n=31; farx(n+1)=1.177344e+001; foe(n+1)=8.998966e+001; krok(n+1)=3.460293e-003; ng(n+1)=4.582362e+002;
n=32; farx(n+1)=1.145983e+001; foe(n+1)=8.941418e+001; krok(n+1)=4.191618e-003; ng(n+1)=3.221139e+002;
n=33; farx(n+1)=1.089256e+001; foe(n+1)=8.785688e+001; krok(n+1)=6.223487e-003; ng(n+1)=3.975673e+002;
n=34; farx(n+1)=1.015224e+001; foe(n+1)=8.749453e+001; krok(n+1)=4.795168e-003; ng(n+1)=4.033412e+002;
n=35; farx(n+1)=8.020340e+000; foe(n+1)=8.597289e+001; krok(n+1)=1.684199e-002; ng(n+1)=9.977639e+001;
n=36; farx(n+1)=7.700245e+000; foe(n+1)=8.545397e+001; krok(n+1)=6.349693e-002; ng(n+1)=2.236907e+002;
n=37; farx(n+1)=7.712146e+000; foe(n+1)=8.457977e+001; krok(n+1)=2.502884e-001; ng(n+1)=4.278080e+002;
n=38; farx(n+1)=8.342916e+000; foe(n+1)=8.281478e+001; krok(n+1)=2.134155e-001; ng(n+1)=4.446867e+002;
n=39; farx(n+1)=8.850315e+000; foe(n+1)=8.223028e+001; krok(n+1)=4.787134e-001; ng(n+1)=3.574200e+002;
n=40; farx(n+1)=9.196405e+000; foe(n+1)=8.182001e+001; krok(n+1)=3.202323e-001; ng(n+1)=2.885254e+002;
n=41; farx(n+1)=1.008638e+001; foe(n+1)=8.050667e+001; krok(n+1)=1.174409e+000; ng(n+1)=6.933188e+002;
n=42; farx(n+1)=9.526704e+000; foe(n+1)=7.838945e+001; krok(n+1)=4.936156e-001; ng(n+1)=1.144481e+003;
n=43; farx(n+1)=8.715385e+000; foe(n+1)=7.732152e+001; krok(n+1)=9.373676e-002; ng(n+1)=2.412562e+003;
n=44; farx(n+1)=7.147551e+000; foe(n+1)=7.216132e+001; krok(n+1)=2.002215e-001; ng(n+1)=3.525546e+003;
n=45; farx(n+1)=4.973271e+000; foe(n+1)=6.781466e+001; krok(n+1)=8.430727e-002; ng(n+1)=4.169561e+003;
n=46; farx(n+1)=4.444650e+000; foe(n+1)=6.442322e+001; krok(n+1)=1.600146e-001; ng(n+1)=4.059092e+003;
n=47; farx(n+1)=4.186443e+000; foe(n+1)=6.237382e+001; krok(n+1)=6.918848e-002; ng(n+1)=3.049118e+003;
n=48; farx(n+1)=3.835116e+000; foe(n+1)=6.162407e+001; krok(n+1)=1.254000e-001; ng(n+1)=1.364777e+003;
n=49; farx(n+1)=3.597223e+000; foe(n+1)=6.116072e+001; krok(n+1)=1.480267e-001; ng(n+1)=7.896560e+002;
n=50; farx(n+1)=3.523888e+000; foe(n+1)=6.077313e+001; krok(n+1)=3.169310e-001; ng(n+1)=9.315899e+002;
%odnowa zmiennej metryki
n=51; farx(n+1)=3.515864e+000; foe(n+1)=6.074226e+001; krok(n+1)=4.613351e-007; ng(n+1)=7.137568e+002;
n=52; farx(n+1)=3.529820e+000; foe(n+1)=6.071375e+001; krok(n+1)=7.265431e-006; ng(n+1)=1.569168e+002;
n=53; farx(n+1)=3.597100e+000; foe(n+1)=5.741575e+001; krok(n+1)=6.727176e-004; ng(n+1)=1.808165e+002;
n=54; farx(n+1)=3.635641e+000; foe(n+1)=5.591123e+001; krok(n+1)=7.980756e-005; ng(n+1)=6.591577e+002;
n=55; farx(n+1)=3.684100e+000; foe(n+1)=5.478636e+001; krok(n+1)=7.632755e-005; ng(n+1)=8.580111e+002;
n=56; farx(n+1)=3.715429e+000; foe(n+1)=5.132451e+001; krok(n+1)=3.096691e-003; ng(n+1)=1.342955e+003;
n=57; farx(n+1)=3.674725e+000; foe(n+1)=5.066692e+001; krok(n+1)=4.175751e-004; ng(n+1)=3.256364e+003;
n=58; farx(n+1)=3.535471e+000; foe(n+1)=4.866636e+001; krok(n+1)=3.625910e-003; ng(n+1)=4.054100e+003;
n=59; farx(n+1)=3.525121e+000; foe(n+1)=4.810241e+001; krok(n+1)=3.475615e-003; ng(n+1)=6.424455e+003;
n=60; farx(n+1)=3.392669e+000; foe(n+1)=4.723020e+001; krok(n+1)=2.991958e-002; ng(n+1)=5.452036e+003;
n=61; farx(n+1)=3.393387e+000; foe(n+1)=4.653476e+001; krok(n+1)=6.669234e-003; ng(n+1)=4.964087e+003;
n=62; farx(n+1)=3.767978e+000; foe(n+1)=3.971654e+001; krok(n+1)=8.877087e-002; ng(n+1)=3.558788e+003;
n=63; farx(n+1)=3.857178e+000; foe(n+1)=3.847439e+001; krok(n+1)=6.852302e-002; ng(n+1)=4.363360e+003;
n=64; farx(n+1)=3.650631e+000; foe(n+1)=3.479356e+001; krok(n+1)=1.553141e-001; ng(n+1)=5.179776e+003;
n=65; farx(n+1)=3.827542e+000; foe(n+1)=3.239499e+001; krok(n+1)=2.349459e-001; ng(n+1)=1.795517e+003;
n=66; farx(n+1)=3.772162e+000; foe(n+1)=3.060614e+001; krok(n+1)=4.819709e-001; ng(n+1)=1.168241e+003;
n=67; farx(n+1)=3.740589e+000; foe(n+1)=2.944571e+001; krok(n+1)=5.821767e-001; ng(n+1)=2.458569e+003;
n=68; farx(n+1)=3.721839e+000; foe(n+1)=2.916428e+001; krok(n+1)=1.694093e-001; ng(n+1)=2.023040e+003;
n=69; farx(n+1)=3.693451e+000; foe(n+1)=2.884205e+001; krok(n+1)=5.422916e-001; ng(n+1)=1.588910e+003;
n=70; farx(n+1)=3.684293e+000; foe(n+1)=2.878183e+001; krok(n+1)=3.404866e-001; ng(n+1)=8.395174e+002;
n=71; farx(n+1)=3.676969e+000; foe(n+1)=2.873713e+001; krok(n+1)=3.550835e-001; ng(n+1)=4.394799e+002;
n=72; farx(n+1)=3.659786e+000; foe(n+1)=2.866086e+001; krok(n+1)=1.497514e+000; ng(n+1)=1.566940e+002;
n=73; farx(n+1)=3.240152e+000; foe(n+1)=2.623357e+001; krok(n+1)=3.414648e+000; ng(n+1)=1.338519e+003;
n=74; farx(n+1)=3.223087e+000; foe(n+1)=2.621115e+001; krok(n+1)=1.696688e-002; ng(n+1)=2.440049e+003;
n=75; farx(n+1)=3.081844e+000; foe(n+1)=2.438858e+001; krok(n+1)=1.546899e+000; ng(n+1)=2.377673e+003;
%odnowa zmiennej metryki
n=76; farx(n+1)=3.081762e+000; foe(n+1)=2.356780e+001; krok(n+1)=6.783550e-008; ng(n+1)=8.838236e+003;
n=77; farx(n+1)=3.080557e+000; foe(n+1)=2.331322e+001; krok(n+1)=3.276595e-006; ng(n+1)=7.686619e+002;
n=78; farx(n+1)=3.079791e+000; foe(n+1)=2.316830e+001; krok(n+1)=7.046893e-007; ng(n+1)=1.286395e+003;
n=79; farx(n+1)=3.073613e+000; foe(n+1)=2.306109e+001; krok(n+1)=4.789661e-005; ng(n+1)=4.085330e+002;
n=80; farx(n+1)=3.079686e+000; foe(n+1)=2.271724e+001; krok(n+1)=1.433605e-004; ng(n+1)=4.528272e+002;
n=81; farx(n+1)=3.084230e+000; foe(n+1)=2.238257e+001; krok(n+1)=8.500296e-004; ng(n+1)=2.680668e+002;
n=82; farx(n+1)=3.106350e+000; foe(n+1)=2.208479e+001; krok(n+1)=1.310706e-003; ng(n+1)=8.579942e+002;
n=83; farx(n+1)=3.105409e+000; foe(n+1)=2.203407e+001; krok(n+1)=3.726829e-003; ng(n+1)=2.225721e+003;
n=84; farx(n+1)=3.125365e+000; foe(n+1)=2.201398e+001; krok(n+1)=1.942128e-003; ng(n+1)=2.328437e+003;
n=85; farx(n+1)=3.176780e+000; foe(n+1)=2.130988e+001; krok(n+1)=7.549232e-002; ng(n+1)=2.435494e+003;
n=86; farx(n+1)=3.175633e+000; foe(n+1)=2.117918e+001; krok(n+1)=1.303603e-003; ng(n+1)=5.542507e+003;
n=87; farx(n+1)=3.165498e+000; foe(n+1)=2.113710e+001; krok(n+1)=6.192369e-003; ng(n+1)=3.758731e+003;
n=88; farx(n+1)=3.133585e+000; foe(n+1)=2.088577e+001; krok(n+1)=8.892157e-002; ng(n+1)=3.913217e+003;
n=89; farx(n+1)=3.154682e+000; foe(n+1)=2.032019e+001; krok(n+1)=4.764226e-001; ng(n+1)=3.855430e+003;
n=90; farx(n+1)=3.127408e+000; foe(n+1)=1.985799e+001; krok(n+1)=7.966063e-001; ng(n+1)=5.866726e+002;
n=91; farx(n+1)=3.101284e+000; foe(n+1)=1.932311e+001; krok(n+1)=1.119298e+000; ng(n+1)=2.316339e+003;
n=92; farx(n+1)=3.185345e+000; foe(n+1)=1.891347e+001; krok(n+1)=1.002692e+000; ng(n+1)=1.933450e+003;
n=93; farx(n+1)=3.206594e+000; foe(n+1)=1.871363e+001; krok(n+1)=3.870680e-001; ng(n+1)=2.905404e+003;
n=94; farx(n+1)=3.228297e+000; foe(n+1)=1.845747e+001; krok(n+1)=3.141433e-001; ng(n+1)=2.065834e+003;
n=95; farx(n+1)=3.208785e+000; foe(n+1)=1.823869e+001; krok(n+1)=4.112198e-001; ng(n+1)=2.102197e+003;
n=96; farx(n+1)=3.163061e+000; foe(n+1)=1.801532e+001; krok(n+1)=1.447720e+000; ng(n+1)=1.474181e+003;
n=97; farx(n+1)=3.195670e+000; foe(n+1)=1.779857e+001; krok(n+1)=1.223081e+000; ng(n+1)=1.387273e+003;
n=98; farx(n+1)=3.224224e+000; foe(n+1)=1.766631e+001; krok(n+1)=2.515310e-001; ng(n+1)=1.917884e+003;
n=99; farx(n+1)=3.246810e+000; foe(n+1)=1.750284e+001; krok(n+1)=4.442530e-001; ng(n+1)=1.709047e+003;
n=100; farx(n+1)=3.226904e+000; foe(n+1)=1.736756e+001; krok(n+1)=1.477307e+000; ng(n+1)=7.995669e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
