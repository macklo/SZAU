%uczenie predyktora oe
clear all;
n=0; farx(n+1)=4.874185e+003; foe(n+1)=4.893076e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=3.886867e+003; foe(n+1)=3.894868e+003; krok(n+1)=3.505202e-004; ng(n+1)=2.400890e+003;
n=2; farx(n+1)=6.344322e+002; foe(n+1)=7.218840e+002; krok(n+1)=4.546520e-003; ng(n+1)=1.008688e+003;
n=3; farx(n+1)=5.895591e+002; foe(n+1)=7.153517e+002; krok(n+1)=4.532526e-005; ng(n+1)=1.482625e+003;
n=4; farx(n+1)=6.183981e+001; foe(n+1)=2.234703e+002; krok(n+1)=2.055256e-003; ng(n+1)=1.245766e+003;
n=5; farx(n+1)=5.929928e+001; foe(n+1)=2.213875e+002; krok(n+1)=6.024230e-005; ng(n+1)=2.833719e+003;
n=6; farx(n+1)=5.234689e+001; foe(n+1)=2.183452e+002; krok(n+1)=1.409239e-004; ng(n+1)=3.672062e+003;
n=7; farx(n+1)=4.663621e+001; foe(n+1)=2.162132e+002; krok(n+1)=1.802468e-004; ng(n+1)=4.683532e+003;
n=8; farx(n+1)=2.864190e+001; foe(n+1)=1.613773e+002; krok(n+1)=3.722051e-003; ng(n+1)=6.237835e+003;
n=9; farx(n+1)=3.073124e+001; foe(n+1)=1.530782e+002; krok(n+1)=7.910691e-005; ng(n+1)=7.272770e+003;
n=10; farx(n+1)=3.470051e+001; foe(n+1)=1.412196e+002; krok(n+1)=1.749592e-003; ng(n+1)=2.247425e+003;
n=11; farx(n+1)=3.466722e+001; foe(n+1)=1.334331e+002; krok(n+1)=1.345435e-003; ng(n+1)=1.891541e+003;
n=12; farx(n+1)=3.795733e+001; foe(n+1)=1.290237e+002; krok(n+1)=1.506590e-003; ng(n+1)=7.203997e+003;
n=13; farx(n+1)=2.952878e+001; foe(n+1)=1.164756e+002; krok(n+1)=2.344633e-003; ng(n+1)=4.890965e+003;
n=14; farx(n+1)=2.409672e+001; foe(n+1)=1.105598e+002; krok(n+1)=1.486749e-003; ng(n+1)=3.975760e+003;
n=15; farx(n+1)=2.227378e+001; foe(n+1)=1.088699e+002; krok(n+1)=6.946998e-004; ng(n+1)=6.013243e+003;
n=16; farx(n+1)=1.776869e+001; foe(n+1)=9.996440e+001; krok(n+1)=2.384691e-002; ng(n+1)=8.455618e+003;
n=17; farx(n+1)=1.389278e+001; foe(n+1)=9.101625e+001; krok(n+1)=4.614317e-002; ng(n+1)=6.938715e+003;
n=18; farx(n+1)=1.457612e+001; foe(n+1)=8.531722e+001; krok(n+1)=1.474115e-001; ng(n+1)=5.514935e+003;
n=19; farx(n+1)=1.263094e+001; foe(n+1)=7.949336e+001; krok(n+1)=1.666377e-001; ng(n+1)=3.269335e+003;
n=20; farx(n+1)=1.032710e+001; foe(n+1)=7.253794e+001; krok(n+1)=1.627922e-001; ng(n+1)=2.973695e+003;
n=21; farx(n+1)=8.260379e+000; foe(n+1)=6.831122e+001; krok(n+1)=1.067078e-001; ng(n+1)=3.674988e+003;
n=22; farx(n+1)=5.798759e+000; foe(n+1)=6.349711e+001; krok(n+1)=2.928871e-001; ng(n+1)=1.737902e+003;
n=23; farx(n+1)=4.811456e+000; foe(n+1)=5.843820e+001; krok(n+1)=6.321212e-001; ng(n+1)=5.574509e+003;
n=24; farx(n+1)=4.757166e+000; foe(n+1)=5.631019e+001; krok(n+1)=1.827549e-001; ng(n+1)=3.977084e+003;
n=25; farx(n+1)=4.728722e+000; foe(n+1)=5.565138e+001; krok(n+1)=1.794664e-001; ng(n+1)=1.712873e+003;
%odnowa zmiennej metryki
n=26; farx(n+1)=4.722309e+000; foe(n+1)=5.560988e+001; krok(n+1)=1.215283e-006; ng(n+1)=7.494469e+002;
n=27; farx(n+1)=4.684534e+000; foe(n+1)=5.549983e+001; krok(n+1)=1.693774e-005; ng(n+1)=2.937448e+002;
n=28; farx(n+1)=4.742462e+000; foe(n+1)=5.531840e+001; krok(n+1)=3.476335e-005; ng(n+1)=2.683246e+002;
n=29; farx(n+1)=4.642651e+000; foe(n+1)=5.469185e+001; krok(n+1)=1.554197e-003; ng(n+1)=7.670948e+001;
n=30; farx(n+1)=4.716938e+000; foe(n+1)=5.353935e+001; krok(n+1)=1.029641e-003; ng(n+1)=1.939187e+002;
n=31; farx(n+1)=4.766150e+000; foe(n+1)=5.311157e+001; krok(n+1)=7.110078e-005; ng(n+1)=1.309025e+003;
n=32; farx(n+1)=5.029897e+000; foe(n+1)=5.183824e+001; krok(n+1)=2.232322e-003; ng(n+1)=1.821194e+003;
n=33; farx(n+1)=6.400089e+000; foe(n+1)=4.843699e+001; krok(n+1)=5.770731e-003; ng(n+1)=1.600053e+003;
n=34; farx(n+1)=7.033911e+000; foe(n+1)=4.473803e+001; krok(n+1)=1.548346e-003; ng(n+1)=2.360055e+003;
n=35; farx(n+1)=8.474301e+000; foe(n+1)=4.301469e+001; krok(n+1)=7.394073e-004; ng(n+1)=3.667809e+003;
n=36; farx(n+1)=8.804858e+000; foe(n+1)=4.269673e+001; krok(n+1)=7.819157e-004; ng(n+1)=3.101355e+003;
n=37; farx(n+1)=8.928109e+000; foe(n+1)=4.262457e+001; krok(n+1)=9.773247e-005; ng(n+1)=1.658434e+003;
n=38; farx(n+1)=9.710656e+000; foe(n+1)=4.185049e+001; krok(n+1)=9.069100e-003; ng(n+1)=2.094574e+003;
n=39; farx(n+1)=1.003272e+001; foe(n+1)=4.121309e+001; krok(n+1)=7.777754e-003; ng(n+1)=1.589302e+003;
n=40; farx(n+1)=1.003522e+001; foe(n+1)=4.102112e+001; krok(n+1)=3.026819e-003; ng(n+1)=1.453089e+003;
n=41; farx(n+1)=1.166127e+001; foe(n+1)=3.915124e+001; krok(n+1)=4.388300e-002; ng(n+1)=1.644318e+003;
n=42; farx(n+1)=1.151171e+001; foe(n+1)=3.897205e+001; krok(n+1)=8.580693e-003; ng(n+1)=1.878680e+003;
n=43; farx(n+1)=1.262714e+001; foe(n+1)=3.825830e+001; krok(n+1)=1.032026e-001; ng(n+1)=1.117000e+003;
n=44; farx(n+1)=9.234028e+000; foe(n+1)=3.419248e+001; krok(n+1)=3.923690e-001; ng(n+1)=8.339942e+002;
n=45; farx(n+1)=8.726777e+000; foe(n+1)=3.197390e+001; krok(n+1)=2.606847e-001; ng(n+1)=2.395123e+003;
n=46; farx(n+1)=8.471686e+000; foe(n+1)=3.024381e+001; krok(n+1)=1.181740e-001; ng(n+1)=1.422159e+003;
n=47; farx(n+1)=9.166658e+000; foe(n+1)=2.848474e+001; krok(n+1)=2.164743e-001; ng(n+1)=2.396300e+003;
n=48; farx(n+1)=9.183448e+000; foe(n+1)=2.826145e+001; krok(n+1)=1.053314e-001; ng(n+1)=1.985459e+003;
n=49; farx(n+1)=9.379878e+000; foe(n+1)=2.660527e+001; krok(n+1)=1.886278e-001; ng(n+1)=2.012988e+003;
n=50; farx(n+1)=9.898815e+000; foe(n+1)=2.617592e+001; krok(n+1)=6.622313e-001; ng(n+1)=7.765220e+002;
%odnowa zmiennej metryki
n=51; farx(n+1)=9.880183e+000; foe(n+1)=2.599627e+001; krok(n+1)=4.443799e-006; ng(n+1)=6.958954e+002;
n=52; farx(n+1)=9.966548e+000; foe(n+1)=2.551753e+001; krok(n+1)=3.336007e-006; ng(n+1)=9.225633e+002;
n=53; farx(n+1)=9.972213e+000; foe(n+1)=2.550757e+001; krok(n+1)=3.907906e-006; ng(n+1)=5.743806e+002;
n=54; farx(n+1)=1.002383e+001; foe(n+1)=2.548187e+001; krok(n+1)=8.763006e-005; ng(n+1)=5.321647e+002;
n=55; farx(n+1)=9.992227e+000; foe(n+1)=2.541144e+001; krok(n+1)=1.624345e-004; ng(n+1)=4.865763e+002;
n=56; farx(n+1)=9.835118e+000; foe(n+1)=2.535574e+001; krok(n+1)=3.467612e-004; ng(n+1)=9.453077e+002;
n=57; farx(n+1)=9.844618e+000; foe(n+1)=2.526002e+001; krok(n+1)=2.302017e-004; ng(n+1)=5.992946e+002;
n=58; farx(n+1)=9.799699e+000; foe(n+1)=2.522746e+001; krok(n+1)=9.374630e-005; ng(n+1)=6.358835e+002;
n=59; farx(n+1)=9.831214e+000; foe(n+1)=2.515144e+001; krok(n+1)=7.662549e-003; ng(n+1)=7.905401e+002;
n=60; farx(n+1)=9.893349e+000; foe(n+1)=2.505209e+001; krok(n+1)=4.352613e-003; ng(n+1)=7.775549e+002;
n=61; farx(n+1)=9.711660e+000; foe(n+1)=2.488928e+001; krok(n+1)=1.053841e-002; ng(n+1)=6.431602e+002;
n=62; farx(n+1)=9.356441e+000; foe(n+1)=2.472796e+001; krok(n+1)=6.450159e-003; ng(n+1)=6.273903e+002;
n=63; farx(n+1)=9.106108e+000; foe(n+1)=2.465851e+001; krok(n+1)=6.065270e-003; ng(n+1)=3.523927e+002;
n=64; farx(n+1)=9.041520e+000; foe(n+1)=2.463283e+001; krok(n+1)=8.806488e-003; ng(n+1)=6.854384e+002;
n=65; farx(n+1)=9.151752e+000; foe(n+1)=2.461505e+001; krok(n+1)=1.429000e-002; ng(n+1)=6.384476e+002;
n=66; farx(n+1)=9.062415e+000; foe(n+1)=2.449015e+001; krok(n+1)=5.801457e-002; ng(n+1)=8.945195e+002;
n=67; farx(n+1)=9.036820e+000; foe(n+1)=2.444878e+001; krok(n+1)=7.527268e-003; ng(n+1)=1.412700e+003;
n=68; farx(n+1)=8.982985e+000; foe(n+1)=2.435546e+001; krok(n+1)=3.320390e-002; ng(n+1)=8.655109e+002;
n=69; farx(n+1)=9.188464e+000; foe(n+1)=2.419662e+001; krok(n+1)=2.525939e-002; ng(n+1)=2.596156e+003;
n=70; farx(n+1)=9.206719e+000; foe(n+1)=2.418482e+001; krok(n+1)=2.788265e-002; ng(n+1)=6.638951e+002;
n=71; farx(n+1)=9.411934e+000; foe(n+1)=2.404077e+001; krok(n+1)=2.611580e-001; ng(n+1)=1.709712e+003;
n=72; farx(n+1)=9.498137e+000; foe(n+1)=2.397942e+001; krok(n+1)=7.786028e-002; ng(n+1)=1.222820e+003;
n=73; farx(n+1)=9.462977e+000; foe(n+1)=2.389622e+001; krok(n+1)=7.959957e-002; ng(n+1)=1.697392e+003;
n=74; farx(n+1)=9.309294e+000; foe(n+1)=2.381960e+001; krok(n+1)=3.839848e-001; ng(n+1)=1.787845e+003;
n=75; farx(n+1)=9.090594e+000; foe(n+1)=2.372361e+001; krok(n+1)=6.809733e-001; ng(n+1)=2.801191e+002;
%odnowa zmiennej metryki
n=76; farx(n+1)=9.090972e+000; foe(n+1)=2.372323e+001; krok(n+1)=4.816024e-008; ng(n+1)=2.962926e+002;
n=77; farx(n+1)=9.090420e+000; foe(n+1)=2.371330e+001; krok(n+1)=2.597363e-006; ng(n+1)=2.216406e+002;
n=78; farx(n+1)=9.084585e+000; foe(n+1)=2.371021e+001; krok(n+1)=7.026980e-006; ng(n+1)=7.639085e+001;
n=79; farx(n+1)=9.078988e+000; foe(n+1)=2.370718e+001; krok(n+1)=4.167023e-006; ng(n+1)=9.597223e+001;
n=80; farx(n+1)=9.073748e+000; foe(n+1)=2.369081e+001; krok(n+1)=1.684609e-004; ng(n+1)=4.278209e+001;
n=81; farx(n+1)=9.084271e+000; foe(n+1)=2.368483e+001; krok(n+1)=8.489916e-005; ng(n+1)=5.909666e+002;
n=82; farx(n+1)=9.033754e+000; foe(n+1)=2.368036e+001; krok(n+1)=2.638590e-004; ng(n+1)=9.154111e+002;
n=83; farx(n+1)=8.852290e+000; foe(n+1)=2.365256e+001; krok(n+1)=6.399708e-004; ng(n+1)=3.481686e+002;
n=84; farx(n+1)=8.793377e+000; foe(n+1)=2.364317e+001; krok(n+1)=1.860699e-003; ng(n+1)=1.849395e+002;
n=85; farx(n+1)=8.751319e+000; foe(n+1)=2.363540e+001; krok(n+1)=7.010405e-004; ng(n+1)=1.292305e+003;
n=86; farx(n+1)=8.729420e+000; foe(n+1)=2.362192e+001; krok(n+1)=3.868579e-003; ng(n+1)=1.706933e+002;
n=87; farx(n+1)=8.795053e+000; foe(n+1)=2.360451e+001; krok(n+1)=1.058808e-002; ng(n+1)=7.247421e+002;
n=88; farx(n+1)=8.851578e+000; foe(n+1)=2.355995e+001; krok(n+1)=6.884472e-003; ng(n+1)=2.177028e+002;
n=89; farx(n+1)=8.865485e+000; foe(n+1)=2.350934e+001; krok(n+1)=2.343845e-003; ng(n+1)=2.311511e+003;
n=90; farx(n+1)=8.938558e+000; foe(n+1)=2.349676e+001; krok(n+1)=1.716139e-002; ng(n+1)=1.473086e+003;
n=91; farx(n+1)=9.189523e+000; foe(n+1)=2.345959e+001; krok(n+1)=3.882853e-002; ng(n+1)=2.002691e+003;
n=92; farx(n+1)=9.315707e+000; foe(n+1)=2.343889e+001; krok(n+1)=1.815807e-002; ng(n+1)=3.176478e+003;
n=93; farx(n+1)=9.396543e+000; foe(n+1)=2.340348e+001; krok(n+1)=3.467713e-002; ng(n+1)=3.643360e+003;
n=94; farx(n+1)=9.444451e+000; foe(n+1)=2.337371e+001; krok(n+1)=4.048730e-002; ng(n+1)=4.466914e+003;
n=95; farx(n+1)=9.479878e+000; foe(n+1)=2.335244e+001; krok(n+1)=1.674643e-001; ng(n+1)=2.718257e+003;
n=96; farx(n+1)=9.457614e+000; foe(n+1)=2.321953e+001; krok(n+1)=1.892883e-001; ng(n+1)=9.454104e+002;
n=97; farx(n+1)=9.511578e+000; foe(n+1)=2.320853e+001; krok(n+1)=6.900644e-002; ng(n+1)=1.695228e+002;
n=98; farx(n+1)=9.661922e+000; foe(n+1)=2.315643e+001; krok(n+1)=5.202472e-001; ng(n+1)=1.057526e+003;
n=99; farx(n+1)=9.650297e+000; foe(n+1)=2.312356e+001; krok(n+1)=5.821767e-001; ng(n+1)=6.127004e+002;
n=100; farx(n+1)=9.677948e+000; foe(n+1)=2.309670e+001; krok(n+1)=2.869393e-001; ng(n+1)=7.806247e+001;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
