%uczenie predyktora oe
clear all;
n=0; farx(n+1)=3.887362e+003; foe(n+1)=3.921542e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=2.782235e+003; foe(n+1)=2.857921e+003; krok(n+1)=5.081655e-004; ng(n+1)=2.780248e+003;
n=2; farx(n+1)=1.026338e+003; foe(n+1)=8.838439e+002; krok(n+1)=2.707062e-003; ng(n+1)=1.664167e+003;
n=3; farx(n+1)=1.149365e+003; foe(n+1)=5.686118e+002; krok(n+1)=3.125285e-004; ng(n+1)=3.975623e+003;
n=4; farx(n+1)=1.471320e+003; foe(n+1)=5.394395e+002; krok(n+1)=1.427772e-003; ng(n+1)=2.008682e+003;
n=5; farx(n+1)=1.193194e+003; foe(n+1)=4.964062e+002; krok(n+1)=1.238474e-002; ng(n+1)=7.693091e+002;
n=6; farx(n+1)=1.219236e+003; foe(n+1)=4.863721e+002; krok(n+1)=2.273260e-003; ng(n+1)=7.542204e+002;
n=7; farx(n+1)=1.167092e+003; foe(n+1)=4.717710e+002; krok(n+1)=2.014225e-003; ng(n+1)=6.231922e+002;
n=8; farx(n+1)=8.160490e+002; foe(n+1)=4.170780e+002; krok(n+1)=5.548179e-003; ng(n+1)=6.603951e+002;
n=9; farx(n+1)=7.015301e+002; foe(n+1)=4.067756e+002; krok(n+1)=9.413494e-004; ng(n+1)=8.519061e+002;
n=10; farx(n+1)=5.922035e+002; foe(n+1)=3.692213e+002; krok(n+1)=2.868906e-002; ng(n+1)=8.966292e+002;
n=11; farx(n+1)=6.094489e+002; foe(n+1)=3.650808e+002; krok(n+1)=4.221744e-003; ng(n+1)=4.838938e+002;
n=12; farx(n+1)=5.313769e+002; foe(n+1)=3.326160e+002; krok(n+1)=2.896961e-002; ng(n+1)=3.862039e+002;
n=13; farx(n+1)=5.254329e+002; foe(n+1)=3.275314e+002; krok(n+1)=1.910413e-002; ng(n+1)=2.522795e+002;
n=14; farx(n+1)=3.117411e+002; foe(n+1)=3.123120e+002; krok(n+1)=1.238254e-001; ng(n+1)=2.096248e+002;
n=15; farx(n+1)=2.901049e+002; foe(n+1)=3.113113e+002; krok(n+1)=6.042575e-003; ng(n+1)=2.760857e+002;
n=16; farx(n+1)=2.679897e+002; foe(n+1)=3.042514e+002; krok(n+1)=3.827775e-001; ng(n+1)=3.161010e+002;
n=17; farx(n+1)=2.584745e+002; foe(n+1)=2.964316e+002; krok(n+1)=2.250273e-001; ng(n+1)=3.638264e+002;
n=18; farx(n+1)=2.714563e+002; foe(n+1)=2.910510e+002; krok(n+1)=1.872762e-001; ng(n+1)=3.602034e+002;
n=19; farx(n+1)=2.452757e+002; foe(n+1)=2.836435e+002; krok(n+1)=8.008859e-001; ng(n+1)=2.316730e+002;
n=20; farx(n+1)=3.241168e+001; foe(n+1)=1.756574e+002; krok(n+1)=2.108364e+000; ng(n+1)=2.177127e+002;
n=21; farx(n+1)=3.125373e+001; foe(n+1)=1.754146e+002; krok(n+1)=9.289576e-004; ng(n+1)=8.369541e+002;
n=22; farx(n+1)=2.763674e+001; foe(n+1)=1.559473e+002; krok(n+1)=2.475890e-001; ng(n+1)=9.531656e+002;
n=23; farx(n+1)=3.044101e+001; foe(n+1)=1.476294e+002; krok(n+1)=1.051652e-001; ng(n+1)=3.163727e+003;
n=24; farx(n+1)=5.635981e+001; foe(n+1)=1.091109e+002; krok(n+1)=1.284644e-001; ng(n+1)=3.530092e+003;
n=25; farx(n+1)=5.563299e+001; foe(n+1)=9.636628e+001; krok(n+1)=5.642809e-001; ng(n+1)=1.639501e+003;
%odnowa zmiennej metryki
n=26; farx(n+1)=5.865457e+001; foe(n+1)=8.786312e+001; krok(n+1)=3.242569e-005; ng(n+1)=1.356283e+003;
n=27; farx(n+1)=6.201126e+001; foe(n+1)=8.143107e+001; krok(n+1)=2.734728e-004; ng(n+1)=5.274070e+002;
n=28; farx(n+1)=4.034371e+001; foe(n+1)=6.762162e+001; krok(n+1)=8.010721e-004; ng(n+1)=5.992848e+002;
n=29; farx(n+1)=3.488292e+001; foe(n+1)=5.708068e+001; krok(n+1)=7.295556e-004; ng(n+1)=6.136302e+002;
n=30; farx(n+1)=3.072981e+001; foe(n+1)=5.380061e+001; krok(n+1)=1.495556e-003; ng(n+1)=2.504349e+002;
n=31; farx(n+1)=3.236935e+001; foe(n+1)=5.164692e+001; krok(n+1)=3.426502e-003; ng(n+1)=4.446510e+002;
n=32; farx(n+1)=2.515769e+001; foe(n+1)=4.478993e+001; krok(n+1)=3.045281e-002; ng(n+1)=5.235961e+002;
n=33; farx(n+1)=2.670198e+001; foe(n+1)=4.272955e+001; krok(n+1)=8.988693e-003; ng(n+1)=1.368758e+003;
n=34; farx(n+1)=2.165884e+001; foe(n+1)=4.041570e+001; krok(n+1)=7.475647e-002; ng(n+1)=6.725166e+002;
n=35; farx(n+1)=1.865773e+001; foe(n+1)=3.873952e+001; krok(n+1)=8.877087e-002; ng(n+1)=4.407841e+002;
n=36; farx(n+1)=1.872642e+001; foe(n+1)=3.662601e+001; krok(n+1)=1.809649e-001; ng(n+1)=8.214151e+002;
n=37; farx(n+1)=2.415313e+001; foe(n+1)=3.103549e+001; krok(n+1)=1.381465e-001; ng(n+1)=5.700768e+002;
n=38; farx(n+1)=2.490701e+001; foe(n+1)=3.069675e+001; krok(n+1)=7.481826e-003; ng(n+1)=8.222440e+002;
n=39; farx(n+1)=2.342999e+001; foe(n+1)=2.843646e+001; krok(n+1)=1.113003e-001; ng(n+1)=4.491359e+002;
n=40; farx(n+1)=1.893018e+001; foe(n+1)=2.406486e+001; krok(n+1)=4.187571e-001; ng(n+1)=4.954412e+002;
n=41; farx(n+1)=1.779959e+001; foe(n+1)=2.235179e+001; krok(n+1)=3.762824e-001; ng(n+1)=2.443483e+002;
n=42; farx(n+1)=1.525463e+001; foe(n+1)=1.973385e+001; krok(n+1)=4.536903e-001; ng(n+1)=4.863252e+002;
n=43; farx(n+1)=1.566871e+001; foe(n+1)=1.876274e+001; krok(n+1)=1.460372e-001; ng(n+1)=6.577460e+002;
n=44; farx(n+1)=1.617843e+001; foe(n+1)=1.826528e+001; krok(n+1)=2.863419e-001; ng(n+1)=4.664229e+002;
n=45; farx(n+1)=1.566128e+001; foe(n+1)=1.742038e+001; krok(n+1)=7.461831e-001; ng(n+1)=1.958370e+002;
n=46; farx(n+1)=1.472456e+001; foe(n+1)=1.622528e+001; krok(n+1)=7.771907e-001; ng(n+1)=6.086623e+002;
n=47; farx(n+1)=1.465889e+001; foe(n+1)=1.518038e+001; krok(n+1)=5.002089e-001; ng(n+1)=6.509678e+001;
n=48; farx(n+1)=1.561133e+001; foe(n+1)=1.484808e+001; krok(n+1)=7.631010e-001; ng(n+1)=3.007471e+002;
n=49; farx(n+1)=1.571806e+001; foe(n+1)=1.464894e+001; krok(n+1)=8.957909e-001; ng(n+1)=3.686141e+002;
n=50; farx(n+1)=1.649556e+001; foe(n+1)=1.438103e+001; krok(n+1)=1.062525e+000; ng(n+1)=2.090519e+002;
%odnowa zmiennej metryki
n=51; farx(n+1)=1.647124e+001; foe(n+1)=1.422077e+001; krok(n+1)=1.115447e-005; ng(n+1)=3.541440e+002;
n=52; farx(n+1)=1.646401e+001; foe(n+1)=1.418141e+001; krok(n+1)=3.716872e-004; ng(n+1)=2.692117e+001;
n=53; farx(n+1)=1.632209e+001; foe(n+1)=1.410078e+001; krok(n+1)=7.819157e-004; ng(n+1)=3.014527e+001;
n=54; farx(n+1)=1.531362e+001; foe(n+1)=1.362967e+001; krok(n+1)=2.173143e-003; ng(n+1)=4.192588e+001;
n=55; farx(n+1)=1.439525e+001; foe(n+1)=1.322623e+001; krok(n+1)=1.310411e-003; ng(n+1)=1.815887e+002;
n=56; farx(n+1)=1.424456e+001; foe(n+1)=1.318881e+001; krok(n+1)=3.544455e-003; ng(n+1)=3.495432e+002;
n=57; farx(n+1)=1.425990e+001; foe(n+1)=1.310195e+001; krok(n+1)=2.558819e-002; ng(n+1)=3.613144e+002;
n=58; farx(n+1)=1.344029e+001; foe(n+1)=1.302702e+001; krok(n+1)=3.982240e-002; ng(n+1)=3.547860e+002;
n=59; farx(n+1)=1.308999e+001; foe(n+1)=1.295299e+001; krok(n+1)=1.825682e-002; ng(n+1)=4.046522e+002;
n=60; farx(n+1)=1.451260e+001; foe(n+1)=1.281995e+001; krok(n+1)=8.097460e-002; ng(n+1)=3.176676e+002;
n=61; farx(n+1)=1.312916e+001; foe(n+1)=1.228138e+001; krok(n+1)=9.137743e-002; ng(n+1)=4.134303e+002;
n=62; farx(n+1)=1.365915e+001; foe(n+1)=1.187307e+001; krok(n+1)=6.706589e-002; ng(n+1)=1.877647e+002;
n=63; farx(n+1)=1.116619e+001; foe(n+1)=1.109115e+001; krok(n+1)=5.126125e-001; ng(n+1)=1.874009e+002;
n=64; farx(n+1)=9.857858e+000; foe(n+1)=1.077847e+001; krok(n+1)=2.114442e-001; ng(n+1)=4.056000e+002;
n=65; farx(n+1)=9.337900e+000; foe(n+1)=1.021139e+001; krok(n+1)=1.655578e-001; ng(n+1)=1.355304e+002;
n=66; farx(n+1)=9.191938e+000; foe(n+1)=9.722472e+000; krok(n+1)=8.131859e-001; ng(n+1)=4.527472e+002;
n=67; farx(n+1)=8.636422e+000; foe(n+1)=9.576993e+000; krok(n+1)=1.631115e-001; ng(n+1)=1.345876e+002;
n=68; farx(n+1)=8.390361e+000; foe(n+1)=9.253011e+000; krok(n+1)=3.119600e-001; ng(n+1)=1.714344e+002;
n=69; farx(n+1)=6.631327e+000; foe(n+1)=8.923936e+000; krok(n+1)=8.043035e-001; ng(n+1)=9.662373e+001;
n=70; farx(n+1)=5.309961e+000; foe(n+1)=8.525123e+000; krok(n+1)=7.215816e-001; ng(n+1)=7.786831e+001;
n=71; farx(n+1)=3.863207e+000; foe(n+1)=7.985358e+000; krok(n+1)=4.228884e-001; ng(n+1)=3.704077e+002;
n=72; farx(n+1)=3.273048e+000; foe(n+1)=7.645571e+000; krok(n+1)=7.633913e-002; ng(n+1)=1.850185e+002;
n=73; farx(n+1)=3.066572e+000; foe(n+1)=7.479442e+000; krok(n+1)=4.756755e-002; ng(n+1)=1.240670e+002;
n=74; farx(n+1)=3.024751e+000; foe(n+1)=7.236765e+000; krok(n+1)=9.137743e-002; ng(n+1)=4.206906e+002;
n=75; farx(n+1)=2.787544e+000; foe(n+1)=6.822608e+000; krok(n+1)=1.630613e-001; ng(n+1)=4.313107e+002;
%odnowa zmiennej metryki
n=76; farx(n+1)=2.786666e+000; foe(n+1)=6.792185e+000; krok(n+1)=2.978507e-006; ng(n+1)=3.127694e+002;
n=77; farx(n+1)=2.764270e+000; foe(n+1)=6.775859e+000; krok(n+1)=7.980756e-005; ng(n+1)=5.523081e+001;
n=78; farx(n+1)=2.700320e+000; foe(n+1)=6.676051e+000; krok(n+1)=7.779359e-004; ng(n+1)=3.507765e+001;
n=79; farx(n+1)=2.686521e+000; foe(n+1)=6.654508e+000; krok(n+1)=3.176034e-005; ng(n+1)=7.601145e+001;
n=80; farx(n+1)=2.629333e+000; foe(n+1)=6.371952e+000; krok(n+1)=6.681202e-003; ng(n+1)=2.239688e+001;
n=81; farx(n+1)=2.590961e+000; foe(n+1)=6.154144e+000; krok(n+1)=2.110872e-003; ng(n+1)=4.814518e+001;
n=82; farx(n+1)=2.566563e+000; foe(n+1)=6.030794e+000; krok(n+1)=6.544675e-003; ng(n+1)=1.350953e+002;
n=83; farx(n+1)=2.530920e+000; foe(n+1)=5.934090e+000; krok(n+1)=1.111520e-002; ng(n+1)=4.460062e+002;
n=84; farx(n+1)=2.722625e+000; foe(n+1)=5.619662e+000; krok(n+1)=5.440189e-002; ng(n+1)=2.821109e+002;
n=85; farx(n+1)=2.707075e+000; foe(n+1)=5.450741e+000; krok(n+1)=2.284436e-002; ng(n+1)=2.754360e+002;
n=86; farx(n+1)=2.665547e+000; foe(n+1)=5.393355e+000; krok(n+1)=7.883344e-003; ng(n+1)=4.165676e+002;
n=87; farx(n+1)=2.618768e+000; foe(n+1)=5.317558e+000; krok(n+1)=5.285294e-002; ng(n+1)=4.483516e+002;
n=88; farx(n+1)=2.733745e+000; foe(n+1)=5.206105e+000; krok(n+1)=1.057059e-001; ng(n+1)=3.913386e+002;
n=89; farx(n+1)=2.603265e+000; foe(n+1)=5.085433e+000; krok(n+1)=1.036878e-001; ng(n+1)=1.341985e+002;
n=90; farx(n+1)=2.477029e+000; foe(n+1)=4.860917e+000; krok(n+1)=5.126125e-001; ng(n+1)=1.505179e+002;
n=91; farx(n+1)=2.443639e+000; foe(n+1)=4.598308e+000; krok(n+1)=1.056270e+000; ng(n+1)=1.664382e+002;
n=92; farx(n+1)=2.338785e+000; foe(n+1)=4.386367e+000; krok(n+1)=2.869393e-001; ng(n+1)=1.558854e+002;
n=93; farx(n+1)=2.255691e+000; foe(n+1)=4.171888e+000; krok(n+1)=6.622313e-001; ng(n+1)=1.762492e+002;
n=94; farx(n+1)=2.107291e+000; foe(n+1)=3.910883e+000; krok(n+1)=6.095712e-001; ng(n+1)=4.680074e+001;
n=95; farx(n+1)=2.013613e+000; foe(n+1)=3.855101e+000; krok(n+1)=2.846355e-001; ng(n+1)=1.132972e+002;
n=96; farx(n+1)=1.939018e+000; foe(n+1)=3.786790e+000; krok(n+1)=3.238984e-001; ng(n+1)=1.709535e+002;
n=97; farx(n+1)=1.762121e+000; foe(n+1)=3.592422e+000; krok(n+1)=9.806012e-001; ng(n+1)=1.910905e+002;
n=98; farx(n+1)=1.727790e+000; foe(n+1)=3.534693e+000; krok(n+1)=2.740921e-001; ng(n+1)=4.720145e+001;
n=99; farx(n+1)=1.721355e+000; foe(n+1)=3.487448e+000; krok(n+1)=2.134155e-001; ng(n+1)=1.059148e+002;
n=100; farx(n+1)=1.750259e+000; foe(n+1)=3.407987e+000; krok(n+1)=4.741921e-001; ng(n+1)=1.319695e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
