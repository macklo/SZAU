%uczenie predyktora oe
clear all;
n=0; farx(n+1)=3.945274e+003; foe(n+1)=4.017336e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=3.021358e+003; foe(n+1)=3.035369e+003; krok(n+1)=4.921872e-004; ng(n+1)=2.131068e+003;
n=2; farx(n+1)=8.959238e+002; foe(n+1)=1.106823e+003; krok(n+1)=1.360047e-002; ng(n+1)=3.280323e+002;
n=3; farx(n+1)=8.959231e+002; foe(n+1)=1.081121e+003; krok(n+1)=1.013046e-005; ng(n+1)=5.577040e+003;
n=4; farx(n+1)=1.550383e+003; foe(n+1)=8.225524e+002; krok(n+1)=2.569527e-003; ng(n+1)=5.729882e+003;
n=5; farx(n+1)=1.730188e+003; foe(n+1)=7.613775e+002; krok(n+1)=2.156451e-003; ng(n+1)=2.260987e+003;
n=6; farx(n+1)=1.018456e+003; foe(n+1)=5.961779e+002; krok(n+1)=2.339183e-003; ng(n+1)=2.185306e+003;
n=7; farx(n+1)=8.432528e+002; foe(n+1)=4.937415e+002; krok(n+1)=1.061033e-002; ng(n+1)=1.848201e+003;
n=8; farx(n+1)=7.585026e+002; foe(n+1)=4.419079e+002; krok(n+1)=1.700059e-003; ng(n+1)=1.238988e+003;
n=9; farx(n+1)=8.484485e+002; foe(n+1)=4.224404e+002; krok(n+1)=3.470726e-003; ng(n+1)=1.579222e+003;
n=10; farx(n+1)=9.961713e+002; foe(n+1)=4.145312e+002; krok(n+1)=4.030924e-002; ng(n+1)=8.065700e+002;
n=11; farx(n+1)=1.009366e+003; foe(n+1)=4.032095e+002; krok(n+1)=3.585583e-002; ng(n+1)=6.702348e+002;
n=12; farx(n+1)=8.670421e+002; foe(n+1)=3.904554e+002; krok(n+1)=2.301315e-001; ng(n+1)=5.397065e+002;
n=13; farx(n+1)=7.957350e+002; foe(n+1)=3.720157e+002; krok(n+1)=1.800219e+000; ng(n+1)=5.532548e+002;
n=14; farx(n+1)=6.491749e+002; foe(n+1)=3.629179e+002; krok(n+1)=1.232694e-001; ng(n+1)=1.907585e+002;
n=15; farx(n+1)=4.822655e+002; foe(n+1)=3.521429e+002; krok(n+1)=2.656312e-001; ng(n+1)=3.102642e+002;
n=16; farx(n+1)=6.716489e+001; foe(n+1)=2.563847e+002; krok(n+1)=3.589327e-001; ng(n+1)=8.794379e+002;
n=17; farx(n+1)=5.697094e+001; foe(n+1)=2.529838e+002; krok(n+1)=7.366454e-003; ng(n+1)=5.243221e+003;
n=18; farx(n+1)=5.153954e+001; foe(n+1)=2.333905e+002; krok(n+1)=1.008497e-001; ng(n+1)=6.383807e+003;
n=19; farx(n+1)=2.942938e+001; foe(n+1)=1.863471e+002; krok(n+1)=1.865458e-001; ng(n+1)=6.014654e+003;
n=20; farx(n+1)=2.726230e+001; foe(n+1)=7.857406e+001; krok(n+1)=3.240219e-001; ng(n+1)=8.102731e+003;
n=21; farx(n+1)=2.070946e+001; foe(n+1)=5.399953e+001; krok(n+1)=1.682643e+000; ng(n+1)=1.064038e+003;
n=22; farx(n+1)=2.266841e+001; foe(n+1)=5.104342e+001; krok(n+1)=2.883317e-001; ng(n+1)=7.849277e+002;
n=23; farx(n+1)=2.334089e+001; foe(n+1)=4.919140e+001; krok(n+1)=4.406235e-001; ng(n+1)=2.662403e+002;
n=24; farx(n+1)=2.161112e+001; foe(n+1)=4.837967e+001; krok(n+1)=6.338619e-001; ng(n+1)=4.691081e+002;
n=25; farx(n+1)=1.577728e+001; foe(n+1)=4.231079e+001; krok(n+1)=2.737327e+000; ng(n+1)=4.922984e+002;
%odnowa zmiennej metryki
n=26; farx(n+1)=1.576469e+001; foe(n+1)=4.220798e+001; krok(n+1)=1.511881e-005; ng(n+1)=2.233105e+002;
n=27; farx(n+1)=1.605676e+001; foe(n+1)=4.208485e+001; krok(n+1)=2.425061e-004; ng(n+1)=7.104615e+001;
n=28; farx(n+1)=1.613494e+001; foe(n+1)=4.193997e+001; krok(n+1)=8.567570e-004; ng(n+1)=4.146308e+001;
n=29; farx(n+1)=1.596669e+001; foe(n+1)=4.130641e+001; krok(n+1)=7.663457e-004; ng(n+1)=8.997242e+001;
n=30; farx(n+1)=1.354716e+001; foe(n+1)=3.978875e+001; krok(n+1)=2.500228e-003; ng(n+1)=1.252133e+002;
n=31; farx(n+1)=1.222841e+001; foe(n+1)=3.816649e+001; krok(n+1)=1.448480e-002; ng(n+1)=5.409638e+002;
n=32; farx(n+1)=1.177975e+001; foe(n+1)=3.784813e+001; krok(n+1)=2.439824e-003; ng(n+1)=6.428058e+002;
n=33; farx(n+1)=1.188460e+001; foe(n+1)=3.769444e+001; krok(n+1)=6.971205e-003; ng(n+1)=9.087879e+002;
n=34; farx(n+1)=1.051244e+001; foe(n+1)=3.533527e+001; krok(n+1)=6.930078e-001; ng(n+1)=7.202040e+002;
n=35; farx(n+1)=9.889379e+000; foe(n+1)=3.393875e+001; krok(n+1)=4.041502e-001; ng(n+1)=6.227048e+002;
n=36; farx(n+1)=1.067761e+001; foe(n+1)=3.217544e+001; krok(n+1)=2.401907e-001; ng(n+1)=1.897431e+002;
n=37; farx(n+1)=9.175474e+000; foe(n+1)=3.018471e+001; krok(n+1)=9.634903e-001; ng(n+1)=2.737656e+002;
n=38; farx(n+1)=8.189878e+000; foe(n+1)=2.947427e+001; krok(n+1)=7.271671e-001; ng(n+1)=3.086266e+002;
n=39; farx(n+1)=7.782183e+000; foe(n+1)=2.858831e+001; krok(n+1)=1.006076e+000; ng(n+1)=8.865113e+001;
n=40; farx(n+1)=6.918387e+000; foe(n+1)=2.733260e+001; krok(n+1)=1.040723e+000; ng(n+1)=3.705930e+002;
n=41; farx(n+1)=6.774413e+000; foe(n+1)=2.666452e+001; krok(n+1)=6.065168e-001; ng(n+1)=1.498160e+002;
n=42; farx(n+1)=6.685258e+000; foe(n+1)=2.616402e+001; krok(n+1)=4.536903e-001; ng(n+1)=2.981875e+002;
n=43; farx(n+1)=6.340509e+000; foe(n+1)=2.543079e+001; krok(n+1)=6.871474e-001; ng(n+1)=2.105712e+002;
n=44; farx(n+1)=6.133368e+000; foe(n+1)=2.484296e+001; krok(n+1)=2.094296e-001; ng(n+1)=2.560954e+002;
n=45; farx(n+1)=5.532573e+000; foe(n+1)=2.444948e+001; krok(n+1)=5.191100e-001; ng(n+1)=4.144597e+002;
n=46; farx(n+1)=5.466108e+000; foe(n+1)=2.398209e+001; krok(n+1)=9.073805e-001; ng(n+1)=3.910998e+001;
n=47; farx(n+1)=5.203899e+000; foe(n+1)=2.385109e+001; krok(n+1)=2.277746e-001; ng(n+1)=3.446551e+002;
n=48; farx(n+1)=5.017582e+000; foe(n+1)=2.356893e+001; krok(n+1)=6.477968e-001; ng(n+1)=5.080161e+002;
n=49; farx(n+1)=4.888078e+000; foe(n+1)=2.339248e+001; krok(n+1)=4.081488e-001; ng(n+1)=1.688924e+002;
n=50; farx(n+1)=4.797359e+000; foe(n+1)=2.321422e+001; krok(n+1)=6.614848e-001; ng(n+1)=1.222311e+002;
%odnowa zmiennej metryki
n=51; farx(n+1)=4.804184e+000; foe(n+1)=2.320837e+001; krok(n+1)=6.921689e-006; ng(n+1)=6.899555e+001;
n=52; farx(n+1)=4.828593e+000; foe(n+1)=2.319161e+001; krok(n+1)=8.600086e-006; ng(n+1)=1.110887e+002;
n=53; farx(n+1)=4.844611e+000; foe(n+1)=2.318317e+001; krok(n+1)=6.158863e-005; ng(n+1)=3.144007e+001;
n=54; farx(n+1)=4.881228e+000; foe(n+1)=2.317444e+001; krok(n+1)=2.720095e-004; ng(n+1)=1.394414e+001;
n=55; farx(n+1)=4.710316e+000; foe(n+1)=2.304167e+001; krok(n+1)=2.355148e-002; ng(n+1)=5.766208e+000;
n=56; farx(n+1)=4.734891e+000; foe(n+1)=2.301203e+001; krok(n+1)=2.257520e-003; ng(n+1)=7.091773e+001;
n=57; farx(n+1)=4.673599e+000; foe(n+1)=2.299330e+001; krok(n+1)=6.074057e-002; ng(n+1)=2.295989e+002;
n=58; farx(n+1)=4.705496e+000; foe(n+1)=2.297771e+001; krok(n+1)=4.076532e-002; ng(n+1)=2.155719e+002;
n=59; farx(n+1)=4.618591e+000; foe(n+1)=2.295802e+001; krok(n+1)=8.512166e-002; ng(n+1)=2.153725e+002;
n=60; farx(n+1)=4.561529e+000; foe(n+1)=2.292434e+001; krok(n+1)=3.240219e-001; ng(n+1)=2.720655e+002;
n=61; farx(n+1)=4.496374e+000; foe(n+1)=2.284645e+001; krok(n+1)=1.884118e-001; ng(n+1)=2.303613e+002;
n=62; farx(n+1)=4.405772e+000; foe(n+1)=2.280048e+001; krok(n+1)=6.622313e-001; ng(n+1)=5.712132e+001;
n=63; farx(n+1)=4.295281e+000; foe(n+1)=2.276011e+001; krok(n+1)=1.330664e+000; ng(n+1)=7.620605e+001;
n=64; farx(n+1)=4.243262e+000; foe(n+1)=2.272838e+001; krok(n+1)=1.213034e+000; ng(n+1)=9.309282e+001;
n=65; farx(n+1)=4.179194e+000; foe(n+1)=2.268821e+001; krok(n+1)=9.372047e-001; ng(n+1)=1.795311e+002;
n=66; farx(n+1)=4.097531e+000; foe(n+1)=2.266965e+001; krok(n+1)=3.053565e-001; ng(n+1)=6.357165e+001;
n=67; farx(n+1)=3.949822e+000; foe(n+1)=2.263299e+001; krok(n+1)=7.541830e-001; ng(n+1)=1.030700e+002;
n=68; farx(n+1)=3.898363e+000; foe(n+1)=2.260313e+001; krok(n+1)=8.055989e-001; ng(n+1)=8.666861e+001;
n=69; farx(n+1)=3.749950e+000; foe(n+1)=2.254249e+001; krok(n+1)=1.527605e+000; ng(n+1)=1.216363e+002;
n=70; farx(n+1)=3.674540e+000; foe(n+1)=2.246849e+001; krok(n+1)=1.707324e+000; ng(n+1)=7.918633e+001;
n=71; farx(n+1)=3.555830e+000; foe(n+1)=2.242825e+001; krok(n+1)=8.067975e-001; ng(n+1)=1.170364e+002;
n=72; farx(n+1)=3.522255e+000; foe(n+1)=2.240743e+001; krok(n+1)=2.158836e-001; ng(n+1)=2.792354e+002;
n=73; farx(n+1)=3.472517e+000; foe(n+1)=2.239626e+001; krok(n+1)=2.442288e-001; ng(n+1)=2.086503e+002;
n=74; farx(n+1)=3.436716e+000; foe(n+1)=2.238444e+001; krok(n+1)=7.021280e-001; ng(n+1)=4.283520e+001;
n=75; farx(n+1)=3.425084e+000; foe(n+1)=2.237768e+001; krok(n+1)=8.340965e-001; ng(n+1)=6.747945e+001;
%odnowa zmiennej metryki
n=76; farx(n+1)=3.425456e+000; foe(n+1)=2.237674e+001; krok(n+1)=6.711937e-007; ng(n+1)=9.653938e+001;
n=77; farx(n+1)=3.425397e+000; foe(n+1)=2.237606e+001; krok(n+1)=1.486240e-005; ng(n+1)=1.692071e+001;
n=78; farx(n+1)=3.427424e+000; foe(n+1)=2.237568e+001; krok(n+1)=2.342760e-005; ng(n+1)=1.049409e+001;
n=79; farx(n+1)=3.401395e+000; foe(n+1)=2.236815e+001; krok(n+1)=1.667309e-003; ng(n+1)=5.116155e+000;
n=80; farx(n+1)=3.406026e+000; foe(n+1)=2.236748e+001; krok(n+1)=1.784968e-004; ng(n+1)=3.713345e+000;
n=81; farx(n+1)=3.407006e+000; foe(n+1)=2.236699e+001; krok(n+1)=8.017859e-003; ng(n+1)=9.876883e-001;
n=82; farx(n+1)=3.409524e+000; foe(n+1)=2.236686e+001; krok(n+1)=2.107682e-002; ng(n+1)=1.185674e+000;
n=83; farx(n+1)=3.415562e+000; foe(n+1)=2.236495e+001; krok(n+1)=6.404647e-001; ng(n+1)=1.361212e+000;
n=84; farx(n+1)=3.427770e+000; foe(n+1)=2.236160e+001; krok(n+1)=1.178633e-001; ng(n+1)=1.046439e+001;
n=85; farx(n+1)=3.355252e+000; foe(n+1)=2.233206e+001; krok(n+1)=1.561580e+000; ng(n+1)=3.700793e+001;
n=86; farx(n+1)=3.303579e+000; foe(n+1)=2.231717e+001; krok(n+1)=9.809225e-002; ng(n+1)=6.797044e+001;
n=87; farx(n+1)=3.269012e+000; foe(n+1)=2.230513e+001; krok(n+1)=1.522431e+000; ng(n+1)=1.836234e+002;
n=88; farx(n+1)=3.264296e+000; foe(n+1)=2.230049e+001; krok(n+1)=4.954132e-001; ng(n+1)=9.351210e+001;
n=89; farx(n+1)=3.212384e+000; foe(n+1)=2.229435e+001; krok(n+1)=1.390988e+000; ng(n+1)=4.987426e+001;
n=90; farx(n+1)=3.157513e+000; foe(n+1)=2.228578e+001; krok(n+1)=2.669779e+000; ng(n+1)=2.464732e+001;
n=91; farx(n+1)=3.121466e+000; foe(n+1)=2.227372e+001; krok(n+1)=1.541916e+000; ng(n+1)=1.130611e+002;
n=92; farx(n+1)=3.035231e+000; foe(n+1)=2.225630e+001; krok(n+1)=6.954939e-001; ng(n+1)=7.075537e+001;
n=93; farx(n+1)=2.957499e+000; foe(n+1)=2.222257e+001; krok(n+1)=2.184510e+000; ng(n+1)=3.209438e+001;
n=94; farx(n+1)=2.960474e+000; foe(n+1)=2.220003e+001; krok(n+1)=2.393567e-001; ng(n+1)=1.084281e+002;
n=95; farx(n+1)=2.957394e+000; foe(n+1)=2.219656e+001; krok(n+1)=8.166569e-001; ng(n+1)=2.283298e+001;
n=96; farx(n+1)=2.954272e+000; foe(n+1)=2.219599e+001; krok(n+1)=4.726961e-001; ng(n+1)=6.733788e+001;
n=97; farx(n+1)=2.950675e+000; foe(n+1)=2.219574e+001; krok(n+1)=8.224396e-001; ng(n+1)=4.392180e+000;
n=98; farx(n+1)=2.951426e+000; foe(n+1)=2.219560e+001; krok(n+1)=2.285898e+000; ng(n+1)=5.705855e+000;
n=99; farx(n+1)=2.945332e+000; foe(n+1)=2.219507e+001; krok(n+1)=4.024497e+000; ng(n+1)=6.285867e+000;
n=100; farx(n+1)=2.946546e+000; foe(n+1)=2.219440e+001; krok(n+1)=1.800219e+000; ng(n+1)=2.566896e+001;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
