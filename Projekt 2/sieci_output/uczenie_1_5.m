%uczenie predyktora oe
clear all;
n=0; farx(n+1)=3.895330e+003; foe(n+1)=3.954571e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=2.802026e+003; foe(n+1)=2.943878e+003; krok(n+1)=4.895958e-004; ng(n+1)=1.975150e+003;
n=2; farx(n+1)=7.578722e+002; foe(n+1)=6.375198e+002; krok(n+1)=5.003630e-003; ng(n+1)=8.827025e+002;
n=3; farx(n+1)=7.093382e+002; foe(n+1)=4.817679e+002; krok(n+1)=3.909578e-004; ng(n+1)=1.897584e+003;
n=4; farx(n+1)=8.329482e+002; foe(n+1)=4.317848e+002; krok(n+1)=2.634602e-003; ng(n+1)=1.093424e+003;
n=5; farx(n+1)=6.538130e+002; foe(n+1)=4.206522e+002; krok(n+1)=5.485375e-003; ng(n+1)=3.654931e+002;
n=6; farx(n+1)=5.671445e+002; foe(n+1)=3.852805e+002; krok(n+1)=9.907791e-002; ng(n+1)=5.295085e+002;
n=7; farx(n+1)=5.069313e+002; foe(n+1)=3.770895e+002; krok(n+1)=2.559318e-002; ng(n+1)=5.744586e+002;
n=8; farx(n+1)=2.821633e+002; foe(n+1)=2.903756e+002; krok(n+1)=1.814761e+000; ng(n+1)=6.133986e+002;
n=9; farx(n+1)=2.633795e+002; foe(n+1)=2.829760e+002; krok(n+1)=1.054182e+000; ng(n+1)=1.059915e+002;
n=10; farx(n+1)=2.584152e+002; foe(n+1)=2.821404e+002; krok(n+1)=3.550835e-001; ng(n+1)=1.072013e+002;
n=11; farx(n+1)=1.826095e+002; foe(n+1)=2.710954e+002; krok(n+1)=2.635881e-001; ng(n+1)=2.488857e+002;
n=12; farx(n+1)=8.204521e+001; foe(n+1)=2.490484e+002; krok(n+1)=3.746175e-001; ng(n+1)=3.767525e+002;
n=13; farx(n+1)=7.199476e+001; foe(n+1)=2.415571e+002; krok(n+1)=1.295918e-002; ng(n+1)=8.021103e+002;
n=14; farx(n+1)=7.198633e+001; foe(n+1)=2.414412e+002; krok(n+1)=4.126056e-003; ng(n+1)=7.355905e+002;
n=15; farx(n+1)=6.459239e+001; foe(n+1)=2.050232e+002; krok(n+1)=6.183220e-001; ng(n+1)=9.907139e+002;
n=16; farx(n+1)=6.180614e+001; foe(n+1)=1.801831e+002; krok(n+1)=5.841487e-001; ng(n+1)=3.583068e+003;
n=17; farx(n+1)=5.590323e+001; foe(n+1)=1.680096e+002; krok(n+1)=2.250273e-001; ng(n+1)=7.158572e+002;
n=18; farx(n+1)=4.119252e+001; foe(n+1)=1.512120e+002; krok(n+1)=4.004429e-001; ng(n+1)=9.192159e+002;
n=19; farx(n+1)=3.199540e+001; foe(n+1)=1.347588e+002; krok(n+1)=3.465039e-001; ng(n+1)=2.075160e+003;
n=20; farx(n+1)=2.569379e+001; foe(n+1)=1.299572e+002; krok(n+1)=1.131462e+000; ng(n+1)=4.887555e+002;
n=21; farx(n+1)=2.207375e+001; foe(n+1)=1.247304e+002; krok(n+1)=5.714745e-001; ng(n+1)=7.578856e+002;
n=22; farx(n+1)=1.997186e+001; foe(n+1)=1.239102e+002; krok(n+1)=1.062525e+000; ng(n+1)=1.385576e+003;
n=23; farx(n+1)=1.991822e+001; foe(n+1)=1.233625e+002; krok(n+1)=1.531110e+000; ng(n+1)=1.620508e+003;
n=24; farx(n+1)=1.821127e+001; foe(n+1)=1.214947e+002; krok(n+1)=7.114361e+000; ng(n+1)=1.353128e+003;
n=25; farx(n+1)=1.784495e+001; foe(n+1)=1.167330e+002; krok(n+1)=2.089264e+000; ng(n+1)=1.396330e+003;
%odnowa zmiennej metryki
n=26; farx(n+1)=1.550506e+001; foe(n+1)=1.076626e+002; krok(n+1)=3.223647e-005; ng(n+1)=9.748657e+002;
n=27; farx(n+1)=1.198216e+001; foe(n+1)=1.001525e+002; krok(n+1)=2.020511e-005; ng(n+1)=1.211636e+003;
n=28; farx(n+1)=1.109359e+001; foe(n+1)=9.753016e+001; krok(n+1)=4.437427e-004; ng(n+1)=1.458806e+002;
n=29; farx(n+1)=1.157717e+001; foe(n+1)=9.340360e+001; krok(n+1)=5.269205e-003; ng(n+1)=9.299321e+001;
n=30; farx(n+1)=1.180943e+001; foe(n+1)=9.145858e+001; krok(n+1)=1.869974e-003; ng(n+1)=5.909444e+002;
n=31; farx(n+1)=1.135039e+001; foe(n+1)=9.126135e+001; krok(n+1)=4.258262e-003; ng(n+1)=5.739313e+002;
n=32; farx(n+1)=9.914921e+000; foe(n+1)=8.996802e+001; krok(n+1)=1.006999e-001; ng(n+1)=7.334823e+002;
n=33; farx(n+1)=8.765688e+000; foe(n+1)=8.489880e+001; krok(n+1)=1.554381e+000; ng(n+1)=6.315501e+002;
n=34; farx(n+1)=9.277619e+000; foe(n+1)=8.363743e+001; krok(n+1)=4.003408e-001; ng(n+1)=5.180524e+002;
n=35; farx(n+1)=9.439169e+000; foe(n+1)=8.341507e+001; krok(n+1)=3.477470e-001; ng(n+1)=2.546504e+002;
n=36; farx(n+1)=9.958179e+000; foe(n+1)=8.321510e+001; krok(n+1)=1.189931e+000; ng(n+1)=1.129974e+002;
n=37; farx(n+1)=9.990548e+000; foe(n+1)=8.318778e+001; krok(n+1)=7.936896e-002; ng(n+1)=1.085167e+002;
n=38; farx(n+1)=1.006734e+001; foe(n+1)=8.312601e+001; krok(n+1)=4.438543e-002; ng(n+1)=1.097806e+002;
n=39; farx(n+1)=9.963944e+000; foe(n+1)=8.308756e+001; krok(n+1)=3.403631e-001; ng(n+1)=1.089621e+002;
n=40; farx(n+1)=9.990451e+000; foe(n+1)=8.306426e+001; krok(n+1)=3.550835e-001; ng(n+1)=1.070731e+002;
n=41; farx(n+1)=1.002170e+001; foe(n+1)=8.305364e+001; krok(n+1)=1.569476e+000; ng(n+1)=1.564280e+001;
n=42; farx(n+1)=1.002951e+001; foe(n+1)=8.304890e+001; krok(n+1)=6.855549e-001; ng(n+1)=1.599945e+001;
n=43; farx(n+1)=1.000489e+001; foe(n+1)=8.304668e+001; krok(n+1)=7.808753e-001; ng(n+1)=3.520780e+001;
n=44; farx(n+1)=1.000367e+001; foe(n+1)=8.304648e+001; krok(n+1)=8.922448e-001; ng(n+1)=2.817157e+000;
n=45; farx(n+1)=1.000446e+001; foe(n+1)=8.304647e+001; krok(n+1)=1.196555e+000; ng(n+1)=2.174483e+000;
n=46; farx(n+1)=1.000516e+001; foe(n+1)=8.304647e+001; krok(n+1)=2.136786e+000; ng(n+1)=4.459845e-001;
n=47; farx(n+1)=1.000498e+001; foe(n+1)=8.304646e+001; krok(n+1)=1.505130e+000; ng(n+1)=1.878164e-001;
n=48; farx(n+1)=1.000504e+001; foe(n+1)=8.304646e+001; krok(n+1)=1.104846e+000; ng(n+1)=4.397567e-002;
 % z造 kierunek w metodzie zm - odnowa 
n=49; farx(n+1)=1.000504e+001; foe(n+1)=8.304646e+001; krok(n+1)=3.170217e-006; ng(n+1)=2.188252e-002;
n=50; farx(n+1)=1.000504e+001; foe(n+1)=8.304646e+001; krok(n+1)=3.211525e-005; ng(n+1)=2.806403e-003;
%odnowa zmiennej metryki
n=51; farx(n+1)=1.000504e+001; foe(n+1)=8.304646e+001; krok(n+1)=5.137901e-005; ng(n+1)=1.927029e-003;
n=52; farx(n+1)=1.000504e+001; foe(n+1)=8.304646e+001; krok(n+1)=1.576161e-005; ng(n+1)=2.183800e-003;
n=53; farx(n+1)=1.000504e+001; foe(n+1)=8.304646e+001; krok(n+1)=2.134526e-005; ng(n+1)=3.205097e-003;
n=54; farx(n+1)=1.000505e+001; foe(n+1)=8.304646e+001; krok(n+1)=5.440190e-004; ng(n+1)=5.133168e-004;
n=55; farx(n+1)=1.000505e+001; foe(n+1)=8.304646e+001; krok(n+1)=4.235557e-004; ng(n+1)=6.478717e-004;
n=56; farx(n+1)=1.000505e+001; foe(n+1)=8.304646e+001; krok(n+1)=5.185357e-005; ng(n+1)=3.296010e-004;
n=57; farx(n+1)=1.000505e+001; foe(n+1)=8.304646e+001; krok(n+1)=2.253084e-005; ng(n+1)=3.293511e-004;
n=58; farx(n+1)=1.000505e+001; foe(n+1)=8.304646e+001; krok(n+1)=5.492509e-006; ng(n+1)=3.293337e-004;
n=59; farx(n+1)=1.000505e+001; foe(n+1)=8.304646e+001; krok(n+1)=2.035229e-009; ng(n+1)=3.293319e-004;
n=60; farx(n+1)=1.000505e+001; foe(n+1)=8.304646e+001; krok(n+1)=2.689424e-006; ng(n+1)=3.293319e-004;
n=61; farx(n+1)=1.000505e+001; foe(n+1)=8.304646e+001; krok(n+1)=2.863296e-008; ng(n+1)=3.293387e-004;
n=62; farx(n+1)=1.000505e+001; foe(n+1)=8.304646e+001; krok(n+1)=3.003044e-007; ng(n+1)=3.293386e-004;
 % z造 kierunek w metodzie zm - odnowa 
n=63; farx(n+1)=1.000505e+001; foe(n+1)=8.304646e+001; krok(n+1)=1.836857e-009; ng(n+1)=3.293386e-004;
n=64; farx(n+1)=1.000505e+001; foe(n+1)=8.304646e+001; krok(n+1)=5.485719e-011; ng(n+1)=3.291517e-004;
 % z造 kierunek w metodzie zm - odnowa 
 % z造 kierunek w metodzie zm po wykonaniu odnowy

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
