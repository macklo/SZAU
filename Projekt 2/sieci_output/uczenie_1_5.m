%uczenie predyktora oe
clear all;
n=0; farx(n+1)=4.826028e+003; foe(n+1)=4.885712e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=3.906922e+003; foe(n+1)=3.933699e+003; krok(n+1)=3.347436e-004; ng(n+1)=1.959528e+003;
n=2; farx(n+1)=3.958095e+003; foe(n+1)=3.926217e+003; krok(n+1)=4.356528e-004; ng(n+1)=2.212513e+002;
n=3; farx(n+1)=1.085592e+003; foe(n+1)=8.314029e+002; krok(n+1)=2.065111e-002; ng(n+1)=1.512306e+002;
n=4; farx(n+1)=1.068375e+003; foe(n+1)=8.291265e+002; krok(n+1)=3.366585e-006; ng(n+1)=2.147842e+003;
n=5; farx(n+1)=1.186404e+003; foe(n+1)=8.265103e+002; krok(n+1)=2.267275e-003; ng(n+1)=1.981511e+003;
n=6; farx(n+1)=1.336002e+003; foe(n+1)=8.142191e+002; krok(n+1)=2.954351e-002; ng(n+1)=1.598793e+003;
n=7; farx(n+1)=6.229259e+002; foe(n+1)=7.364157e+002; krok(n+1)=6.305900e-001; ng(n+1)=1.492153e+003;
n=8; farx(n+1)=4.298090e+002; foe(n+1)=6.807491e+002; krok(n+1)=1.664870e-002; ng(n+1)=2.428519e+003;
n=9; farx(n+1)=3.573436e+002; foe(n+1)=6.381650e+002; krok(n+1)=1.607119e-001; ng(n+1)=3.827023e+003;
n=10; farx(n+1)=2.017691e+002; foe(n+1)=4.586314e+002; krok(n+1)=7.007468e-001; ng(n+1)=3.798621e+003;
n=11; farx(n+1)=1.011050e+002; foe(n+1)=3.556051e+002; krok(n+1)=3.350057e+000; ng(n+1)=3.677219e+002;
n=12; farx(n+1)=1.061400e+002; foe(n+1)=3.526065e+002; krok(n+1)=4.635137e-001; ng(n+1)=4.054513e+002;
n=13; farx(n+1)=1.144448e+002; foe(n+1)=3.476034e+002; krok(n+1)=4.641165e-001; ng(n+1)=7.556465e+002;
n=14; farx(n+1)=1.038294e+002; foe(n+1)=3.385683e+002; krok(n+1)=1.218939e+000; ng(n+1)=5.424010e+002;
n=15; farx(n+1)=6.268223e+001; foe(n+1)=2.385768e+002; krok(n+1)=1.953830e+000; ng(n+1)=1.016810e+003;
n=16; farx(n+1)=6.084742e+001; foe(n+1)=2.319870e+002; krok(n+1)=2.629929e-002; ng(n+1)=1.742097e+003;
n=17; farx(n+1)=4.845466e+001; foe(n+1)=1.994823e+002; krok(n+1)=2.203117e-001; ng(n+1)=1.727395e+003;
n=18; farx(n+1)=4.617447e+001; foe(n+1)=1.959681e+002; krok(n+1)=1.750226e-002; ng(n+1)=2.418259e+003;
n=19; farx(n+1)=3.816573e+001; foe(n+1)=1.815017e+002; krok(n+1)=1.776017e-002; ng(n+1)=1.494466e+003;
n=20; farx(n+1)=1.915029e+001; foe(n+1)=1.487176e+002; krok(n+1)=8.260442e-002; ng(n+1)=8.382263e+003;
n=21; farx(n+1)=1.591527e+001; foe(n+1)=1.320264e+002; krok(n+1)=8.693674e-002; ng(n+1)=5.919583e+003;
n=22; farx(n+1)=1.498533e+001; foe(n+1)=1.210874e+002; krok(n+1)=3.404866e-001; ng(n+1)=1.064755e+003;
n=23; farx(n+1)=1.882110e+001; foe(n+1)=1.114663e+002; krok(n+1)=4.756263e-001; ng(n+1)=7.558146e+002;
n=24; farx(n+1)=1.944782e+001; foe(n+1)=1.044572e+002; krok(n+1)=1.150553e+000; ng(n+1)=1.612751e+003;
n=25; farx(n+1)=1.560704e+001; foe(n+1)=9.736790e+001; krok(n+1)=7.078022e+000; ng(n+1)=6.059661e+002;
%odnowa zmiennej metryki
n=26; farx(n+1)=1.576469e+001; foe(n+1)=9.660510e+001; krok(n+1)=6.662526e-007; ng(n+1)=2.149237e+003;
n=27; farx(n+1)=1.606744e+001; foe(n+1)=9.433740e+001; krok(n+1)=3.242222e-005; ng(n+1)=5.013031e+002;
n=28; farx(n+1)=1.612808e+001; foe(n+1)=9.374172e+001; krok(n+1)=7.293645e-005; ng(n+1)=7.741535e+002;
n=29; farx(n+1)=1.468252e+001; foe(n+1)=9.223209e+001; krok(n+1)=2.478815e-004; ng(n+1)=4.825845e+002;
n=30; farx(n+1)=1.243261e+001; foe(n+1)=9.005171e+001; krok(n+1)=4.676141e-004; ng(n+1)=3.573223e+002;
n=31; farx(n+1)=1.248139e+001; foe(n+1)=8.706650e+001; krok(n+1)=1.721185e-003; ng(n+1)=1.123779e+003;
n=32; farx(n+1)=1.262505e+001; foe(n+1)=8.682242e+001; krok(n+1)=3.970634e-004; ng(n+1)=2.224271e+003;
n=33; farx(n+1)=1.307076e+001; foe(n+1)=8.420075e+001; krok(n+1)=1.784434e+000; ng(n+1)=2.271784e+003;
n=34; farx(n+1)=1.222657e+001; foe(n+1)=8.298114e+001; krok(n+1)=1.111368e+000; ng(n+1)=3.108897e+002;
n=35; farx(n+1)=1.163676e+001; foe(n+1)=8.249402e+001; krok(n+1)=7.926233e-001; ng(n+1)=8.548142e+002;
n=36; farx(n+1)=1.169301e+001; foe(n+1)=8.228334e+001; krok(n+1)=1.333102e+000; ng(n+1)=5.669630e+002;
n=37; farx(n+1)=1.166029e+001; foe(n+1)=8.225529e+001; krok(n+1)=1.435731e+000; ng(n+1)=1.077570e+002;
n=38; farx(n+1)=1.158457e+001; foe(n+1)=8.222026e+001; krok(n+1)=1.946136e+000; ng(n+1)=1.885603e+002;
n=39; farx(n+1)=1.151747e+001; foe(n+1)=8.211795e+001; krok(n+1)=4.024305e+000; ng(n+1)=7.767761e+001;
n=40; farx(n+1)=1.176076e+001; foe(n+1)=8.188991e+001; krok(n+1)=2.781976e+000; ng(n+1)=9.741186e+001;
n=41; farx(n+1)=1.132302e+001; foe(n+1)=8.164342e+001; krok(n+1)=2.544580e+000; ng(n+1)=8.322126e+001;
n=42; farx(n+1)=1.139811e+001; foe(n+1)=8.159817e+001; krok(n+1)=1.390988e+000; ng(n+1)=1.889452e+002;
n=43; farx(n+1)=1.135244e+001; foe(n+1)=8.158860e+001; krok(n+1)=6.662409e+000; ng(n+1)=6.809746e+000;
n=44; farx(n+1)=1.131606e+001; foe(n+1)=8.157614e+001; krok(n+1)=2.886327e+000; ng(n+1)=8.597183e+001;
n=45; farx(n+1)=1.130609e+001; foe(n+1)=8.157492e+001; krok(n+1)=1.685303e+000; ng(n+1)=3.813919e+001;
n=46; farx(n+1)=1.130291e+001; foe(n+1)=8.157480e+001; krok(n+1)=1.541916e+000; ng(n+1)=6.974258e+000;
n=47; farx(n+1)=1.130395e+001; foe(n+1)=8.157480e+001; krok(n+1)=1.368663e+000; ng(n+1)=1.814765e+000;
n=48; farx(n+1)=1.130426e+001; foe(n+1)=8.157480e+001; krok(n+1)=1.390988e+000; ng(n+1)=8.240719e-002;
n=49; farx(n+1)=1.130426e+001; foe(n+1)=8.157480e+001; krok(n+1)=3.360413e-006; ng(n+1)=4.986822e-002;
n=50; farx(n+1)=1.130426e+001; foe(n+1)=8.157480e+001; krok(n+1)=3.970043e-006; ng(n+1)=4.986808e-002;
%odnowa zmiennej metryki
n=51; farx(n+1)=1.130426e+001; foe(n+1)=8.157480e+001; krok(n+1)=1.297333e-006; ng(n+1)=4.986789e-002;
n=52; farx(n+1)=1.130426e+001; foe(n+1)=8.157480e+001; krok(n+1)=3.061523e-005; ng(n+1)=2.253026e-003;
n=53; farx(n+1)=1.130425e+001; foe(n+1)=8.157480e+001; krok(n+1)=2.413138e-004; ng(n+1)=1.560378e-003;
n=54; farx(n+1)=1.130424e+001; foe(n+1)=8.157480e+001; krok(n+1)=3.563460e-004; ng(n+1)=1.693326e-003;
n=55; farx(n+1)=1.130425e+001; foe(n+1)=8.157480e+001; krok(n+1)=4.578975e-003; ng(n+1)=6.507362e-004;
n=56; farx(n+1)=1.130424e+001; foe(n+1)=8.157480e+001; krok(n+1)=8.124092e-003; ng(n+1)=4.804105e-004;
n=57; farx(n+1)=1.130424e+001; foe(n+1)=8.157480e+001; krok(n+1)=3.009506e-005; ng(n+1)=3.919210e-004;
n=58; farx(n+1)=1.130424e+001; foe(n+1)=8.157480e+001; krok(n+1)=1.463132e-006; ng(n+1)=3.919011e-004;
n=59; farx(n+1)=1.130424e+001; foe(n+1)=8.157480e+001; krok(n+1)=1.218896e-007; ng(n+1)=3.919006e-004;
n=60; farx(n+1)=1.130424e+001; foe(n+1)=8.157480e+001; krok(n+1)=3.149218e-010; ng(n+1)=3.919005e-004;
n=61; farx(n+1)=1.130424e+001; foe(n+1)=8.157480e+001; krok(n+1)=1.049815e-009; ng(n+1)=3.919006e-004;
n=62; farx(n+1)=1.130424e+001; foe(n+1)=8.157480e+001; krok(n+1)=2.089263e-011; ng(n+1)=3.919007e-004;
n=63; farx(n+1)=1.130424e+001; foe(n+1)=8.157480e+001; krok(n+1)=1.248829e-008; ng(n+1)=3.919007e-004;
 % z³y kierunek w metodzie zm - odnowa 
n=64; farx(n+1)=1.130424e+001; foe(n+1)=8.157480e+001; krok(n+1)=2.271137e-013; ng(n+1)=3.919009e-004;
 % z³y kierunek w metodzie zm - odnowa 
 % z³y kierunek w metodzie zm po wykonaniu odnowy

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
