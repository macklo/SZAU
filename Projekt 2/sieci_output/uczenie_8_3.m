%uczenie predyktora oe
clear all;
n=0; farx(n+1)=4.616560e+003; foe(n+1)=4.791695e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=3.569532e+003; foe(n+1)=3.752597e+003; krok(n+1)=3.276764e-004; ng(n+1)=4.523271e+003;
n=2; farx(n+1)=8.884505e+002; foe(n+1)=1.155807e+003; krok(n+1)=1.635770e-003; ng(n+1)=3.014835e+003;
n=3; farx(n+1)=9.640834e+002; foe(n+1)=9.334556e+002; krok(n+1)=1.142910e-004; ng(n+1)=7.605656e+003;
n=4; farx(n+1)=1.337909e+003; foe(n+1)=7.895735e+002; krok(n+1)=6.847610e-004; ng(n+1)=7.160166e+003;
n=5; farx(n+1)=8.879271e+002; foe(n+1)=6.731945e+002; krok(n+1)=3.040595e-003; ng(n+1)=9.276425e+002;
n=6; farx(n+1)=3.309877e+002; foe(n+1)=4.117414e+002; krok(n+1)=2.896066e-003; ng(n+1)=3.434124e+003;
n=7; farx(n+1)=2.603047e+002; foe(n+1)=3.831681e+002; krok(n+1)=1.821668e-004; ng(n+1)=4.083082e+003;
n=8; farx(n+1)=2.267031e+002; foe(n+1)=3.685498e+002; krok(n+1)=3.660956e-003; ng(n+1)=2.360516e+003;
n=9; farx(n+1)=2.130746e+002; foe(n+1)=3.539324e+002; krok(n+1)=1.713251e-003; ng(n+1)=1.499964e+003;
n=10; farx(n+1)=2.122353e+002; foe(n+1)=3.501184e+002; krok(n+1)=7.496833e-004; ng(n+1)=9.537775e+002;
n=11; farx(n+1)=2.157260e+002; foe(n+1)=3.400240e+002; krok(n+1)=3.070097e-004; ng(n+1)=1.434077e+003;
n=12; farx(n+1)=2.355868e+002; foe(n+1)=3.310179e+002; krok(n+1)=1.338974e-003; ng(n+1)=1.002296e+003;
n=13; farx(n+1)=1.956598e+002; foe(n+1)=3.104999e+002; krok(n+1)=3.113587e-003; ng(n+1)=5.725621e+002;
n=14; farx(n+1)=1.352796e+002; foe(n+1)=2.860211e+002; krok(n+1)=3.240245e-003; ng(n+1)=1.482732e+003;
n=15; farx(n+1)=8.464310e+001; foe(n+1)=2.559953e+002; krok(n+1)=4.911266e-004; ng(n+1)=2.991413e+003;
n=16; farx(n+1)=6.264725e+001; foe(n+1)=2.446998e+002; krok(n+1)=4.987505e-004; ng(n+1)=2.548013e+003;
n=17; farx(n+1)=4.541706e+001; foe(n+1)=2.312895e+002; krok(n+1)=1.125636e-003; ng(n+1)=4.254318e+003;
n=18; farx(n+1)=3.944471e+001; foe(n+1)=2.124432e+002; krok(n+1)=1.407851e-003; ng(n+1)=5.205346e+003;
n=19; farx(n+1)=3.461959e+001; foe(n+1)=1.914116e+002; krok(n+1)=2.842659e-004; ng(n+1)=4.136437e+003;
n=20; farx(n+1)=3.428899e+001; foe(n+1)=1.798174e+002; krok(n+1)=1.869974e-003; ng(n+1)=5.788493e+003;
n=21; farx(n+1)=3.226295e+001; foe(n+1)=1.591097e+002; krok(n+1)=2.255186e-003; ng(n+1)=5.396521e+003;
n=22; farx(n+1)=3.304233e+001; foe(n+1)=1.563073e+002; krok(n+1)=2.258570e-004; ng(n+1)=3.009040e+003;
n=23; farx(n+1)=3.535413e+001; foe(n+1)=1.512930e+002; krok(n+1)=2.746916e-005; ng(n+1)=1.568511e+004;
n=24; farx(n+1)=3.505054e+001; foe(n+1)=1.436584e+002; krok(n+1)=2.326801e-003; ng(n+1)=1.750335e+004;
n=25; farx(n+1)=3.583486e+001; foe(n+1)=1.346858e+002; krok(n+1)=1.775201e-003; ng(n+1)=2.082653e+003;
%odnowa zmiennej metryki
n=26; farx(n+1)=3.581769e+001; foe(n+1)=1.338150e+002; krok(n+1)=8.601778e-008; ng(n+1)=1.284963e+004;
n=27; farx(n+1)=3.016788e+001; foe(n+1)=1.278277e+002; krok(n+1)=2.018691e-005; ng(n+1)=2.312885e+003;
n=28; farx(n+1)=2.746555e+001; foe(n+1)=1.228433e+002; krok(n+1)=5.378493e-005; ng(n+1)=6.093485e+003;
n=29; farx(n+1)=2.214417e+001; foe(n+1)=1.061226e+002; krok(n+1)=7.567049e-004; ng(n+1)=3.841081e+003;
n=30; farx(n+1)=1.584510e+001; foe(n+1)=8.394707e+001; krok(n+1)=3.081200e-004; ng(n+1)=8.147090e+003;
n=31; farx(n+1)=2.115935e+001; foe(n+1)=6.886809e+001; krok(n+1)=1.651908e-003; ng(n+1)=2.639868e+003;
n=32; farx(n+1)=2.357415e+001; foe(n+1)=5.947820e+001; krok(n+1)=1.111857e-003; ng(n+1)=3.177481e+003;
n=33; farx(n+1)=2.364685e+001; foe(n+1)=5.662763e+001; krok(n+1)=2.302017e-004; ng(n+1)=2.238356e+003;
n=34; farx(n+1)=2.507574e+001; foe(n+1)=5.150445e+001; krok(n+1)=2.156451e-003; ng(n+1)=1.157878e+003;
n=35; farx(n+1)=2.796898e+001; foe(n+1)=4.980426e+001; krok(n+1)=1.736904e-003; ng(n+1)=2.132626e+003;
n=36; farx(n+1)=2.845840e+001; foe(n+1)=4.753737e+001; krok(n+1)=2.281831e-003; ng(n+1)=1.676044e+003;
n=37; farx(n+1)=2.572288e+001; foe(n+1)=4.386590e+001; krok(n+1)=1.462193e-003; ng(n+1)=1.110595e+003;
n=38; farx(n+1)=1.795919e+001; foe(n+1)=3.380064e+001; krok(n+1)=5.836445e-003; ng(n+1)=2.430423e+003;
n=39; farx(n+1)=1.476539e+001; foe(n+1)=2.982562e+001; krok(n+1)=1.995002e-003; ng(n+1)=1.876711e+003;
n=40; farx(n+1)=1.249775e+001; foe(n+1)=2.499207e+001; krok(n+1)=1.857915e-003; ng(n+1)=2.274481e+003;
n=41; farx(n+1)=1.088718e+001; foe(n+1)=2.358667e+001; krok(n+1)=3.096185e-003; ng(n+1)=6.663104e+002;
n=42; farx(n+1)=9.429429e+000; foe(n+1)=2.074643e+001; krok(n+1)=2.778799e-003; ng(n+1)=1.790949e+003;
n=43; farx(n+1)=8.193479e+000; foe(n+1)=1.881656e+001; krok(n+1)=5.548179e-003; ng(n+1)=8.111888e+002;
n=44; farx(n+1)=8.017085e+000; foe(n+1)=1.836870e+001; krok(n+1)=3.765398e-003; ng(n+1)=7.201232e+002;
n=45; farx(n+1)=8.007300e+000; foe(n+1)=1.793380e+001; krok(n+1)=3.765398e-003; ng(n+1)=5.952515e+002;
n=46; farx(n+1)=6.633508e+000; foe(n+1)=1.564675e+001; krok(n+1)=5.985461e-002; ng(n+1)=1.225539e+003;
n=47; farx(n+1)=6.600118e+000; foe(n+1)=1.513830e+001; krok(n+1)=1.056599e-002; ng(n+1)=1.638755e+003;
n=48; farx(n+1)=6.356801e+000; foe(n+1)=1.495309e+001; krok(n+1)=1.486332e-002; ng(n+1)=1.666026e+003;
n=49; farx(n+1)=5.867888e+000; foe(n+1)=1.409118e+001; krok(n+1)=3.559767e-002; ng(n+1)=1.882580e+003;
n=50; farx(n+1)=5.436684e+000; foe(n+1)=1.291667e+001; krok(n+1)=2.243330e-002; ng(n+1)=1.481291e+003;
%odnowa zmiennej metryki
n=51; farx(n+1)=5.195525e+000; foe(n+1)=1.221104e+001; krok(n+1)=1.442554e-005; ng(n+1)=8.944954e+002;
n=52; farx(n+1)=5.164613e+000; foe(n+1)=1.205000e+001; krok(n+1)=9.657459e-006; ng(n+1)=5.785414e+002;
n=53; farx(n+1)=4.973950e+000; foe(n+1)=1.188249e+001; krok(n+1)=5.561724e-005; ng(n+1)=2.508877e+002;
n=54; farx(n+1)=4.777082e+000; foe(n+1)=1.158956e+001; krok(n+1)=5.362933e-004; ng(n+1)=1.109599e+002;
n=55; farx(n+1)=4.743326e+000; foe(n+1)=1.138495e+001; krok(n+1)=1.983052e-003; ng(n+1)=6.676099e+001;
n=56; farx(n+1)=4.722939e+000; foe(n+1)=1.088150e+001; krok(n+1)=1.273916e-003; ng(n+1)=1.372925e+002;
n=57; farx(n+1)=4.688366e+000; foe(n+1)=1.066956e+001; krok(n+1)=2.293321e-003; ng(n+1)=6.039211e+002;
n=58; farx(n+1)=4.785338e+000; foe(n+1)=1.045683e+001; krok(n+1)=3.187345e-003; ng(n+1)=7.484425e+002;
n=59; farx(n+1)=4.807866e+000; foe(n+1)=1.004046e+001; krok(n+1)=7.314625e-003; ng(n+1)=5.490044e+002;
n=60; farx(n+1)=4.661978e+000; foe(n+1)=9.152611e+000; krok(n+1)=1.340015e-002; ng(n+1)=9.385069e+002;
n=61; farx(n+1)=4.326187e+000; foe(n+1)=8.944118e+000; krok(n+1)=2.988526e-003; ng(n+1)=3.080435e+002;
n=62; farx(n+1)=4.086140e+000; foe(n+1)=8.757430e+000; krok(n+1)=1.296098e-002; ng(n+1)=2.247362e+002;
n=63; farx(n+1)=3.917161e+000; foe(n+1)=8.594507e+000; krok(n+1)=7.809264e-003; ng(n+1)=3.480690e+002;
n=64; farx(n+1)=3.631867e+000; foe(n+1)=8.391801e+000; krok(n+1)=1.675011e-002; ng(n+1)=2.929837e+002;
n=65; farx(n+1)=3.518374e+000; foe(n+1)=8.249016e+000; krok(n+1)=1.170476e-002; ng(n+1)=3.673390e+002;
n=66; farx(n+1)=2.823785e+000; foe(n+1)=7.481533e+000; krok(n+1)=1.552269e-002; ng(n+1)=2.595528e+002;
n=67; farx(n+1)=2.535239e+000; foe(n+1)=7.033958e+000; krok(n+1)=9.344559e-003; ng(n+1)=3.802845e+002;
n=68; farx(n+1)=2.265942e+000; foe(n+1)=6.689791e+000; krok(n+1)=6.669234e-003; ng(n+1)=5.444078e+002;
n=69; farx(n+1)=1.972690e+000; foe(n+1)=6.295316e+000; krok(n+1)=5.233259e-003; ng(n+1)=6.752826e+002;
n=70; farx(n+1)=1.803392e+000; foe(n+1)=5.717400e+000; krok(n+1)=4.388300e-002; ng(n+1)=6.371819e+002;
n=71; farx(n+1)=1.767557e+000; foe(n+1)=5.574575e+000; krok(n+1)=3.813159e-003; ng(n+1)=5.723226e+002;
n=72; farx(n+1)=1.664685e+000; foe(n+1)=5.343859e+000; krok(n+1)=3.095635e-002; ng(n+1)=6.174784e+002;
n=73; farx(n+1)=1.557962e+000; foe(n+1)=5.178810e+000; krok(n+1)=4.017797e-002; ng(n+1)=2.502050e+002;
n=74; farx(n+1)=1.517851e+000; foe(n+1)=5.045263e+000; krok(n+1)=1.136199e-002; ng(n+1)=8.300824e+002;
n=75; farx(n+1)=1.469928e+000; foe(n+1)=4.925452e+000; krok(n+1)=2.452306e-002; ng(n+1)=4.093008e+002;
%odnowa zmiennej metryki
n=76; farx(n+1)=1.469290e+000; foe(n+1)=4.837326e+000; krok(n+1)=5.530601e-006; ng(n+1)=5.264584e+002;
n=77; farx(n+1)=1.471096e+000; foe(n+1)=4.781622e+000; krok(n+1)=7.599740e-006; ng(n+1)=3.357787e+002;
n=78; farx(n+1)=1.471464e+000; foe(n+1)=4.731923e+000; krok(n+1)=2.063670e-005; ng(n+1)=2.365612e+002;
n=79; farx(n+1)=1.454654e+000; foe(n+1)=4.652966e+000; krok(n+1)=2.594055e-004; ng(n+1)=8.739498e+001;
n=80; farx(n+1)=1.416060e+000; foe(n+1)=4.385175e+000; krok(n+1)=2.488900e-003; ng(n+1)=5.265657e+001;
n=81; farx(n+1)=1.391996e+000; foe(n+1)=4.338991e+000; krok(n+1)=6.650130e-004; ng(n+1)=1.023822e+002;
n=82; farx(n+1)=1.382677e+000; foe(n+1)=4.239762e+000; krok(n+1)=3.364099e-003; ng(n+1)=1.441506e+002;
n=83; farx(n+1)=1.362466e+000; foe(n+1)=4.098627e+000; krok(n+1)=1.345435e-003; ng(n+1)=2.978077e+002;
n=84; farx(n+1)=1.373635e+000; foe(n+1)=3.777066e+000; krok(n+1)=9.625525e-003; ng(n+1)=6.662576e+002;
n=85; farx(n+1)=1.343418e+000; foe(n+1)=3.371316e+000; krok(n+1)=7.737158e-003; ng(n+1)=1.016099e+003;
n=86; farx(n+1)=1.333549e+000; foe(n+1)=3.255382e+000; krok(n+1)=8.443488e-003; ng(n+1)=1.680684e+002;
n=87; farx(n+1)=1.314358e+000; foe(n+1)=3.205478e+000; krok(n+1)=4.191618e-003; ng(n+1)=3.318588e+002;
n=88; farx(n+1)=1.176968e+000; foe(n+1)=2.943723e+000; krok(n+1)=1.559909e-002; ng(n+1)=2.272153e+002;
n=89; farx(n+1)=1.083203e+000; foe(n+1)=2.753217e+000; krok(n+1)=7.737158e-003; ng(n+1)=4.375119e+002;
n=90; farx(n+1)=9.934881e-001; foe(n+1)=2.478831e+000; krok(n+1)=1.136199e-002; ng(n+1)=6.678361e+002;
n=91; farx(n+1)=9.603479e-001; foe(n+1)=2.409331e+000; krok(n+1)=9.175071e-003; ng(n+1)=3.504551e+002;
n=92; farx(n+1)=9.451302e-001; foe(n+1)=2.356837e+000; krok(n+1)=7.342058e-003; ng(n+1)=2.214484e+002;
n=93; farx(n+1)=8.841710e-001; foe(n+1)=2.307289e+000; krok(n+1)=1.000091e-002; ng(n+1)=3.076463e+002;
n=94; farx(n+1)=8.241632e-001; foe(n+1)=2.223803e+000; krok(n+1)=2.272818e-002; ng(n+1)=3.458253e+002;
n=95; farx(n+1)=8.073230e-001; foe(n+1)=2.178762e+000; krok(n+1)=7.932207e-003; ng(n+1)=3.128820e+002;
n=96; farx(n+1)=7.352709e-001; foe(n+1)=2.061294e+000; krok(n+1)=2.643052e-002; ng(n+1)=1.279214e+002;
n=97; farx(n+1)=6.801356e-001; foe(n+1)=1.864489e+000; krok(n+1)=3.602034e-002; ng(n+1)=3.460573e+002;
n=98; farx(n+1)=6.702641e-001; foe(n+1)=1.749763e+000; krok(n+1)=2.165649e-002; ng(n+1)=7.508555e+002;
n=99; farx(n+1)=6.745389e-001; foe(n+1)=1.621761e+000; krok(n+1)=5.565015e-002; ng(n+1)=1.301725e+002;
n=100; farx(n+1)=7.482009e-001; foe(n+1)=1.444873e+000; krok(n+1)=7.274432e-002; ng(n+1)=3.864105e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
