%uczenie predyktora oe
clear all;
n=0; farx(n+1)=4.747129e+003; foe(n+1)=4.530052e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=3.163308e+003; foe(n+1)=2.926991e+003; krok(n+1)=5.202718e-004; ng(n+1)=4.305796e+003;
n=2; farx(n+1)=1.388381e+003; foe(n+1)=9.042625e+002; krok(n+1)=3.373181e-003; ng(n+1)=2.302827e+003;
n=3; farx(n+1)=1.658071e+003; foe(n+1)=5.571546e+002; krok(n+1)=4.216476e-004; ng(n+1)=5.559193e+003;
n=4; farx(n+1)=1.735782e+003; foe(n+1)=5.375667e+002; krok(n+1)=1.162400e-003; ng(n+1)=1.476536e+003;
n=5; farx(n+1)=1.049505e+003; foe(n+1)=4.641538e+002; krok(n+1)=5.711090e-003; ng(n+1)=4.640477e+002;
n=6; farx(n+1)=8.137412e+002; foe(n+1)=4.160347e+002; krok(n+1)=3.234251e-003; ng(n+1)=1.852048e+003;
n=7; farx(n+1)=2.687041e+002; foe(n+1)=2.816419e+002; krok(n+1)=3.032635e-003; ng(n+1)=2.097554e+003;
n=8; farx(n+1)=2.620617e+002; foe(n+1)=2.803312e+002; krok(n+1)=1.935115e-004; ng(n+1)=1.101149e+003;
n=9; farx(n+1)=2.446174e+002; foe(n+1)=2.781920e+002; krok(n+1)=2.121656e-003; ng(n+1)=4.421380e+002;
n=10; farx(n+1)=2.386225e+002; foe(n+1)=2.765884e+002; krok(n+1)=4.729213e-004; ng(n+1)=9.602257e+002;
n=11; farx(n+1)=2.077816e+002; foe(n+1)=2.692909e+002; krok(n+1)=1.700059e-003; ng(n+1)=8.832854e+002;
n=12; farx(n+1)=1.756255e+002; foe(n+1)=2.595853e+002; krok(n+1)=3.096185e-003; ng(n+1)=1.674847e+003;
n=13; farx(n+1)=1.644715e+002; foe(n+1)=2.501176e+002; krok(n+1)=1.237443e-003; ng(n+1)=1.177591e+003;
n=14; farx(n+1)=1.310755e+002; foe(n+1)=2.202233e+002; krok(n+1)=2.513970e-003; ng(n+1)=1.517800e+003;
n=15; farx(n+1)=1.238618e+002; foe(n+1)=2.139091e+002; krok(n+1)=3.812452e-004; ng(n+1)=1.699752e+003;
n=16; farx(n+1)=1.153320e+002; foe(n+1)=2.109410e+002; krok(n+1)=2.563269e-004; ng(n+1)=1.388546e+003;
n=17; farx(n+1)=9.081676e+001; foe(n+1)=2.052178e+002; krok(n+1)=1.667309e-003; ng(n+1)=1.061614e+003;
n=18; farx(n+1)=8.150209e+001; foe(n+1)=1.922390e+002; krok(n+1)=9.822020e-004; ng(n+1)=1.821621e+003;
n=19; farx(n+1)=7.893118e+001; foe(n+1)=1.907708e+002; krok(n+1)=8.489916e-005; ng(n+1)=2.377265e+003;
n=20; farx(n+1)=7.679277e+001; foe(n+1)=1.899804e+002; krok(n+1)=6.326141e-004; ng(n+1)=3.041822e+003;
n=21; farx(n+1)=8.467629e+001; foe(n+1)=1.840048e+002; krok(n+1)=3.470726e-003; ng(n+1)=3.036656e+003;
n=22; farx(n+1)=8.666649e+001; foe(n+1)=1.792510e+002; krok(n+1)=1.330026e-003; ng(n+1)=2.632231e+003;
n=23; farx(n+1)=8.903418e+001; foe(n+1)=1.774474e+002; krok(n+1)=1.387045e-003; ng(n+1)=2.339834e+003;
n=24; farx(n+1)=8.858973e+001; foe(n+1)=1.604805e+002; krok(n+1)=1.421020e-002; ng(n+1)=2.558992e+003;
n=25; farx(n+1)=8.804640e+001; foe(n+1)=1.591337e+002; krok(n+1)=2.526617e-004; ng(n+1)=1.494162e+003;
%odnowa zmiennej metryki
n=26; farx(n+1)=7.819581e+001; foe(n+1)=1.472717e+002; krok(n+1)=1.307587e-004; ng(n+1)=1.704698e+003;
n=27; farx(n+1)=7.296643e+001; foe(n+1)=1.199990e+002; krok(n+1)=4.412088e-005; ng(n+1)=3.521213e+003;
n=28; farx(n+1)=6.560877e+001; foe(n+1)=1.109514e+002; krok(n+1)=7.528795e-005; ng(n+1)=2.093466e+003;
n=29; farx(n+1)=6.118018e+001; foe(n+1)=1.074373e+002; krok(n+1)=3.933588e-004; ng(n+1)=4.554739e+003;
n=30; farx(n+1)=5.259442e+001; foe(n+1)=9.840766e+001; krok(n+1)=6.592938e-004; ng(n+1)=4.465471e+003;
n=31; farx(n+1)=5.208482e+001; foe(n+1)=8.883097e+001; krok(n+1)=9.352282e-004; ng(n+1)=4.981750e+003;
n=32; farx(n+1)=4.480162e+001; foe(n+1)=7.721077e+001; krok(n+1)=6.277808e-004; ng(n+1)=3.796671e+003;
n=33; farx(n+1)=3.732651e+001; foe(n+1)=6.463865e+001; krok(n+1)=4.282689e-003; ng(n+1)=1.377467e+003;
n=34; farx(n+1)=3.168419e+001; foe(n+1)=5.949663e+001; krok(n+1)=3.751501e-003; ng(n+1)=2.245407e+003;
n=35; farx(n+1)=2.820926e+001; foe(n+1)=5.452596e+001; krok(n+1)=3.176507e-003; ng(n+1)=5.962176e+002;
n=36; farx(n+1)=2.269538e+001; foe(n+1)=4.859609e+001; krok(n+1)=2.883948e-003; ng(n+1)=1.650339e+003;
n=37; farx(n+1)=1.672612e+001; foe(n+1)=4.039614e+001; krok(n+1)=3.137471e-003; ng(n+1)=1.159761e+003;
n=38; farx(n+1)=1.767155e+001; foe(n+1)=3.205985e+001; krok(n+1)=9.064776e-004; ng(n+1)=4.948930e+002;
n=39; farx(n+1)=1.734210e+001; foe(n+1)=3.166632e+001; krok(n+1)=2.578785e-004; ng(n+1)=1.065353e+003;
n=40; farx(n+1)=1.325802e+001; foe(n+1)=2.802430e+001; krok(n+1)=2.849598e-003; ng(n+1)=1.629420e+003;
n=41; farx(n+1)=9.528788e+000; foe(n+1)=2.330941e+001; krok(n+1)=4.317077e-003; ng(n+1)=1.046473e+003;
n=42; farx(n+1)=8.263629e+000; foe(n+1)=2.091937e+001; krok(n+1)=8.383236e-003; ng(n+1)=4.934611e+002;
n=43; farx(n+1)=8.540822e+000; foe(n+1)=1.975516e+001; krok(n+1)=9.576149e-003; ng(n+1)=1.357694e+003;
n=44; farx(n+1)=7.842822e+000; foe(n+1)=1.724900e+001; krok(n+1)=1.910413e-002; ng(n+1)=3.796034e+002;
n=45; farx(n+1)=6.767609e+000; foe(n+1)=1.561592e+001; krok(n+1)=2.093303e-002; ng(n+1)=7.963381e+002;
n=46; farx(n+1)=6.176314e+000; foe(n+1)=1.461334e+001; krok(n+1)=7.385876e-003; ng(n+1)=3.454379e+002;
n=47; farx(n+1)=5.682656e+000; foe(n+1)=1.350427e+001; krok(n+1)=2.355148e-002; ng(n+1)=2.278481e+002;
n=48; farx(n+1)=5.498077e+000; foe(n+1)=1.272497e+001; krok(n+1)=1.004449e-002; ng(n+1)=2.294200e+002;
n=49; farx(n+1)=5.452583e+000; foe(n+1)=1.244459e+001; krok(n+1)=3.542231e-002; ng(n+1)=3.625670e+002;
n=50; farx(n+1)=5.161218e+000; foe(n+1)=1.207144e+001; krok(n+1)=2.476948e-002; ng(n+1)=3.777429e+002;
%odnowa zmiennej metryki
n=51; farx(n+1)=5.177199e+000; foe(n+1)=1.204292e+001; krok(n+1)=1.556828e-005; ng(n+1)=1.926041e+002;
n=52; farx(n+1)=5.192216e+000; foe(n+1)=1.196217e+001; krok(n+1)=1.267358e-004; ng(n+1)=1.191587e+002;
n=53; farx(n+1)=5.164093e+000; foe(n+1)=1.189463e+001; krok(n+1)=4.072868e-004; ng(n+1)=6.127254e+001;
n=54; farx(n+1)=4.868337e+000; foe(n+1)=1.159404e+001; krok(n+1)=3.824295e-004; ng(n+1)=1.144213e+002;
n=55; farx(n+1)=4.341694e+000; foe(n+1)=1.038064e+001; krok(n+1)=3.401267e-003; ng(n+1)=8.785316e+001;
n=56; farx(n+1)=4.132122e+000; foe(n+1)=1.004233e+001; krok(n+1)=3.021288e-003; ng(n+1)=1.798175e+002;
n=57; farx(n+1)=3.833585e+000; foe(n+1)=9.497139e+000; krok(n+1)=1.012568e-002; ng(n+1)=4.449813e+002;
n=58; farx(n+1)=3.537010e+000; foe(n+1)=8.368934e+000; krok(n+1)=1.204622e-002; ng(n+1)=5.424441e+002;
n=59; farx(n+1)=3.410386e+000; foe(n+1)=8.024922e+000; krok(n+1)=1.010647e-003; ng(n+1)=5.219439e+002;
n=60; farx(n+1)=3.178608e+000; foe(n+1)=7.685464e+000; krok(n+1)=9.150227e-003; ng(n+1)=3.217076e+002;
n=61; farx(n+1)=3.017713e+000; foe(n+1)=7.316442e+000; krok(n+1)=1.801017e-002; ng(n+1)=3.361094e+002;
n=62; farx(n+1)=2.824383e+000; foe(n+1)=6.853131e+000; krok(n+1)=1.697325e-002; ng(n+1)=4.269703e+002;
n=63; farx(n+1)=2.612704e+000; foe(n+1)=6.256257e+000; krok(n+1)=4.944619e-003; ng(n+1)=7.247737e+002;
n=64; farx(n+1)=2.479623e+000; foe(n+1)=5.975627e+000; krok(n+1)=1.394089e-002; ng(n+1)=3.172429e+002;
n=65; farx(n+1)=2.369860e+000; foe(n+1)=5.663394e+000; krok(n+1)=1.082825e-002; ng(n+1)=3.522425e+002;
n=66; farx(n+1)=2.296673e+000; foe(n+1)=5.447583e+000; krok(n+1)=2.643052e-002; ng(n+1)=2.780245e+002;
n=67; farx(n+1)=2.207740e+000; foe(n+1)=5.163696e+000; krok(n+1)=2.191235e-002; ng(n+1)=3.408790e+002;
n=68; farx(n+1)=2.096496e+000; foe(n+1)=4.989208e+000; krok(n+1)=2.067140e-002; ng(n+1)=2.548663e+002;
n=69; farx(n+1)=1.971432e+000; foe(n+1)=4.680317e+000; krok(n+1)=2.410544e-002; ng(n+1)=3.706786e+002;
n=70; farx(n+1)=1.936493e+000; foe(n+1)=4.403132e+000; krok(n+1)=4.102628e-002; ng(n+1)=7.910796e+001;
n=71; farx(n+1)=1.852340e+000; foe(n+1)=4.278008e+000; krok(n+1)=1.729594e-002; ng(n+1)=1.650223e+002;
n=72; farx(n+1)=1.798898e+000; foe(n+1)=4.021824e+000; krok(n+1)=2.602503e-002; ng(n+1)=4.142761e+002;
n=73; farx(n+1)=1.795814e+000; foe(n+1)=3.924253e+000; krok(n+1)=1.675011e-002; ng(n+1)=1.387547e+002;
n=74; farx(n+1)=1.737542e+000; foe(n+1)=3.543992e+000; krok(n+1)=1.677326e-001; ng(n+1)=2.192502e+002;
n=75; farx(n+1)=1.723828e+000; foe(n+1)=3.468515e+000; krok(n+1)=2.946581e-002; ng(n+1)=1.269151e+002;
%odnowa zmiennej metryki
n=76; farx(n+1)=1.703785e+000; foe(n+1)=3.421705e+000; krok(n+1)=1.602405e-005; ng(n+1)=1.974737e+002;
n=77; farx(n+1)=1.691273e+000; foe(n+1)=3.398071e+000; krok(n+1)=1.633361e-005; ng(n+1)=1.666839e+002;
n=78; farx(n+1)=1.676571e+000; foe(n+1)=3.326486e+000; krok(n+1)=3.551278e-004; ng(n+1)=6.184480e+001;
n=79; farx(n+1)=1.655052e+000; foe(n+1)=3.280993e+000; krok(n+1)=2.509069e-004; ng(n+1)=5.714026e+001;
n=80; farx(n+1)=1.558526e+000; foe(n+1)=3.107382e+000; krok(n+1)=3.049962e-003; ng(n+1)=3.615962e+001;
n=81; farx(n+1)=1.553099e+000; foe(n+1)=3.066795e+000; krok(n+1)=2.043687e-003; ng(n+1)=1.468818e+002;
n=82; farx(n+1)=1.542498e+000; foe(n+1)=2.977609e+000; krok(n+1)=1.139839e-002; ng(n+1)=2.455381e+002;
n=83; farx(n+1)=1.535615e+000; foe(n+1)=2.897675e+000; krok(n+1)=1.564801e-002; ng(n+1)=4.523155e+002;
n=84; farx(n+1)=1.504034e+000; foe(n+1)=2.781190e+000; krok(n+1)=6.409470e-003; ng(n+1)=4.052917e+002;
n=85; farx(n+1)=1.491392e+000; foe(n+1)=2.737234e+000; krok(n+1)=7.481826e-003; ng(n+1)=3.365089e+002;
n=86; farx(n+1)=1.517030e+000; foe(n+1)=2.616631e+000; krok(n+1)=1.640492e-002; ng(n+1)=3.215731e+002;
n=87; farx(n+1)=1.501518e+000; foe(n+1)=2.557901e+000; krok(n+1)=1.676647e-002; ng(n+1)=1.803370e+002;
n=88; farx(n+1)=1.485057e+000; foe(n+1)=2.533066e+000; krok(n+1)=1.299379e-002; ng(n+1)=9.876326e+001;
n=89; farx(n+1)=1.467957e+000; foe(n+1)=2.497176e+000; krok(n+1)=4.715694e-002; ng(n+1)=1.016020e+002;
n=90; farx(n+1)=1.450204e+000; foe(n+1)=2.456718e+000; krok(n+1)=4.194258e-002; ng(n+1)=6.608036e+001;
n=91; farx(n+1)=1.417948e+000; foe(n+1)=2.397926e+000; krok(n+1)=5.857529e-002; ng(n+1)=1.345576e+002;
n=92; farx(n+1)=1.409849e+000; foe(n+1)=2.331638e+000; krok(n+1)=5.857529e-002; ng(n+1)=9.269491e+001;
n=93; farx(n+1)=1.422222e+000; foe(n+1)=2.293138e+000; krok(n+1)=2.642647e-002; ng(n+1)=9.796376e+001;
n=94; farx(n+1)=1.435451e+000; foe(n+1)=2.198931e+000; krok(n+1)=8.713251e-002; ng(n+1)=2.042135e+002;
n=95; farx(n+1)=1.428577e+000; foe(n+1)=2.154032e+000; krok(n+1)=1.853599e-002; ng(n+1)=8.365067e+001;
n=96; farx(n+1)=1.413567e+000; foe(n+1)=2.075990e+000; krok(n+1)=5.405940e-002; ng(n+1)=1.493607e+002;
n=97; farx(n+1)=1.392115e+000; foe(n+1)=2.039279e+000; krok(n+1)=6.640781e-002; ng(n+1)=8.869625e+001;
n=98; farx(n+1)=1.360159e+000; foe(n+1)=1.994479e+000; krok(n+1)=9.963479e-002; ng(n+1)=1.369583e+002;
n=99; farx(n+1)=1.322709e+000; foe(n+1)=1.915214e+000; krok(n+1)=7.581460e-002; ng(n+1)=2.205213e+002;
n=100; farx(n+1)=1.264528e+000; foe(n+1)=1.802477e+000; krok(n+1)=1.940886e-001; ng(n+1)=6.914378e+001;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
