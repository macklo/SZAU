%uczenie predyktora oe
clear all;
n=0; farx(n+1)=3.937165e+003; foe(n+1)=3.942867e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=2.856169e+003; foe(n+1)=2.871938e+003; krok(n+1)=5.126539e-004; ng(n+1)=2.917358e+003;
n=2; farx(n+1)=1.142149e+003; foe(n+1)=1.091178e+003; krok(n+1)=2.419456e-003; ng(n+1)=1.845654e+003;
n=3; farx(n+1)=1.379179e+003; foe(n+1)=7.676203e+002; krok(n+1)=1.767236e-004; ng(n+1)=6.497198e+003;
n=4; farx(n+1)=2.034113e+003; foe(n+1)=5.858672e+002; krok(n+1)=6.946998e-004; ng(n+1)=6.574723e+003;
n=5; farx(n+1)=2.039042e+003; foe(n+1)=5.389096e+002; krok(n+1)=1.983052e-003; ng(n+1)=1.108248e+003;
n=6; farx(n+1)=1.904267e+003; foe(n+1)=4.886264e+002; krok(n+1)=4.223924e-003; ng(n+1)=7.649961e+002;
n=7; farx(n+1)=1.061674e+003; foe(n+1)=4.146275e+002; krok(n+1)=1.071441e-002; ng(n+1)=9.459726e+002;
n=8; farx(n+1)=9.301443e+002; foe(n+1)=3.900676e+002; krok(n+1)=2.531421e-003; ng(n+1)=7.742600e+002;
n=9; farx(n+1)=7.754012e+002; foe(n+1)=3.813923e+002; krok(n+1)=9.545881e-003; ng(n+1)=3.376294e+002;
n=10; farx(n+1)=6.689445e+002; foe(n+1)=3.617919e+002; krok(n+1)=9.939393e-003; ng(n+1)=4.590224e+002;
n=11; farx(n+1)=6.244381e+002; foe(n+1)=3.512262e+002; krok(n+1)=1.427772e-003; ng(n+1)=7.532330e+002;
n=12; farx(n+1)=4.439327e+002; foe(n+1)=3.311526e+002; krok(n+1)=5.608389e-003; ng(n+1)=1.012713e+003;
n=13; farx(n+1)=3.406822e+002; foe(n+1)=3.129496e+002; krok(n+1)=6.425309e-003; ng(n+1)=8.154928e+002;
n=14; farx(n+1)=3.024888e+002; foe(n+1)=2.964875e+002; krok(n+1)=5.062842e-003; ng(n+1)=7.354359e+002;
n=15; farx(n+1)=3.074536e+002; foe(n+1)=2.922196e+002; krok(n+1)=3.023106e-003; ng(n+1)=1.180924e+003;
n=16; farx(n+1)=2.634071e+002; foe(n+1)=2.792461e+002; krok(n+1)=5.792131e-003; ng(n+1)=1.225710e+003;
n=17; farx(n+1)=2.736748e+002; foe(n+1)=2.770850e+002; krok(n+1)=3.446556e-003; ng(n+1)=1.941215e+003;
n=18; farx(n+1)=3.078220e+002; foe(n+1)=2.684807e+002; krok(n+1)=1.226153e-002; ng(n+1)=1.884305e+003;
n=19; farx(n+1)=2.858723e+002; foe(n+1)=2.466221e+002; krok(n+1)=2.331822e-002; ng(n+1)=1.235528e+003;
n=20; farx(n+1)=2.569836e+002; foe(n+1)=2.384469e+002; krok(n+1)=3.264384e-003; ng(n+1)=1.518188e+003;
n=21; farx(n+1)=1.867534e+002; foe(n+1)=2.091636e+002; krok(n+1)=5.466235e-002; ng(n+1)=2.942030e+003;
n=22; farx(n+1)=1.475449e+002; foe(n+1)=1.672302e+002; krok(n+1)=8.193332e-003; ng(n+1)=7.963942e+003;
n=23; farx(n+1)=1.432288e+002; foe(n+1)=1.578114e+002; krok(n+1)=2.378377e-002; ng(n+1)=4.085152e+003;
n=24; farx(n+1)=1.177016e+002; foe(n+1)=1.461035e+002; krok(n+1)=9.830492e-003; ng(n+1)=1.787930e+003;
n=25; farx(n+1)=8.289938e+001; foe(n+1)=1.025797e+002; krok(n+1)=3.589327e-001; ng(n+1)=2.833182e+003;
%odnowa zmiennej metryki
n=26; farx(n+1)=8.184993e+001; foe(n+1)=1.013699e+002; krok(n+1)=2.020511e-005; ng(n+1)=8.426464e+002;
n=27; farx(n+1)=8.023327e+001; foe(n+1)=9.284627e+001; krok(n+1)=3.223481e-005; ng(n+1)=1.831144e+003;
n=28; farx(n+1)=5.970139e+001; foe(n+1)=8.078562e+001; krok(n+1)=3.229906e-004; ng(n+1)=1.212982e+003;
n=29; farx(n+1)=4.326926e+001; foe(n+1)=6.821619e+001; krok(n+1)=3.604935e-004; ng(n+1)=1.914246e+003;
n=30; farx(n+1)=2.347552e+001; foe(n+1)=4.544630e+001; krok(n+1)=1.255562e-003; ng(n+1)=5.492848e+003;
n=31; farx(n+1)=2.161743e+001; foe(n+1)=4.270007e+001; krok(n+1)=2.722891e-003; ng(n+1)=6.877289e+002;
n=32; farx(n+1)=1.697642e+001; foe(n+1)=3.363195e+001; krok(n+1)=2.953444e-003; ng(n+1)=1.044980e+003;
n=33; farx(n+1)=1.452311e+001; foe(n+1)=3.150668e+001; krok(n+1)=1.524981e-003; ng(n+1)=8.497471e+002;
n=34; farx(n+1)=1.109067e+001; foe(n+1)=2.442356e+001; krok(n+1)=2.857938e-002; ng(n+1)=1.335932e+003;
n=35; farx(n+1)=1.014042e+001; foe(n+1)=2.322079e+001; krok(n+1)=2.426783e-003; ng(n+1)=1.884120e+002;
n=36; farx(n+1)=8.991004e+000; foe(n+1)=2.221587e+001; krok(n+1)=4.615931e-003; ng(n+1)=8.595401e+002;
n=37; farx(n+1)=8.075731e+000; foe(n+1)=2.096444e+001; krok(n+1)=2.620821e-003; ng(n+1)=1.031840e+003;
n=38; farx(n+1)=7.764977e+000; foe(n+1)=1.890465e+001; krok(n+1)=6.832143e-003; ng(n+1)=1.041794e+003;
n=39; farx(n+1)=7.657908e+000; foe(n+1)=1.704492e+001; krok(n+1)=8.877087e-002; ng(n+1)=1.270348e+003;
n=40; farx(n+1)=5.039086e+000; foe(n+1)=1.412808e+001; krok(n+1)=2.587256e-001; ng(n+1)=4.095899e+002;
n=41; farx(n+1)=4.776466e+000; foe(n+1)=1.356172e+001; krok(n+1)=2.486715e-002; ng(n+1)=2.702313e+002;
n=42; farx(n+1)=4.594761e+000; foe(n+1)=1.295028e+001; krok(n+1)=1.454886e-001; ng(n+1)=1.831740e+002;
n=43; farx(n+1)=4.737644e+000; foe(n+1)=1.217131e+001; krok(n+1)=1.943277e-001; ng(n+1)=3.200443e+002;
n=44; farx(n+1)=3.780023e+000; foe(n+1)=1.122194e+001; krok(n+1)=3.307424e-001; ng(n+1)=2.159922e+002;
n=45; farx(n+1)=3.494253e+000; foe(n+1)=1.081883e+001; krok(n+1)=2.948231e-001; ng(n+1)=1.267120e+002;
n=46; farx(n+1)=3.027635e+000; foe(n+1)=1.023799e+001; krok(n+1)=2.503681e-001; ng(n+1)=1.999429e+002;
n=47; farx(n+1)=2.634527e+000; foe(n+1)=9.535507e+000; krok(n+1)=2.007487e-001; ng(n+1)=2.980797e+002;
n=48; farx(n+1)=2.411190e+000; foe(n+1)=8.779455e+000; krok(n+1)=2.617897e-001; ng(n+1)=4.858260e+002;
n=49; farx(n+1)=2.341664e+000; foe(n+1)=8.080085e+000; krok(n+1)=2.589461e-001; ng(n+1)=2.628445e+002;
n=50; farx(n+1)=2.209803e+000; foe(n+1)=7.755441e+000; krok(n+1)=2.522670e-001; ng(n+1)=2.926033e+002;
%odnowa zmiennej metryki
n=51; farx(n+1)=2.207566e+000; foe(n+1)=7.711494e+000; krok(n+1)=5.036867e-006; ng(n+1)=2.858524e+002;
n=52; farx(n+1)=2.215942e+000; foe(n+1)=7.698835e+000; krok(n+1)=6.800238e-005; ng(n+1)=4.490982e+001;
n=53; farx(n+1)=2.217912e+000; foe(n+1)=7.692148e+000; krok(n+1)=4.685521e-005; ng(n+1)=4.293574e+001;
n=54; farx(n+1)=2.255876e+000; foe(n+1)=7.615564e+000; krok(n+1)=1.667309e-003; ng(n+1)=2.361360e+001;
n=55; farx(n+1)=2.271028e+000; foe(n+1)=7.574452e+000; krok(n+1)=2.051078e-003; ng(n+1)=1.912972e+001;
n=56; farx(n+1)=2.255246e+000; foe(n+1)=7.547029e+000; krok(n+1)=1.473014e-003; ng(n+1)=2.445066e+001;
n=57; farx(n+1)=2.274257e+000; foe(n+1)=7.474666e+000; krok(n+1)=2.840497e-003; ng(n+1)=2.921708e+001;
n=58; farx(n+1)=2.269966e+000; foe(n+1)=7.382978e+000; krok(n+1)=1.989989e-002; ng(n+1)=5.219656e+001;
n=59; farx(n+1)=2.236233e+000; foe(n+1)=7.310232e+000; krok(n+1)=4.738412e-003; ng(n+1)=9.288697e+001;
n=60; farx(n+1)=2.167548e+000; foe(n+1)=7.108197e+000; krok(n+1)=3.291899e-002; ng(n+1)=2.180051e+002;
n=61; farx(n+1)=2.158440e+000; foe(n+1)=7.001471e+000; krok(n+1)=2.262062e-002; ng(n+1)=2.519329e+002;
n=62; farx(n+1)=2.132118e+000; foe(n+1)=6.875073e+000; krok(n+1)=6.208155e-002; ng(n+1)=1.951786e+002;
n=63; farx(n+1)=2.101196e+000; foe(n+1)=6.800208e+000; krok(n+1)=7.100297e-002; ng(n+1)=2.799846e+002;
n=64; farx(n+1)=2.096274e+000; foe(n+1)=6.695226e+000; krok(n+1)=7.045190e-002; ng(n+1)=3.483795e+002;
n=65; farx(n+1)=2.011723e+000; foe(n+1)=6.436590e+000; krok(n+1)=1.981558e-001; ng(n+1)=4.278749e+002;
n=66; farx(n+1)=2.032240e+000; foe(n+1)=6.192201e+000; krok(n+1)=2.468205e-001; ng(n+1)=1.154988e+002;
n=67; farx(n+1)=1.994767e+000; foe(n+1)=5.994845e+000; krok(n+1)=2.693452e-001; ng(n+1)=2.335161e+002;
n=68; farx(n+1)=1.938106e+000; foe(n+1)=5.673009e+000; krok(n+1)=2.114442e-001; ng(n+1)=3.611989e+002;
n=69; farx(n+1)=1.954064e+000; foe(n+1)=5.515146e+000; krok(n+1)=2.515310e-001; ng(n+1)=4.551304e+002;
n=70; farx(n+1)=2.000520e+000; foe(n+1)=5.326930e+000; krok(n+1)=2.997685e-001; ng(n+1)=2.073284e+002;
n=71; farx(n+1)=1.967638e+000; foe(n+1)=5.205363e+000; krok(n+1)=5.203615e-001; ng(n+1)=6.554669e+001;
n=72; farx(n+1)=1.966816e+000; foe(n+1)=5.148058e+000; krok(n+1)=2.845227e-001; ng(n+1)=1.395027e+002;
n=73; farx(n+1)=1.905331e+000; foe(n+1)=5.062534e+000; krok(n+1)=3.311156e-001; ng(n+1)=1.218675e+002;
n=74; farx(n+1)=1.855495e+000; foe(n+1)=4.921744e+000; krok(n+1)=6.480438e-001; ng(n+1)=2.482658e+002;
n=75; farx(n+1)=1.816266e+000; foe(n+1)=4.656255e+000; krok(n+1)=1.024434e+000; ng(n+1)=7.660111e+001;
%odnowa zmiennej metryki
n=76; farx(n+1)=1.813749e+000; foe(n+1)=4.630447e+000; krok(n+1)=2.783541e-006; ng(n+1)=2.826741e+002;
n=77; farx(n+1)=1.813589e+000; foe(n+1)=4.625387e+000; krok(n+1)=3.298238e-005; ng(n+1)=3.482454e+001;
n=78; farx(n+1)=1.826085e+000; foe(n+1)=4.581865e+000; krok(n+1)=5.733303e-004; ng(n+1)=2.531287e+001;
n=79; farx(n+1)=1.818961e+000; foe(n+1)=4.575020e+000; krok(n+1)=2.377984e-004; ng(n+1)=1.867951e+001;
n=80; farx(n+1)=1.817064e+000; foe(n+1)=4.551860e+000; krok(n+1)=3.604935e-004; ng(n+1)=2.634915e+001;
n=81; farx(n+1)=1.797112e+000; foe(n+1)=4.518740e+000; krok(n+1)=1.635770e-003; ng(n+1)=1.439486e+001;
n=82; farx(n+1)=1.793799e+000; foe(n+1)=4.472203e+000; krok(n+1)=5.608324e-003; ng(n+1)=2.474587e+001;
n=83; farx(n+1)=1.755711e+000; foe(n+1)=4.367179e+000; krok(n+1)=1.251384e-002; ng(n+1)=9.986718e+001;
n=84; farx(n+1)=1.725454e+000; foe(n+1)=4.328664e+000; krok(n+1)=2.118799e-002; ng(n+1)=2.827608e+002;
n=85; farx(n+1)=1.710952e+000; foe(n+1)=4.304568e+000; krok(n+1)=2.835564e-002; ng(n+1)=1.072221e+002;
n=86; farx(n+1)=1.713063e+000; foe(n+1)=4.176853e+000; krok(n+1)=1.354890e-001; ng(n+1)=1.354166e+002;
n=87; farx(n+1)=1.683783e+000; foe(n+1)=4.120726e+000; krok(n+1)=1.158784e-001; ng(n+1)=1.044332e+002;
n=88; farx(n+1)=1.657064e+000; foe(n+1)=4.098306e+000; krok(n+1)=8.877087e-002; ng(n+1)=1.211746e+002;
n=89; farx(n+1)=1.644525e+000; foe(n+1)=4.082546e+000; krok(n+1)=5.397089e-002; ng(n+1)=1.433807e+002;
n=90; farx(n+1)=1.613525e+000; foe(n+1)=4.033523e+000; krok(n+1)=3.161324e-001; ng(n+1)=7.341936e+001;
n=91; farx(n+1)=1.609298e+000; foe(n+1)=3.917053e+000; krok(n+1)=3.372291e-001; ng(n+1)=8.312359e+001;
n=92; farx(n+1)=1.583615e+000; foe(n+1)=3.856523e+000; krok(n+1)=1.717868e-001; ng(n+1)=1.025591e+002;
n=93; farx(n+1)=1.521119e+000; foe(n+1)=3.730982e+000; krok(n+1)=4.352152e-001; ng(n+1)=2.232600e+002;
n=94; farx(n+1)=1.476934e+000; foe(n+1)=3.641958e+000; krok(n+1)=2.283902e-001; ng(n+1)=1.211398e+002;
n=95; farx(n+1)=1.472179e+000; foe(n+1)=3.561198e+000; krok(n+1)=1.653712e-001; ng(n+1)=1.509457e+002;
n=96; farx(n+1)=1.461308e+000; foe(n+1)=3.409377e+000; krok(n+1)=3.112246e-001; ng(n+1)=2.528469e+002;
n=97; farx(n+1)=1.452901e+000; foe(n+1)=3.170559e+000; krok(n+1)=3.963116e-001; ng(n+1)=1.439236e+002;
n=98; farx(n+1)=1.410235e+000; foe(n+1)=3.064698e+000; krok(n+1)=2.176076e-001; ng(n+1)=1.104807e+002;
n=99; farx(n+1)=1.394322e+000; foe(n+1)=2.967796e+000; krok(n+1)=9.282613e-002; ng(n+1)=1.970146e+002;
n=100; farx(n+1)=1.400888e+000; foe(n+1)=2.892461e+000; krok(n+1)=2.144024e-001; ng(n+1)=1.243487e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
