%uczenie predyktora oe
clear all;
n=0; farx(n+1)=4.060597e+003; foe(n+1)=4.109028e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=3.078293e+003; foe(n+1)=3.041552e+003; krok(n+1)=4.819384e-004; ng(n+1)=3.159804e+003;
n=2; farx(n+1)=2.112798e+003; foe(n+1)=2.403567e+003; krok(n+1)=9.590335e-003; ng(n+1)=5.727843e+002;
n=3; farx(n+1)=3.884263e+003; foe(n+1)=1.209454e+003; krok(n+1)=1.418485e-004; ng(n+1)=1.195000e+004;
n=4; farx(n+1)=3.981724e+003; foe(n+1)=9.885054e+002; krok(n+1)=2.809248e-005; ng(n+1)=1.120730e+004;
n=5; farx(n+1)=3.149428e+003; foe(n+1)=8.997317e+002; krok(n+1)=2.178264e-004; ng(n+1)=5.400271e+003;
n=6; farx(n+1)=2.224609e+003; foe(n+1)=7.823101e+002; krok(n+1)=7.278993e-005; ng(n+1)=5.562669e+003;
n=7; farx(n+1)=1.797347e+003; foe(n+1)=6.930083e+002; krok(n+1)=5.309035e-004; ng(n+1)=4.897745e+003;
n=8; farx(n+1)=1.625595e+003; foe(n+1)=6.300704e+002; krok(n+1)=3.551278e-004; ng(n+1)=4.008486e+003;
n=9; farx(n+1)=1.789852e+003; foe(n+1)=5.681166e+002; krok(n+1)=1.050435e-003; ng(n+1)=3.320340e+003;
n=10; farx(n+1)=1.928060e+003; foe(n+1)=5.546054e+002; krok(n+1)=3.023969e-003; ng(n+1)=1.550546e+003;
n=11; farx(n+1)=1.818094e+003; foe(n+1)=5.197400e+002; krok(n+1)=6.314847e-003; ng(n+1)=1.869093e+003;
n=12; farx(n+1)=1.806675e+003; foe(n+1)=5.087932e+002; krok(n+1)=1.726346e-003; ng(n+1)=2.341266e+003;
n=13; farx(n+1)=1.938838e+003; foe(n+1)=4.934875e+002; krok(n+1)=1.716139e-002; ng(n+1)=2.117386e+003;
n=14; farx(n+1)=1.875576e+003; foe(n+1)=4.847664e+002; krok(n+1)=8.023134e-003; ng(n+1)=1.744061e+003;
n=15; farx(n+1)=1.679089e+003; foe(n+1)=4.741981e+002; krok(n+1)=1.080437e-002; ng(n+1)=1.547790e+003;
n=16; farx(n+1)=1.618149e+003; foe(n+1)=4.669197e+002; krok(n+1)=2.883948e-003; ng(n+1)=1.426491e+003;
n=17; farx(n+1)=1.539289e+003; foe(n+1)=4.625753e+002; krok(n+1)=2.914669e-003; ng(n+1)=3.482160e+003;
n=18; farx(n+1)=1.410765e+003; foe(n+1)=4.533170e+002; krok(n+1)=4.829711e-003; ng(n+1)=1.409422e+003;
n=19; farx(n+1)=1.286588e+003; foe(n+1)=4.416880e+002; krok(n+1)=1.000091e-002; ng(n+1)=2.019279e+003;
n=20; farx(n+1)=1.248655e+003; foe(n+1)=4.351095e+002; krok(n+1)=2.835564e-002; ng(n+1)=1.107415e+003;
n=21; farx(n+1)=1.251619e+003; foe(n+1)=4.281089e+002; krok(n+1)=5.135894e-002; ng(n+1)=1.125299e+003;
n=22; farx(n+1)=1.197077e+003; foe(n+1)=4.131460e+002; krok(n+1)=1.534454e-001; ng(n+1)=9.300263e+002;
n=23; farx(n+1)=1.158302e+003; foe(n+1)=3.931508e+002; krok(n+1)=2.002215e-001; ng(n+1)=7.195589e+002;
n=24; farx(n+1)=6.709781e+002; foe(n+1)=3.601565e+002; krok(n+1)=2.475890e-001; ng(n+1)=9.411831e+002;
n=25; farx(n+1)=3.409937e+002; foe(n+1)=3.102930e+002; krok(n+1)=3.346481e-001; ng(n+1)=1.103299e+003;
%odnowa zmiennej metryki
n=26; farx(n+1)=3.483915e+002; foe(n+1)=3.084299e+002; krok(n+1)=1.641052e-005; ng(n+1)=1.127913e+003;
n=27; farx(n+1)=2.400280e+002; foe(n+1)=2.788734e+002; krok(n+1)=8.071467e-004; ng(n+1)=5.109144e+002;
n=28; farx(n+1)=2.285384e+002; foe(n+1)=2.761881e+002; krok(n+1)=2.832743e-005; ng(n+1)=9.228392e+002;
n=29; farx(n+1)=2.165647e+002; foe(n+1)=2.737677e+002; krok(n+1)=1.046887e-004; ng(n+1)=8.300299e+002;
n=30; farx(n+1)=1.670780e+002; foe(n+1)=2.585667e+002; krok(n+1)=6.066958e-004; ng(n+1)=9.341881e+002;
n=31; farx(n+1)=1.360538e+002; foe(n+1)=2.480943e+002; krok(n+1)=1.323510e-003; ng(n+1)=4.007636e+003;
n=32; farx(n+1)=1.231043e+002; foe(n+1)=2.366587e+002; krok(n+1)=1.216567e-003; ng(n+1)=6.255888e+003;
n=33; farx(n+1)=1.076648e+002; foe(n+1)=2.267973e+002; krok(n+1)=2.298967e-003; ng(n+1)=1.174362e+004;
n=34; farx(n+1)=1.021838e+002; foe(n+1)=2.197740e+002; krok(n+1)=3.364099e-003; ng(n+1)=8.973630e+003;
n=35; farx(n+1)=9.139100e+001; foe(n+1)=2.148372e+002; krok(n+1)=2.087697e-003; ng(n+1)=8.209456e+003;
n=36; farx(n+1)=5.634560e+001; foe(n+1)=1.917282e+002; krok(n+1)=1.293127e-003; ng(n+1)=1.113793e+004;
n=37; farx(n+1)=4.766126e+001; foe(n+1)=1.796769e+002; krok(n+1)=1.517118e-002; ng(n+1)=5.339562e+003;
n=38; farx(n+1)=5.062589e+001; foe(n+1)=1.776788e+002; krok(n+1)=7.700880e-003; ng(n+1)=6.690963e+003;
n=39; farx(n+1)=4.658241e+001; foe(n+1)=1.736461e+002; krok(n+1)=1.941426e-002; ng(n+1)=4.578181e+003;
n=40; farx(n+1)=3.728601e+001; foe(n+1)=1.342844e+002; krok(n+1)=7.301859e-002; ng(n+1)=3.682996e+003;
n=41; farx(n+1)=3.731887e+001; foe(n+1)=1.307524e+002; krok(n+1)=5.801633e-003; ng(n+1)=2.433100e+003;
n=42; farx(n+1)=3.781645e+001; foe(n+1)=1.278379e+002; krok(n+1)=1.059400e-002; ng(n+1)=4.406713e+003;
n=43; farx(n+1)=3.476118e+001; foe(n+1)=1.159799e+002; krok(n+1)=3.980518e-002; ng(n+1)=1.355552e+003;
n=44; farx(n+1)=3.272204e+001; foe(n+1)=1.059944e+002; krok(n+1)=1.891780e-002; ng(n+1)=1.425663e+004;
n=45; farx(n+1)=3.621945e+001; foe(n+1)=9.611661e+001; krok(n+1)=1.778431e-001; ng(n+1)=2.241132e+003;
n=46; farx(n+1)=3.637385e+001; foe(n+1)=9.171774e+001; krok(n+1)=2.476948e-002; ng(n+1)=3.886345e+003;
n=47; farx(n+1)=3.030025e+001; foe(n+1)=8.661773e+001; krok(n+1)=7.951813e-002; ng(n+1)=6.754253e+003;
n=48; farx(n+1)=2.458511e+001; foe(n+1)=7.714277e+001; krok(n+1)=9.137743e-002; ng(n+1)=5.521866e+003;
n=49; farx(n+1)=2.197683e+001; foe(n+1)=6.623945e+001; krok(n+1)=2.733356e-001; ng(n+1)=9.794847e+002;
n=50; farx(n+1)=2.113645e+001; foe(n+1)=6.105177e+001; krok(n+1)=7.700420e-002; ng(n+1)=8.510829e+003;
%odnowa zmiennej metryki
n=51; farx(n+1)=2.103438e+001; foe(n+1)=6.032416e+001; krok(n+1)=1.981386e-007; ng(n+1)=4.568074e+003;
n=52; farx(n+1)=2.001594e+001; foe(n+1)=5.866859e+001; krok(n+1)=3.039896e-005; ng(n+1)=7.348345e+002;
n=53; farx(n+1)=2.001124e+001; foe(n+1)=5.776588e+001; krok(n+1)=7.616673e-005; ng(n+1)=1.545215e+003;
n=54; farx(n+1)=1.752592e+001; foe(n+1)=5.271081e+001; krok(n+1)=1.863040e-004; ng(n+1)=3.038129e+003;
n=55; farx(n+1)=1.576127e+001; foe(n+1)=5.168989e+001; krok(n+1)=8.500296e-004; ng(n+1)=7.163265e+003;
n=56; farx(n+1)=1.546408e+001; foe(n+1)=5.134586e+001; krok(n+1)=2.608382e-004; ng(n+1)=3.840090e+003;
n=57; farx(n+1)=1.378199e+001; foe(n+1)=4.971154e+001; krok(n+1)=2.480280e-003; ng(n+1)=1.313350e+003;
n=58; farx(n+1)=1.149254e+001; foe(n+1)=4.809225e+001; krok(n+1)=1.548346e-003; ng(n+1)=1.273445e+004;
n=59; farx(n+1)=8.346932e+000; foe(n+1)=4.403347e+001; krok(n+1)=1.871779e-002; ng(n+1)=4.408700e+003;
n=60; farx(n+1)=8.196200e+000; foe(n+1)=4.371583e+001; krok(n+1)=6.037139e-004; ng(n+1)=2.031267e+003;
n=61; farx(n+1)=8.040982e+000; foe(n+1)=4.348821e+001; krok(n+1)=3.460293e-003; ng(n+1)=4.639396e+003;
n=62; farx(n+1)=7.468745e+000; foe(n+1)=4.282401e+001; krok(n+1)=4.663645e-002; ng(n+1)=3.615748e+003;
n=63; farx(n+1)=6.779616e+000; foe(n+1)=4.124304e+001; krok(n+1)=3.742693e-002; ng(n+1)=3.989342e+003;
n=64; farx(n+1)=6.856905e+000; foe(n+1)=4.080155e+001; krok(n+1)=4.708571e-003; ng(n+1)=3.472342e+003;
n=65; farx(n+1)=6.633613e+000; foe(n+1)=4.021761e+001; krok(n+1)=3.211609e-002; ng(n+1)=9.721279e+002;
n=66; farx(n+1)=5.753946e+000; foe(n+1)=3.891066e+001; krok(n+1)=3.389322e-002; ng(n+1)=4.090975e+003;
n=67; farx(n+1)=4.345170e+000; foe(n+1)=3.339844e+001; krok(n+1)=1.392689e-001; ng(n+1)=4.613489e+003;
n=68; farx(n+1)=3.919280e+000; foe(n+1)=3.121898e+001; krok(n+1)=9.327289e-002; ng(n+1)=2.262196e+003;
n=69; farx(n+1)=3.293313e+000; foe(n+1)=2.628341e+001; krok(n+1)=1.380129e-001; ng(n+1)=5.091577e+003;
n=70; farx(n+1)=3.019632e+000; foe(n+1)=2.431825e+001; krok(n+1)=4.614317e-002; ng(n+1)=1.719759e+003;
n=71; farx(n+1)=2.903991e+000; foe(n+1)=2.329061e+001; krok(n+1)=9.282613e-002; ng(n+1)=6.129798e+003;
n=72; farx(n+1)=2.669623e+000; foe(n+1)=2.212737e+001; krok(n+1)=2.205796e-001; ng(n+1)=3.377905e+003;
n=73; farx(n+1)=2.710002e+000; foe(n+1)=2.056888e+001; krok(n+1)=6.321212e-001; ng(n+1)=1.211308e+003;
n=74; farx(n+1)=2.776982e+000; foe(n+1)=1.929100e+001; krok(n+1)=3.450079e-001; ng(n+1)=1.024379e+003;
n=75; farx(n+1)=2.779720e+000; foe(n+1)=1.816217e+001; krok(n+1)=3.691454e-001; ng(n+1)=1.639486e+003;
%odnowa zmiennej metryki
n=76; farx(n+1)=2.774685e+000; foe(n+1)=1.776338e+001; krok(n+1)=1.366714e-007; ng(n+1)=4.895379e+003;
n=77; farx(n+1)=2.789424e+000; foe(n+1)=1.757933e+001; krok(n+1)=1.376038e-006; ng(n+1)=9.994184e+002;
n=78; farx(n+1)=2.792580e+000; foe(n+1)=1.754255e+001; krok(n+1)=6.464322e-006; ng(n+1)=3.055549e+002;
n=79; farx(n+1)=2.644633e+000; foe(n+1)=1.689890e+001; krok(n+1)=1.025308e-003; ng(n+1)=2.057762e+002;
n=80; farx(n+1)=2.664822e+000; foe(n+1)=1.681372e+001; krok(n+1)=1.258386e-004; ng(n+1)=1.336960e+003;
n=81; farx(n+1)=2.600654e+000; foe(n+1)=1.603473e+001; krok(n+1)=4.653602e-003; ng(n+1)=1.326889e+003;
n=82; farx(n+1)=2.560655e+000; foe(n+1)=1.549295e+001; krok(n+1)=6.130766e-003; ng(n+1)=1.567011e+003;
n=83; farx(n+1)=2.524137e+000; foe(n+1)=1.529462e+001; krok(n+1)=2.847449e-003; ng(n+1)=5.835263e+002;
n=84; farx(n+1)=2.384116e+000; foe(n+1)=1.446355e+001; krok(n+1)=1.716139e-002; ng(n+1)=7.722844e+002;
n=85; farx(n+1)=2.361889e+000; foe(n+1)=1.421874e+001; krok(n+1)=6.118871e-003; ng(n+1)=1.448708e+003;
n=86; farx(n+1)=2.359922e+000; foe(n+1)=1.417941e+001; krok(n+1)=6.192369e-003; ng(n+1)=2.310090e+003;
n=87; farx(n+1)=2.355644e+000; foe(n+1)=1.405455e+001; krok(n+1)=1.596372e-002; ng(n+1)=2.156242e+003;
n=88; farx(n+1)=2.302342e+000; foe(n+1)=1.384367e+001; krok(n+1)=3.264474e-002; ng(n+1)=1.396383e+003;
n=89; farx(n+1)=2.319232e+000; foe(n+1)=1.364795e+001; krok(n+1)=5.121364e-002; ng(n+1)=2.265142e+003;
n=90; farx(n+1)=2.321330e+000; foe(n+1)=1.340212e+001; krok(n+1)=4.904612e-002; ng(n+1)=1.352471e+003;
n=91; farx(n+1)=2.213387e+000; foe(n+1)=1.280204e+001; krok(n+1)=6.376768e-002; ng(n+1)=1.019058e+003;
n=92; farx(n+1)=2.080301e+000; foe(n+1)=1.074939e+001; krok(n+1)=1.444813e-001; ng(n+1)=2.845121e+003;
n=93; farx(n+1)=2.009638e+000; foe(n+1)=1.024991e+001; krok(n+1)=1.209148e-001; ng(n+1)=9.452472e+002;
n=94; farx(n+1)=1.953517e+000; foe(n+1)=9.776747e+000; krok(n+1)=2.144024e-001; ng(n+1)=1.597692e+003;
n=95; farx(n+1)=1.998268e+000; foe(n+1)=8.817820e+000; krok(n+1)=4.734602e-001; ng(n+1)=1.885111e+003;
n=96; farx(n+1)=2.026842e+000; foe(n+1)=8.522956e+000; krok(n+1)=8.252141e-001; ng(n+1)=2.041283e+002;
n=97; farx(n+1)=2.105423e+000; foe(n+1)=8.211785e+000; krok(n+1)=6.970601e-001; ng(n+1)=5.272430e+002;
n=98; farx(n+1)=2.157965e+000; foe(n+1)=7.956890e+000; krok(n+1)=1.119298e+000; ng(n+1)=7.157964e+001;
n=99; farx(n+1)=2.198486e+000; foe(n+1)=7.734520e+000; krok(n+1)=7.926233e-001; ng(n+1)=3.266355e+002;
n=100; farx(n+1)=2.256377e+000; foe(n+1)=7.314894e+000; krok(n+1)=6.083508e-001; ng(n+1)=8.172583e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
