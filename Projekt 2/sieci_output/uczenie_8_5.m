%uczenie predyktora oe
clear all;
n=0; farx(n+1)=4.780938e+003; foe(n+1)=4.838214e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=3.566592e+003; foe(n+1)=3.673575e+003; krok(n+1)=3.764443e-004; ng(n+1)=4.961423e+003;
n=2; farx(n+1)=8.779675e+002; foe(n+1)=8.527388e+002; krok(n+1)=1.371344e-003; ng(n+1)=4.307465e+003;
n=3; farx(n+1)=9.395154e+002; foe(n+1)=8.228597e+002; krok(n+1)=1.562643e-004; ng(n+1)=2.387876e+003;
n=4; farx(n+1)=7.865602e+002; foe(n+1)=7.963677e+002; krok(n+1)=5.014459e-004; ng(n+1)=1.083062e+003;
n=5; farx(n+1)=4.329427e+002; foe(n+1)=5.993756e+002; krok(n+1)=1.828656e-003; ng(n+1)=2.451012e+003;
n=6; farx(n+1)=2.931262e+002; foe(n+1)=5.115329e+002; krok(n+1)=7.740461e-004; ng(n+1)=3.743275e+003;
n=7; farx(n+1)=2.236331e+002; foe(n+1)=4.049845e+002; krok(n+1)=1.838554e-003; ng(n+1)=4.700407e+003;
n=8; farx(n+1)=2.185199e+002; foe(n+1)=3.812818e+002; krok(n+1)=5.218301e-004; ng(n+1)=2.135703e+003;
n=9; farx(n+1)=1.912060e+002; foe(n+1)=3.543746e+002; krok(n+1)=4.526501e-004; ng(n+1)=1.185219e+003;
n=10; farx(n+1)=1.887096e+002; foe(n+1)=3.411420e+002; krok(n+1)=9.349870e-004; ng(n+1)=1.125618e+003;
n=11; farx(n+1)=1.925888e+002; foe(n+1)=3.364244e+002; krok(n+1)=2.093774e-004; ng(n+1)=1.098803e+003;
n=12; farx(n+1)=1.424218e+002; foe(n+1)=3.037349e+002; krok(n+1)=9.830492e-003; ng(n+1)=3.993326e+002;
n=13; farx(n+1)=1.288334e+002; foe(n+1)=2.955405e+002; krok(n+1)=7.068748e-004; ng(n+1)=1.758837e+003;
n=14; farx(n+1)=1.175300e+002; foe(n+1)=2.869259e+002; krok(n+1)=2.517331e-004; ng(n+1)=3.651329e+003;
n=15; farx(n+1)=1.057031e+002; foe(n+1)=2.775517e+002; krok(n+1)=3.812452e-004; ng(n+1)=4.669131e+003;
n=16; farx(n+1)=1.022043e+002; foe(n+1)=2.721102e+002; krok(n+1)=1.404483e-004; ng(n+1)=5.930358e+003;
n=17; farx(n+1)=9.393227e+001; foe(n+1)=2.667173e+002; krok(n+1)=1.402081e-003; ng(n+1)=4.550079e+003;
n=18; farx(n+1)=8.667858e+001; foe(n+1)=2.612093e+002; krok(n+1)=1.409080e-003; ng(n+1)=4.103409e+003;
n=19; farx(n+1)=7.926329e+001; foe(n+1)=2.536160e+002; krok(n+1)=5.635193e-004; ng(n+1)=4.950865e+003;
n=20; farx(n+1)=7.757513e+001; foe(n+1)=2.502016e+002; krok(n+1)=2.887783e-004; ng(n+1)=6.100536e+003;
n=21; farx(n+1)=7.526977e+001; foe(n+1)=2.456756e+002; krok(n+1)=6.459813e-004; ng(n+1)=5.904689e+003;
n=22; farx(n+1)=6.366379e+001; foe(n+1)=2.286994e+002; krok(n+1)=1.389400e-003; ng(n+1)=7.531736e+003;
n=23; farx(n+1)=5.480234e+001; foe(n+1)=2.160480e+002; krok(n+1)=6.590915e-004; ng(n+1)=7.573641e+003;
n=24; farx(n+1)=4.466651e+001; foe(n+1)=2.058833e+002; krok(n+1)=7.138862e-004; ng(n+1)=1.076931e+004;
n=25; farx(n+1)=3.688847e+001; foe(n+1)=1.972021e+002; krok(n+1)=7.843678e-004; ng(n+1)=1.274506e+004;
%odnowa zmiennej metryki
n=26; farx(n+1)=3.110459e+001; foe(n+1)=1.602559e+002; krok(n+1)=3.422485e-006; ng(n+1)=1.689513e+004;
n=27; farx(n+1)=2.841433e+001; foe(n+1)=1.438475e+002; krok(n+1)=6.567791e-006; ng(n+1)=7.606264e+003;
n=28; farx(n+1)=2.627392e+001; foe(n+1)=1.400255e+002; krok(n+1)=5.210339e-005; ng(n+1)=1.317517e+003;
n=29; farx(n+1)=2.474676e+001; foe(n+1)=1.215361e+002; krok(n+1)=5.550052e-004; ng(n+1)=1.691182e+003;
n=30; farx(n+1)=2.281541e+001; foe(n+1)=1.105125e+002; krok(n+1)=3.163070e-004; ng(n+1)=2.773457e+003;
n=31; farx(n+1)=1.890352e+001; foe(n+1)=1.003792e+002; krok(n+1)=5.292541e-004; ng(n+1)=3.526286e+003;
n=32; farx(n+1)=1.969083e+001; foe(n+1)=8.585422e+001; krok(n+1)=6.946998e-004; ng(n+1)=5.032212e+003;
n=33; farx(n+1)=1.870495e+001; foe(n+1)=7.676972e+001; krok(n+1)=8.336543e-004; ng(n+1)=1.536287e+003;
n=34; farx(n+1)=1.978044e+001; foe(n+1)=6.241613e+001; krok(n+1)=1.233983e-003; ng(n+1)=2.755093e+003;
n=35; farx(n+1)=1.392855e+001; foe(n+1)=4.557707e+001; krok(n+1)=1.854565e-003; ng(n+1)=2.932902e+003;
n=36; farx(n+1)=1.235983e+001; foe(n+1)=3.770103e+001; krok(n+1)=3.423805e-004; ng(n+1)=6.623366e+003;
n=37; farx(n+1)=1.068800e+001; foe(n+1)=2.880769e+001; krok(n+1)=8.031637e-004; ng(n+1)=4.120146e+003;
n=38; farx(n+1)=9.759361e+000; foe(n+1)=2.491576e+001; krok(n+1)=7.805354e-004; ng(n+1)=1.881895e+003;
n=39; farx(n+1)=9.271692e+000; foe(n+1)=2.388158e+001; krok(n+1)=1.713251e-003; ng(n+1)=2.396084e+003;
n=40; farx(n+1)=8.399842e+000; foe(n+1)=2.092517e+001; krok(n+1)=4.008930e-003; ng(n+1)=2.214452e+003;
n=41; farx(n+1)=6.564781e+000; foe(n+1)=1.687898e+001; krok(n+1)=8.346822e-003; ng(n+1)=1.337192e+003;
n=42; farx(n+1)=5.849817e+000; foe(n+1)=1.524249e+001; krok(n+1)=1.499367e-003; ng(n+1)=1.771837e+003;
n=43; farx(n+1)=5.135456e+000; foe(n+1)=1.406733e+001; krok(n+1)=2.156451e-003; ng(n+1)=6.717192e+002;
n=44; farx(n+1)=4.725797e+000; foe(n+1)=1.321185e+001; krok(n+1)=3.271540e-003; ng(n+1)=4.759818e+002;
n=45; farx(n+1)=3.738465e+000; foe(n+1)=1.147219e+001; krok(n+1)=1.640492e-002; ng(n+1)=8.372509e+002;
n=46; farx(n+1)=3.398166e+000; foe(n+1)=1.075729e+001; krok(n+1)=4.372259e-003; ng(n+1)=4.216084e+002;
n=47; farx(n+1)=3.074256e+000; foe(n+1)=9.993426e+000; krok(n+1)=2.113019e-002; ng(n+1)=8.183179e+002;
n=48; farx(n+1)=2.845348e+000; foe(n+1)=9.391923e+000; krok(n+1)=1.902655e-002; ng(n+1)=5.778731e+002;
n=49; farx(n+1)=2.817266e+000; foe(n+1)=9.087098e+000; krok(n+1)=1.269968e-002; ng(n+1)=6.555323e+002;
n=50; farx(n+1)=2.680904e+000; foe(n+1)=8.516736e+000; krok(n+1)=3.045281e-002; ng(n+1)=4.148594e+002;
%odnowa zmiennej metryki
n=51; farx(n+1)=2.677881e+000; foe(n+1)=8.383863e+000; krok(n+1)=6.966570e-006; ng(n+1)=7.153962e+002;
n=52; farx(n+1)=2.658609e+000; foe(n+1)=8.173795e+000; krok(n+1)=1.468353e-004; ng(n+1)=1.696906e+002;
n=53; farx(n+1)=2.525349e+000; foe(n+1)=7.358243e+000; krok(n+1)=7.813213e-005; ng(n+1)=4.856701e+002;
n=54; farx(n+1)=2.466520e+000; foe(n+1)=7.292325e+000; krok(n+1)=6.791072e-005; ng(n+1)=1.591377e+002;
n=55; farx(n+1)=2.411930e+000; foe(n+1)=7.010614e+000; krok(n+1)=3.984182e-004; ng(n+1)=1.540255e+002;
n=56; farx(n+1)=2.301330e+000; foe(n+1)=6.652882e+000; krok(n+1)=1.841613e-003; ng(n+1)=9.081991e+001;
n=57; farx(n+1)=2.222763e+000; foe(n+1)=6.447168e+000; krok(n+1)=9.645318e-004; ng(n+1)=2.750457e+002;
n=58; farx(n+1)=2.101700e+000; foe(n+1)=6.044594e+000; krok(n+1)=4.150488e-003; ng(n+1)=4.448522e+002;
n=59; farx(n+1)=1.929034e+000; foe(n+1)=5.249841e+000; krok(n+1)=1.495979e-002; ng(n+1)=8.779628e+002;
n=60; farx(n+1)=1.880646e+000; foe(n+1)=5.108059e+000; krok(n+1)=4.509565e-003; ng(n+1)=4.014436e+002;
n=61; farx(n+1)=1.687037e+000; foe(n+1)=4.614159e+000; krok(n+1)=1.121678e-002; ng(n+1)=3.183958e+002;
n=62; farx(n+1)=1.580860e+000; foe(n+1)=4.270180e+000; krok(n+1)=3.201476e-003; ng(n+1)=8.238135e+002;
n=63; farx(n+1)=1.536027e+000; foe(n+1)=4.015162e+000; krok(n+1)=8.053672e-003; ng(n+1)=4.810381e+002;
n=64; farx(n+1)=1.506143e+000; foe(n+1)=3.840951e+000; krok(n+1)=6.854056e-003; ng(n+1)=2.164987e+002;
n=65; farx(n+1)=1.484462e+000; foe(n+1)=3.729204e+000; krok(n+1)=5.433546e-003; ng(n+1)=5.822170e+002;
n=66; farx(n+1)=1.454336e+000; foe(n+1)=3.633327e+000; krok(n+1)=9.344559e-003; ng(n+1)=4.878395e+002;
n=67; farx(n+1)=1.406322e+000; foe(n+1)=3.551325e+000; krok(n+1)=1.688698e-002; ng(n+1)=4.234634e+002;
n=68; farx(n+1)=1.317210e+000; foe(n+1)=3.357804e+000; krok(n+1)=1.496365e-002; ng(n+1)=4.304676e+002;
n=69; farx(n+1)=1.243153e+000; foe(n+1)=3.245024e+000; krok(n+1)=2.142359e-002; ng(n+1)=5.002029e+002;
n=70; farx(n+1)=1.188691e+000; foe(n+1)=3.183897e+000; krok(n+1)=1.297031e-002; ng(n+1)=4.879876e+002;
n=71; farx(n+1)=1.130367e+000; foe(n+1)=3.101221e+000; krok(n+1)=1.477175e-002; ng(n+1)=2.828041e+002;
n=72; farx(n+1)=1.085316e+000; foe(n+1)=2.941765e+000; krok(n+1)=8.260442e-002; ng(n+1)=2.924301e+002;
n=73; farx(n+1)=1.041765e+000; foe(n+1)=2.786652e+000; krok(n+1)=3.579274e-002; ng(n+1)=4.983578e+002;
n=74; farx(n+1)=1.034041e+000; foe(n+1)=2.741179e+000; krok(n+1)=7.242402e-003; ng(n+1)=4.427406e+002;
n=75; farx(n+1)=1.054289e+000; foe(n+1)=2.353821e+000; krok(n+1)=1.732520e-001; ng(n+1)=2.541033e+002;
%odnowa zmiennej metryki
n=76; farx(n+1)=1.053219e+000; foe(n+1)=2.344677e+000; krok(n+1)=9.671965e-006; ng(n+1)=1.643768e+002;
n=77; farx(n+1)=1.053603e+000; foe(n+1)=2.331134e+000; krok(n+1)=1.504078e-005; ng(n+1)=1.436190e+002;
n=78; farx(n+1)=1.053463e+000; foe(n+1)=2.327968e+000; krok(n+1)=1.797165e-005; ng(n+1)=7.055579e+001;
n=79; farx(n+1)=1.029721e+000; foe(n+1)=2.259460e+000; krok(n+1)=3.125285e-004; ng(n+1)=6.932635e+001;
n=80; farx(n+1)=1.023151e+000; foe(n+1)=2.214736e+000; krok(n+1)=5.119287e-004; ng(n+1)=4.079376e+001;
n=81; farx(n+1)=1.000327e+000; foe(n+1)=2.130007e+000; krok(n+1)=1.402081e-003; ng(n+1)=4.111101e+001;
n=82; farx(n+1)=9.869964e-001; foe(n+1)=2.071402e+000; krok(n+1)=4.636412e-004; ng(n+1)=9.918060e+001;
n=83; farx(n+1)=9.655613e-001; foe(n+1)=2.039507e+000; krok(n+1)=7.782134e-003; ng(n+1)=1.547524e+002;
n=84; farx(n+1)=9.228920e-001; foe(n+1)=1.987540e+000; krok(n+1)=5.445782e-003; ng(n+1)=1.936068e+002;
n=85; farx(n+1)=8.487870e-001; foe(n+1)=1.911096e+000; krok(n+1)=5.799093e-003; ng(n+1)=3.932791e+002;
n=86; farx(n+1)=8.152095e-001; foe(n+1)=1.883633e+000; krok(n+1)=5.557598e-003; ng(n+1)=3.702303e+002;
n=87; farx(n+1)=7.766021e-001; foe(n+1)=1.849902e+000; krok(n+1)=1.417782e-002; ng(n+1)=2.190319e+002;
n=88; farx(n+1)=7.639092e-001; foe(n+1)=1.836794e+000; krok(n+1)=1.019133e-002; ng(n+1)=1.107029e+002;
n=89; farx(n+1)=7.283641e-001; foe(n+1)=1.806048e+000; krok(n+1)=2.858001e-002; ng(n+1)=1.393417e+002;
n=90; farx(n+1)=6.793819e-001; foe(n+1)=1.739608e+000; krok(n+1)=3.754388e-002; ng(n+1)=2.367029e+002;
n=91; farx(n+1)=6.615039e-001; foe(n+1)=1.690493e+000; krok(n+1)=1.165911e-002; ng(n+1)=3.879665e+002;
n=92; farx(n+1)=6.548726e-001; foe(n+1)=1.638932e+000; krok(n+1)=9.814884e-003; ng(n+1)=2.398117e+002;
n=93; farx(n+1)=6.625034e-001; foe(n+1)=1.598566e+000; krok(n+1)=1.495979e-002; ng(n+1)=6.825592e+001;
n=94; farx(n+1)=6.588971e-001; foe(n+1)=1.549606e+000; krok(n+1)=1.423591e-002; ng(n+1)=2.676075e+002;
n=95; farx(n+1)=6.620612e-001; foe(n+1)=1.480749e+000; krok(n+1)=3.276344e-002; ng(n+1)=4.650117e+002;
n=96; farx(n+1)=6.619354e-001; foe(n+1)=1.430607e+000; krok(n+1)=9.949946e-003; ng(n+1)=4.446230e+002;
n=97; farx(n+1)=6.686946e-001; foe(n+1)=1.364887e+000; krok(n+1)=5.286105e-002; ng(n+1)=3.046985e+002;
n=98; farx(n+1)=6.389229e-001; foe(n+1)=1.291189e+000; krok(n+1)=2.165649e-002; ng(n+1)=3.098038e+002;
n=99; farx(n+1)=5.899512e-001; foe(n+1)=1.227786e+000; krok(n+1)=6.754791e-002; ng(n+1)=2.793907e+002;
n=100; farx(n+1)=5.465054e-001; foe(n+1)=1.161207e+000; krok(n+1)=4.438543e-002; ng(n+1)=2.194461e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
