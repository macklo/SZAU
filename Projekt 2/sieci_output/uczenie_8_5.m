%uczenie predyktora oe
clear all;
n=0; farx(n+1)=4.362134e+003; foe(n+1)=4.537787e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=2.917041e+003; foe(n+1)=2.847881e+003; krok(n+1)=4.888445e-004; ng(n+1)=4.949542e+003;
n=2; farx(n+1)=1.104503e+003; foe(n+1)=1.092758e+003; krok(n+1)=2.133311e-003; ng(n+1)=2.823002e+003;
n=3; farx(n+1)=1.302264e+003; foe(n+1)=7.298588e+002; krok(n+1)=1.627321e-004; ng(n+1)=8.772888e+003;
n=4; farx(n+1)=1.890830e+003; foe(n+1)=5.699833e+002; krok(n+1)=7.528887e-004; ng(n+1)=7.871706e+003;
n=5; farx(n+1)=1.455803e+003; foe(n+1)=5.065083e+002; krok(n+1)=7.481826e-003; ng(n+1)=8.357015e+002;
n=6; farx(n+1)=1.309100e+003; foe(n+1)=4.914448e+002; krok(n+1)=2.729586e-004; ng(n+1)=1.838135e+003;
n=7; farx(n+1)=2.945695e+002; foe(n+1)=3.480985e+002; krok(n+1)=2.564143e-003; ng(n+1)=2.014782e+003;
n=8; farx(n+1)=2.648483e+002; foe(n+1)=3.426049e+002; krok(n+1)=4.605170e-005; ng(n+1)=3.098498e+003;
n=9; farx(n+1)=2.326126e+002; foe(n+1)=3.338064e+002; krok(n+1)=9.671447e-004; ng(n+1)=2.333843e+003;
n=10; farx(n+1)=2.253617e+002; foe(n+1)=3.320581e+002; krok(n+1)=5.100741e-004; ng(n+1)=2.558051e+003;
n=11; farx(n+1)=2.221199e+002; foe(n+1)=3.195717e+002; krok(n+1)=1.338974e-003; ng(n+1)=2.274976e+003;
n=12; farx(n+1)=2.126455e+002; foe(n+1)=3.067810e+002; krok(n+1)=2.385598e-003; ng(n+1)=2.613417e+003;
n=13; farx(n+1)=1.861186e+002; foe(n+1)=2.787026e+002; krok(n+1)=2.636366e-003; ng(n+1)=1.878617e+003;
n=14; farx(n+1)=1.672705e+002; foe(n+1)=2.612386e+002; krok(n+1)=1.137613e-003; ng(n+1)=2.341874e+003;
n=15; farx(n+1)=1.336306e+002; foe(n+1)=2.468104e+002; krok(n+1)=2.237201e-003; ng(n+1)=4.572268e+003;
n=16; farx(n+1)=6.923032e+001; foe(n+1)=2.147618e+002; krok(n+1)=2.716773e-003; ng(n+1)=4.892913e+003;
n=17; farx(n+1)=6.722917e+001; foe(n+1)=2.110054e+002; krok(n+1)=1.650936e-004; ng(n+1)=3.713594e+003;
n=18; farx(n+1)=6.565001e+001; foe(n+1)=2.022125e+002; krok(n+1)=2.263251e-004; ng(n+1)=2.956463e+003;
n=19; farx(n+1)=6.485835e+001; foe(n+1)=1.941491e+002; krok(n+1)=7.209870e-004; ng(n+1)=4.169712e+003;
n=20; farx(n+1)=6.608645e+001; foe(n+1)=1.878227e+002; krok(n+1)=2.537673e-004; ng(n+1)=2.570744e+003;
n=21; farx(n+1)=6.595500e+001; foe(n+1)=1.816337e+002; krok(n+1)=5.733303e-004; ng(n+1)=4.207633e+003;
n=22; farx(n+1)=6.577885e+001; foe(n+1)=1.701102e+002; krok(n+1)=1.250530e-004; ng(n+1)=1.911117e+004;
n=23; farx(n+1)=6.873462e+001; foe(n+1)=1.592256e+002; krok(n+1)=5.521185e-004; ng(n+1)=6.842335e+003;
n=24; farx(n+1)=6.878324e+001; foe(n+1)=1.591633e+002; krok(n+1)=1.394742e-006; ng(n+1)=1.843076e+004;
n=25; farx(n+1)=7.001850e+001; foe(n+1)=1.578698e+002; krok(n+1)=1.643712e-005; ng(n+1)=1.686120e+004;
%odnowa zmiennej metryki
n=26; farx(n+1)=7.002019e+001; foe(n+1)=1.577333e+002; krok(n+1)=1.114337e-008; ng(n+1)=1.892541e+004;
n=27; farx(n+1)=6.989784e+001; foe(n+1)=1.486000e+002; krok(n+1)=2.502989e-006; ng(n+1)=1.436068e+004;
n=28; farx(n+1)=7.023106e+001; foe(n+1)=1.446352e+002; krok(n+1)=7.440373e-006; ng(n+1)=7.389961e+004;
n=29; farx(n+1)=6.788132e+001; foe(n+1)=1.176890e+002; krok(n+1)=1.634024e-004; ng(n+1)=6.473116e+004;
n=30; farx(n+1)=6.912276e+001; foe(n+1)=1.116302e+002; krok(n+1)=2.971153e-005; ng(n+1)=1.828304e+004;
n=31; farx(n+1)=6.975061e+001; foe(n+1)=1.002145e+002; krok(n+1)=6.638450e-004; ng(n+1)=4.120331e+004;
n=32; farx(n+1)=8.399885e+001; foe(n+1)=9.107516e+001; krok(n+1)=7.315478e-004; ng(n+1)=1.066992e+004;
n=33; farx(n+1)=8.986218e+001; foe(n+1)=8.280840e+001; krok(n+1)=1.042068e-004; ng(n+1)=8.890697e+003;
n=34; farx(n+1)=8.933610e+001; foe(n+1)=8.037698e+001; krok(n+1)=3.748417e-004; ng(n+1)=3.832309e+003;
n=35; farx(n+1)=7.714514e+001; foe(n+1)=7.258636e+001; krok(n+1)=1.441974e-003; ng(n+1)=1.403006e+004;
n=36; farx(n+1)=5.852509e+001; foe(n+1)=6.076072e+001; krok(n+1)=1.708036e-003; ng(n+1)=1.341036e+004;
n=37; farx(n+1)=5.520451e+001; foe(n+1)=5.363821e+001; krok(n+1)=4.302795e-004; ng(n+1)=5.157955e+003;
n=38; farx(n+1)=5.290849e+001; foe(n+1)=4.575328e+001; krok(n+1)=2.634602e-003; ng(n+1)=3.144224e+003;
n=39; farx(n+1)=5.494546e+001; foe(n+1)=4.129664e+001; krok(n+1)=3.446556e-003; ng(n+1)=1.910676e+003;
n=40; farx(n+1)=5.586325e+001; foe(n+1)=3.641284e+001; krok(n+1)=6.192369e-003; ng(n+1)=2.840312e+003;
n=41; farx(n+1)=6.030275e+001; foe(n+1)=3.507798e+001; krok(n+1)=6.738436e-004; ng(n+1)=3.509520e+003;
n=42; farx(n+1)=6.439014e+001; foe(n+1)=3.255766e+001; krok(n+1)=1.935208e-003; ng(n+1)=1.351130e+003;
n=43; farx(n+1)=4.073944e+001; foe(n+1)=3.037328e+001; krok(n+1)=4.403244e-003; ng(n+1)=7.765301e+002;
n=44; farx(n+1)=3.030848e+001; foe(n+1)=2.859647e+001; krok(n+1)=5.022071e-003; ng(n+1)=6.872269e+002;
n=45; farx(n+1)=2.679168e+001; foe(n+1)=2.751909e+001; krok(n+1)=3.740913e-003; ng(n+1)=8.888219e+002;
n=46; farx(n+1)=2.115014e+001; foe(n+1)=2.399140e+001; krok(n+1)=9.473853e-003; ng(n+1)=1.146508e+003;
n=47; farx(n+1)=1.844087e+001; foe(n+1)=2.115593e+001; krok(n+1)=7.088910e-003; ng(n+1)=6.445853e+002;
n=48; farx(n+1)=1.848611e+001; foe(n+1)=2.086428e+001; krok(n+1)=2.080994e-003; ng(n+1)=7.270364e+002;
n=49; farx(n+1)=1.776427e+001; foe(n+1)=1.953213e+001; krok(n+1)=4.904691e-003; ng(n+1)=8.848535e+002;
n=50; farx(n+1)=1.675653e+001; foe(n+1)=1.879935e+001; krok(n+1)=8.744518e-003; ng(n+1)=6.325307e+002;
%odnowa zmiennej metryki
n=51; farx(n+1)=1.660481e+001; foe(n+1)=1.864988e+001; krok(n+1)=2.077412e-005; ng(n+1)=4.041377e+002;
n=52; farx(n+1)=1.625982e+001; foe(n+1)=1.832968e+001; krok(n+1)=3.000091e-005; ng(n+1)=4.994318e+002;
n=53; farx(n+1)=1.621085e+001; foe(n+1)=1.816871e+001; krok(n+1)=7.560801e-005; ng(n+1)=2.153509e+002;
n=54; farx(n+1)=1.450381e+001; foe(n+1)=1.710593e+001; krok(n+1)=1.983052e-003; ng(n+1)=1.375640e+002;
n=55; farx(n+1)=1.107748e+001; foe(n+1)=1.494829e+001; krok(n+1)=1.779489e-003; ng(n+1)=5.675797e+002;
n=56; farx(n+1)=9.372064e+000; foe(n+1)=1.337214e+001; krok(n+1)=2.855949e-003; ng(n+1)=5.929176e+002;
n=57; farx(n+1)=7.529307e+000; foe(n+1)=1.211209e+001; krok(n+1)=4.474093e-003; ng(n+1)=5.278955e+002;
n=58; farx(n+1)=6.390541e+000; foe(n+1)=1.164470e+001; krok(n+1)=3.544455e-003; ng(n+1)=3.118972e+002;
n=59; farx(n+1)=5.622708e+000; foe(n+1)=1.088314e+001; krok(n+1)=3.840117e-003; ng(n+1)=4.336074e+002;
n=60; farx(n+1)=4.923504e+000; foe(n+1)=1.026175e+001; krok(n+1)=6.912131e-003; ng(n+1)=7.611406e+002;
n=61; farx(n+1)=4.621311e+000; foe(n+1)=9.739583e+000; krok(n+1)=4.953721e-003; ng(n+1)=4.530498e+002;
n=62; farx(n+1)=4.226840e+000; foe(n+1)=9.084296e+000; krok(n+1)=3.253129e-003; ng(n+1)=5.053259e+002;
n=63; farx(n+1)=3.729848e+000; foe(n+1)=8.405519e+000; krok(n+1)=1.434453e-002; ng(n+1)=5.583970e+002;
n=64; farx(n+1)=3.624050e+000; foe(n+1)=8.193859e+000; krok(n+1)=4.049572e-003; ng(n+1)=3.741061e+002;
n=65; farx(n+1)=3.397203e+000; foe(n+1)=7.714800e+000; krok(n+1)=4.563662e-003; ng(n+1)=6.228731e+002;
n=66; farx(n+1)=3.277114e+000; foe(n+1)=7.337848e+000; krok(n+1)=5.557598e-003; ng(n+1)=4.154571e+002;
n=67; farx(n+1)=3.047541e+000; foe(n+1)=6.752205e+000; krok(n+1)=1.405854e-002; ng(n+1)=7.298229e+002;
n=68; farx(n+1)=2.928515e+000; foe(n+1)=6.145043e+000; krok(n+1)=1.713076e-002; ng(n+1)=6.832863e+002;
n=69; farx(n+1)=2.861833e+000; foe(n+1)=5.677880e+000; krok(n+1)=2.284436e-002; ng(n+1)=1.918548e+002;
n=70; farx(n+1)=2.849346e+000; foe(n+1)=5.570143e+000; krok(n+1)=9.889238e-003; ng(n+1)=3.156058e+002;
n=71; farx(n+1)=2.843135e+000; foe(n+1)=5.333491e+000; krok(n+1)=3.023343e-002; ng(n+1)=2.217558e+002;
n=72; farx(n+1)=2.839907e+000; foe(n+1)=5.199819e+000; krok(n+1)=3.542231e-002; ng(n+1)=1.920708e+002;
n=73; farx(n+1)=2.747218e+000; foe(n+1)=4.955908e+000; krok(n+1)=1.939776e-002; ng(n+1)=2.272518e+002;
n=74; farx(n+1)=2.671377e+000; foe(n+1)=4.836299e+000; krok(n+1)=2.539936e-002; ng(n+1)=3.001629e+002;
n=75; farx(n+1)=2.662884e+000; foe(n+1)=4.667965e+000; krok(n+1)=8.571529e-002; ng(n+1)=3.043630e+002;
%odnowa zmiennej metryki
n=76; farx(n+1)=2.671371e+000; foe(n+1)=4.616937e+000; krok(n+1)=7.989188e-006; ng(n+1)=3.673893e+002;
n=77; farx(n+1)=2.649224e+000; foe(n+1)=4.569326e+000; krok(n+1)=5.880678e-005; ng(n+1)=1.324823e+002;
n=78; farx(n+1)=2.636625e+000; foe(n+1)=4.543483e+000; krok(n+1)=4.229784e-005; ng(n+1)=1.121014e+002;
n=79; farx(n+1)=2.638039e+000; foe(n+1)=4.508127e+000; krok(n+1)=1.802468e-004; ng(n+1)=7.226538e+001;
n=80; farx(n+1)=2.533497e+000; foe(n+1)=4.296842e+000; krok(n+1)=9.871862e-003; ng(n+1)=2.647149e+001;
n=81; farx(n+1)=2.490615e+000; foe(n+1)=4.241748e+000; krok(n+1)=1.772228e-003; ng(n+1)=1.948008e+002;
n=82; farx(n+1)=2.428574e+000; foe(n+1)=4.125956e+000; krok(n+1)=5.128285e-003; ng(n+1)=2.444687e+002;
n=83; farx(n+1)=2.319760e+000; foe(n+1)=3.995533e+000; krok(n+1)=5.433546e-003; ng(n+1)=3.628443e+002;
n=84; farx(n+1)=2.283554e+000; foe(n+1)=3.888112e+000; krok(n+1)=1.111520e-002; ng(n+1)=3.928693e+002;
n=85; farx(n+1)=2.255400e+000; foe(n+1)=3.793203e+000; krok(n+1)=8.300976e-003; ng(n+1)=4.388518e+002;
n=86; farx(n+1)=2.262546e+000; foe(n+1)=3.762857e+000; krok(n+1)=5.946996e-003; ng(n+1)=3.841542e+002;
n=87; farx(n+1)=2.245080e+000; foe(n+1)=3.694750e+000; krok(n+1)=1.868912e-002; ng(n+1)=2.338744e+002;
n=88; farx(n+1)=2.206485e+000; foe(n+1)=3.626658e+000; krok(n+1)=1.175824e-002; ng(n+1)=3.301271e+002;
n=89; farx(n+1)=2.174077e+000; foe(n+1)=3.459471e+000; krok(n+1)=2.857938e-002; ng(n+1)=1.917835e+002;
n=90; farx(n+1)=2.154928e+000; foe(n+1)=3.358818e+000; krok(n+1)=1.248857e-002; ng(n+1)=2.502542e+002;
n=91; farx(n+1)=2.080120e+000; foe(n+1)=3.283617e+000; krok(n+1)=1.902655e-002; ng(n+1)=2.676451e+002;
n=92; farx(n+1)=1.987873e+000; foe(n+1)=3.203405e+000; krok(n+1)=1.132561e-002; ng(n+1)=2.677796e+002;
n=93; farx(n+1)=1.918706e+000; foe(n+1)=3.140023e+000; krok(n+1)=9.683310e-003; ng(n+1)=1.424455e+002;
n=94; farx(n+1)=1.923923e+000; foe(n+1)=3.057797e+000; krok(n+1)=2.733118e-002; ng(n+1)=1.303566e+002;
n=95; farx(n+1)=1.913058e+000; foe(n+1)=2.935453e+000; krok(n+1)=5.335388e-002; ng(n+1)=3.964516e+002;
n=96; farx(n+1)=1.847982e+000; foe(n+1)=2.775161e+000; krok(n+1)=6.259203e-002; ng(n+1)=2.907414e+002;
n=97; farx(n+1)=1.791876e+000; foe(n+1)=2.676260e+000; krok(n+1)=4.840103e-002; ng(n+1)=2.165210e+002;
n=98; farx(n+1)=1.774324e+000; foe(n+1)=2.636575e+000; krok(n+1)=1.506159e-002; ng(n+1)=3.304720e+002;
n=99; farx(n+1)=1.749207e+000; foe(n+1)=2.507087e+000; krok(n+1)=6.162212e-002; ng(n+1)=1.494709e+002;
n=100; farx(n+1)=1.722058e+000; foe(n+1)=2.413335e+000; krok(n+1)=2.788265e-002; ng(n+1)=3.790110e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
