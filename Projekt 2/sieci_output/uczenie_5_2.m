%uczenie predyktora oe
clear all;
n=0; farx(n+1)=4.492419e+003; foe(n+1)=4.593592e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=2.888008e+003; foe(n+1)=2.919634e+003; krok(n+1)=4.988661e-004; ng(n+1)=3.502425e+003;
n=2; farx(n+1)=8.711557e+002; foe(n+1)=8.550768e+002; krok(n+1)=3.059436e-003; ng(n+1)=1.912745e+003;
n=3; farx(n+1)=9.690366e+002; foe(n+1)=5.841075e+002; krok(n+1)=1.620874e-004; ng(n+1)=6.505230e+003;
n=4; farx(n+1)=1.155493e+003; foe(n+1)=5.269758e+002; krok(n+1)=3.790794e-004; ng(n+1)=4.302338e+003;
n=5; farx(n+1)=8.162616e+002; foe(n+1)=4.405364e+002; krok(n+1)=6.734730e-003; ng(n+1)=5.499709e+002;
n=6; farx(n+1)=6.385079e+002; foe(n+1)=4.097656e+002; krok(n+1)=9.182754e-004; ng(n+1)=1.661287e+003;
n=7; farx(n+1)=3.645270e+002; foe(n+1)=3.668708e+002; krok(n+1)=1.088153e-003; ng(n+1)=1.946399e+003;
n=8; farx(n+1)=2.301015e+002; foe(n+1)=3.364870e+002; krok(n+1)=7.315478e-004; ng(n+1)=2.588322e+003;
n=9; farx(n+1)=2.014173e+002; foe(n+1)=3.294414e+002; krok(n+1)=3.325065e-004; ng(n+1)=2.874567e+003;
n=10; farx(n+1)=1.629347e+002; foe(n+1)=3.148334e+002; krok(n+1)=6.328553e-004; ng(n+1)=4.567731e+003;
n=11; farx(n+1)=1.188125e+002; foe(n+1)=2.942478e+002; krok(n+1)=1.667309e-003; ng(n+1)=2.446657e+003;
n=12; farx(n+1)=9.451533e+001; foe(n+1)=2.758276e+002; krok(n+1)=2.899547e-003; ng(n+1)=1.841936e+003;
n=13; farx(n+1)=6.562074e+001; foe(n+1)=2.309258e+002; krok(n+1)=5.232888e-003; ng(n+1)=2.067657e+003;
n=14; farx(n+1)=6.600438e+001; foe(n+1)=2.208912e+002; krok(n+1)=1.330026e-003; ng(n+1)=5.696707e+003;
n=15; farx(n+1)=6.762236e+001; foe(n+1)=2.188406e+002; krok(n+1)=1.350546e-003; ng(n+1)=5.597701e+003;
n=16; farx(n+1)=7.595416e+001; foe(n+1)=2.082326e+002; krok(n+1)=4.180158e-003; ng(n+1)=6.065728e+003;
n=17; farx(n+1)=7.122472e+001; foe(n+1)=1.848085e+002; krok(n+1)=1.106947e-003; ng(n+1)=2.833343e+003;
n=18; farx(n+1)=6.381071e+001; foe(n+1)=1.751007e+002; krok(n+1)=2.716773e-003; ng(n+1)=2.246832e+003;
n=19; farx(n+1)=5.843930e+001; foe(n+1)=1.721532e+002; krok(n+1)=4.189449e-003; ng(n+1)=1.955270e+003;
n=20; farx(n+1)=6.315914e+001; foe(n+1)=1.636874e+002; krok(n+1)=1.927372e-002; ng(n+1)=2.619466e+003;
n=21; farx(n+1)=5.706597e+001; foe(n+1)=1.593985e+002; krok(n+1)=2.331822e-002; ng(n+1)=8.319044e+002;
n=22; farx(n+1)=4.818291e+001; foe(n+1)=1.538159e+002; krok(n+1)=9.231023e-003; ng(n+1)=9.782446e+002;
n=23; farx(n+1)=4.306344e+001; foe(n+1)=1.395832e+002; krok(n+1)=1.040351e-002; ng(n+1)=1.147776e+003;
n=24; farx(n+1)=4.109134e+001; foe(n+1)=1.354233e+002; krok(n+1)=1.417782e-002; ng(n+1)=3.036604e+003;
n=25; farx(n+1)=3.929915e+001; foe(n+1)=1.317375e+002; krok(n+1)=9.928643e-003; ng(n+1)=5.744638e+003;
%odnowa zmiennej metryki
n=26; farx(n+1)=3.917537e+001; foe(n+1)=1.237365e+002; krok(n+1)=2.523364e-006; ng(n+1)=5.857079e+003;
n=27; farx(n+1)=3.584575e+001; foe(n+1)=1.122324e+002; krok(n+1)=6.408173e-005; ng(n+1)=1.421827e+003;
n=28; farx(n+1)=3.441640e+001; foe(n+1)=1.082087e+002; krok(n+1)=2.298193e-004; ng(n+1)=2.446127e+003;
n=29; farx(n+1)=3.567653e+001; foe(n+1)=1.008600e+002; krok(n+1)=5.119287e-004; ng(n+1)=5.487968e+002;
n=30; farx(n+1)=2.917741e+001; foe(n+1)=8.625716e+001; krok(n+1)=5.113081e-004; ng(n+1)=7.292954e+002;
n=31; farx(n+1)=2.372514e+001; foe(n+1)=7.144175e+001; krok(n+1)=1.667309e-003; ng(n+1)=3.142052e+003;
n=32; farx(n+1)=1.728223e+001; foe(n+1)=4.795684e+001; krok(n+1)=2.716773e-003; ng(n+1)=2.544668e+003;
n=33; farx(n+1)=1.424172e+001; foe(n+1)=4.178068e+001; krok(n+1)=3.355212e-004; ng(n+1)=1.238811e+003;
n=34; farx(n+1)=1.320180e+001; foe(n+1)=3.969581e+001; krok(n+1)=1.254535e-004; ng(n+1)=2.564676e+003;
n=35; farx(n+1)=1.144532e+001; foe(n+1)=3.497019e+001; krok(n+1)=8.180843e-004; ng(n+1)=1.400307e+003;
n=36; farx(n+1)=1.122985e+001; foe(n+1)=2.921246e+001; krok(n+1)=4.011984e-003; ng(n+1)=9.564040e+002;
n=37; farx(n+1)=9.050107e+000; foe(n+1)=2.415187e+001; krok(n+1)=3.625910e-003; ng(n+1)=1.478749e+003;
n=38; farx(n+1)=8.835626e+000; foe(n+1)=2.321544e+001; krok(n+1)=2.923005e-003; ng(n+1)=9.627101e+002;
n=39; farx(n+1)=7.275874e+000; foe(n+1)=2.106544e+001; krok(n+1)=2.476948e-002; ng(n+1)=2.226524e+003;
n=40; farx(n+1)=6.304798e+000; foe(n+1)=1.784888e+001; krok(n+1)=2.447549e-002; ng(n+1)=7.258050e+002;
n=41; farx(n+1)=6.080661e+000; foe(n+1)=1.655416e+001; krok(n+1)=1.189189e-002; ng(n+1)=2.240788e+003;
n=42; farx(n+1)=5.746576e+000; foe(n+1)=1.540081e+001; krok(n+1)=2.067140e-002; ng(n+1)=5.596320e+002;
n=43; farx(n+1)=5.079158e+000; foe(n+1)=1.392747e+001; krok(n+1)=1.067078e-001; ng(n+1)=1.469375e+003;
n=44; farx(n+1)=5.070361e+000; foe(n+1)=1.375723e+001; krok(n+1)=1.672063e-002; ng(n+1)=1.056322e+003;
n=45; farx(n+1)=5.247341e+000; foe(n+1)=1.337419e+001; krok(n+1)=9.310460e-002; ng(n+1)=6.539325e+002;
n=46; farx(n+1)=5.207442e+000; foe(n+1)=1.290895e+001; krok(n+1)=4.635137e-001; ng(n+1)=1.979265e+002;
n=47; farx(n+1)=5.219441e+000; foe(n+1)=1.272996e+001; krok(n+1)=1.015974e-001; ng(n+1)=2.780167e+002;
n=48; farx(n+1)=5.322982e+000; foe(n+1)=1.258775e+001; krok(n+1)=2.031949e-001; ng(n+1)=9.890284e+001;
n=49; farx(n+1)=5.145965e+000; foe(n+1)=1.219668e+001; krok(n+1)=3.749470e-001; ng(n+1)=1.680704e+002;
n=50; farx(n+1)=5.157048e+000; foe(n+1)=1.194218e+001; krok(n+1)=7.382907e-001; ng(n+1)=1.200147e+002;
%odnowa zmiennej metryki
n=51; farx(n+1)=5.153329e+000; foe(n+1)=1.190922e+001; krok(n+1)=4.592378e-006; ng(n+1)=2.943638e+002;
n=52; farx(n+1)=5.183017e+000; foe(n+1)=1.181817e+001; krok(n+1)=9.290537e-005; ng(n+1)=1.099310e+002;
n=53; farx(n+1)=5.150273e+000; foe(n+1)=1.173713e+001; krok(n+1)=1.733806e-004; ng(n+1)=7.584687e+001;
n=54; farx(n+1)=5.122380e+000; foe(n+1)=1.141196e+001; krok(n+1)=3.081200e-004; ng(n+1)=1.036909e+002;
n=55; farx(n+1)=4.881687e+000; foe(n+1)=1.049599e+001; krok(n+1)=2.044887e-003; ng(n+1)=1.073955e+002;
n=56; farx(n+1)=4.754379e+000; foe(n+1)=1.021966e+001; krok(n+1)=8.713055e-004; ng(n+1)=2.502378e+002;
n=57; farx(n+1)=4.681337e+000; foe(n+1)=9.918339e+000; krok(n+1)=6.647718e-004; ng(n+1)=3.985815e+002;
n=58; farx(n+1)=4.645005e+000; foe(n+1)=9.725207e+000; krok(n+1)=2.223715e-003; ng(n+1)=6.722470e+002;
n=59; farx(n+1)=4.572055e+000; foe(n+1)=9.616987e+000; krok(n+1)=9.248075e-003; ng(n+1)=4.383120e+002;
n=60; farx(n+1)=4.640068e+000; foe(n+1)=9.233293e+000; krok(n+1)=5.079872e-002; ng(n+1)=3.989554e+002;
n=61; farx(n+1)=4.477743e+000; foe(n+1)=8.799924e+000; krok(n+1)=1.617035e-002; ng(n+1)=3.860651e+002;
n=62; farx(n+1)=4.388765e+000; foe(n+1)=8.613554e+000; krok(n+1)=1.971968e-002; ng(n+1)=5.087365e+002;
n=63; farx(n+1)=4.386271e+000; foe(n+1)=8.542450e+000; krok(n+1)=5.433546e-003; ng(n+1)=4.105940e+002;
n=64; farx(n+1)=4.421807e+000; foe(n+1)=8.396655e+000; krok(n+1)=7.759105e-002; ng(n+1)=5.550616e+002;
n=65; farx(n+1)=4.406463e+000; foe(n+1)=8.281164e+000; krok(n+1)=3.300845e-002; ng(n+1)=4.085165e+002;
n=66; farx(n+1)=4.061579e+000; foe(n+1)=7.980071e+000; krok(n+1)=1.400181e-001; ng(n+1)=2.643784e+002;
n=67; farx(n+1)=3.988887e+000; foe(n+1)=7.872564e+000; krok(n+1)=6.385486e-002; ng(n+1)=1.690886e+002;
n=68; farx(n+1)=3.864345e+000; foe(n+1)=7.703140e+000; krok(n+1)=1.160291e-001; ng(n+1)=1.250042e+002;
n=69; farx(n+1)=3.725317e+000; foe(n+1)=7.487188e+000; krok(n+1)=3.374549e-001; ng(n+1)=1.831863e+002;
n=70; farx(n+1)=3.682840e+000; foe(n+1)=7.320884e+000; krok(n+1)=6.345766e-002; ng(n+1)=2.401404e+002;
n=71; farx(n+1)=3.411505e+000; foe(n+1)=6.821880e+000; krok(n+1)=5.242150e-001; ng(n+1)=2.243218e+002;
n=72; farx(n+1)=3.333266e+000; foe(n+1)=6.629922e+000; krok(n+1)=3.465039e-001; ng(n+1)=2.456782e+002;
n=73; farx(n+1)=3.128916e+000; foe(n+1)=6.058643e+000; krok(n+1)=9.540683e-001; ng(n+1)=1.573484e+002;
n=74; farx(n+1)=3.064951e+000; foe(n+1)=5.878104e+000; krok(n+1)=1.414327e-001; ng(n+1)=5.069432e+002;
n=75; farx(n+1)=2.973003e+000; foe(n+1)=5.671825e+000; krok(n+1)=2.370960e-001; ng(n+1)=5.303453e+002;
%odnowa zmiennej metryki
n=76; farx(n+1)=2.945291e+000; foe(n+1)=5.575037e+000; krok(n+1)=1.846827e-005; ng(n+1)=2.469999e+002;
n=77; farx(n+1)=2.929760e+000; foe(n+1)=5.483700e+000; krok(n+1)=1.034570e-005; ng(n+1)=2.722260e+002;
n=78; farx(n+1)=2.938130e+000; foe(n+1)=5.455807e+000; krok(n+1)=4.341873e-005; ng(n+1)=8.369329e+001;
n=79; farx(n+1)=2.960331e+000; foe(n+1)=5.338977e+000; krok(n+1)=1.713514e-003; ng(n+1)=2.697013e+001;
n=80; farx(n+1)=2.886967e+000; foe(n+1)=5.145436e+000; krok(n+1)=1.810600e-003; ng(n+1)=6.380868e+001;
n=81; farx(n+1)=2.879004e+000; foe(n+1)=5.079248e+000; krok(n+1)=1.144989e-003; ng(n+1)=2.973776e+002;
n=82; farx(n+1)=2.749378e+000; foe(n+1)=4.964603e+000; krok(n+1)=1.363820e-002; ng(n+1)=4.075141e+002;
n=83; farx(n+1)=2.596495e+000; foe(n+1)=4.833238e+000; krok(n+1)=1.423591e-002; ng(n+1)=3.065982e+002;
n=84; farx(n+1)=2.580252e+000; foe(n+1)=4.773347e+000; krok(n+1)=1.647425e-002; ng(n+1)=2.713784e+002;
n=85; farx(n+1)=2.595625e+000; foe(n+1)=4.664839e+000; krok(n+1)=2.476948e-002; ng(n+1)=2.525115e+002;
n=86; farx(n+1)=2.605906e+000; foe(n+1)=4.622226e+000; krok(n+1)=1.214360e-002; ng(n+1)=1.697802e+002;
n=87; farx(n+1)=2.620168e+000; foe(n+1)=4.543666e+000; krok(n+1)=3.950757e-002; ng(n+1)=2.620781e+002;
n=88; farx(n+1)=2.618199e+000; foe(n+1)=4.429080e+000; krok(n+1)=3.822127e-002; ng(n+1)=3.869915e+002;
n=89; farx(n+1)=2.494254e+000; foe(n+1)=4.228466e+000; krok(n+1)=9.630670e-002; ng(n+1)=2.211478e+002;
n=90; farx(n+1)=2.462765e+000; foe(n+1)=4.103687e+000; krok(n+1)=3.840290e-002; ng(n+1)=1.321104e+002;
n=91; farx(n+1)=2.407179e+000; foe(n+1)=3.939835e+000; krok(n+1)=4.785778e-002; ng(n+1)=1.636226e+002;
n=92; farx(n+1)=2.432063e+000; foe(n+1)=3.773111e+000; krok(n+1)=8.005809e-002; ng(n+1)=5.740322e+002;
n=93; farx(n+1)=2.355459e+000; foe(n+1)=3.703123e+000; krok(n+1)=3.207144e-002; ng(n+1)=4.746659e+002;
n=94; farx(n+1)=2.323602e+000; foe(n+1)=3.612543e+000; krok(n+1)=8.430727e-002; ng(n+1)=3.891426e+002;
n=95; farx(n+1)=2.249089e+000; foe(n+1)=3.445299e+000; krok(n+1)=1.557206e-001; ng(n+1)=5.129857e+002;
n=96; farx(n+1)=2.175754e+000; foe(n+1)=3.330137e+000; krok(n+1)=2.064051e-001; ng(n+1)=1.492132e+002;
n=97; farx(n+1)=2.056031e+000; foe(n+1)=3.160863e+000; krok(n+1)=2.489360e-001; ng(n+1)=1.743225e+002;
n=98; farx(n+1)=1.906903e+000; foe(n+1)=2.999365e+000; krok(n+1)=2.320583e-001; ng(n+1)=2.145595e+002;
n=99; farx(n+1)=1.853165e+000; foe(n+1)=2.866086e+000; krok(n+1)=3.805404e-001; ng(n+1)=1.177311e+002;
n=100; farx(n+1)=1.816787e+000; foe(n+1)=2.773547e+000; krok(n+1)=3.730776e-001; ng(n+1)=1.267954e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
