%uczenie predyktora oe
clear all;
n=0; farx(n+1)=4.031736e+003; foe(n+1)=4.043431e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=2.975540e+003; foe(n+1)=2.998084e+003; krok(n+1)=5.018139e-004; ng(n+1)=2.422594e+003;
n=2; farx(n+1)=8.562269e+002; foe(n+1)=9.076139e+002; krok(n+1)=5.915528e-003; ng(n+1)=7.976662e+002;
n=3; farx(n+1)=8.790452e+002; foe(n+1)=8.224499e+002; krok(n+1)=5.083014e-005; ng(n+1)=4.836022e+003;
n=4; farx(n+1)=1.303379e+003; foe(n+1)=6.144390e+002; krok(n+1)=1.771952e-003; ng(n+1)=5.646909e+003;
n=5; farx(n+1)=1.250501e+003; foe(n+1)=5.683952e+002; krok(n+1)=4.449709e-003; ng(n+1)=1.167044e+003;
n=6; farx(n+1)=1.010570e+003; foe(n+1)=5.052299e+002; krok(n+1)=1.592864e-003; ng(n+1)=1.245265e+003;
n=7; farx(n+1)=5.373437e+002; foe(n+1)=4.047895e+002; krok(n+1)=4.167949e-003; ng(n+1)=1.410077e+003;
n=8; farx(n+1)=5.184046e+002; foe(n+1)=3.816635e+002; krok(n+1)=6.607631e-003; ng(n+1)=9.580011e+002;
n=9; farx(n+1)=5.150125e+002; foe(n+1)=3.779179e+002; krok(n+1)=7.321912e-003; ng(n+1)=4.818395e+002;
n=10; farx(n+1)=4.510855e+002; foe(n+1)=3.540645e+002; krok(n+1)=4.981739e-002; ng(n+1)=4.849934e+002;
n=11; farx(n+1)=3.503108e+002; foe(n+1)=3.289944e+002; krok(n+1)=3.559767e-002; ng(n+1)=3.140421e+002;
n=12; farx(n+1)=3.394673e+002; foe(n+1)=3.267349e+002; krok(n+1)=8.558166e-003; ng(n+1)=4.131379e+002;
n=13; farx(n+1)=3.360092e+002; foe(n+1)=3.258316e+002; krok(n+1)=2.054980e-002; ng(n+1)=2.448997e+002;
n=14; farx(n+1)=3.094281e+002; foe(n+1)=3.200250e+002; krok(n+1)=5.411858e-002; ng(n+1)=2.217922e+002;
n=15; farx(n+1)=2.916295e+002; foe(n+1)=3.142658e+002; krok(n+1)=4.294671e-002; ng(n+1)=4.784533e+002;
n=16; farx(n+1)=2.262475e+002; foe(n+1)=2.919723e+002; krok(n+1)=2.475890e-001; ng(n+1)=7.081138e+002;
n=17; farx(n+1)=2.113972e+002; foe(n+1)=2.811566e+002; krok(n+1)=2.426108e-002; ng(n+1)=2.473317e+003;
n=18; farx(n+1)=1.447229e+002; foe(n+1)=2.622857e+002; krok(n+1)=8.610785e-002; ng(n+1)=1.076322e+003;
n=19; farx(n+1)=1.254897e+002; foe(n+1)=2.574225e+002; krok(n+1)=9.232346e-004; ng(n+1)=2.284782e+003;
n=20; farx(n+1)=9.063934e+001; foe(n+1)=2.385684e+002; krok(n+1)=2.356078e-002; ng(n+1)=3.694496e+003;
n=21; farx(n+1)=8.915663e+001; foe(n+1)=2.380890e+002; krok(n+1)=5.915258e-003; ng(n+1)=1.222918e+003;
n=22; farx(n+1)=7.003625e+001; foe(n+1)=2.198112e+002; krok(n+1)=8.973318e-002; ng(n+1)=1.484659e+003;
n=23; farx(n+1)=6.681329e+001; foe(n+1)=2.107924e+002; krok(n+1)=1.056599e-002; ng(n+1)=5.297486e+003;
n=24; farx(n+1)=6.501761e+001; foe(n+1)=1.937502e+002; krok(n+1)=1.024776e-001; ng(n+1)=4.274471e+003;
n=25; farx(n+1)=6.500450e+001; foe(n+1)=1.905779e+002; krok(n+1)=7.088910e-003; ng(n+1)=4.735180e+003;
%odnowa zmiennej metryki
n=26; farx(n+1)=7.062346e+001; foe(n+1)=1.748033e+002; krok(n+1)=5.330021e-006; ng(n+1)=4.843047e+003;
n=27; farx(n+1)=7.205621e+001; foe(n+1)=1.680657e+002; krok(n+1)=1.115447e-005; ng(n+1)=2.597255e+003;
n=28; farx(n+1)=6.405800e+001; foe(n+1)=1.552930e+002; krok(n+1)=1.246876e-004; ng(n+1)=1.385111e+003;
n=29; farx(n+1)=4.096407e+001; foe(n+1)=1.241328e+002; krok(n+1)=5.880954e-004; ng(n+1)=1.523485e+003;
n=30; farx(n+1)=3.488578e+001; foe(n+1)=1.121456e+002; krok(n+1)=3.544051e-003; ng(n+1)=2.347241e+003;
n=31; farx(n+1)=3.012496e+001; foe(n+1)=9.890803e+001; krok(n+1)=5.057937e-004; ng(n+1)=2.820108e+003;
n=32; farx(n+1)=2.495914e+001; foe(n+1)=9.042104e+001; krok(n+1)=6.140193e-004; ng(n+1)=2.756328e+003;
n=33; farx(n+1)=2.177445e+001; foe(n+1)=8.180217e+001; krok(n+1)=3.868579e-003; ng(n+1)=9.929642e+002;
n=34; farx(n+1)=1.721713e+001; foe(n+1)=7.415791e+001; krok(n+1)=4.714228e-003; ng(n+1)=6.988569e+002;
n=35; farx(n+1)=1.708706e+001; foe(n+1)=6.823429e+001; krok(n+1)=6.853004e-003; ng(n+1)=3.603360e+002;
n=36; farx(n+1)=1.706631e+001; foe(n+1)=5.577941e+001; krok(n+1)=5.381741e-003; ng(n+1)=1.258489e+003;
n=37; farx(n+1)=1.648737e+001; foe(n+1)=5.332685e+001; krok(n+1)=2.272397e-002; ng(n+1)=7.898482e+002;
n=38; farx(n+1)=1.656779e+001; foe(n+1)=5.244419e+001; krok(n+1)=5.694898e-003; ng(n+1)=1.796306e+003;
n=39; farx(n+1)=1.516595e+001; foe(n+1)=4.958322e+001; krok(n+1)=8.222485e-002; ng(n+1)=1.663020e+003;
n=40; farx(n+1)=1.162360e+001; foe(n+1)=4.126995e+001; krok(n+1)=6.046686e-002; ng(n+1)=7.200958e+002;
n=41; farx(n+1)=9.108393e+000; foe(n+1)=3.302194e+001; krok(n+1)=3.996341e-001; ng(n+1)=5.317703e+002;
n=42; farx(n+1)=8.996192e+000; foe(n+1)=2.801419e+001; krok(n+1)=5.189310e-001; ng(n+1)=1.309654e+003;
n=43; farx(n+1)=9.099584e+000; foe(n+1)=2.555772e+001; krok(n+1)=1.115271e-001; ng(n+1)=7.187711e+002;
n=44; farx(n+1)=8.033509e+000; foe(n+1)=2.149287e+001; krok(n+1)=9.112329e-001; ng(n+1)=6.618839e+002;
n=45; farx(n+1)=7.312438e+000; foe(n+1)=1.973754e+001; krok(n+1)=6.656880e-001; ng(n+1)=6.322508e+002;
n=46; farx(n+1)=6.395923e+000; foe(n+1)=1.842872e+001; krok(n+1)=6.193808e-001; ng(n+1)=2.486009e+002;
n=47; farx(n+1)=5.257462e+000; foe(n+1)=1.676997e+001; krok(n+1)=1.098329e+000; ng(n+1)=2.712964e+002;
n=48; farx(n+1)=4.724298e+000; foe(n+1)=1.603616e+001; krok(n+1)=3.891962e-001; ng(n+1)=2.807138e+002;
n=49; farx(n+1)=4.270696e+000; foe(n+1)=1.463143e+001; krok(n+1)=9.205345e-001; ng(n+1)=2.390639e+002;
n=50; farx(n+1)=4.230748e+000; foe(n+1)=1.406170e+001; krok(n+1)=3.404866e-001; ng(n+1)=1.941826e+002;
%odnowa zmiennej metryki
n=51; farx(n+1)=4.242966e+000; foe(n+1)=1.395506e+001; krok(n+1)=5.874564e-006; ng(n+1)=4.466003e+002;
n=52; farx(n+1)=4.200090e+000; foe(n+1)=1.390261e+001; krok(n+1)=1.306299e-004; ng(n+1)=7.683579e+001;
n=53; farx(n+1)=4.160751e+000; foe(n+1)=1.383878e+001; krok(n+1)=1.543265e-004; ng(n+1)=7.304269e+001;
n=54; farx(n+1)=4.163377e+000; foe(n+1)=1.382347e+001; krok(n+1)=1.078966e-004; ng(n+1)=4.470159e+001;
n=55; farx(n+1)=4.067889e+000; foe(n+1)=1.343670e+001; krok(n+1)=7.585588e-003; ng(n+1)=2.473972e+001;
n=56; farx(n+1)=4.051208e+000; foe(n+1)=1.332994e+001; krok(n+1)=4.372259e-003; ng(n+1)=1.298419e+002;
n=57; farx(n+1)=3.909886e+000; foe(n+1)=1.323160e+001; krok(n+1)=8.180929e-003; ng(n+1)=2.216016e+002;
n=58; farx(n+1)=3.887646e+000; foe(n+1)=1.315903e+001; krok(n+1)=9.552064e-003; ng(n+1)=3.465587e+002;
n=59; farx(n+1)=3.588280e+000; foe(n+1)=1.279625e+001; krok(n+1)=4.215364e-002; ng(n+1)=2.756275e+002;
n=60; farx(n+1)=3.572802e+000; foe(n+1)=1.257954e+001; krok(n+1)=8.996953e-003; ng(n+1)=2.396652e+002;
n=61; farx(n+1)=3.538656e+000; foe(n+1)=1.240869e+001; krok(n+1)=4.161404e-002; ng(n+1)=2.228643e+002;
n=62; farx(n+1)=3.520015e+000; foe(n+1)=1.227743e+001; krok(n+1)=4.663470e-002; ng(n+1)=2.042696e+002;
n=63; farx(n+1)=3.360672e+000; foe(n+1)=1.186725e+001; krok(n+1)=1.903039e-001; ng(n+1)=9.993049e+001;
n=64; farx(n+1)=3.223538e+000; foe(n+1)=1.165564e+001; krok(n+1)=3.651364e-002; ng(n+1)=3.153665e+002;
n=65; farx(n+1)=3.216345e+000; foe(n+1)=1.113704e+001; krok(n+1)=3.333343e-001; ng(n+1)=5.442677e+002;
n=66; farx(n+1)=3.118911e+000; foe(n+1)=1.070519e+001; krok(n+1)=4.446078e-002; ng(n+1)=2.002838e+002;
n=67; farx(n+1)=3.119675e+000; foe(n+1)=1.020424e+001; krok(n+1)=5.393056e-001; ng(n+1)=2.992006e+002;
n=68; farx(n+1)=3.022603e+000; foe(n+1)=9.727052e+000; krok(n+1)=3.261226e-001; ng(n+1)=1.174399e+002;
n=69; farx(n+1)=3.058610e+000; foe(n+1)=9.290191e+000; krok(n+1)=1.297775e-001; ng(n+1)=4.505544e+002;
n=70; farx(n+1)=3.178832e+000; foe(n+1)=8.988274e+000; krok(n+1)=9.137743e-002; ng(n+1)=4.075428e+002;
n=71; farx(n+1)=3.111828e+000; foe(n+1)=8.654563e+000; krok(n+1)=2.701916e-001; ng(n+1)=2.925442e+002;
n=72; farx(n+1)=3.138001e+000; foe(n+1)=8.455828e+000; krok(n+1)=2.725288e-001; ng(n+1)=2.414115e+002;
n=73; farx(n+1)=3.009988e+000; foe(n+1)=8.056642e+000; krok(n+1)=7.228765e-001; ng(n+1)=5.394233e+002;
n=74; farx(n+1)=2.963362e+000; foe(n+1)=7.839821e+000; krok(n+1)=3.091610e-001; ng(n+1)=1.992780e+002;
n=75; farx(n+1)=3.038446e+000; foe(n+1)=7.511540e+000; krok(n+1)=3.762824e-001; ng(n+1)=1.362311e+002;
%odnowa zmiennej metryki
n=76; farx(n+1)=3.034245e+000; foe(n+1)=7.506353e+000; krok(n+1)=4.335978e-006; ng(n+1)=1.047174e+002;
n=77; farx(n+1)=3.027394e+000; foe(n+1)=7.484951e+000; krok(n+1)=2.114892e-005; ng(n+1)=1.096393e+002;
n=78; farx(n+1)=3.010338e+000; foe(n+1)=7.426839e+000; krok(n+1)=7.092424e-005; ng(n+1)=9.850832e+001;
n=79; farx(n+1)=3.013646e+000; foe(n+1)=7.416278e+000; krok(n+1)=3.452947e-005; ng(n+1)=5.672526e+001;
n=80; farx(n+1)=3.078181e+000; foe(n+1)=7.332968e+000; krok(n+1)=3.460440e-003; ng(n+1)=1.639962e+001;
n=81; farx(n+1)=3.069954e+000; foe(n+1)=7.282722e+000; krok(n+1)=1.234892e-003; ng(n+1)=2.272920e+001;
n=82; farx(n+1)=3.008434e+000; foe(n+1)=7.209633e+000; krok(n+1)=1.171709e-002; ng(n+1)=3.502328e+001;
n=83; farx(n+1)=2.976100e+000; foe(n+1)=7.134651e+000; krok(n+1)=7.883344e-003; ng(n+1)=1.086126e+002;
n=84; farx(n+1)=2.889938e+000; foe(n+1)=7.095376e+000; krok(n+1)=1.846205e-002; ng(n+1)=2.133225e+002;
n=85; farx(n+1)=2.832337e+000; foe(n+1)=7.064298e+000; krok(n+1)=1.590914e-002; ng(n+1)=2.762363e+002;
n=86; farx(n+1)=2.816685e+000; foe(n+1)=7.036433e+000; krok(n+1)=1.181377e-002; ng(n+1)=3.181979e+002;
n=87; farx(n+1)=2.725378e+000; foe(n+1)=7.000571e+000; krok(n+1)=3.604146e-002; ng(n+1)=2.668049e+002;
n=88; farx(n+1)=2.724860e+000; foe(n+1)=6.978607e+000; krok(n+1)=7.045190e-002; ng(n+1)=2.017715e+002;
n=89; farx(n+1)=2.676704e+000; foe(n+1)=6.946704e+000; krok(n+1)=1.032026e-001; ng(n+1)=1.787369e+002;
n=90; farx(n+1)=2.699454e+000; foe(n+1)=6.842295e+000; krok(n+1)=2.137961e-001; ng(n+1)=2.039118e+002;
n=91; farx(n+1)=2.705103e+000; foe(n+1)=6.814360e+000; krok(n+1)=2.590317e-002; ng(n+1)=2.125614e+002;
n=92; farx(n+1)=2.685595e+000; foe(n+1)=6.769000e+000; krok(n+1)=7.487569e-001; ng(n+1)=1.181694e+002;
n=93; farx(n+1)=2.659471e+000; foe(n+1)=6.745606e+000; krok(n+1)=6.744582e-001; ng(n+1)=2.189976e+002;
n=94; farx(n+1)=2.623594e+000; foe(n+1)=6.715881e+000; krok(n+1)=1.104103e+000; ng(n+1)=5.963032e+001;
n=95; farx(n+1)=2.620515e+000; foe(n+1)=6.691817e+000; krok(n+1)=7.382907e-001; ng(n+1)=1.306395e+002;
n=96; farx(n+1)=2.625211e+000; foe(n+1)=6.671218e+000; krok(n+1)=7.847380e-001; ng(n+1)=1.410181e+002;
n=97; farx(n+1)=2.661105e+000; foe(n+1)=6.602082e+000; krok(n+1)=1.882680e+000; ng(n+1)=1.302216e+002;
n=98; farx(n+1)=2.663992e+000; foe(n+1)=6.569620e+000; krok(n+1)=4.862877e-001; ng(n+1)=1.695968e+002;
n=99; farx(n+1)=2.642753e+000; foe(n+1)=6.483792e+000; krok(n+1)=5.461800e-001; ng(n+1)=1.428060e+002;
n=100; farx(n+1)=2.582378e+000; foe(n+1)=6.431173e+000; krok(n+1)=3.240219e-001; ng(n+1)=1.408223e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
