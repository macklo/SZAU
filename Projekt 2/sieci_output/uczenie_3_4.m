%uczenie predyktora oe
clear all;
n=0; farx(n+1)=3.967767e+003; foe(n+1)=4.012962e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=2.975954e+003; foe(n+1)=3.031224e+003; krok(n+1)=4.898436e-004; ng(n+1)=2.212734e+003;
n=2; farx(n+1)=8.128025e+002; foe(n+1)=8.204442e+002; krok(n+1)=1.196341e-002; ng(n+1)=6.205871e+002;
n=3; farx(n+1)=8.177318e+002; foe(n+1)=7.216497e+002; krok(n+1)=6.408173e-005; ng(n+1)=4.300012e+003;
n=4; farx(n+1)=8.586606e+002; foe(n+1)=4.724822e+002; krok(n+1)=1.303603e-003; ng(n+1)=4.447445e+003;
n=5; farx(n+1)=4.666423e+002; foe(n+1)=3.706589e+002; krok(n+1)=3.065383e-003; ng(n+1)=1.129865e+003;
n=6; farx(n+1)=4.030541e+002; foe(n+1)=3.612124e+002; krok(n+1)=4.522618e-003; ng(n+1)=5.782748e+002;
n=7; farx(n+1)=3.755039e+002; foe(n+1)=3.435507e+002; krok(n+1)=5.967206e-003; ng(n+1)=4.447220e+002;
n=8; farx(n+1)=3.552947e+002; foe(n+1)=3.372639e+002; krok(n+1)=1.299379e-002; ng(n+1)=4.589299e+002;
n=9; farx(n+1)=3.536575e+002; foe(n+1)=3.164322e+002; krok(n+1)=3.118548e-002; ng(n+1)=4.912640e+002;
n=10; farx(n+1)=3.513336e+002; foe(n+1)=3.092464e+002; krok(n+1)=3.213808e-003; ng(n+1)=3.461815e+002;
n=11; farx(n+1)=3.553184e+002; foe(n+1)=3.076507e+002; krok(n+1)=7.432430e-004; ng(n+1)=6.353421e+002;
n=12; farx(n+1)=3.554287e+002; foe(n+1)=2.934822e+002; krok(n+1)=1.603572e-002; ng(n+1)=7.414030e+002;
n=13; farx(n+1)=3.691347e+002; foe(n+1)=2.888653e+002; krok(n+1)=5.294040e-003; ng(n+1)=1.528446e+003;
n=14; farx(n+1)=4.127565e+002; foe(n+1)=2.787047e+002; krok(n+1)=1.526430e-002; ng(n+1)=1.376709e+003;
n=15; farx(n+1)=4.050862e+002; foe(n+1)=2.755471e+002; krok(n+1)=1.175824e-002; ng(n+1)=9.989719e+002;
n=16; farx(n+1)=3.473374e+002; foe(n+1)=2.519207e+002; krok(n+1)=6.963444e-002; ng(n+1)=1.032569e+003;
n=17; farx(n+1)=3.267011e+002; foe(n+1)=2.454028e+002; krok(n+1)=1.158426e-002; ng(n+1)=7.030974e+002;
n=18; farx(n+1)=3.101075e+002; foe(n+1)=2.387388e+002; krok(n+1)=1.859267e-002; ng(n+1)=6.394988e+002;
n=19; farx(n+1)=2.311552e+002; foe(n+1)=2.083249e+002; krok(n+1)=1.687274e-001; ng(n+1)=4.453618e+002;
n=20; farx(n+1)=1.732307e+002; foe(n+1)=1.837961e+002; krok(n+1)=7.326360e-002; ng(n+1)=1.054800e+003;
n=21; farx(n+1)=1.398238e+002; foe(n+1)=1.664286e+002; krok(n+1)=2.741202e-002; ng(n+1)=1.748016e+003;
n=22; farx(n+1)=1.256215e+002; foe(n+1)=1.568837e+002; krok(n+1)=2.847182e-002; ng(n+1)=2.539300e+003;
n=23; farx(n+1)=1.135927e+002; foe(n+1)=1.494580e+002; krok(n+1)=3.459424e-002; ng(n+1)=1.652372e+003;
n=24; farx(n+1)=8.813699e+001; foe(n+1)=1.312485e+002; krok(n+1)=8.003103e-002; ng(n+1)=1.348307e+003;
n=25; farx(n+1)=6.881923e+001; foe(n+1)=1.139311e+002; krok(n+1)=2.625380e-001; ng(n+1)=1.419185e+003;
%odnowa zmiennej metryki
n=26; farx(n+1)=6.785181e+001; foe(n+1)=1.111238e+002; krok(n+1)=2.167257e-005; ng(n+1)=1.228612e+003;
n=27; farx(n+1)=6.424186e+001; foe(n+1)=1.057057e+002; krok(n+1)=4.449379e-004; ng(n+1)=4.647306e+002;
n=28; farx(n+1)=6.049910e+001; foe(n+1)=1.031304e+002; krok(n+1)=1.882222e-004; ng(n+1)=7.007258e+002;
n=29; farx(n+1)=5.898735e+001; foe(n+1)=1.011430e+002; krok(n+1)=3.232817e-004; ng(n+1)=4.780632e+002;
n=30; farx(n+1)=5.162051e+001; foe(n+1)=9.111025e+001; krok(n+1)=6.847610e-004; ng(n+1)=5.253948e+002;
n=31; farx(n+1)=5.024359e+001; foe(n+1)=8.972866e+001; krok(n+1)=3.229906e-004; ng(n+1)=3.963306e+002;
n=32; farx(n+1)=4.592705e+001; foe(n+1)=8.809553e+001; krok(n+1)=1.022356e-004; ng(n+1)=1.215601e+003;
n=33; farx(n+1)=4.257493e+001; foe(n+1)=8.714383e+001; krok(n+1)=4.755968e-004; ng(n+1)=6.300932e+002;
n=34; farx(n+1)=4.096578e+001; foe(n+1)=8.610299e+001; krok(n+1)=2.542757e-004; ng(n+1)=9.611020e+002;
n=35; farx(n+1)=4.079031e+001; foe(n+1)=8.598253e+001; krok(n+1)=1.897438e-004; ng(n+1)=1.403665e+003;
n=36; farx(n+1)=3.965926e+001; foe(n+1)=8.458690e+001; krok(n+1)=4.241720e-003; ng(n+1)=1.293048e+003;
n=37; farx(n+1)=3.949522e+001; foe(n+1)=8.426126e+001; krok(n+1)=2.887783e-004; ng(n+1)=1.789355e+003;
n=38; farx(n+1)=3.890710e+001; foe(n+1)=8.346061e+001; krok(n+1)=4.939936e-004; ng(n+1)=1.407827e+003;
n=39; farx(n+1)=3.603742e+001; foe(n+1)=8.039321e+001; krok(n+1)=7.632150e-003; ng(n+1)=1.745516e+003;
n=40; farx(n+1)=3.514205e+001; foe(n+1)=7.905767e+001; krok(n+1)=5.557598e-003; ng(n+1)=4.524001e+003;
n=41; farx(n+1)=3.513464e+001; foe(n+1)=7.894801e+001; krok(n+1)=7.363092e-005; ng(n+1)=8.258773e+003;
n=42; farx(n+1)=3.012367e+001; foe(n+1)=7.271681e+001; krok(n+1)=4.438543e-002; ng(n+1)=8.157024e+003;
n=43; farx(n+1)=2.991439e+001; foe(n+1)=7.255553e+001; krok(n+1)=9.576184e-004; ng(n+1)=7.534301e+003;
n=44; farx(n+1)=2.935178e+001; foe(n+1)=7.017896e+001; krok(n+1)=9.451019e-002; ng(n+1)=6.405752e+003;
n=45; farx(n+1)=2.882897e+001; foe(n+1)=6.864134e+001; krok(n+1)=3.413297e-002; ng(n+1)=2.661553e+003;
n=46; farx(n+1)=2.868098e+001; foe(n+1)=6.630784e+001; krok(n+1)=5.236098e-002; ng(n+1)=5.059561e+003;
n=47; farx(n+1)=2.899904e+001; foe(n+1)=6.487768e+001; krok(n+1)=8.839546e-003; ng(n+1)=6.398948e+003;
n=48; farx(n+1)=3.014274e+001; foe(n+1)=6.337988e+001; krok(n+1)=2.656312e-001; ng(n+1)=3.857005e+003;
n=49; farx(n+1)=3.020738e+001; foe(n+1)=6.210368e+001; krok(n+1)=5.114147e-001; ng(n+1)=1.766007e+003;
n=50; farx(n+1)=3.051218e+001; foe(n+1)=6.005411e+001; krok(n+1)=6.305900e-001; ng(n+1)=9.676096e+002;
%odnowa zmiennej metryki
n=51; farx(n+1)=3.049652e+001; foe(n+1)=5.995178e+001; krok(n+1)=4.609691e-007; ng(n+1)=1.317448e+003;
n=52; farx(n+1)=3.029613e+001; foe(n+1)=5.987938e+001; krok(n+1)=1.161317e-005; ng(n+1)=2.410499e+002;
n=53; farx(n+1)=3.012496e+001; foe(n+1)=5.982290e+001; krok(n+1)=8.129247e-006; ng(n+1)=2.765033e+002;
n=54; farx(n+1)=2.987932e+001; foe(n+1)=5.973327e+001; krok(n+1)=6.046162e-005; ng(n+1)=1.934503e+002;
n=55; farx(n+1)=2.909354e+001; foe(n+1)=5.939033e+001; krok(n+1)=6.991253e-005; ng(n+1)=6.433748e+002;
n=56; farx(n+1)=2.851207e+001; foe(n+1)=5.815565e+001; krok(n+1)=1.740889e-003; ng(n+1)=1.577229e+002;
n=57; farx(n+1)=2.850750e+001; foe(n+1)=5.814993e+001; krok(n+1)=3.474229e-006; ng(n+1)=1.655862e+003;
n=58; farx(n+1)=2.842707e+001; foe(n+1)=5.797506e+001; krok(n+1)=3.604935e-004; ng(n+1)=1.748160e+003;
n=59; farx(n+1)=2.813894e+001; foe(n+1)=5.763731e+001; krok(n+1)=1.265711e-003; ng(n+1)=5.296122e+002;
n=60; farx(n+1)=2.840210e+001; foe(n+1)=5.723604e+001; krok(n+1)=1.387045e-003; ng(n+1)=2.411854e+003;
n=61; farx(n+1)=2.791710e+001; foe(n+1)=5.680222e+001; krok(n+1)=3.271540e-003; ng(n+1)=8.100590e+002;
n=62; farx(n+1)=2.741272e+001; foe(n+1)=5.624179e+001; krok(n+1)=3.036370e-003; ng(n+1)=2.374848e+003;
n=63; farx(n+1)=2.736602e+001; foe(n+1)=5.596510e+001; krok(n+1)=3.291607e-003; ng(n+1)=3.907245e+003;
n=64; farx(n+1)=2.736214e+001; foe(n+1)=5.590123e+001; krok(n+1)=6.423816e-004; ng(n+1)=2.585339e+003;
n=65; farx(n+1)=2.720487e+001; foe(n+1)=5.575759e+001; krok(n+1)=2.352381e-003; ng(n+1)=2.609684e+003;
n=66; farx(n+1)=2.698273e+001; foe(n+1)=5.513303e+001; krok(n+1)=1.258748e-002; ng(n+1)=3.524809e+003;
n=67; farx(n+1)=2.669503e+001; foe(n+1)=5.492235e+001; krok(n+1)=1.082825e-002; ng(n+1)=2.943865e+003;
n=68; farx(n+1)=2.611184e+001; foe(n+1)=5.438843e+001; krok(n+1)=1.771116e-002; ng(n+1)=4.923797e+003;
n=69; farx(n+1)=2.598260e+001; foe(n+1)=5.420674e+001; krok(n+1)=3.650930e-002; ng(n+1)=4.394358e+003;
n=70; farx(n+1)=2.539733e+001; foe(n+1)=5.319898e+001; krok(n+1)=3.256578e-002; ng(n+1)=5.768225e+003;
n=71; farx(n+1)=2.534317e+001; foe(n+1)=5.215489e+001; krok(n+1)=2.538306e-001; ng(n+1)=5.434788e+003;
n=72; farx(n+1)=2.501761e+001; foe(n+1)=5.161511e+001; krok(n+1)=3.311156e-001; ng(n+1)=2.025735e+003;
n=73; farx(n+1)=2.430662e+001; foe(n+1)=5.073577e+001; krok(n+1)=1.791582e+000; ng(n+1)=1.874058e+003;
n=74; farx(n+1)=2.356071e+001; foe(n+1)=4.964285e+001; krok(n+1)=5.055327e-001; ng(n+1)=1.267655e+003;
n=75; farx(n+1)=2.263505e+001; foe(n+1)=4.766391e+001; krok(n+1)=8.503583e-001; ng(n+1)=1.664991e+003;
%odnowa zmiennej metryki
n=76; farx(n+1)=2.293186e+001; foe(n+1)=4.639148e+001; krok(n+1)=4.053211e-006; ng(n+1)=4.157192e+003;
n=77; farx(n+1)=2.280572e+001; foe(n+1)=4.554595e+001; krok(n+1)=4.393044e-006; ng(n+1)=2.266356e+003;
n=78; farx(n+1)=2.280599e+001; foe(n+1)=4.552676e+001; krok(n+1)=1.124181e-007; ng(n+1)=1.783690e+003;
n=79; farx(n+1)=2.190224e+001; foe(n+1)=4.363013e+001; krok(n+1)=1.489596e-004; ng(n+1)=5.622822e+002;
n=80; farx(n+1)=2.159336e+001; foe(n+1)=4.259186e+001; krok(n+1)=4.168272e-004; ng(n+1)=6.851710e+002;
n=81; farx(n+1)=2.155752e+001; foe(n+1)=4.256510e+001; krok(n+1)=6.754223e-006; ng(n+1)=1.166659e+003;
n=82; farx(n+1)=2.169730e+001; foe(n+1)=4.247347e+001; krok(n+1)=9.404951e-005; ng(n+1)=1.351334e+003;
n=83; farx(n+1)=2.178935e+001; foe(n+1)=4.223246e+001; krok(n+1)=7.740461e-004; ng(n+1)=1.821332e+003;
n=84; farx(n+1)=2.151300e+001; foe(n+1)=4.202831e+001; krok(n+1)=6.369581e-004; ng(n+1)=9.849682e+002;
n=85; farx(n+1)=2.139518e+001; foe(n+1)=4.137255e+001; krok(n+1)=2.391214e-003; ng(n+1)=4.192015e+003;
n=86; farx(n+1)=2.135229e+001; foe(n+1)=4.123135e+001; krok(n+1)=1.046070e-003; ng(n+1)=2.054903e+003;
n=87; farx(n+1)=2.093167e+001; foe(n+1)=4.103397e+001; krok(n+1)=2.223715e-003; ng(n+1)=2.439285e+002;
n=88; farx(n+1)=2.087098e+001; foe(n+1)=4.096312e+001; krok(n+1)=2.176307e-003; ng(n+1)=1.843484e+003;
n=89; farx(n+1)=2.085951e+001; foe(n+1)=4.093731e+001; krok(n+1)=1.291963e-003; ng(n+1)=1.478428e+003;
n=90; farx(n+1)=2.098326e+001; foe(n+1)=4.055198e+001; krok(n+1)=5.355898e-003; ng(n+1)=1.344423e+003;
n=91; farx(n+1)=2.103782e+001; foe(n+1)=4.030104e+001; krok(n+1)=8.534063e-003; ng(n+1)=2.826677e+003;
n=92; farx(n+1)=2.009800e+001; foe(n+1)=3.873879e+001; krok(n+1)=5.536470e-002; ng(n+1)=9.014276e+002;
n=93; farx(n+1)=2.000826e+001; foe(n+1)=3.867475e+001; krok(n+1)=7.242402e-003; ng(n+1)=1.021149e+003;
n=94; farx(n+1)=1.918819e+001; foe(n+1)=3.822594e+001; krok(n+1)=3.832769e-002; ng(n+1)=7.346551e+002;
n=95; farx(n+1)=1.872946e+001; foe(n+1)=3.639024e+001; krok(n+1)=1.147757e+000; ng(n+1)=1.146472e+003;
n=96; farx(n+1)=1.851449e+001; foe(n+1)=3.608132e+001; krok(n+1)=2.495854e-001; ng(n+1)=1.373224e+003;
n=97; farx(n+1)=1.835054e+001; foe(n+1)=3.590174e+001; krok(n+1)=3.809184e-002; ng(n+1)=6.990394e+002;
n=98; farx(n+1)=1.786845e+001; foe(n+1)=3.336467e+001; krok(n+1)=6.614848e-001; ng(n+1)=1.071222e+003;
n=99; farx(n+1)=1.785518e+001; foe(n+1)=3.325014e+001; krok(n+1)=5.286105e-002; ng(n+1)=1.715818e+003;
n=100; farx(n+1)=1.759621e+001; foe(n+1)=3.213577e+001; krok(n+1)=8.704303e-001; ng(n+1)=9.582277e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
