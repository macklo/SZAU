%uczenie predyktora oe
clear all;
n=0; farx(n+1)=5.004390e+003; foe(n+1)=4.862472e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=3.839716e+003; foe(n+1)=3.807088e+003; krok(n+1)=3.569431e-004; ng(n+1)=3.370966e+003;
n=2; farx(n+1)=8.802808e+002; foe(n+1)=8.714263e+002; krok(n+1)=2.660052e-003; ng(n+1)=1.740928e+003;
n=3; farx(n+1)=9.044680e+002; foe(n+1)=7.122834e+002; krok(n+1)=2.749912e-004; ng(n+1)=2.507726e+003;
n=4; farx(n+1)=7.040308e+002; foe(n+1)=5.930110e+002; krok(n+1)=1.718805e-003; ng(n+1)=1.279347e+003;
n=5; farx(n+1)=4.504943e+002; foe(n+1)=5.230524e+002; krok(n+1)=1.342085e-003; ng(n+1)=1.003715e+003;
n=6; farx(n+1)=2.383840e+002; foe(n+1)=4.367739e+002; krok(n+1)=3.559503e-003; ng(n+1)=1.706032e+003;
n=7; farx(n+1)=2.141502e+002; foe(n+1)=4.292563e+002; krok(n+1)=8.528034e-005; ng(n+1)=2.231173e+003;
n=8; farx(n+1)=2.172443e+002; foe(n+1)=4.151547e+002; krok(n+1)=4.756638e-003; ng(n+1)=2.878796e+003;
n=9; farx(n+1)=2.346506e+002; foe(n+1)=4.042960e+002; krok(n+1)=1.621288e-003; ng(n+1)=1.609558e+003;
n=10; farx(n+1)=2.202477e+002; foe(n+1)=3.953208e+002; krok(n+1)=3.813746e-003; ng(n+1)=1.135205e+003;
n=11; farx(n+1)=2.369306e+002; foe(n+1)=3.840606e+002; krok(n+1)=5.307483e-003; ng(n+1)=1.622689e+003;
n=12; farx(n+1)=2.376479e+002; foe(n+1)=3.819823e+002; krok(n+1)=2.361852e-003; ng(n+1)=1.387960e+003;
n=13; farx(n+1)=2.414645e+002; foe(n+1)=3.797655e+002; krok(n+1)=4.089425e-004; ng(n+1)=1.483530e+003;
n=14; farx(n+1)=2.419656e+002; foe(n+1)=3.597378e+002; krok(n+1)=3.586441e-002; ng(n+1)=1.265393e+003;
n=15; farx(n+1)=2.426236e+002; foe(n+1)=3.542015e+002; krok(n+1)=7.163682e-003; ng(n+1)=1.182389e+003;
n=16; farx(n+1)=2.454601e+002; foe(n+1)=3.446050e+002; krok(n+1)=5.915258e-003; ng(n+1)=1.514541e+003;
n=17; farx(n+1)=1.410245e+002; foe(n+1)=2.805627e+002; krok(n+1)=1.866720e-001; ng(n+1)=1.094943e+003;
n=18; farx(n+1)=1.407540e+002; foe(n+1)=2.803058e+002; krok(n+1)=1.110172e-004; ng(n+1)=9.726437e+003;
n=19; farx(n+1)=1.122113e+002; foe(n+1)=2.615741e+002; krok(n+1)=1.540084e-001; ng(n+1)=1.170408e+004;
n=20; farx(n+1)=7.971551e+001; foe(n+1)=2.470497e+002; krok(n+1)=7.786255e-002; ng(n+1)=1.102635e+004;
n=21; farx(n+1)=3.048346e+001; foe(n+1)=1.620330e+002; krok(n+1)=4.626374e-001; ng(n+1)=1.162313e+004;
n=22; farx(n+1)=3.031239e+001; foe(n+1)=1.609881e+002; krok(n+1)=8.058731e-004; ng(n+1)=5.273446e+004;
n=23; farx(n+1)=2.558497e+001; foe(n+1)=9.811145e+001; krok(n+1)=8.139610e-002; ng(n+1)=3.080536e+004;
n=24; farx(n+1)=2.388206e+001; foe(n+1)=7.464639e+001; krok(n+1)=2.918466e-001; ng(n+1)=1.313412e+003;
n=25; farx(n+1)=2.396467e+001; foe(n+1)=7.319982e+001; krok(n+1)=4.381503e-005; ng(n+1)=3.808632e+005;
%odnowa zmiennej metryki
n=26; farx(n+1)=2.396466e+001; foe(n+1)=7.291132e+001; krok(n+1)=5.622486e-015; ng(n+1)=9.020944e+006;
n=27; farx(n+1)=2.396365e+001; foe(n+1)=7.290850e+001; krok(n+1)=1.633652e-008; ng(n+1)=2.436007e+007;
n=28; farx(n+1)=2.308472e+001; foe(n+1)=6.808518e+001; krok(n+1)=2.562777e-005; ng(n+1)=1.325665e+008;
n=29; farx(n+1)=2.297651e+001; foe(n+1)=6.683371e+001; krok(n+1)=6.880069e-005; ng(n+1)=7.240198e+004;
n=30; farx(n+1)=2.265482e+001; foe(n+1)=5.913528e+001; krok(n+1)=5.333789e-004; ng(n+1)=2.792102e+003;
n=31; farx(n+1)=2.036215e+001; foe(n+1)=5.409189e+001; krok(n+1)=9.289576e-004; ng(n+1)=4.322439e+003;
n=32; farx(n+1)=1.979060e+001; foe(n+1)=5.001907e+001; krok(n+1)=1.112427e-003; ng(n+1)=3.519655e+003;
n=33; farx(n+1)=1.644791e+001; foe(n+1)=4.340040e+001; krok(n+1)=2.435962e-003; ng(n+1)=2.432551e+003;
n=34; farx(n+1)=1.465613e+001; foe(n+1)=4.022525e+001; krok(n+1)=1.342085e-003; ng(n+1)=1.049940e+003;
n=35; farx(n+1)=1.374811e+001; foe(n+1)=3.916732e+001; krok(n+1)=2.435962e-003; ng(n+1)=6.767189e+002;
n=36; farx(n+1)=1.336113e+001; foe(n+1)=3.834401e+001; krok(n+1)=5.999763e-003; ng(n+1)=1.342903e+003;
n=37; farx(n+1)=1.225172e+001; foe(n+1)=3.743620e+001; krok(n+1)=7.680234e-003; ng(n+1)=9.336599e+002;
n=38; farx(n+1)=1.084482e+001; foe(n+1)=3.551135e+001; krok(n+1)=1.771116e-002; ng(n+1)=8.083748e+002;
n=39; farx(n+1)=9.199298e+000; foe(n+1)=3.462201e+001; krok(n+1)=1.034736e-002; ng(n+1)=8.244753e+002;
n=40; farx(n+1)=9.473556e+000; foe(n+1)=3.269838e+001; krok(n+1)=1.350863e-001; ng(n+1)=9.883657e+002;
n=41; farx(n+1)=9.683610e+000; foe(n+1)=2.858830e+001; krok(n+1)=1.150668e-001; ng(n+1)=7.812798e+002;
n=42; farx(n+1)=9.427600e+000; foe(n+1)=2.741098e+001; krok(n+1)=8.172294e-002; ng(n+1)=5.207742e+002;
n=43; farx(n+1)=8.542199e+000; foe(n+1)=2.598002e+001; krok(n+1)=3.655097e-001; ng(n+1)=1.978397e+002;
n=44; farx(n+1)=8.189865e+000; foe(n+1)=2.475756e+001; krok(n+1)=3.238984e-001; ng(n+1)=7.116714e+002;
n=45; farx(n+1)=7.744843e+000; foe(n+1)=2.368452e+001; krok(n+1)=6.207284e-001; ng(n+1)=8.128681e+002;
n=46; farx(n+1)=7.348895e+000; foe(n+1)=2.288000e+001; krok(n+1)=3.550835e-001; ng(n+1)=5.166229e+002;
n=47; farx(n+1)=7.468709e+000; foe(n+1)=2.186349e+001; krok(n+1)=3.903951e-001; ng(n+1)=4.335624e+002;
n=48; farx(n+1)=7.655698e+000; foe(n+1)=2.117960e+001; krok(n+1)=9.429061e-001; ng(n+1)=2.429618e+002;
n=49; farx(n+1)=7.117183e+000; foe(n+1)=2.051390e+001; krok(n+1)=5.736932e-001; ng(n+1)=1.990992e+002;
n=50; farx(n+1)=6.789295e+000; foe(n+1)=1.913177e+001; krok(n+1)=1.025225e+000; ng(n+1)=1.588688e+002;
%odnowa zmiennej metryki
n=51; farx(n+1)=6.569347e+000; foe(n+1)=1.863176e+001; krok(n+1)=5.162212e-005; ng(n+1)=3.117564e+002;
n=52; farx(n+1)=6.487896e+000; foe(n+1)=1.856082e+001; krok(n+1)=1.218919e-004; ng(n+1)=6.588625e+001;
n=53; farx(n+1)=6.394094e+000; foe(n+1)=1.849091e+001; krok(n+1)=6.630174e-005; ng(n+1)=1.108344e+002;
n=54; farx(n+1)=5.903622e+000; foe(n+1)=1.801755e+001; krok(n+1)=8.368590e-005; ng(n+1)=2.631764e+002;
n=55; farx(n+1)=5.599824e+000; foe(n+1)=1.721164e+001; krok(n+1)=3.059399e-003; ng(n+1)=6.588857e+001;
n=56; farx(n+1)=5.314899e+000; foe(n+1)=1.687676e+001; krok(n+1)=3.386820e-003; ng(n+1)=2.556036e+002;
n=57; farx(n+1)=5.176005e+000; foe(n+1)=1.668310e+001; krok(n+1)=1.409080e-003; ng(n+1)=3.072668e+002;
n=58; farx(n+1)=5.100091e+000; foe(n+1)=1.659588e+001; krok(n+1)=5.967857e-003; ng(n+1)=3.574213e+002;
n=59; farx(n+1)=5.086883e+000; foe(n+1)=1.657926e+001; krok(n+1)=5.680993e-003; ng(n+1)=3.983505e+002;
n=60; farx(n+1)=5.098498e+000; foe(n+1)=1.652642e+001; krok(n+1)=2.710756e-002; ng(n+1)=4.065842e+002;
n=61; farx(n+1)=4.886283e+000; foe(n+1)=1.627213e+001; krok(n+1)=7.765706e-002; ng(n+1)=4.054484e+002;
n=62; farx(n+1)=4.719366e+000; foe(n+1)=1.594663e+001; krok(n+1)=1.004449e-002; ng(n+1)=4.338807e+002;
n=63; farx(n+1)=4.421198e+000; foe(n+1)=1.555644e+001; krok(n+1)=1.067078e-001; ng(n+1)=5.205661e+002;
n=64; farx(n+1)=4.137875e+000; foe(n+1)=1.522130e+001; krok(n+1)=1.627922e-001; ng(n+1)=2.279028e+002;
n=65; farx(n+1)=4.001683e+000; foe(n+1)=1.483490e+001; krok(n+1)=1.361627e-001; ng(n+1)=1.750537e+002;
n=66; farx(n+1)=3.714389e+000; foe(n+1)=1.425808e+001; krok(n+1)=5.671128e-002; ng(n+1)=1.562793e+002;
n=67; farx(n+1)=3.539389e+000; foe(n+1)=1.359122e+001; krok(n+1)=1.365319e-001; ng(n+1)=4.607654e+002;
n=68; farx(n+1)=3.539011e+000; foe(n+1)=1.290962e+001; krok(n+1)=1.204104e-001; ng(n+1)=4.490693e+002;
n=69; farx(n+1)=3.374824e+000; foe(n+1)=1.186658e+001; krok(n+1)=8.131859e-001; ng(n+1)=4.552762e+002;
n=70; farx(n+1)=3.396501e+000; foe(n+1)=1.138384e+001; krok(n+1)=1.631115e-001; ng(n+1)=2.449453e+002;
n=71; farx(n+1)=3.056446e+000; foe(n+1)=1.094858e+001; krok(n+1)=3.556863e-001; ng(n+1)=3.145934e+002;
n=72; farx(n+1)=2.700056e+000; foe(n+1)=1.001818e+001; krok(n+1)=4.187571e-001; ng(n+1)=3.372443e+002;
n=73; farx(n+1)=2.634562e+000; foe(n+1)=9.751850e+000; krok(n+1)=2.469201e-001; ng(n+1)=3.026499e+002;
n=74; farx(n+1)=2.657853e+000; foe(n+1)=9.187577e+000; krok(n+1)=4.065930e-001; ng(n+1)=1.277438e+002;
n=75; farx(n+1)=2.636339e+000; foe(n+1)=8.920981e+000; krok(n+1)=2.978305e-001; ng(n+1)=2.388853e+002;
%odnowa zmiennej metryki
n=76; farx(n+1)=2.648691e+000; foe(n+1)=8.841821e+000; krok(n+1)=5.597181e-006; ng(n+1)=3.508627e+002;
n=77; farx(n+1)=2.624569e+000; foe(n+1)=8.754842e+000; krok(n+1)=2.627836e-005; ng(n+1)=1.856797e+002;
n=78; farx(n+1)=2.543219e+000; foe(n+1)=8.582713e+000; krok(n+1)=2.540827e-004; ng(n+1)=8.683325e+001;
n=79; farx(n+1)=2.394844e+000; foe(n+1)=8.071796e+000; krok(n+1)=1.543265e-004; ng(n+1)=1.707979e+002;
n=80; farx(n+1)=2.273705e+000; foe(n+1)=7.570658e+000; krok(n+1)=2.364726e-003; ng(n+1)=7.247962e+001;
n=81; farx(n+1)=2.280808e+000; foe(n+1)=7.468534e+000; krok(n+1)=1.338974e-003; ng(n+1)=2.628962e+002;
n=82; farx(n+1)=2.180248e+000; foe(n+1)=7.085590e+000; krok(n+1)=1.059400e-002; ng(n+1)=2.991630e+002;
n=83; farx(n+1)=2.201235e+000; foe(n+1)=7.017070e+000; krok(n+1)=1.109636e-002; ng(n+1)=2.572548e+002;
n=84; farx(n+1)=2.188187e+000; foe(n+1)=6.947167e+000; krok(n+1)=2.165649e-002; ng(n+1)=2.281586e+002;
n=85; farx(n+1)=2.199105e+000; foe(n+1)=6.864380e+000; krok(n+1)=1.280590e-002; ng(n+1)=1.616425e+002;
n=86; farx(n+1)=2.095365e+000; foe(n+1)=6.783956e+000; krok(n+1)=3.172883e-002; ng(n+1)=2.679174e+002;
n=87; farx(n+1)=1.930039e+000; foe(n+1)=6.659187e+000; krok(n+1)=2.780492e-002; ng(n+1)=2.336619e+002;
n=88; farx(n+1)=1.755932e+000; foe(n+1)=6.545778e+000; krok(n+1)=2.429096e-002; ng(n+1)=3.294075e+002;
n=89; farx(n+1)=1.817575e+000; foe(n+1)=6.475795e+000; krok(n+1)=7.361186e-002; ng(n+1)=2.094521e+002;
n=90; farx(n+1)=1.810634e+000; foe(n+1)=6.343639e+000; krok(n+1)=6.384007e-002; ng(n+1)=2.471615e+002;
n=91; farx(n+1)=1.910639e+000; foe(n+1)=6.020389e+000; krok(n+1)=1.707324e+000; ng(n+1)=1.916928e+002;
n=92; farx(n+1)=2.031222e+000; foe(n+1)=5.692401e+000; krok(n+1)=1.049915e+000; ng(n+1)=9.788172e+001;
n=93; farx(n+1)=1.811828e+000; foe(n+1)=5.240225e+000; krok(n+1)=1.435731e+000; ng(n+1)=1.552007e+002;
n=94; farx(n+1)=1.767587e+000; foe(n+1)=5.158537e+000; krok(n+1)=2.072253e-001; ng(n+1)=3.495560e+002;
n=95; farx(n+1)=1.768753e+000; foe(n+1)=5.124124e+000; krok(n+1)=6.486637e-002; ng(n+1)=1.493809e+002;
n=96; farx(n+1)=1.713615e+000; foe(n+1)=4.955430e+000; krok(n+1)=4.147513e-001; ng(n+1)=1.930643e+002;
n=97; farx(n+1)=1.611439e+000; foe(n+1)=4.848943e+000; krok(n+1)=5.970321e-001; ng(n+1)=2.080844e+002;
n=98; farx(n+1)=1.681318e+000; foe(n+1)=4.736094e+000; krok(n+1)=1.090791e+000; ng(n+1)=1.438521e+002;
n=99; farx(n+1)=1.702729e+000; foe(n+1)=4.679989e+000; krok(n+1)=6.888628e-001; ng(n+1)=1.873040e+002;
n=100; farx(n+1)=1.633912e+000; foe(n+1)=4.634467e+000; krok(n+1)=9.691037e-001; ng(n+1)=4.268974e+001;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
