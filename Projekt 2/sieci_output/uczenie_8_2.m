%uczenie predyktora oe
clear all;
n=0; farx(n+1)=4.908994e+003; foe(n+1)=4.814694e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=3.707713e+003; foe(n+1)=3.707542e+003; krok(n+1)=3.522699e-004; ng(n+1)=4.521806e+003;
n=2; farx(n+1)=1.112164e+003; foe(n+1)=1.023126e+003; krok(n+1)=1.524981e-003; ng(n+1)=3.738891e+003;
n=3; farx(n+1)=1.292944e+003; foe(n+1)=8.553942e+002; krok(n+1)=1.944840e-004; ng(n+1)=5.638056e+003;
n=4; farx(n+1)=1.447256e+003; foe(n+1)=8.380675e+002; krok(n+1)=1.006932e-003; ng(n+1)=1.986762e+003;
n=5; farx(n+1)=1.135942e+003; foe(n+1)=7.607316e+002; krok(n+1)=2.092139e-003; ng(n+1)=8.206516e+002;
n=6; farx(n+1)=5.794776e+002; foe(n+1)=5.661818e+002; krok(n+1)=4.254827e-003; ng(n+1)=2.936967e+003;
n=7; farx(n+1)=5.602089e+002; foe(n+1)=5.633070e+002; krok(n+1)=1.461294e-005; ng(n+1)=5.901943e+003;
n=8; farx(n+1)=4.501130e+002; foe(n+1)=5.328166e+002; krok(n+1)=3.643472e-004; ng(n+1)=6.145523e+003;
n=9; farx(n+1)=2.822486e+002; foe(n+1)=4.676871e+002; krok(n+1)=1.810600e-003; ng(n+1)=7.454593e+003;
n=10; farx(n+1)=2.461551e+002; foe(n+1)=4.500329e+002; krok(n+1)=2.574102e-004; ng(n+1)=6.866328e+003;
n=11; farx(n+1)=2.695027e+002; foe(n+1)=4.310768e+002; krok(n+1)=2.364726e-003; ng(n+1)=4.580707e+003;
n=12; farx(n+1)=2.697491e+002; foe(n+1)=3.884880e+002; krok(n+1)=3.576264e-003; ng(n+1)=3.508268e+003;
n=13; farx(n+1)=3.026370e+002; foe(n+1)=3.707910e+002; krok(n+1)=1.369522e-003; ng(n+1)=1.130840e+003;
n=14; farx(n+1)=2.758339e+002; foe(n+1)=3.544595e+002; krok(n+1)=1.402081e-003; ng(n+1)=1.568292e+003;
n=15; farx(n+1)=2.394444e+002; foe(n+1)=3.307911e+002; krok(n+1)=3.065633e-003; ng(n+1)=1.139939e+003;
n=16; farx(n+1)=2.185697e+002; foe(n+1)=3.247268e+002; krok(n+1)=8.726203e-004; ng(n+1)=1.331846e+003;
n=17; farx(n+1)=1.817095e+002; foe(n+1)=3.144521e+002; krok(n+1)=1.190370e-003; ng(n+1)=1.933103e+003;
n=18; farx(n+1)=1.402808e+002; foe(n+1)=2.976038e+002; krok(n+1)=2.621411e-003; ng(n+1)=4.075534e+003;
n=19; farx(n+1)=9.171771e+001; foe(n+1)=2.538705e+002; krok(n+1)=3.765398e-003; ng(n+1)=6.480401e+003;
n=20; farx(n+1)=8.966412e+001; foe(n+1)=2.509485e+002; krok(n+1)=8.440914e-005; ng(n+1)=6.930495e+003;
n=21; farx(n+1)=8.801299e+001; foe(n+1)=2.495558e+002; krok(n+1)=3.423805e-004; ng(n+1)=5.128049e+003;
n=22; farx(n+1)=8.627632e+001; foe(n+1)=2.471397e+002; krok(n+1)=1.151653e-003; ng(n+1)=6.144869e+003;
n=23; farx(n+1)=8.640875e+001; foe(n+1)=2.435987e+002; krok(n+1)=2.314595e-003; ng(n+1)=7.013768e+003;
n=24; farx(n+1)=8.975203e+001; foe(n+1)=2.332594e+002; krok(n+1)=2.583925e-003; ng(n+1)=7.620057e+003;
n=25; farx(n+1)=8.460117e+001; foe(n+1)=2.296684e+002; krok(n+1)=5.897838e-004; ng(n+1)=3.787960e+003;
%odnowa zmiennej metryki
n=26; farx(n+1)=8.405480e+001; foe(n+1)=2.287653e+002; krok(n+1)=1.830842e-006; ng(n+1)=3.588733e+003;
n=27; farx(n+1)=6.440760e+001; foe(n+1)=2.005407e+002; krok(n+1)=3.862984e-005; ng(n+1)=3.552708e+003;
n=28; farx(n+1)=5.384950e+001; foe(n+1)=1.746163e+002; krok(n+1)=1.007341e-004; ng(n+1)=3.255398e+003;
n=29; farx(n+1)=4.981133e+001; foe(n+1)=1.573308e+002; krok(n+1)=1.915864e-004; ng(n+1)=5.791463e+003;
n=30; farx(n+1)=3.885080e+001; foe(n+1)=1.371714e+002; krok(n+1)=3.086529e-004; ng(n+1)=2.852351e+003;
n=31; farx(n+1)=2.990854e+001; foe(n+1)=9.504409e+001; krok(n+1)=4.706747e-004; ng(n+1)=3.620045e+003;
n=32; farx(n+1)=2.914527e+001; foe(n+1)=9.088685e+001; krok(n+1)=9.107492e-005; ng(n+1)=6.087700e+003;
n=33; farx(n+1)=2.864184e+001; foe(n+1)=8.342748e+001; krok(n+1)=5.985093e-004; ng(n+1)=6.000316e+003;
n=34; farx(n+1)=2.481823e+001; foe(n+1)=7.130901e+001; krok(n+1)=2.133311e-003; ng(n+1)=3.320255e+003;
n=35; farx(n+1)=1.913679e+001; foe(n+1)=6.337286e+001; krok(n+1)=1.457389e-003; ng(n+1)=2.772597e+003;
n=36; farx(n+1)=1.414048e+001; foe(n+1)=4.708878e+001; krok(n+1)=1.587460e-003; ng(n+1)=3.881411e+003;
n=37; farx(n+1)=1.138108e+001; foe(n+1)=4.216890e+001; krok(n+1)=1.494263e-003; ng(n+1)=1.341567e+003;
n=38; farx(n+1)=7.527602e+000; foe(n+1)=3.398630e+001; krok(n+1)=2.247173e-003; ng(n+1)=3.194705e+003;
n=39; farx(n+1)=6.388757e+000; foe(n+1)=3.109169e+001; krok(n+1)=2.090079e-003; ng(n+1)=2.656498e+003;
n=40; farx(n+1)=5.622366e+000; foe(n+1)=2.513878e+001; krok(n+1)=1.961988e-003; ng(n+1)=2.399165e+003;
n=41; farx(n+1)=4.553995e+000; foe(n+1)=2.359624e+001; krok(n+1)=2.090079e-003; ng(n+1)=1.135946e+003;
n=42; farx(n+1)=4.159257e+000; foe(n+1)=2.218014e+001; krok(n+1)=2.586254e-003; ng(n+1)=9.341654e+002;
n=43; farx(n+1)=3.104151e+000; foe(n+1)=1.796689e+001; krok(n+1)=8.692572e-003; ng(n+1)=4.695970e+002;
n=44; farx(n+1)=2.952206e+000; foe(n+1)=1.522607e+001; krok(n+1)=2.660052e-003; ng(n+1)=2.478388e+003;
n=45; farx(n+1)=2.818613e+000; foe(n+1)=1.259723e+001; krok(n+1)=5.478088e-003; ng(n+1)=1.970917e+003;
n=46; farx(n+1)=2.683331e+000; foe(n+1)=1.177807e+001; krok(n+1)=1.093065e-003; ng(n+1)=1.626914e+003;
n=47; farx(n+1)=2.553156e+000; foe(n+1)=1.117546e+001; krok(n+1)=5.906887e-003; ng(n+1)=4.281476e+002;
n=48; farx(n+1)=2.249582e+000; foe(n+1)=1.013598e+001; krok(n+1)=1.064808e-003; ng(n+1)=8.641110e+002;
n=49; farx(n+1)=2.233995e+000; foe(n+1)=9.573039e+000; krok(n+1)=7.242402e-003; ng(n+1)=5.850069e+002;
n=50; farx(n+1)=2.246726e+000; foe(n+1)=8.216029e+000; krok(n+1)=1.012568e-002; ng(n+1)=4.955284e+002;
%odnowa zmiennej metryki
n=51; farx(n+1)=2.220986e+000; foe(n+1)=8.039043e+000; krok(n+1)=2.308287e-006; ng(n+1)=1.135944e+003;
n=52; farx(n+1)=2.229889e+000; foe(n+1)=7.680879e+000; krok(n+1)=9.579321e-005; ng(n+1)=2.758571e+002;
n=53; farx(n+1)=2.079746e+000; foe(n+1)=7.340511e+000; krok(n+1)=3.117191e-005; ng(n+1)=4.911678e+002;
n=54; farx(n+1)=2.059400e+000; foe(n+1)=6.620839e+000; krok(n+1)=3.936449e-005; ng(n+1)=6.140421e+002;
n=55; farx(n+1)=2.085805e+000; foe(n+1)=6.319725e+000; krok(n+1)=2.281831e-003; ng(n+1)=1.387493e+002;
n=56; farx(n+1)=2.085667e+000; foe(n+1)=6.073472e+000; krok(n+1)=6.500859e-004; ng(n+1)=5.183421e+002;
n=57; farx(n+1)=2.051111e+000; foe(n+1)=5.896140e+000; krok(n+1)=3.660956e-003; ng(n+1)=6.717574e+002;
n=58; farx(n+1)=2.010400e+000; foe(n+1)=5.287756e+000; krok(n+1)=3.050294e-003; ng(n+1)=7.468918e+002;
n=59; farx(n+1)=1.953585e+000; foe(n+1)=4.655629e+000; krok(n+1)=5.167850e-003; ng(n+1)=7.349785e+002;
n=60; farx(n+1)=1.919215e+000; foe(n+1)=4.543460e+000; krok(n+1)=2.609735e-003; ng(n+1)=4.618162e+002;
n=61; farx(n+1)=1.915872e+000; foe(n+1)=4.395930e+000; krok(n+1)=4.375565e-003; ng(n+1)=4.740206e+002;
n=62; farx(n+1)=1.841530e+000; foe(n+1)=4.043433e+000; krok(n+1)=8.521808e-003; ng(n+1)=7.097759e+002;
n=63; farx(n+1)=1.674068e+000; foe(n+1)=3.782488e+000; krok(n+1)=1.205272e-002; ng(n+1)=3.246931e+002;
n=64; farx(n+1)=1.523744e+000; foe(n+1)=3.608535e+000; krok(n+1)=9.659422e-003; ng(n+1)=9.896299e+002;
n=65; farx(n+1)=1.382532e+000; foe(n+1)=3.422856e+000; krok(n+1)=1.238474e-002; ng(n+1)=1.028982e+003;
n=66; farx(n+1)=1.269439e+000; foe(n+1)=3.148107e+000; krok(n+1)=6.475792e-003; ng(n+1)=4.062127e+002;
n=67; farx(n+1)=1.176991e+000; foe(n+1)=3.003027e+000; krok(n+1)=4.083230e-003; ng(n+1)=5.785770e+002;
n=68; farx(n+1)=1.169044e+000; foe(n+1)=2.798465e+000; krok(n+1)=6.237096e-002; ng(n+1)=3.476204e+002;
n=69; farx(n+1)=1.178206e+000; foe(n+1)=2.541361e+000; krok(n+1)=2.194150e-002; ng(n+1)=5.293436e+002;
n=70; farx(n+1)=1.158633e+000; foe(n+1)=2.500734e+000; krok(n+1)=5.242823e-003; ng(n+1)=4.013252e+002;
n=71; farx(n+1)=1.122688e+000; foe(n+1)=2.331385e+000; krok(n+1)=3.238122e-002; ng(n+1)=4.730897e+002;
n=72; farx(n+1)=1.109167e+000; foe(n+1)=2.186252e+000; krok(n+1)=1.713076e-002; ng(n+1)=3.673767e+002;
n=73; farx(n+1)=1.164049e+000; foe(n+1)=2.076034e+000; krok(n+1)=5.576355e-002; ng(n+1)=2.524758e+002;
n=74; farx(n+1)=1.163153e+000; foe(n+1)=2.021625e+000; krok(n+1)=1.464382e-002; ng(n+1)=3.556123e+002;
n=75; farx(n+1)=1.131203e+000; foe(n+1)=1.955342e+000; krok(n+1)=3.153338e-002; ng(n+1)=5.267664e+002;
%odnowa zmiennej metryki
n=76; farx(n+1)=1.130986e+000; foe(n+1)=1.940201e+000; krok(n+1)=1.601268e-006; ng(n+1)=3.585804e+002;
n=77; farx(n+1)=1.131487e+000; foe(n+1)=1.927967e+000; krok(n+1)=1.663384e-005; ng(n+1)=1.108329e+002;
n=78; farx(n+1)=1.131738e+000; foe(n+1)=1.924054e+000; krok(n+1)=9.975945e-006; ng(n+1)=8.028502e+001;
n=79; farx(n+1)=1.126376e+000; foe(n+1)=1.885321e+000; krok(n+1)=4.297012e-004; ng(n+1)=4.418259e+001;
n=80; farx(n+1)=1.124953e+000; foe(n+1)=1.870729e+000; krok(n+1)=4.315864e-004; ng(n+1)=2.909674e+001;
n=81; farx(n+1)=1.125588e+000; foe(n+1)=1.853809e+000; krok(n+1)=4.129769e-004; ng(n+1)=3.307576e+001;
n=82; farx(n+1)=1.117233e+000; foe(n+1)=1.836795e+000; krok(n+1)=2.239224e-003; ng(n+1)=3.021009e+001;
n=83; farx(n+1)=1.102706e+000; foe(n+1)=1.811950e+000; krok(n+1)=3.657312e-003; ng(n+1)=5.858118e+001;
n=84; farx(n+1)=1.039099e+000; foe(n+1)=1.777067e+000; krok(n+1)=1.095618e-002; ng(n+1)=2.135563e+002;
n=85; farx(n+1)=9.590915e-001; foe(n+1)=1.712379e+000; krok(n+1)=1.660195e-002; ng(n+1)=4.910494e+002;
n=86; farx(n+1)=9.272836e-001; foe(n+1)=1.679517e+000; krok(n+1)=1.360047e-002; ng(n+1)=1.606163e+002;
n=87; farx(n+1)=8.986087e-001; foe(n+1)=1.644770e+000; krok(n+1)=2.055621e-002; ng(n+1)=1.665560e+002;
n=88; farx(n+1)=8.660387e-001; foe(n+1)=1.576270e+000; krok(n+1)=1.154146e-002; ng(n+1)=3.831137e+002;
n=89; farx(n+1)=8.531820e-001; foe(n+1)=1.543168e+000; krok(n+1)=5.445782e-003; ng(n+1)=4.043072e+002;
n=90; farx(n+1)=8.349133e-001; foe(n+1)=1.513546e+000; krok(n+1)=6.380132e-003; ng(n+1)=2.619710e+002;
n=91; farx(n+1)=7.977961e-001; foe(n+1)=1.471651e+000; krok(n+1)=3.285344e-002; ng(n+1)=4.359472e+002;
n=92; farx(n+1)=7.672959e-001; foe(n+1)=1.419738e+000; krok(n+1)=3.264474e-002; ng(n+1)=3.692176e+002;
n=93; farx(n+1)=7.370775e-001; foe(n+1)=1.368653e+000; krok(n+1)=4.086147e-002; ng(n+1)=5.118756e+002;
n=94; farx(n+1)=7.153834e-001; foe(n+1)=1.299354e+000; krok(n+1)=4.194258e-002; ng(n+1)=5.973248e+002;
n=95; farx(n+1)=7.122599e-001; foe(n+1)=1.276306e+000; krok(n+1)=2.531421e-003; ng(n+1)=3.749912e+002;
n=96; farx(n+1)=7.149231e-001; foe(n+1)=1.249934e+000; krok(n+1)=7.045190e-002; ng(n+1)=2.361863e+002;
n=97; farx(n+1)=7.229599e-001; foe(n+1)=1.234751e+000; krok(n+1)=3.320390e-002; ng(n+1)=1.256062e+002;
n=98; farx(n+1)=7.146298e-001; foe(n+1)=1.218499e+000; krok(n+1)=2.539936e-002; ng(n+1)=1.900107e+002;
n=99; farx(n+1)=6.661974e-001; foe(n+1)=1.163230e+000; krok(n+1)=5.335388e-002; ng(n+1)=2.768410e+002;
n=100; farx(n+1)=6.629288e-001; foe(n+1)=1.142131e+000; krok(n+1)=5.560984e-002; ng(n+1)=2.590513e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
