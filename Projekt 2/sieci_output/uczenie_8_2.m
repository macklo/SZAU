%uczenie predyktora oe
clear all;
n=0; farx(n+1)=3.990816e+003; foe(n+1)=4.036630e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=2.967099e+003; foe(n+1)=2.889259e+003; krok(n+1)=5.033545e-004; ng(n+1)=4.113871e+003;
n=2; farx(n+1)=1.249101e+003; foe(n+1)=1.169621e+003; krok(n+1)=2.339183e-003; ng(n+1)=2.252994e+003;
n=3; farx(n+1)=1.440160e+003; foe(n+1)=8.763772e+002; krok(n+1)=1.123699e-004; ng(n+1)=9.343226e+003;
n=4; farx(n+1)=2.317501e+003; foe(n+1)=6.232778e+002; krok(n+1)=5.469456e-004; ng(n+1)=1.145693e+004;
n=5; farx(n+1)=2.146217e+003; foe(n+1)=5.285496e+002; krok(n+1)=3.271540e-003; ng(n+1)=1.636226e+003;
n=6; farx(n+1)=1.924207e+003; foe(n+1)=4.985411e+002; krok(n+1)=8.054395e-004; ng(n+1)=1.693480e+003;
n=7; farx(n+1)=7.869608e+002; foe(n+1)=3.729373e+002; krok(n+1)=2.531421e-003; ng(n+1)=1.629889e+003;
n=8; farx(n+1)=7.580716e+002; foe(n+1)=3.635349e+002; krok(n+1)=5.635193e-004; ng(n+1)=1.485648e+003;
n=9; farx(n+1)=5.265477e+002; foe(n+1)=3.324831e+002; krok(n+1)=7.591652e-003; ng(n+1)=5.890030e+002;
n=10; farx(n+1)=5.201195e+002; foe(n+1)=3.269957e+002; krok(n+1)=1.102111e-003; ng(n+1)=7.440282e+002;
n=11; farx(n+1)=3.964963e+002; foe(n+1)=3.124137e+002; krok(n+1)=1.725161e-002; ng(n+1)=4.644838e+002;
n=12; farx(n+1)=2.930245e+002; foe(n+1)=3.023698e+002; krok(n+1)=1.093891e-003; ng(n+1)=7.822395e+002;
n=13; farx(n+1)=2.477302e+002; foe(n+1)=2.957812e+002; krok(n+1)=1.908037e-003; ng(n+1)=2.265539e+003;
n=14; farx(n+1)=1.857296e+002; foe(n+1)=2.840409e+002; krok(n+1)=3.964038e-003; ng(n+1)=2.464526e+003;
n=15; farx(n+1)=1.759619e+002; foe(n+1)=2.824927e+002; krok(n+1)=1.761674e-004; ng(n+1)=2.118058e+003;
n=16; farx(n+1)=1.698681e+002; foe(n+1)=2.809565e+002; krok(n+1)=8.180843e-004; ng(n+1)=1.672089e+003;
n=17; farx(n+1)=1.506972e+002; foe(n+1)=2.637011e+002; krok(n+1)=7.704335e-003; ng(n+1)=1.624021e+003;
n=18; farx(n+1)=1.546679e+002; foe(n+1)=2.584517e+002; krok(n+1)=8.704444e-004; ng(n+1)=1.214942e+003;
n=19; farx(n+1)=9.165721e+001; foe(n+1)=1.840593e+002; krok(n+1)=4.266689e-003; ng(n+1)=2.364011e+003;
n=20; farx(n+1)=9.155785e+001; foe(n+1)=1.840410e+002; krok(n+1)=1.849401e-007; ng(n+1)=4.286725e+003;
n=21; farx(n+1)=8.599205e+001; foe(n+1)=1.832014e+002; krok(n+1)=2.663065e-004; ng(n+1)=4.425452e+003;
n=22; farx(n+1)=6.963083e+001; foe(n+1)=1.662849e+002; krok(n+1)=4.440041e-003; ng(n+1)=4.282103e+003;
n=23; farx(n+1)=6.911830e+001; foe(n+1)=1.661279e+002; krok(n+1)=1.700060e-005; ng(n+1)=1.572572e+003;
n=24; farx(n+1)=6.728796e+001; foe(n+1)=1.650312e+002; krok(n+1)=1.106947e-003; ng(n+1)=1.582902e+003;
n=25; farx(n+1)=6.436104e+001; foe(n+1)=1.622541e+002; krok(n+1)=8.790130e-004; ng(n+1)=2.308848e+003;
%odnowa zmiennej metryki
n=26; farx(n+1)=6.451665e+001; foe(n+1)=1.607143e+002; krok(n+1)=9.549067e-006; ng(n+1)=1.638032e+003;
n=27; farx(n+1)=6.421158e+001; foe(n+1)=1.545042e+002; krok(n+1)=1.602405e-005; ng(n+1)=3.246996e+003;
n=28; farx(n+1)=4.843586e+001; foe(n+1)=1.323385e+002; krok(n+1)=1.733806e-004; ng(n+1)=2.040005e+003;
n=29; farx(n+1)=3.582536e+001; foe(n+1)=1.067926e+002; krok(n+1)=1.144049e-004; ng(n+1)=1.878633e+004;
n=30; farx(n+1)=2.310731e+001; foe(n+1)=8.609156e+001; krok(n+1)=5.469456e-004; ng(n+1)=1.913459e+003;
n=31; farx(n+1)=2.328934e+001; foe(n+1)=7.431337e+001; krok(n+1)=2.178264e-004; ng(n+1)=3.330938e+003;
n=32; farx(n+1)=1.988588e+001; foe(n+1)=6.584503e+001; krok(n+1)=8.106441e-004; ng(n+1)=1.787834e+003;
n=33; farx(n+1)=1.391095e+001; foe(n+1)=4.001640e+001; krok(n+1)=2.105249e-003; ng(n+1)=2.279647e+003;
n=34; farx(n+1)=1.236473e+001; foe(n+1)=3.289201e+001; krok(n+1)=4.770094e-004; ng(n+1)=4.152054e+003;
n=35; farx(n+1)=1.089146e+001; foe(n+1)=3.019876e+001; krok(n+1)=1.243743e-003; ng(n+1)=3.048597e+003;
n=36; farx(n+1)=8.314597e+000; foe(n+1)=2.378882e+001; krok(n+1)=5.879413e-003; ng(n+1)=4.156315e+003;
n=37; farx(n+1)=7.689579e+000; foe(n+1)=1.933352e+001; krok(n+1)=1.441974e-003; ng(n+1)=4.132794e+003;
n=38; farx(n+1)=6.619538e+000; foe(n+1)=1.582818e+001; krok(n+1)=1.797919e-003; ng(n+1)=1.603414e+003;
n=39; farx(n+1)=4.864500e+000; foe(n+1)=9.554662e+000; krok(n+1)=7.251821e-003; ng(n+1)=1.153235e+003;
n=40; farx(n+1)=4.581103e+000; foe(n+1)=9.133782e+000; krok(n+1)=2.677949e-003; ng(n+1)=6.017283e+002;
n=41; farx(n+1)=4.164044e+000; foe(n+1)=8.485585e+000; krok(n+1)=6.374691e-003; ng(n+1)=3.881087e+002;
n=42; farx(n+1)=3.473938e+000; foe(n+1)=7.306690e+000; krok(n+1)=9.524551e-003; ng(n+1)=4.312055e+002;
n=43; farx(n+1)=2.903059e+000; foe(n+1)=5.936328e+000; krok(n+1)=1.890949e-002; ng(n+1)=5.263592e+002;
n=44; farx(n+1)=2.772469e+000; foe(n+1)=5.580014e+000; krok(n+1)=6.053639e-003; ng(n+1)=7.526244e+002;
n=45; farx(n+1)=2.622576e+000; foe(n+1)=5.188320e+000; krok(n+1)=1.023953e-002; ng(n+1)=1.663307e+002;
n=46; farx(n+1)=2.525386e+000; foe(n+1)=4.724552e+000; krok(n+1)=1.688698e-002; ng(n+1)=4.430123e+002;
n=47; farx(n+1)=2.480219e+000; foe(n+1)=4.631368e+000; krok(n+1)=3.595838e-003; ng(n+1)=2.250193e+002;
n=48; farx(n+1)=2.298494e+000; foe(n+1)=4.370088e+000; krok(n+1)=1.071180e-002; ng(n+1)=1.664637e+002;
n=49; farx(n+1)=2.147589e+000; foe(n+1)=4.149834e+000; krok(n+1)=3.096333e-002; ng(n+1)=5.168978e+002;
n=50; farx(n+1)=2.049159e+000; foe(n+1)=3.975931e+000; krok(n+1)=5.931582e-002; ng(n+1)=1.274073e+002;
%odnowa zmiennej metryki
n=51; farx(n+1)=2.049978e+000; foe(n+1)=3.937402e+000; krok(n+1)=7.746296e-006; ng(n+1)=3.097308e+002;
n=52; farx(n+1)=2.041976e+000; foe(n+1)=3.886892e+000; krok(n+1)=3.047298e-005; ng(n+1)=1.964454e+002;
n=53; farx(n+1)=2.040816e+000; foe(n+1)=3.876944e+000; krok(n+1)=3.635626e-005; ng(n+1)=6.882807e+001;
n=54; farx(n+1)=2.031393e+000; foe(n+1)=3.516638e+000; krok(n+1)=1.291963e-003; ng(n+1)=7.613133e+001;
n=55; farx(n+1)=2.031317e+000; foe(n+1)=3.436218e+000; krok(n+1)=7.843678e-004; ng(n+1)=2.768989e+002;
n=56; farx(n+1)=2.024582e+000; foe(n+1)=3.389348e+000; krok(n+1)=3.128460e-003; ng(n+1)=3.431412e+002;
n=57; farx(n+1)=1.991083e+000; foe(n+1)=3.333755e+000; krok(n+1)=2.293768e-003; ng(n+1)=2.389999e+002;
n=58; farx(n+1)=1.967433e+000; foe(n+1)=3.304084e+000; krok(n+1)=3.174920e-003; ng(n+1)=1.066418e+002;
n=59; farx(n+1)=1.887045e+000; foe(n+1)=3.220731e+000; krok(n+1)=1.948813e-002; ng(n+1)=1.212343e+002;
n=60; farx(n+1)=1.814611e+000; foe(n+1)=3.144604e+000; krok(n+1)=6.854056e-003; ng(n+1)=3.423144e+002;
n=61; farx(n+1)=1.697635e+000; foe(n+1)=2.940971e+000; krok(n+1)=5.034993e-002; ng(n+1)=2.392696e+002;
n=62; farx(n+1)=1.682401e+000; foe(n+1)=2.868624e+000; krok(n+1)=1.127002e-002; ng(n+1)=3.473510e+002;
n=63; farx(n+1)=1.660604e+000; foe(n+1)=2.826227e+000; krok(n+1)=8.894860e-003; ng(n+1)=1.602024e+002;
n=64; farx(n+1)=1.652456e+000; foe(n+1)=2.758992e+000; krok(n+1)=1.394089e-002; ng(n+1)=2.603539e+002;
n=65; farx(n+1)=1.626832e+000; foe(n+1)=2.622315e+000; krok(n+1)=7.406706e-002; ng(n+1)=1.682756e+002;
n=66; farx(n+1)=1.568462e+000; foe(n+1)=2.570856e+000; krok(n+1)=3.929724e-002; ng(n+1)=9.698246e+001;
n=67; farx(n+1)=1.479726e+000; foe(n+1)=2.502075e+000; krok(n+1)=7.876901e-003; ng(n+1)=2.059617e+002;
n=68; farx(n+1)=1.354773e+000; foe(n+1)=2.389178e+000; krok(n+1)=1.251384e-002; ng(n+1)=3.417057e+002;
n=69; farx(n+1)=1.301991e+000; foe(n+1)=2.335558e+000; krok(n+1)=1.975379e-002; ng(n+1)=1.935935e+002;
n=70; farx(n+1)=1.278886e+000; foe(n+1)=2.303498e+000; krok(n+1)=4.866267e-003; ng(n+1)=2.483976e+002;
n=71; farx(n+1)=1.236692e+000; foe(n+1)=2.229964e+000; krok(n+1)=4.000365e-002; ng(n+1)=3.168262e+002;
n=72; farx(n+1)=1.225283e+000; foe(n+1)=2.135656e+000; krok(n+1)=2.399905e-002; ng(n+1)=1.988013e+002;
n=73; farx(n+1)=1.227191e+000; foe(n+1)=2.115814e+000; krok(n+1)=9.175071e-003; ng(n+1)=1.155076e+002;
n=74; farx(n+1)=1.233491e+000; foe(n+1)=1.937519e+000; krok(n+1)=1.204927e-001; ng(n+1)=2.015294e+002;
n=75; farx(n+1)=1.247374e+000; foe(n+1)=1.847714e+000; krok(n+1)=6.345427e-002; ng(n+1)=5.570630e+002;
%odnowa zmiennej metryki
n=76; farx(n+1)=1.245899e+000; foe(n+1)=1.806301e+000; krok(n+1)=8.746968e-006; ng(n+1)=3.299460e+002;
n=77; farx(n+1)=1.245106e+000; foe(n+1)=1.792147e+000; krok(n+1)=8.284610e-006; ng(n+1)=1.826410e+002;
n=78; farx(n+1)=1.244089e+000; foe(n+1)=1.775864e+000; krok(n+1)=5.504150e-006; ng(n+1)=2.583252e+002;
n=79; farx(n+1)=1.245149e+000; foe(n+1)=1.738940e+000; krok(n+1)=3.428360e-004; ng(n+1)=5.491288e+001;
n=80; farx(n+1)=1.248028e+000; foe(n+1)=1.703593e+000; krok(n+1)=9.854180e-004; ng(n+1)=3.087692e+001;
n=81; farx(n+1)=1.254318e+000; foe(n+1)=1.667160e+000; krok(n+1)=1.797903e-003; ng(n+1)=4.946269e+001;
n=82; farx(n+1)=1.246300e+000; foe(n+1)=1.620899e+000; krok(n+1)=3.917519e-003; ng(n+1)=1.580040e+002;
n=83; farx(n+1)=1.226974e+000; foe(n+1)=1.570755e+000; krok(n+1)=2.885366e-003; ng(n+1)=2.323085e+002;
n=84; farx(n+1)=1.208820e+000; foe(n+1)=1.496680e+000; krok(n+1)=1.831590e-002; ng(n+1)=1.049128e+002;
n=85; farx(n+1)=1.206236e+000; foe(n+1)=1.472986e+000; krok(n+1)=2.716773e-003; ng(n+1)=7.212568e+001;
n=86; farx(n+1)=1.200937e+000; foe(n+1)=1.428497e+000; krok(n+1)=2.804195e-003; ng(n+1)=4.459588e+002;
n=87; farx(n+1)=1.203103e+000; foe(n+1)=1.384702e+000; krok(n+1)=1.640862e-002; ng(n+1)=8.153939e+001;
n=88; farx(n+1)=1.203741e+000; foe(n+1)=1.357341e+000; krok(n+1)=8.855578e-003; ng(n+1)=1.780128e+002;
n=89; farx(n+1)=1.211624e+000; foe(n+1)=1.344090e+000; krok(n+1)=8.518466e-003; ng(n+1)=2.686873e+002;
n=90; farx(n+1)=1.218697e+000; foe(n+1)=1.321466e+000; krok(n+1)=1.567500e-002; ng(n+1)=1.678590e+002;
n=91; farx(n+1)=1.249549e+000; foe(n+1)=1.285264e+000; krok(n+1)=2.959126e-002; ng(n+1)=2.816331e+002;
n=92; farx(n+1)=1.255317e+000; foe(n+1)=1.259563e+000; krok(n+1)=7.032104e-003; ng(n+1)=2.426885e+002;
n=93; farx(n+1)=1.257221e+000; foe(n+1)=1.251220e+000; krok(n+1)=3.452691e-003; ng(n+1)=1.351555e+002;
n=94; farx(n+1)=1.215511e+000; foe(n+1)=1.198384e+000; krok(n+1)=3.786424e-002; ng(n+1)=2.330555e+002;
n=95; farx(n+1)=1.201842e+000; foe(n+1)=1.171514e+000; krok(n+1)=5.711090e-003; ng(n+1)=3.328747e+002;
n=96; farx(n+1)=1.214509e+000; foe(n+1)=1.142787e+000; krok(n+1)=6.826594e-002; ng(n+1)=2.097967e+002;
n=97; farx(n+1)=1.219728e+000; foe(n+1)=1.111523e+000; krok(n+1)=6.268030e-002; ng(n+1)=4.099362e+002;
n=98; farx(n+1)=1.233882e+000; foe(n+1)=1.084840e+000; krok(n+1)=5.801457e-002; ng(n+1)=1.629684e+002;
n=99; farx(n+1)=1.233224e+000; foe(n+1)=1.058793e+000; krok(n+1)=4.277073e-002; ng(n+1)=1.366242e+002;
n=100; farx(n+1)=1.233561e+000; foe(n+1)=1.041899e+000; krok(n+1)=2.667694e-002; ng(n+1)=5.312015e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
