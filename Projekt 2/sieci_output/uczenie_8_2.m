%uczenie predyktora oe
clear all;
n=0; farx(n+1)=4.365821e+003; foe(n+1)=4.516507e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=2.674117e+003; foe(n+1)=2.783962e+003; krok(n+1)=4.852079e-004; ng(n+1)=5.013372e+003;
n=2; farx(n+1)=8.770759e+002; foe(n+1)=7.622000e+002; krok(n+1)=2.209886e-003; ng(n+1)=2.889438e+003;
n=3; farx(n+1)=9.940148e+002; foe(n+1)=5.122566e+002; krok(n+1)=2.266194e-004; ng(n+1)=6.173728e+003;
n=4; farx(n+1)=4.574833e+002; foe(n+1)=3.629571e+002; krok(n+1)=1.214548e-002; ng(n+1)=6.352622e+002;
n=5; farx(n+1)=3.020957e+002; foe(n+1)=3.161175e+002; krok(n+1)=4.366961e-004; ng(n+1)=1.856419e+003;
n=6; farx(n+1)=2.785199e+002; foe(n+1)=3.030997e+002; krok(n+1)=1.155113e-003; ng(n+1)=2.045912e+003;
n=7; farx(n+1)=1.883790e+002; foe(n+1)=2.669331e+002; krok(n+1)=2.722891e-003; ng(n+1)=2.598050e+003;
n=8; farx(n+1)=1.739501e+002; foe(n+1)=2.628773e+002; krok(n+1)=1.072459e-003; ng(n+1)=8.747187e+002;
n=9; farx(n+1)=1.685967e+002; foe(n+1)=2.562578e+002; krok(n+1)=3.225080e-003; ng(n+1)=3.114339e+002;
n=10; farx(n+1)=1.126832e+002; foe(n+1)=2.281301e+002; krok(n+1)=7.251821e-003; ng(n+1)=1.072374e+003;
n=11; farx(n+1)=1.047859e+002; foe(n+1)=2.236957e+002; krok(n+1)=3.624433e-004; ng(n+1)=1.671251e+003;
n=12; farx(n+1)=1.001336e+002; foe(n+1)=2.164947e+002; krok(n+1)=1.629650e-003; ng(n+1)=2.029564e+003;
n=13; farx(n+1)=7.725353e+001; foe(n+1)=2.105040e+002; krok(n+1)=1.120856e-003; ng(n+1)=1.915022e+003;
n=14; farx(n+1)=7.382003e+001; foe(n+1)=2.092057e+002; krok(n+1)=1.554679e-004; ng(n+1)=1.415166e+003;
n=15; farx(n+1)=6.895145e+001; foe(n+1)=2.066566e+002; krok(n+1)=3.276764e-004; ng(n+1)=1.700782e+003;
n=16; farx(n+1)=5.393956e+001; foe(n+1)=1.982136e+002; krok(n+1)=2.804162e-003; ng(n+1)=2.665042e+003;
n=17; farx(n+1)=4.575896e+001; foe(n+1)=1.911113e+002; krok(n+1)=1.597856e-003; ng(n+1)=3.465170e+003;
n=18; farx(n+1)=4.021530e+001; foe(n+1)=1.884435e+002; krok(n+1)=8.178849e-004; ng(n+1)=4.108181e+003;
n=19; farx(n+1)=3.804259e+001; foe(n+1)=1.847818e+002; krok(n+1)=7.770983e-004; ng(n+1)=3.856815e+003;
n=20; farx(n+1)=3.922678e+001; foe(n+1)=1.837864e+002; krok(n+1)=1.528320e-003; ng(n+1)=3.302068e+003;
n=21; farx(n+1)=3.868870e+001; foe(n+1)=1.820588e+002; krok(n+1)=3.350038e-003; ng(n+1)=2.859895e+003;
n=22; farx(n+1)=4.174334e+001; foe(n+1)=1.758989e+002; krok(n+1)=5.355898e-003; ng(n+1)=3.364433e+003;
n=23; farx(n+1)=4.374798e+001; foe(n+1)=1.732100e+002; krok(n+1)=1.564230e-003; ng(n+1)=4.311196e+003;
n=24; farx(n+1)=5.379464e+001; foe(n+1)=1.419022e+002; krok(n+1)=7.954142e-003; ng(n+1)=6.363018e+003;
n=25; farx(n+1)=5.508479e+001; foe(n+1)=1.385643e+002; krok(n+1)=4.987505e-004; ng(n+1)=1.582458e+003;
%odnowa zmiennej metryki
n=26; farx(n+1)=5.505593e+001; foe(n+1)=1.346877e+002; krok(n+1)=3.369455e-005; ng(n+1)=1.736819e+003;
n=27; farx(n+1)=5.564852e+001; foe(n+1)=1.307227e+002; krok(n+1)=2.890345e-005; ng(n+1)=1.789702e+003;
n=28; farx(n+1)=4.783245e+001; foe(n+1)=1.045626e+002; krok(n+1)=9.053002e-004; ng(n+1)=7.636080e+002;
n=29; farx(n+1)=2.063133e+001; foe(n+1)=6.484882e+001; krok(n+1)=1.540600e-004; ng(n+1)=2.299672e+003;
n=30; farx(n+1)=1.574815e+001; foe(n+1)=5.555678e+001; krok(n+1)=3.111125e-004; ng(n+1)=4.599398e+003;
n=31; farx(n+1)=1.555449e+001; foe(n+1)=4.978753e+001; krok(n+1)=1.427772e-003; ng(n+1)=8.499322e+002;
n=32; farx(n+1)=1.394281e+001; foe(n+1)=4.340422e+001; krok(n+1)=3.247320e-003; ng(n+1)=6.060803e+002;
n=33; farx(n+1)=1.252389e+001; foe(n+1)=3.604518e+001; krok(n+1)=1.532691e-003; ng(n+1)=2.776504e+003;
n=34; farx(n+1)=1.134436e+001; foe(n+1)=2.912826e+001; krok(n+1)=5.829556e-003; ng(n+1)=1.397200e+003;
n=35; farx(n+1)=1.134420e+001; foe(n+1)=2.838529e+001; krok(n+1)=7.063894e-005; ng(n+1)=2.388154e+003;
n=36; farx(n+1)=1.035223e+001; foe(n+1)=2.734720e+001; krok(n+1)=8.861138e-004; ng(n+1)=8.550567e+002;
n=37; farx(n+1)=9.966602e+000; foe(n+1)=2.640906e+001; krok(n+1)=1.457199e-003; ng(n+1)=1.229974e+003;
n=38; farx(n+1)=9.513691e+000; foe(n+1)=2.465242e+001; krok(n+1)=1.371344e-003; ng(n+1)=3.922506e+003;
n=39; farx(n+1)=7.372667e+000; foe(n+1)=2.111368e+001; krok(n+1)=8.751130e-003; ng(n+1)=1.976698e+003;
n=40; farx(n+1)=6.997407e+000; foe(n+1)=1.999614e+001; krok(n+1)=1.276921e-003; ng(n+1)=7.568894e+002;
n=41; farx(n+1)=5.707281e+000; foe(n+1)=1.768362e+001; krok(n+1)=3.595838e-003; ng(n+1)=1.922383e+003;
n=42; farx(n+1)=4.356425e+000; foe(n+1)=1.546076e+001; krok(n+1)=9.232346e-004; ng(n+1)=8.845916e+002;
n=43; farx(n+1)=4.196946e+000; foe(n+1)=1.445730e+001; krok(n+1)=3.159755e-003; ng(n+1)=1.692111e+003;
n=44; farx(n+1)=3.947683e+000; foe(n+1)=1.391594e+001; krok(n+1)=2.404573e-003; ng(n+1)=1.238603e+003;
n=45; farx(n+1)=4.128204e+000; foe(n+1)=1.332942e+001; krok(n+1)=2.024365e-002; ng(n+1)=7.143672e+002;
n=46; farx(n+1)=4.235513e+000; foe(n+1)=1.258392e+001; krok(n+1)=1.610734e-002; ng(n+1)=6.677731e+002;
n=47; farx(n+1)=4.376208e+000; foe(n+1)=1.219802e+001; krok(n+1)=3.377159e-002; ng(n+1)=5.688542e+002;
n=48; farx(n+1)=4.369937e+000; foe(n+1)=1.202485e+001; krok(n+1)=1.256724e-002; ng(n+1)=7.727073e+002;
n=49; farx(n+1)=4.256450e+000; foe(n+1)=1.127037e+001; krok(n+1)=7.742260e-002; ng(n+1)=4.198277e+002;
n=50; farx(n+1)=3.770799e+000; foe(n+1)=1.013506e+001; krok(n+1)=8.973423e-002; ng(n+1)=2.131207e+002;
%odnowa zmiennej metryki
n=51; farx(n+1)=3.786600e+000; foe(n+1)=9.829151e+000; krok(n+1)=1.489515e-005; ng(n+1)=6.195193e+002;
n=52; farx(n+1)=3.803222e+000; foe(n+1)=9.729500e+000; krok(n+1)=3.351433e-005; ng(n+1)=2.220502e+002;
n=53; farx(n+1)=3.741085e+000; foe(n+1)=9.616860e+000; krok(n+1)=1.614953e-004; ng(n+1)=1.288973e+002;
n=54; farx(n+1)=3.682036e+000; foe(n+1)=9.369373e+000; krok(n+1)=4.758251e-004; ng(n+1)=1.259130e+002;
n=55; farx(n+1)=3.575730e+000; foe(n+1)=8.925983e+000; krok(n+1)=2.318931e-003; ng(n+1)=7.723369e+001;
n=56; farx(n+1)=3.161047e+000; foe(n+1)=7.811522e+000; krok(n+1)=3.460440e-003; ng(n+1)=1.052930e+002;
n=57; farx(n+1)=2.913383e+000; foe(n+1)=7.030874e+000; krok(n+1)=7.144846e-003; ng(n+1)=5.324779e+002;
n=58; farx(n+1)=2.762631e+000; foe(n+1)=6.740784e+000; krok(n+1)=4.014511e-003; ng(n+1)=2.375284e+002;
n=59; farx(n+1)=2.615090e+000; foe(n+1)=6.532686e+000; krok(n+1)=6.607631e-003; ng(n+1)=3.241944e+002;
n=60; farx(n+1)=2.466203e+000; foe(n+1)=5.996427e+000; krok(n+1)=6.543079e-003; ng(n+1)=8.200506e+002;
n=61; farx(n+1)=2.333366e+000; foe(n+1)=5.530477e+000; krok(n+1)=8.252113e-003; ng(n+1)=3.875646e+002;
n=62; farx(n+1)=2.263328e+000; foe(n+1)=5.267270e+000; krok(n+1)=1.033570e-002; ng(n+1)=2.250992e+002;
n=63; farx(n+1)=2.211558e+000; foe(n+1)=5.001402e+000; krok(n+1)=3.096185e-003; ng(n+1)=3.265031e+002;
n=64; farx(n+1)=2.119532e+000; foe(n+1)=4.758200e+000; krok(n+1)=1.626130e-002; ng(n+1)=2.357128e+002;
n=65; farx(n+1)=2.009599e+000; foe(n+1)=4.617801e+000; krok(n+1)=3.625910e-003; ng(n+1)=1.998799e+002;
n=66; farx(n+1)=1.871423e+000; foe(n+1)=4.226204e+000; krok(n+1)=2.529683e-002; ng(n+1)=3.018884e+002;
n=67; farx(n+1)=1.816274e+000; foe(n+1)=3.988243e+000; krok(n+1)=7.883344e-003; ng(n+1)=3.454663e+002;
n=68; farx(n+1)=1.765708e+000; foe(n+1)=3.852020e+000; krok(n+1)=1.280590e-002; ng(n+1)=3.185726e+002;
n=69; farx(n+1)=1.600832e+000; foe(n+1)=3.385309e+000; krok(n+1)=1.716139e-002; ng(n+1)=6.003836e+002;
n=70; farx(n+1)=1.546647e+000; foe(n+1)=3.209320e+000; krok(n+1)=1.660195e-002; ng(n+1)=2.235791e+002;
n=71; farx(n+1)=1.504627e+000; foe(n+1)=2.928497e+000; krok(n+1)=1.977848e-002; ng(n+1)=3.744719e+002;
n=72; farx(n+1)=1.479296e+000; foe(n+1)=2.780163e+000; krok(n+1)=7.591652e-003; ng(n+1)=1.981284e+002;
n=73; farx(n+1)=1.468415e+000; foe(n+1)=2.703160e+000; krok(n+1)=1.165759e-002; ng(n+1)=2.889609e+002;
n=74; farx(n+1)=1.464966e+000; foe(n+1)=2.598560e+000; krok(n+1)=1.660195e-002; ng(n+1)=1.724884e+002;
n=75; farx(n+1)=1.475027e+000; foe(n+1)=2.506903e+000; krok(n+1)=2.432476e-002; ng(n+1)=2.725361e+002;
%odnowa zmiennej metryki
n=76; farx(n+1)=1.471505e+000; foe(n+1)=2.470161e+000; krok(n+1)=6.861689e-006; ng(n+1)=3.426638e+002;
n=77; farx(n+1)=1.465140e+000; foe(n+1)=2.454870e+000; krok(n+1)=1.990494e-005; ng(n+1)=1.370325e+002;
n=78; farx(n+1)=1.456942e+000; foe(n+1)=2.411583e+000; krok(n+1)=6.408173e-005; ng(n+1)=1.164674e+002;
n=79; farx(n+1)=1.456258e+000; foe(n+1)=2.381733e+000; krok(n+1)=1.863040e-004; ng(n+1)=5.978562e+001;
n=80; farx(n+1)=1.444336e+000; foe(n+1)=2.314801e+000; krok(n+1)=1.358387e-003; ng(n+1)=3.440359e+001;
n=81; farx(n+1)=1.430745e+000; foe(n+1)=2.245628e+000; krok(n+1)=1.532691e-003; ng(n+1)=3.284306e+001;
n=82; farx(n+1)=1.427926e+000; foe(n+1)=2.149917e+000; krok(n+1)=1.034736e-002; ng(n+1)=5.866250e+001;
n=83; farx(n+1)=1.427131e+000; foe(n+1)=2.107114e+000; krok(n+1)=3.225080e-003; ng(n+1)=7.584930e+001;
n=84; farx(n+1)=1.419754e+000; foe(n+1)=2.079045e+000; krok(n+1)=1.086709e-002; ng(n+1)=1.521075e+002;
n=85; farx(n+1)=1.355889e+000; foe(n+1)=1.935816e+000; krok(n+1)=5.507794e-002; ng(n+1)=1.946241e+002;
n=86; farx(n+1)=1.346065e+000; foe(n+1)=1.908948e+000; krok(n+1)=4.080593e-003; ng(n+1)=1.789514e+002;
n=87; farx(n+1)=1.338908e+000; foe(n+1)=1.864610e+000; krok(n+1)=1.429000e-002; ng(n+1)=1.638922e+002;
n=88; farx(n+1)=1.347022e+000; foe(n+1)=1.826895e+000; krok(n+1)=1.506159e-002; ng(n+1)=1.542480e+002;
n=89; farx(n+1)=1.345232e+000; foe(n+1)=1.817303e+000; krok(n+1)=5.241643e-003; ng(n+1)=2.038008e+002;
n=90; farx(n+1)=1.340386e+000; foe(n+1)=1.792750e+000; krok(n+1)=3.094863e-002; ng(n+1)=1.682945e+002;
n=91; farx(n+1)=1.332340e+000; foe(n+1)=1.766632e+000; krok(n+1)=4.486659e-002; ng(n+1)=6.778156e+001;
n=92; farx(n+1)=1.296400e+000; foe(n+1)=1.704980e+000; krok(n+1)=8.268560e-002; ng(n+1)=1.047809e+002;
n=93; farx(n+1)=1.262712e+000; foe(n+1)=1.682367e+000; krok(n+1)=3.134999e-002; ng(n+1)=1.171677e+002;
n=94; farx(n+1)=1.241727e+000; foe(n+1)=1.666925e+000; krok(n+1)=3.394649e-002; ng(n+1)=7.945804e+001;
n=95; farx(n+1)=1.183036e+000; foe(n+1)=1.628637e+000; krok(n+1)=1.827549e-001; ng(n+1)=1.238159e+002;
n=96; farx(n+1)=1.160302e+000; foe(n+1)=1.606193e+000; krok(n+1)=5.236098e-002; ng(n+1)=6.101574e+001;
n=97; farx(n+1)=1.136125e+000; foe(n+1)=1.553046e+000; krok(n+1)=2.577175e-001; ng(n+1)=2.075157e+001;
n=98; farx(n+1)=1.133414e+000; foe(n+1)=1.536039e+000; krok(n+1)=2.024365e-002; ng(n+1)=1.755195e+002;
n=99; farx(n+1)=1.134958e+000; foe(n+1)=1.526828e+000; krok(n+1)=1.027811e-002; ng(n+1)=1.621474e+002;
n=100; farx(n+1)=1.143621e+000; foe(n+1)=1.497917e+000; krok(n+1)=4.905012e-002; ng(n+1)=5.385960e+001;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
