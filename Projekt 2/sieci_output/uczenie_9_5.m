%uczenie predyktora oe
clear all;
n=0; farx(n+1)=4.633822e+003; foe(n+1)=4.552000e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=2.954826e+003; foe(n+1)=2.915380e+003; krok(n+1)=5.033545e-004; ng(n+1)=4.589863e+003;
n=2; farx(n+1)=1.240741e+003; foe(n+1)=1.095138e+003; krok(n+1)=2.774090e-003; ng(n+1)=2.309136e+003;
n=3; farx(n+1)=1.569547e+003; foe(n+1)=7.581899e+002; krok(n+1)=1.638382e-004; ng(n+1)=9.689467e+003;
n=4; farx(n+1)=2.233207e+003; foe(n+1)=5.971786e+002; krok(n+1)=4.470330e-004; ng(n+1)=9.459025e+003;
n=5; farx(n+1)=1.766259e+003; foe(n+1)=5.188361e+002; krok(n+1)=3.846158e-003; ng(n+1)=1.185626e+003;
n=6; farx(n+1)=1.680466e+003; foe(n+1)=5.100347e+002; krok(n+1)=4.636412e-004; ng(n+1)=1.666320e+003;
n=7; farx(n+1)=7.544856e+002; foe(n+1)=4.029437e+002; krok(n+1)=1.476722e-003; ng(n+1)=1.831371e+003;
n=8; farx(n+1)=4.537352e+002; foe(n+1)=3.404949e+002; krok(n+1)=1.131625e-004; ng(n+1)=1.904874e+004;
n=9; farx(n+1)=4.016957e+002; foe(n+1)=3.345375e+002; krok(n+1)=4.875677e-004; ng(n+1)=3.074601e+003;
n=10; farx(n+1)=3.394872e+002; foe(n+1)=3.177415e+002; krok(n+1)=5.688063e-004; ng(n+1)=2.508069e+003;
n=11; farx(n+1)=2.800326e+002; foe(n+1)=2.903765e+002; krok(n+1)=1.178095e-003; ng(n+1)=1.927744e+003;
n=12; farx(n+1)=2.760532e+002; foe(n+1)=2.819542e+002; krok(n+1)=2.218843e-003; ng(n+1)=1.816555e+003;
n=13; farx(n+1)=2.686746e+002; foe(n+1)=2.778519e+002; krok(n+1)=1.369522e-003; ng(n+1)=1.215277e+003;
n=14; farx(n+1)=2.429158e+002; foe(n+1)=2.702199e+002; krok(n+1)=5.767896e-003; ng(n+1)=8.045092e+002;
n=15; farx(n+1)=2.140061e+002; foe(n+1)=2.535354e+002; krok(n+1)=1.736904e-003; ng(n+1)=2.001932e+003;
n=16; farx(n+1)=1.637534e+002; foe(n+1)=2.360419e+002; krok(n+1)=4.756638e-003; ng(n+1)=1.402350e+003;
n=17; farx(n+1)=1.081195e+002; foe(n+1)=2.034048e+002; krok(n+1)=3.868579e-003; ng(n+1)=1.137172e+003;
n=18; farx(n+1)=1.025872e+002; foe(n+1)=2.003368e+002; krok(n+1)=1.250114e-003; ng(n+1)=1.226487e+003;
n=19; farx(n+1)=9.995416e+001; foe(n+1)=1.966002e+002; krok(n+1)=1.954789e-004; ng(n+1)=2.213275e+003;
n=20; farx(n+1)=9.739965e+001; foe(n+1)=1.934547e+002; krok(n+1)=6.935224e-004; ng(n+1)=1.864425e+003;
n=21; farx(n+1)=9.819795e+001; foe(n+1)=1.877496e+002; krok(n+1)=2.422929e-003; ng(n+1)=2.678338e+003;
n=22; farx(n+1)=1.216095e+002; foe(n+1)=1.394654e+002; krok(n+1)=1.671680e-003; ng(n+1)=4.540432e+003;
n=23; farx(n+1)=1.222852e+002; foe(n+1)=1.391838e+002; krok(n+1)=1.720017e-005; ng(n+1)=3.464469e+003;
n=24; farx(n+1)=1.288007e+002; foe(n+1)=1.340237e+002; krok(n+1)=2.312019e-003; ng(n+1)=3.262079e+003;
n=25; farx(n+1)=1.293449e+002; foe(n+1)=1.339112e+002; krok(n+1)=2.336289e-005; ng(n+1)=4.118137e+003;
%odnowa zmiennej metryki
n=26; farx(n+1)=1.284607e+002; foe(n+1)=1.273227e+002; krok(n+1)=1.404611e-005; ng(n+1)=3.581288e+003;
n=27; farx(n+1)=1.233876e+002; foe(n+1)=1.211040e+002; krok(n+1)=2.044242e-005; ng(n+1)=2.789069e+003;
n=28; farx(n+1)=1.252722e+002; foe(n+1)=1.075471e+002; krok(n+1)=2.087853e-004; ng(n+1)=2.241195e+003;
n=29; farx(n+1)=1.139096e+002; foe(n+1)=9.845265e+001; krok(n+1)=4.251583e-004; ng(n+1)=1.118272e+003;
n=30; farx(n+1)=9.980898e+001; foe(n+1)=9.330055e+001; krok(n+1)=3.229906e-004; ng(n+1)=2.170745e+003;
n=31; farx(n+1)=6.347749e+001; foe(n+1)=7.128063e+001; krok(n+1)=1.323510e-003; ng(n+1)=1.800986e+003;
n=32; farx(n+1)=4.766143e+001; foe(n+1)=5.252136e+001; krok(n+1)=1.353531e-003; ng(n+1)=2.716053e+003;
n=33; farx(n+1)=5.785831e+001; foe(n+1)=4.791005e+001; krok(n+1)=8.631728e-004; ng(n+1)=1.661997e+003;
n=34; farx(n+1)=4.507549e+001; foe(n+1)=4.323580e+001; krok(n+1)=1.751967e-003; ng(n+1)=1.031555e+003;
n=35; farx(n+1)=3.968175e+001; foe(n+1)=3.898766e+001; krok(n+1)=2.050616e-003; ng(n+1)=2.078571e+003;
n=36; farx(n+1)=2.931850e+001; foe(n+1)=3.453938e+001; krok(n+1)=4.944398e-003; ng(n+1)=7.803025e+002;
n=37; farx(n+1)=2.386894e+001; foe(n+1)=2.935870e+001; krok(n+1)=2.840497e-003; ng(n+1)=2.719429e+003;
n=38; farx(n+1)=1.839331e+001; foe(n+1)=2.563647e+001; krok(n+1)=4.672280e-003; ng(n+1)=2.088384e+003;
n=39; farx(n+1)=1.179593e+001; foe(n+1)=2.021277e+001; krok(n+1)=4.629191e-003; ng(n+1)=1.226704e+003;
n=40; farx(n+1)=9.836460e+000; foe(n+1)=1.858214e+001; krok(n+1)=1.320749e-003; ng(n+1)=1.469851e+003;
n=41; farx(n+1)=7.937047e+000; foe(n+1)=1.649769e+001; krok(n+1)=2.885366e-003; ng(n+1)=8.138668e+002;
n=42; farx(n+1)=7.455334e+000; foe(n+1)=1.513739e+001; krok(n+1)=2.254077e-003; ng(n+1)=2.269930e+003;
n=43; farx(n+1)=5.345355e+000; foe(n+1)=1.256039e+001; krok(n+1)=1.177574e-002; ng(n+1)=1.403705e+003;
n=44; farx(n+1)=4.096365e+000; foe(n+1)=1.016673e+001; krok(n+1)=4.064431e-003; ng(n+1)=2.609011e+003;
n=45; farx(n+1)=3.800346e+000; foe(n+1)=9.009042e+000; krok(n+1)=5.711090e-003; ng(n+1)=5.472235e+002;
n=46; farx(n+1)=3.569601e+000; foe(n+1)=8.133877e+000; krok(n+1)=1.121665e-002; ng(n+1)=9.697201e+002;
n=47; farx(n+1)=3.681115e+000; foe(n+1)=7.763857e+000; krok(n+1)=7.990988e-003; ng(n+1)=3.673230e+002;
n=48; farx(n+1)=3.168560e+000; foe(n+1)=6.743345e+000; krok(n+1)=8.403478e-003; ng(n+1)=4.942442e+002;
n=49; farx(n+1)=2.997008e+000; foe(n+1)=6.511424e+000; krok(n+1)=7.883344e-003; ng(n+1)=2.848464e+002;
n=50; farx(n+1)=2.873201e+000; foe(n+1)=6.314153e+000; krok(n+1)=1.021537e-002; ng(n+1)=3.364348e+002;
%odnowa zmiennej metryki
n=51; farx(n+1)=2.882250e+000; foe(n+1)=6.261163e+000; krok(n+1)=5.828323e-006; ng(n+1)=4.981973e+002;
n=52; farx(n+1)=2.873546e+000; foe(n+1)=6.203191e+000; krok(n+1)=5.210339e-005; ng(n+1)=1.942990e+002;
n=53; farx(n+1)=2.899302e+000; foe(n+1)=6.163185e+000; krok(n+1)=8.170121e-005; ng(n+1)=1.224373e+002;
n=54; farx(n+1)=2.956665e+000; foe(n+1)=5.987911e+000; krok(n+1)=4.884852e-004; ng(n+1)=1.138805e+002;
n=55; farx(n+1)=3.011608e+000; foe(n+1)=5.878437e+000; krok(n+1)=4.957630e-004; ng(n+1)=8.370367e+001;
n=56; farx(n+1)=3.013119e+000; foe(n+1)=5.678324e+000; krok(n+1)=2.607206e-003; ng(n+1)=5.171485e+001;
n=57; farx(n+1)=2.951686e+000; foe(n+1)=5.478851e+000; krok(n+1)=4.106680e-003; ng(n+1)=7.966835e+001;
n=58; farx(n+1)=2.860644e+000; foe(n+1)=5.388856e+000; krok(n+1)=2.953444e-003; ng(n+1)=9.991213e+001;
n=59; farx(n+1)=2.617235e+000; foe(n+1)=5.121654e+000; krok(n+1)=1.688698e-002; ng(n+1)=1.920888e+002;
n=60; farx(n+1)=2.354862e+000; foe(n+1)=4.711847e+000; krok(n+1)=2.779047e-002; ng(n+1)=1.893389e+002;
n=61; farx(n+1)=2.322646e+000; foe(n+1)=4.334283e+000; krok(n+1)=1.406421e-002; ng(n+1)=5.187033e+002;
n=62; farx(n+1)=2.341301e+000; foe(n+1)=4.198531e+000; krok(n+1)=9.988735e-004; ng(n+1)=7.351176e+002;
n=63; farx(n+1)=2.071431e+000; foe(n+1)=3.850922e+000; krok(n+1)=1.952078e-002; ng(n+1)=4.248480e+002;
n=64; farx(n+1)=1.905575e+000; foe(n+1)=3.658582e+000; krok(n+1)=2.444561e-003; ng(n+1)=5.326468e+002;
n=65; farx(n+1)=1.793783e+000; foe(n+1)=3.517946e+000; krok(n+1)=4.014511e-003; ng(n+1)=3.658297e+002;
n=66; farx(n+1)=1.700694e+000; foe(n+1)=3.411763e+000; krok(n+1)=1.046652e-002; ng(n+1)=3.604536e+002;
n=67; farx(n+1)=1.602210e+000; foe(n+1)=3.078184e+000; krok(n+1)=1.897240e-002; ng(n+1)=3.534383e+002;
n=68; farx(n+1)=1.565082e+000; foe(n+1)=2.873591e+000; krok(n+1)=1.660195e-002; ng(n+1)=6.650485e+002;
n=69; farx(n+1)=1.524003e+000; foe(n+1)=2.720574e+000; krok(n+1)=6.543079e-003; ng(n+1)=2.587965e+002;
n=70; farx(n+1)=1.501222e+000; foe(n+1)=2.531464e+000; krok(n+1)=2.262062e-002; ng(n+1)=4.485418e+002;
n=71; farx(n+1)=1.492543e+000; foe(n+1)=2.424341e+000; krok(n+1)=9.409526e-003; ng(n+1)=2.915073e+002;
n=72; farx(n+1)=1.478432e+000; foe(n+1)=2.349266e+000; krok(n+1)=3.406610e-002; ng(n+1)=4.324865e+002;
n=73; farx(n+1)=1.461795e+000; foe(n+1)=2.231795e+000; krok(n+1)=4.954706e-002; ng(n+1)=1.557107e+002;
n=74; farx(n+1)=1.396223e+000; foe(n+1)=2.089878e+000; krok(n+1)=5.558094e-002; ng(n+1)=3.261325e+002;
n=75; farx(n+1)=1.339217e+000; foe(n+1)=1.944007e+000; krok(n+1)=8.877087e-002; ng(n+1)=1.970188e+002;
%odnowa zmiennej metryki
n=76; farx(n+1)=1.339188e+000; foe(n+1)=1.932314e+000; krok(n+1)=2.903548e-006; ng(n+1)=3.447936e+002;
n=77; farx(n+1)=1.333179e+000; foe(n+1)=1.923465e+000; krok(n+1)=3.145966e-005; ng(n+1)=9.787437e+001;
n=78; farx(n+1)=1.329792e+000; foe(n+1)=1.913227e+000; krok(n+1)=2.961144e-005; ng(n+1)=8.759530e+001;
n=79; farx(n+1)=1.311719e+000; foe(n+1)=1.875861e+000; krok(n+1)=3.423805e-004; ng(n+1)=5.239744e+001;
n=80; farx(n+1)=1.309923e+000; foe(n+1)=1.868286e+000; krok(n+1)=1.714180e-004; ng(n+1)=3.646120e+001;
n=81; farx(n+1)=1.297418e+000; foe(n+1)=1.833271e+000; krok(n+1)=2.081087e-003; ng(n+1)=2.653199e+001;
n=82; farx(n+1)=1.276685e+000; foe(n+1)=1.811550e+000; krok(n+1)=5.843731e-003; ng(n+1)=6.347897e+001;
n=83; farx(n+1)=1.268544e+000; foe(n+1)=1.800925e+000; krok(n+1)=2.145173e-003; ng(n+1)=1.599076e+002;
n=84; farx(n+1)=1.222937e+000; foe(n+1)=1.737016e+000; krok(n+1)=2.128042e-002; ng(n+1)=1.696404e+002;
n=85; farx(n+1)=1.184434e+000; foe(n+1)=1.636379e+000; krok(n+1)=1.601914e-002; ng(n+1)=3.921689e+002;
n=86; farx(n+1)=1.165223e+000; foe(n+1)=1.600659e+000; krok(n+1)=1.576669e-002; ng(n+1)=1.774694e+002;
n=87; farx(n+1)=1.151519e+000; foe(n+1)=1.582238e+000; krok(n+1)=6.700076e-003; ng(n+1)=3.445468e+002;
n=88; farx(n+1)=1.110096e+000; foe(n+1)=1.521918e+000; krok(n+1)=4.218186e-002; ng(n+1)=1.198213e+002;
n=89; farx(n+1)=1.092159e+000; foe(n+1)=1.476373e+000; krok(n+1)=9.949946e-003; ng(n+1)=2.532076e+002;
n=90; farx(n+1)=1.088086e+000; foe(n+1)=1.424673e+000; krok(n+1)=1.702114e-002; ng(n+1)=1.948135e+002;
n=91; farx(n+1)=1.086877e+000; foe(n+1)=1.351795e+000; krok(n+1)=2.835564e-002; ng(n+1)=2.650805e+002;
n=92; farx(n+1)=1.078187e+000; foe(n+1)=1.313484e+000; krok(n+1)=1.132561e-002; ng(n+1)=3.243981e+002;
n=93; farx(n+1)=1.057578e+000; foe(n+1)=1.233564e+000; krok(n+1)=2.156300e-002; ng(n+1)=5.345170e+002;
n=94; farx(n+1)=1.041610e+000; foe(n+1)=1.178827e+000; krok(n+1)=1.851676e-002; ng(n+1)=2.355607e+002;
n=95; farx(n+1)=1.037318e+000; foe(n+1)=1.169874e+000; krok(n+1)=1.213054e-002; ng(n+1)=1.090249e+002;
n=96; farx(n+1)=1.021361e+000; foe(n+1)=1.146700e+000; krok(n+1)=2.128042e-002; ng(n+1)=2.131625e+002;
n=97; farx(n+1)=1.009699e+000; foe(n+1)=1.124567e+000; krok(n+1)=2.399905e-002; ng(n+1)=2.954889e+002;
n=98; farx(n+1)=1.014584e+000; foe(n+1)=1.082815e+000; krok(n+1)=1.136129e-001; ng(n+1)=1.646989e+002;
n=99; farx(n+1)=1.022091e+000; foe(n+1)=1.065195e+000; krok(n+1)=3.034235e-002; ng(n+1)=3.164871e+002;
n=100; farx(n+1)=1.029462e+000; foe(n+1)=1.058018e+000; krok(n+1)=4.446078e-002; ng(n+1)=6.330113e+001;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
