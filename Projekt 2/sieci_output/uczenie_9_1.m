%uczenie predyktora oe
clear all;
n=0; farx(n+1)=4.784988e+003; foe(n+1)=4.640673e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=3.545709e+003; foe(n+1)=3.377454e+003; krok(n+1)=4.015818e-004; ng(n+1)=5.355904e+003;
n=2; farx(n+1)=1.374866e+003; foe(n+1)=1.204468e+003; krok(n+1)=7.624904e-004; ng(n+1)=6.124345e+003;
n=3; farx(n+1)=1.763850e+003; foe(n+1)=8.599005e+002; krok(n+1)=2.230373e-004; ng(n+1)=8.655148e+003;
n=4; farx(n+1)=1.029920e+003; foe(n+1)=7.084972e+002; krok(n+1)=9.767882e-003; ng(n+1)=1.223421e+003;
n=5; farx(n+1)=5.655123e+002; foe(n+1)=5.880508e+002; krok(n+1)=1.532691e-003; ng(n+1)=2.670837e+003;
n=6; farx(n+1)=4.425915e+002; foe(n+1)=4.780780e+002; krok(n+1)=8.336543e-004; ng(n+1)=4.443415e+003;
n=7; farx(n+1)=3.702776e+002; foe(n+1)=4.492450e+002; krok(n+1)=2.034749e-004; ng(n+1)=3.135810e+003;
n=8; farx(n+1)=3.138099e+002; foe(n+1)=4.318501e+002; krok(n+1)=4.342261e-004; ng(n+1)=3.165725e+003;
n=9; farx(n+1)=2.906829e+002; foe(n+1)=4.143315e+002; krok(n+1)=5.241643e-003; ng(n+1)=1.759071e+003;
n=10; farx(n+1)=3.024993e+002; foe(n+1)=4.041039e+002; krok(n+1)=1.468417e-003; ng(n+1)=7.649020e+002;
n=11; farx(n+1)=2.965927e+002; foe(n+1)=4.021584e+002; krok(n+1)=5.421351e-004; ng(n+1)=6.358914e+002;
n=12; farx(n+1)=2.444207e+002; foe(n+1)=3.759015e+002; krok(n+1)=3.783371e-003; ng(n+1)=1.012919e+003;
n=13; farx(n+1)=1.994040e+002; foe(n+1)=3.519121e+002; krok(n+1)=8.106441e-004; ng(n+1)=2.810957e+003;
n=14; farx(n+1)=1.247338e+002; foe(n+1)=3.158256e+002; krok(n+1)=1.667309e-003; ng(n+1)=3.703683e+003;
n=15; farx(n+1)=1.102853e+002; foe(n+1)=3.114130e+002; krok(n+1)=1.271718e-005; ng(n+1)=7.081953e+003;
n=16; farx(n+1)=1.000784e+002; foe(n+1)=3.081280e+002; krok(n+1)=1.563719e-003; ng(n+1)=1.050673e+004;
n=17; farx(n+1)=8.985431e+001; foe(n+1)=3.051180e+002; krok(n+1)=2.338071e-004; ng(n+1)=1.018416e+004;
n=18; farx(n+1)=7.552393e+001; foe(n+1)=2.987290e+002; krok(n+1)=1.548346e-003; ng(n+1)=6.257246e+003;
n=19; farx(n+1)=6.076941e+001; foe(n+1)=2.742450e+002; krok(n+1)=1.047362e-003; ng(n+1)=6.404536e+003;
n=20; farx(n+1)=5.606701e+001; foe(n+1)=2.541836e+002; krok(n+1)=2.742404e-004; ng(n+1)=8.211374e+003;
n=21; farx(n+1)=5.636327e+001; foe(n+1)=2.531415e+002; krok(n+1)=2.335170e-006; ng(n+1)=1.149406e+004;
n=22; farx(n+1)=5.388416e+001; foe(n+1)=2.509015e+002; krok(n+1)=4.604034e-004; ng(n+1)=1.050485e+004;
n=23; farx(n+1)=4.821198e+001; foe(n+1)=2.146554e+002; krok(n+1)=2.123614e-003; ng(n+1)=1.366701e+004;
n=24; farx(n+1)=4.806131e+001; foe(n+1)=2.144873e+002; krok(n+1)=4.770472e-006; ng(n+1)=7.782307e+003;
n=25; farx(n+1)=3.872165e+001; foe(n+1)=1.908851e+002; krok(n+1)=1.427772e-003; ng(n+1)=7.403776e+003;
%odnowa zmiennej metryki
n=26; farx(n+1)=3.644463e+001; foe(n+1)=1.834008e+002; krok(n+1)=2.651164e-006; ng(n+1)=8.026052e+003;
n=27; farx(n+1)=2.645897e+001; foe(n+1)=1.657556e+002; krok(n+1)=6.240680e-006; ng(n+1)=1.012841e+004;
n=28; farx(n+1)=2.633235e+001; foe(n+1)=1.452386e+002; krok(n+1)=2.798313e-005; ng(n+1)=4.660699e+003;
n=29; farx(n+1)=2.878693e+001; foe(n+1)=1.377810e+002; krok(n+1)=9.921626e-005; ng(n+1)=2.777893e+003;
n=30; farx(n+1)=2.430997e+001; foe(n+1)=1.308099e+002; krok(n+1)=4.448722e-004; ng(n+1)=2.286961e+003;
n=31; farx(n+1)=2.244749e+001; foe(n+1)=1.262585e+002; krok(n+1)=8.178849e-004; ng(n+1)=1.569008e+003;
n=32; farx(n+1)=2.097300e+001; foe(n+1)=1.222575e+002; krok(n+1)=6.145526e-004; ng(n+1)=2.569691e+003;
n=33; farx(n+1)=1.344539e+001; foe(n+1)=1.015540e+002; krok(n+1)=3.966104e-003; ng(n+1)=4.972300e+003;
n=34; farx(n+1)=1.063602e+001; foe(n+1)=8.919604e+001; krok(n+1)=8.471113e-004; ng(n+1)=5.118843e+003;
n=35; farx(n+1)=1.066258e+001; foe(n+1)=8.195845e+001; krok(n+1)=2.463545e-004; ng(n+1)=7.308350e+003;
n=36; farx(n+1)=1.063009e+001; foe(n+1)=7.716764e+001; krok(n+1)=1.300439e-003; ng(n+1)=1.833491e+003;
n=37; farx(n+1)=1.024816e+001; foe(n+1)=6.672479e+001; krok(n+1)=3.698907e-003; ng(n+1)=1.896397e+003;
n=38; farx(n+1)=7.592780e+000; foe(n+1)=5.785159e+001; krok(n+1)=2.162140e-003; ng(n+1)=2.077096e+003;
n=39; farx(n+1)=7.277092e+000; foe(n+1)=5.413372e+001; krok(n+1)=1.013887e-003; ng(n+1)=2.722001e+003;
n=40; farx(n+1)=6.611962e+000; foe(n+1)=5.002196e+001; krok(n+1)=2.021294e-003; ng(n+1)=2.346193e+003;
n=41; farx(n+1)=6.145504e+000; foe(n+1)=4.684360e+001; krok(n+1)=1.883940e-003; ng(n+1)=5.584946e+003;
n=42; farx(n+1)=5.715865e+000; foe(n+1)=4.319673e+001; krok(n+1)=1.943015e-003; ng(n+1)=2.884711e+003;
n=43; farx(n+1)=5.635900e+000; foe(n+1)=4.164700e+001; krok(n+1)=5.705256e-004; ng(n+1)=2.392079e+003;
n=44; farx(n+1)=5.641863e+000; foe(n+1)=3.742085e+001; krok(n+1)=3.516052e-003; ng(n+1)=1.212497e+003;
n=45; farx(n+1)=6.270593e+000; foe(n+1)=3.357283e+001; krok(n+1)=3.303815e-003; ng(n+1)=2.415467e+003;
n=46; farx(n+1)=6.472638e+000; foe(n+1)=3.067903e+001; krok(n+1)=4.956752e-003; ng(n+1)=1.835733e+003;
n=47; farx(n+1)=7.020782e+000; foe(n+1)=2.909947e+001; krok(n+1)=1.353531e-003; ng(n+1)=5.074421e+003;
n=48; farx(n+1)=7.286057e+000; foe(n+1)=2.793299e+001; krok(n+1)=1.463096e-003; ng(n+1)=4.059999e+003;
n=49; farx(n+1)=7.285128e+000; foe(n+1)=2.728835e+001; krok(n+1)=7.599313e-003; ng(n+1)=1.808186e+003;
n=50; farx(n+1)=6.529966e+000; foe(n+1)=2.571327e+001; krok(n+1)=6.884742e-003; ng(n+1)=1.756220e+003;
%odnowa zmiennej metryki
n=51; farx(n+1)=6.513840e+000; foe(n+1)=2.551913e+001; krok(n+1)=2.815262e-006; ng(n+1)=1.433998e+003;
n=52; farx(n+1)=6.395061e+000; foe(n+1)=2.506289e+001; krok(n+1)=2.617217e-005; ng(n+1)=7.742413e+002;
n=53; farx(n+1)=6.532582e+000; foe(n+1)=2.411965e+001; krok(n+1)=1.968224e-005; ng(n+1)=9.509370e+002;
n=54; farx(n+1)=6.394261e+000; foe(n+1)=2.305432e+001; krok(n+1)=1.209505e-004; ng(n+1)=5.087516e+002;
n=55; farx(n+1)=6.378916e+000; foe(n+1)=2.266538e+001; krok(n+1)=2.151397e-004; ng(n+1)=1.180490e+003;
n=56; farx(n+1)=6.233042e+000; foe(n+1)=2.155980e+001; krok(n+1)=1.711903e-004; ng(n+1)=1.283173e+003;
n=57; farx(n+1)=5.503005e+000; foe(n+1)=2.058444e+001; krok(n+1)=2.331589e-003; ng(n+1)=1.049195e+003;
n=58; farx(n+1)=4.794079e+000; foe(n+1)=1.955212e+001; krok(n+1)=2.048333e-003; ng(n+1)=1.664194e+003;
n=59; farx(n+1)=4.221196e+000; foe(n+1)=1.863715e+001; krok(n+1)=1.667309e-003; ng(n+1)=2.629568e+003;
n=60; farx(n+1)=3.723358e+000; foe(n+1)=1.791738e+001; krok(n+1)=2.118327e-003; ng(n+1)=2.031629e+003;
n=61; farx(n+1)=3.102397e+000; foe(n+1)=1.648185e+001; krok(n+1)=4.126056e-003; ng(n+1)=1.901049e+003;
n=62; farx(n+1)=2.755023e+000; foe(n+1)=1.541021e+001; krok(n+1)=2.988526e-003; ng(n+1)=1.653761e+003;
n=63; farx(n+1)=2.568279e+000; foe(n+1)=1.487291e+001; krok(n+1)=3.427028e-003; ng(n+1)=1.668722e+003;
n=64; farx(n+1)=2.332658e+000; foe(n+1)=1.350638e+001; krok(n+1)=2.716773e-003; ng(n+1)=1.602227e+003;
n=65; farx(n+1)=2.202069e+000; foe(n+1)=1.277848e+001; krok(n+1)=1.081070e-003; ng(n+1)=3.132581e+003;
n=66; farx(n+1)=2.093756e+000; foe(n+1)=1.143606e+001; krok(n+1)=1.142218e-002; ng(n+1)=3.920473e+003;
n=67; farx(n+1)=1.882468e+000; foe(n+1)=1.025516e+001; krok(n+1)=8.751130e-003; ng(n+1)=1.093085e+003;
n=68; farx(n+1)=1.745963e+000; foe(n+1)=9.472834e+000; krok(n+1)=4.266621e-003; ng(n+1)=1.920031e+003;
n=69; farx(n+1)=1.512967e+000; foe(n+1)=7.805593e+000; krok(n+1)=7.191676e-003; ng(n+1)=2.004552e+003;
n=70; farx(n+1)=1.451676e+000; foe(n+1)=7.396530e+000; krok(n+1)=2.063134e-003; ng(n+1)=1.896454e+003;
n=71; farx(n+1)=1.294013e+000; foe(n+1)=6.357443e+000; krok(n+1)=9.296334e-003; ng(n+1)=1.100036e+003;
n=72; farx(n+1)=1.234664e+000; foe(n+1)=5.909474e+000; krok(n+1)=5.036156e-003; ng(n+1)=8.307876e+002;
n=73; farx(n+1)=1.167889e+000; foe(n+1)=5.440675e+000; krok(n+1)=1.004150e-002; ng(n+1)=7.812755e+002;
n=74; farx(n+1)=1.131644e+000; foe(n+1)=4.833710e+000; krok(n+1)=1.219985e-002; ng(n+1)=2.181295e+003;
n=75; farx(n+1)=1.100380e+000; foe(n+1)=4.409246e+000; krok(n+1)=2.272397e-002; ng(n+1)=1.356995e+003;
%odnowa zmiennej metryki
n=76; farx(n+1)=1.098328e+000; foe(n+1)=4.357631e+000; krok(n+1)=1.583359e-006; ng(n+1)=8.197355e+002;
n=77; farx(n+1)=1.098600e+000; foe(n+1)=4.340022e+000; krok(n+1)=4.122508e-006; ng(n+1)=3.290279e+002;
n=78; farx(n+1)=1.101609e+000; foe(n+1)=4.296797e+000; krok(n+1)=5.561724e-005; ng(n+1)=1.476023e+002;
n=79; farx(n+1)=1.098212e+000; foe(n+1)=4.258001e+000; krok(n+1)=9.531131e-005; ng(n+1)=1.063756e+002;
n=80; farx(n+1)=1.094750e+000; foe(n+1)=4.131023e+000; krok(n+1)=2.779644e-004; ng(n+1)=1.218342e+002;
n=81; farx(n+1)=1.079107e+000; foe(n+1)=3.984801e+000; krok(n+1)=3.423805e-004; ng(n+1)=1.141062e+002;
n=82; farx(n+1)=1.060139e+000; foe(n+1)=3.744633e+000; krok(n+1)=5.608389e-003; ng(n+1)=1.367987e+002;
n=83; farx(n+1)=1.000690e+000; foe(n+1)=3.399267e+000; krok(n+1)=1.196180e-002; ng(n+1)=4.493778e+002;
n=84; farx(n+1)=9.819437e-001; foe(n+1)=3.095636e+000; krok(n+1)=1.201716e-003; ng(n+1)=4.940139e+002;
n=85; farx(n+1)=9.663635e-001; foe(n+1)=2.920692e+000; krok(n+1)=4.539152e-003; ng(n+1)=7.698428e+002;
n=86; farx(n+1)=9.485710e-001; foe(n+1)=2.794519e+000; krok(n+1)=2.209886e-003; ng(n+1)=8.895559e+002;
n=87; farx(n+1)=9.383846e-001; foe(n+1)=2.738482e+000; krok(n+1)=3.625910e-003; ng(n+1)=2.597107e+002;
n=88; farx(n+1)=9.032817e-001; foe(n+1)=2.594191e+000; krok(n+1)=8.023134e-003; ng(n+1)=6.739381e+002;
n=89; farx(n+1)=8.705378e-001; foe(n+1)=2.435461e+000; krok(n+1)=2.261309e-003; ng(n+1)=1.416801e+003;
n=90; farx(n+1)=8.592822e-001; foe(n+1)=2.357566e+000; krok(n+1)=3.382411e-003; ng(n+1)=1.202037e+003;
n=91; farx(n+1)=8.286585e-001; foe(n+1)=2.297168e+000; krok(n+1)=2.512560e-002; ng(n+1)=4.963549e+002;
n=92; farx(n+1)=7.915650e-001; foe(n+1)=2.110797e+000; krok(n+1)=2.219272e-002; ng(n+1)=6.116131e+002;
n=93; farx(n+1)=7.523966e-001; foe(n+1)=1.936008e+000; krok(n+1)=1.825682e-002; ng(n+1)=4.916613e+002;
n=94; farx(n+1)=6.897980e-001; foe(n+1)=1.845475e+000; krok(n+1)=1.912971e-002; ng(n+1)=2.899306e+002;
n=95; farx(n+1)=6.223528e-001; foe(n+1)=1.735245e+000; krok(n+1)=2.223039e-002; ng(n+1)=3.833756e+002;
n=96; farx(n+1)=5.847430e-001; foe(n+1)=1.618945e+000; krok(n+1)=1.274938e-002; ng(n+1)=3.447371e+002;
n=97; farx(n+1)=5.588168e-001; foe(n+1)=1.515358e+000; krok(n+1)=1.340015e-002; ng(n+1)=3.643288e+002;
n=98; farx(n+1)=5.369452e-001; foe(n+1)=1.427205e+000; krok(n+1)=2.788178e-002; ng(n+1)=2.765928e+002;
n=99; farx(n+1)=4.777158e-001; foe(n+1)=1.319382e+000; krok(n+1)=7.119534e-002; ng(n+1)=5.618810e+002;
n=100; farx(n+1)=4.709354e-001; foe(n+1)=1.290108e+000; krok(n+1)=1.883428e-002; ng(n+1)=4.231048e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
