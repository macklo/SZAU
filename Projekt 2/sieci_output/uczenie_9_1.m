%uczenie predyktora oe
clear all;
n=0; farx(n+1)=4.481194e+003; foe(n+1)=4.605220e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=3.020144e+003; foe(n+1)=2.955353e+003; krok(n+1)=4.792372e-004; ng(n+1)=5.333520e+003;
n=2; farx(n+1)=1.369449e+003; foe(n+1)=1.312052e+003; krok(n+1)=3.122142e-003; ng(n+1)=2.278798e+003;
n=3; farx(n+1)=1.644219e+003; foe(n+1)=1.011490e+003; krok(n+1)=1.007837e-004; ng(n+1)=1.119791e+004;
n=4; farx(n+1)=2.661785e+003; foe(n+1)=6.034751e+002; krok(n+1)=4.477301e-004; ng(n+1)=1.396222e+004;
n=5; farx(n+1)=1.852907e+003; foe(n+1)=5.008834e+002; krok(n+1)=3.256982e-003; ng(n+1)=1.052952e+003;
n=6; farx(n+1)=8.123278e+002; foe(n+1)=4.027404e+002; krok(n+1)=3.544455e-003; ng(n+1)=9.378385e+002;
n=7; farx(n+1)=5.792922e+002; foe(n+1)=3.715678e+002; krok(n+1)=1.174683e-003; ng(n+1)=1.950812e+003;
n=8; farx(n+1)=5.230126e+002; foe(n+1)=3.561527e+002; krok(n+1)=6.421814e-004; ng(n+1)=1.214166e+003;
n=9; farx(n+1)=3.129281e+002; foe(n+1)=3.050864e+002; krok(n+1)=6.273397e-003; ng(n+1)=1.065574e+003;
n=10; farx(n+1)=2.967882e+002; foe(n+1)=3.017660e+002; krok(n+1)=5.080539e-004; ng(n+1)=1.638585e+003;
n=11; farx(n+1)=2.777508e+002; foe(n+1)=2.909742e+002; krok(n+1)=3.470726e-003; ng(n+1)=1.230545e+003;
n=12; farx(n+1)=2.130935e+002; foe(n+1)=2.753986e+002; krok(n+1)=7.558357e-003; ng(n+1)=1.612566e+003;
n=13; farx(n+1)=1.592220e+002; foe(n+1)=2.453134e+002; krok(n+1)=1.413750e-003; ng(n+1)=2.843068e+003;
n=14; farx(n+1)=1.481978e+002; foe(n+1)=2.414957e+002; krok(n+1)=2.151482e-004; ng(n+1)=1.611202e+003;
n=15; farx(n+1)=1.185668e+002; foe(n+1)=2.325576e+002; krok(n+1)=3.683227e-003; ng(n+1)=3.151004e+003;
n=16; farx(n+1)=8.541296e+001; foe(n+1)=2.104793e+002; krok(n+1)=3.625910e-003; ng(n+1)=4.277511e+003;
n=17; farx(n+1)=6.048726e+001; foe(n+1)=1.668435e+002; krok(n+1)=5.478088e-003; ng(n+1)=2.190649e+003;
n=18; farx(n+1)=6.157698e+001; foe(n+1)=1.444069e+002; krok(n+1)=5.720452e-004; ng(n+1)=5.288077e+003;
n=19; farx(n+1)=3.649918e+001; foe(n+1)=1.012125e+002; krok(n+1)=2.604174e-003; ng(n+1)=5.957559e+003;
n=20; farx(n+1)=4.111293e+001; foe(n+1)=8.792803e+001; krok(n+1)=3.781330e-004; ng(n+1)=1.484134e+003;
n=21; farx(n+1)=3.516557e+001; foe(n+1)=7.915311e+001; krok(n+1)=5.852382e-003; ng(n+1)=7.247126e+002;
n=22; farx(n+1)=3.495740e+001; foe(n+1)=7.529499e+001; krok(n+1)=3.678122e-004; ng(n+1)=2.259551e+003;
n=23; farx(n+1)=3.399600e+001; foe(n+1)=7.473774e+001; krok(n+1)=1.661929e-004; ng(n+1)=1.836359e+003;
n=24; farx(n+1)=3.422373e+001; foe(n+1)=7.401800e+001; krok(n+1)=4.576195e-004; ng(n+1)=1.955944e+003;
n=25; farx(n+1)=3.099127e+001; foe(n+1)=7.037872e+001; krok(n+1)=3.157424e-003; ng(n+1)=2.687824e+003;
%odnowa zmiennej metryki
n=26; farx(n+1)=3.203808e+001; foe(n+1)=6.755877e+001; krok(n+1)=9.217968e-006; ng(n+1)=2.471079e+003;
n=27; farx(n+1)=3.320267e+001; foe(n+1)=6.409015e+001; krok(n+1)=1.197415e-005; ng(n+1)=2.658607e+003;
n=28; farx(n+1)=3.163604e+001; foe(n+1)=5.983111e+001; krok(n+1)=9.487191e-005; ng(n+1)=1.075389e+003;
n=29; farx(n+1)=1.708854e+001; foe(n+1)=4.521336e+001; krok(n+1)=9.497806e-004; ng(n+1)=1.051537e+003;
n=30; farx(n+1)=1.182828e+001; foe(n+1)=3.215789e+001; krok(n+1)=4.297012e-004; ng(n+1)=2.284552e+003;
n=31; farx(n+1)=9.873602e+000; foe(n+1)=2.792269e+001; krok(n+1)=2.933115e-004; ng(n+1)=3.095690e+003;
n=32; farx(n+1)=8.911736e+000; foe(n+1)=2.499792e+001; krok(n+1)=3.095029e-004; ng(n+1)=1.436870e+003;
n=33; farx(n+1)=8.226733e+000; foe(n+1)=2.165629e+001; krok(n+1)=1.024167e-003; ng(n+1)=3.329045e+003;
n=34; farx(n+1)=6.603688e+000; foe(n+1)=1.831762e+001; krok(n+1)=1.338974e-003; ng(n+1)=2.823663e+002;
n=35; farx(n+1)=5.699777e+000; foe(n+1)=1.591254e+001; krok(n+1)=3.595838e-003; ng(n+1)=1.818728e+003;
n=36; farx(n+1)=5.408912e+000; foe(n+1)=1.520033e+001; krok(n+1)=1.548092e-003; ng(n+1)=1.744289e+003;
n=37; farx(n+1)=4.851082e+000; foe(n+1)=1.242443e+001; krok(n+1)=6.065270e-003; ng(n+1)=9.294380e+002;
n=38; farx(n+1)=3.626843e+000; foe(n+1)=1.041070e+001; krok(n+1)=4.539152e-003; ng(n+1)=5.195864e+002;
n=39; farx(n+1)=3.183377e+000; foe(n+1)=8.839907e+000; krok(n+1)=1.473291e-002; ng(n+1)=3.857661e+002;
n=40; farx(n+1)=2.871533e+000; foe(n+1)=7.926289e+000; krok(n+1)=5.557598e-003; ng(n+1)=7.568591e+002;
n=41; farx(n+1)=2.649378e+000; foe(n+1)=7.279346e+000; krok(n+1)=7.032104e-003; ng(n+1)=2.810223e+002;
n=42; farx(n+1)=2.726279e+000; foe(n+1)=6.494882e+000; krok(n+1)=2.439969e-002; ng(n+1)=6.240968e+002;
n=43; farx(n+1)=2.628681e+000; foe(n+1)=5.983871e+000; krok(n+1)=8.443488e-003; ng(n+1)=5.131796e+002;
n=44; farx(n+1)=2.627120e+000; foe(n+1)=5.665388e+000; krok(n+1)=1.064021e-002; ng(n+1)=3.911415e+002;
n=45; farx(n+1)=2.508971e+000; foe(n+1)=5.496849e+000; krok(n+1)=2.617232e-002; ng(n+1)=1.946634e+002;
n=46; farx(n+1)=2.498066e+000; foe(n+1)=5.398497e+000; krok(n+1)=2.369912e-002; ng(n+1)=4.492867e+002;
n=47; farx(n+1)=2.453205e+000; foe(n+1)=5.154385e+000; krok(n+1)=2.502768e-002; ng(n+1)=2.292209e+002;
n=48; farx(n+1)=2.453712e+000; foe(n+1)=5.010227e+000; krok(n+1)=6.306675e-002; ng(n+1)=2.848805e+002;
n=49; farx(n+1)=2.408536e+000; foe(n+1)=4.831605e+000; krok(n+1)=4.879939e-002; ng(n+1)=2.993863e+002;
n=50; farx(n+1)=2.295851e+000; foe(n+1)=4.607923e+000; krok(n+1)=5.184392e-002; ng(n+1)=4.053214e+002;
%odnowa zmiennej metryki
n=51; farx(n+1)=2.257625e+000; foe(n+1)=4.517806e+000; krok(n+1)=1.372904e-005; ng(n+1)=3.647531e+002;
n=52; farx(n+1)=2.264402e+000; foe(n+1)=4.459566e+000; krok(n+1)=1.109569e-005; ng(n+1)=2.924666e+002;
n=53; farx(n+1)=2.265460e+000; foe(n+1)=4.417615e+000; krok(n+1)=2.517331e-004; ng(n+1)=6.565985e+001;
n=54; farx(n+1)=2.309826e+000; foe(n+1)=4.362101e+000; krok(n+1)=2.315391e-004; ng(n+1)=7.094270e+001;
n=55; farx(n+1)=2.211980e+000; foe(n+1)=4.239476e+000; krok(n+1)=2.120860e-003; ng(n+1)=3.913558e+001;
n=56; farx(n+1)=2.169950e+000; foe(n+1)=4.196126e+000; krok(n+1)=1.970836e-003; ng(n+1)=5.568730e+001;
n=57; farx(n+1)=2.032845e+000; foe(n+1)=4.070927e+000; krok(n+1)=7.517453e-003; ng(n+1)=1.083939e+002;
n=58; farx(n+1)=1.880282e+000; foe(n+1)=3.858323e+000; krok(n+1)=1.033570e-002; ng(n+1)=2.338610e+002;
n=59; farx(n+1)=1.857998e+000; foe(n+1)=3.808478e+000; krok(n+1)=3.442236e-003; ng(n+1)=1.005389e+002;
n=60; farx(n+1)=1.796790e+000; foe(n+1)=3.720906e+000; krok(n+1)=5.414124e-003; ng(n+1)=1.852741e+002;
n=61; farx(n+1)=1.749442e+000; foe(n+1)=3.614494e+000; krok(n+1)=7.100804e-003; ng(n+1)=4.580562e+002;
n=62; farx(n+1)=1.765528e+000; foe(n+1)=3.545489e+000; krok(n+1)=8.053672e-003; ng(n+1)=4.632797e+002;
n=63; farx(n+1)=1.725459e+000; foe(n+1)=3.481975e+000; krok(n+1)=1.019133e-002; ng(n+1)=1.838968e+002;
n=64; farx(n+1)=1.735370e+000; foe(n+1)=3.361085e+000; krok(n+1)=2.900728e-002; ng(n+1)=1.668197e+002;
n=65; farx(n+1)=1.683848e+000; foe(n+1)=3.138993e+000; krok(n+1)=6.079450e-002; ng(n+1)=2.197292e+002;
n=66; farx(n+1)=1.643426e+000; foe(n+1)=3.084057e+000; krok(n+1)=8.202462e-003; ng(n+1)=1.755472e+002;
n=67; farx(n+1)=1.597014e+000; foe(n+1)=3.020035e+000; krok(n+1)=4.109961e-002; ng(n+1)=1.463362e+002;
n=68; farx(n+1)=1.589493e+000; foe(n+1)=2.986170e+000; krok(n+1)=5.770731e-003; ng(n+1)=3.643159e+002;
n=69; farx(n+1)=1.519266e+000; foe(n+1)=2.841418e+000; krok(n+1)=1.329492e-001; ng(n+1)=1.950548e+002;
n=70; farx(n+1)=1.502448e+000; foe(n+1)=2.820141e+000; krok(n+1)=1.131031e-002; ng(n+1)=2.549984e+002;
n=71; farx(n+1)=1.465930e+000; foe(n+1)=2.769917e+000; krok(n+1)=5.576355e-002; ng(n+1)=2.380416e+002;
n=72; farx(n+1)=1.410560e+000; foe(n+1)=2.708871e+000; krok(n+1)=4.000365e-002; ng(n+1)=1.064272e+002;
n=73; farx(n+1)=1.367146e+000; foe(n+1)=2.605260e+000; krok(n+1)=5.286105e-002; ng(n+1)=2.846749e+002;
n=74; farx(n+1)=1.295458e+000; foe(n+1)=2.519250e+000; krok(n+1)=1.116954e-001; ng(n+1)=1.168748e+002;
n=75; farx(n+1)=1.270812e+000; foe(n+1)=2.483163e+000; krok(n+1)=1.893212e-002; ng(n+1)=1.883774e+002;
%odnowa zmiennej metryki
n=76; farx(n+1)=1.270121e+000; foe(n+1)=2.466251e+000; krok(n+1)=2.900558e-006; ng(n+1)=3.047804e+002;
n=77; farx(n+1)=1.269642e+000; foe(n+1)=2.463718e+000; krok(n+1)=9.479621e-006; ng(n+1)=8.087752e+001;
n=78; farx(n+1)=1.270746e+000; foe(n+1)=2.450517e+000; krok(n+1)=1.681794e-004; ng(n+1)=4.270844e+001;
n=79; farx(n+1)=1.272132e+000; foe(n+1)=2.438626e+000; krok(n+1)=1.123689e-004; ng(n+1)=5.075239e+001;
n=80; farx(n+1)=1.275284e+000; foe(n+1)=2.428253e+000; krok(n+1)=3.355212e-004; ng(n+1)=2.287680e+001;
n=81; farx(n+1)=1.281208e+000; foe(n+1)=2.414971e+000; krok(n+1)=1.106947e-003; ng(n+1)=1.691982e+001;
n=82; farx(n+1)=1.282055e+000; foe(n+1)=2.404194e+000; krok(n+1)=2.237201e-003; ng(n+1)=1.093334e+001;
n=83; farx(n+1)=1.287162e+000; foe(n+1)=2.383341e+000; krok(n+1)=5.478088e-003; ng(n+1)=1.002027e+001;
n=84; farx(n+1)=1.319516e+000; foe(n+1)=2.347757e+000; krok(n+1)=1.856226e-002; ng(n+1)=2.382693e+001;
n=85; farx(n+1)=1.326701e+000; foe(n+1)=2.318027e+000; krok(n+1)=1.142218e-002; ng(n+1)=2.062806e+001;
n=86; farx(n+1)=1.325698e+000; foe(n+1)=2.289288e+000; krok(n+1)=2.378798e-002; ng(n+1)=2.402864e+002;
n=87; farx(n+1)=1.319152e+000; foe(n+1)=2.267776e+000; krok(n+1)=8.029022e-003; ng(n+1)=1.202714e+002;
n=88; farx(n+1)=1.300907e+000; foe(n+1)=2.233029e+000; krok(n+1)=3.153338e-002; ng(n+1)=1.206974e+002;
n=89; farx(n+1)=1.257340e+000; foe(n+1)=2.173935e+000; krok(n+1)=6.659479e-002; ng(n+1)=1.611673e+002;
n=90; farx(n+1)=1.268544e+000; foe(n+1)=2.156620e+000; krok(n+1)=1.000091e-002; ng(n+1)=1.038290e+002;
n=91; farx(n+1)=1.285563e+000; foe(n+1)=2.133024e+000; krok(n+1)=1.214548e-002; ng(n+1)=1.687920e+002;
n=92; farx(n+1)=1.326323e+000; foe(n+1)=2.077987e+000; krok(n+1)=4.785362e-002; ng(n+1)=2.118487e+002;
n=93; farx(n+1)=1.342917e+000; foe(n+1)=2.043004e+000; krok(n+1)=2.399905e-002; ng(n+1)=2.966461e+002;
n=94; farx(n+1)=1.365912e+000; foe(n+1)=2.002568e+000; krok(n+1)=2.366103e-002; ng(n+1)=2.799932e+002;
n=95; farx(n+1)=1.380220e+000; foe(n+1)=1.954183e+000; krok(n+1)=2.788178e-002; ng(n+1)=3.418793e+002;
n=96; farx(n+1)=1.379697e+000; foe(n+1)=1.937690e+000; krok(n+1)=1.650423e-002; ng(n+1)=2.771825e+002;
n=97; farx(n+1)=1.374606e+000; foe(n+1)=1.890133e+000; krok(n+1)=1.640862e-002; ng(n+1)=3.546529e+002;
n=98; farx(n+1)=1.360907e+000; foe(n+1)=1.852256e+000; krok(n+1)=6.260022e-002; ng(n+1)=1.439957e+002;
n=99; farx(n+1)=1.349004e+000; foe(n+1)=1.819824e+000; krok(n+1)=3.045281e-002; ng(n+1)=3.471464e+002;
n=100; farx(n+1)=1.347553e+000; foe(n+1)=1.799588e+000; krok(n+1)=1.759944e-002; ng(n+1)=3.010262e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
