%uczenie predyktora oe
clear all;
n=0; farx(n+1)=4.848971e+003; foe(n+1)=4.878504e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=3.865664e+003; foe(n+1)=3.904657e+003; krok(n+1)=3.325065e-004; ng(n+1)=1.957654e+003;
n=2; farx(n+1)=6.758217e+002; foe(n+1)=7.764179e+002; krok(n+1)=6.728198e-003; ng(n+1)=4.376801e+002;
n=3; farx(n+1)=6.892455e+002; foe(n+1)=7.365603e+002; krok(n+1)=5.394830e-005; ng(n+1)=1.864796e+003;
n=4; farx(n+1)=8.335622e+002; foe(n+1)=7.243701e+002; krok(n+1)=1.486749e-003; ng(n+1)=1.792367e+003;
n=5; farx(n+1)=7.681802e+002; foe(n+1)=6.704841e+002; krok(n+1)=9.150227e-003; ng(n+1)=9.745265e+002;
n=6; farx(n+1)=7.679435e+002; foe(n+1)=6.441060e+002; krok(n+1)=8.475198e-002; ng(n+1)=7.528210e+002;
n=7; farx(n+1)=6.981699e+002; foe(n+1)=6.197127e+002; krok(n+1)=9.513510e-002; ng(n+1)=7.441985e+002;
n=8; farx(n+1)=3.166409e+002; foe(n+1)=4.438860e+002; krok(n+1)=7.536472e-001; ng(n+1)=7.168008e+002;
n=9; farx(n+1)=3.383333e+002; foe(n+1)=4.290027e+002; krok(n+1)=3.307424e-001; ng(n+1)=1.190479e+003;
n=10; farx(n+1)=2.057252e+002; foe(n+1)=3.426113e+002; krok(n+1)=1.492366e+000; ng(n+1)=8.922921e+002;
n=11; farx(n+1)=1.939444e+002; foe(n+1)=3.349635e+002; krok(n+1)=1.015974e-001; ng(n+1)=6.747975e+002;
n=12; farx(n+1)=1.868915e+002; foe(n+1)=3.299202e+002; krok(n+1)=2.676098e-001; ng(n+1)=7.695683e+002;
n=13; farx(n+1)=1.621236e+002; foe(n+1)=3.138147e+002; krok(n+1)=8.260442e-002; ng(n+1)=5.887518e+002;
n=14; farx(n+1)=4.512892e+001; foe(n+1)=2.547623e+002; krok(n+1)=1.249330e+000; ng(n+1)=2.851609e+002;
n=15; farx(n+1)=4.205651e+001; foe(n+1)=2.532288e+002; krok(n+1)=3.683227e-003; ng(n+1)=3.050617e+003;
n=16; farx(n+1)=3.772231e+001; foe(n+1)=2.411401e+002; krok(n+1)=4.852216e-002; ng(n+1)=5.573360e+003;
n=17; farx(n+1)=1.778333e+001; foe(n+1)=1.365769e+002; krok(n+1)=1.892883e-001; ng(n+1)=8.488694e+003;
n=18; farx(n+1)=2.062102e+001; foe(n+1)=1.311759e+002; krok(n+1)=1.545805e-001; ng(n+1)=4.765658e+003;
n=19; farx(n+1)=2.092950e+001; foe(n+1)=1.116607e+002; krok(n+1)=3.916031e-001; ng(n+1)=4.272602e+003;
n=20; farx(n+1)=2.068590e+001; foe(n+1)=1.073874e+002; krok(n+1)=2.543102e-001; ng(n+1)=2.070773e+003;
n=21; farx(n+1)=1.962668e+001; foe(n+1)=1.006633e+002; krok(n+1)=1.645470e+000; ng(n+1)=1.418036e+003;
n=22; farx(n+1)=1.432895e+001; foe(n+1)=9.291446e+001; krok(n+1)=3.083832e+000; ng(n+1)=5.530521e+002;
n=23; farx(n+1)=1.354538e+001; foe(n+1)=9.198478e+001; krok(n+1)=5.045340e-001; ng(n+1)=5.904083e+002;
n=24; farx(n+1)=1.248435e+001; foe(n+1)=8.806783e+001; krok(n+1)=2.034481e+000; ng(n+1)=6.547057e+002;
n=25; farx(n+1)=1.124285e+001; foe(n+1)=8.667776e+001; krok(n+1)=4.158012e-001; ng(n+1)=6.045959e+002;
%odnowa zmiennej metryki
n=26; farx(n+1)=1.131956e+001; foe(n+1)=8.627928e+001; krok(n+1)=1.598501e-006; ng(n+1)=1.122913e+003;
n=27; farx(n+1)=1.102141e+001; foe(n+1)=8.581308e+001; krok(n+1)=4.095955e-005; ng(n+1)=2.618875e+002;
n=28; farx(n+1)=1.164556e+001; foe(n+1)=8.519306e+001; krok(n+1)=1.858436e-004; ng(n+1)=1.207196e+002;
n=29; farx(n+1)=1.245255e+001; foe(n+1)=8.393805e+001; krok(n+1)=6.497382e-004; ng(n+1)=1.076805e+002;
n=30; farx(n+1)=1.206150e+001; foe(n+1)=8.281044e+001; krok(n+1)=2.240817e-003; ng(n+1)=1.660399e+002;
n=31; farx(n+1)=1.182583e+001; foe(n+1)=8.250560e+001; krok(n+1)=2.818678e-003; ng(n+1)=1.729872e+002;
n=32; farx(n+1)=1.167526e+001; foe(n+1)=8.231030e+001; krok(n+1)=3.329740e-002; ng(n+1)=3.581250e+002;
n=33; farx(n+1)=1.125885e+001; foe(n+1)=8.173118e+001; krok(n+1)=1.138542e+000; ng(n+1)=3.867134e+002;
n=34; farx(n+1)=1.133324e+001; foe(n+1)=8.158454e+001; krok(n+1)=1.256573e+000; ng(n+1)=1.717973e+002;
n=35; farx(n+1)=1.133878e+001; foe(n+1)=8.157683e+001; krok(n+1)=8.704303e-001; ng(n+1)=8.629821e+001;
n=36; farx(n+1)=1.131691e+001; foe(n+1)=8.157513e+001; krok(n+1)=8.733373e-001; ng(n+1)=3.342417e+001;
n=37; farx(n+1)=1.130505e+001; foe(n+1)=8.157487e+001; krok(n+1)=1.601772e+000; ng(n+1)=5.870307e+000;
n=38; farx(n+1)=1.130457e+001; foe(n+1)=8.157480e+001; krok(n+1)=1.254669e+000; ng(n+1)=4.040288e+000;
n=39; farx(n+1)=1.130360e+001; foe(n+1)=8.157480e+001; krok(n+1)=1.021678e+000; ng(n+1)=2.529414e+000;
n=40; farx(n+1)=1.130421e+001; foe(n+1)=8.157480e+001; krok(n+1)=1.250289e+000; ng(n+1)=4.735713e-001;
n=41; farx(n+1)=1.130421e+001; foe(n+1)=8.157480e+001; krok(n+1)=2.849371e-005; ng(n+1)=3.513358e-002;
n=42; farx(n+1)=1.130421e+001; foe(n+1)=8.157480e+001; krok(n+1)=6.972057e-006; ng(n+1)=3.513257e-002;
n=43; farx(n+1)=1.130421e+001; foe(n+1)=8.157480e+001; krok(n+1)=1.422178e-008; ng(n+1)=3.513232e-002;
n=44; farx(n+1)=1.130421e+001; foe(n+1)=8.157480e+001; krok(n+1)=6.706337e-009; ng(n+1)=3.513232e-002;
n=45; farx(n+1)=1.130421e+001; foe(n+1)=8.157480e+001; krok(n+1)=6.530390e-010; ng(n+1)=3.513232e-002;
 % z造 kierunek w metodzie zm - odnowa 
n=46; farx(n+1)=1.130421e+001; foe(n+1)=8.157480e+001; krok(n+1)=1.515894e-006; ng(n+1)=3.513232e-002;
n=47; farx(n+1)=1.130421e+001; foe(n+1)=8.157480e+001; krok(n+1)=2.051396e-005; ng(n+1)=1.245322e-002;
n=48; farx(n+1)=1.130423e+001; foe(n+1)=8.157480e+001; krok(n+1)=1.222681e-004; ng(n+1)=3.640171e-003;
n=49; farx(n+1)=1.130424e+001; foe(n+1)=8.157480e+001; krok(n+1)=7.598249e-004; ng(n+1)=1.841462e-003;
n=50; farx(n+1)=1.130423e+001; foe(n+1)=8.157480e+001; krok(n+1)=8.625805e-003; ng(n+1)=1.058264e-003;
%odnowa zmiennej metryki
n=51; farx(n+1)=1.130423e+001; foe(n+1)=8.157480e+001; krok(n+1)=3.602457e-006; ng(n+1)=8.298299e-004;
n=52; farx(n+1)=1.130424e+001; foe(n+1)=8.157480e+001; krok(n+1)=1.846469e-003; ng(n+1)=1.396146e-003;
n=53; farx(n+1)=1.130424e+001; foe(n+1)=8.157480e+001; krok(n+1)=4.937118e-005; ng(n+1)=2.155740e-003;
n=54; farx(n+1)=1.130424e+001; foe(n+1)=8.157480e+001; krok(n+1)=5.581911e-005; ng(n+1)=1.896685e-003;
n=55; farx(n+1)=1.130423e+001; foe(n+1)=8.157480e+001; krok(n+1)=3.251257e-003; ng(n+1)=6.931584e-004;
n=56; farx(n+1)=1.130424e+001; foe(n+1)=8.157480e+001; krok(n+1)=6.480489e-003; ng(n+1)=9.081146e-004;
n=57; farx(n+1)=1.130424e+001; foe(n+1)=8.157480e+001; krok(n+1)=1.458856e-005; ng(n+1)=4.063604e-004;
n=58; farx(n+1)=1.130424e+001; foe(n+1)=8.157480e+001; krok(n+1)=1.448606e-005; ng(n+1)=4.063440e-004;
n=59; farx(n+1)=1.130424e+001; foe(n+1)=8.157480e+001; krok(n+1)=6.870450e-006; ng(n+1)=4.063381e-004;
n=60; farx(n+1)=1.130424e+001; foe(n+1)=8.157480e+001; krok(n+1)=2.066738e-006; ng(n+1)=4.063353e-004;
n=61; farx(n+1)=1.130424e+001; foe(n+1)=8.157480e+001; krok(n+1)=5.827349e-006; ng(n+1)=4.063344e-004;
 % z造 kierunek w metodzie zm - odnowa 
n=62; farx(n+1)=1.130424e+001; foe(n+1)=8.157480e+001; krok(n+1)=2.670633e-007; ng(n+1)=4.063320e-004;
n=63; farx(n+1)=1.130424e+001; foe(n+1)=8.157480e+001; krok(n+1)=1.314101e-005; ng(n+1)=3.176170e-004;
n=64; farx(n+1)=1.130424e+001; foe(n+1)=8.157480e+001; krok(n+1)=1.657723e-005; ng(n+1)=3.287653e-004;
n=65; farx(n+1)=1.130424e+001; foe(n+1)=8.157480e+001; krok(n+1)=1.290553e-005; ng(n+1)=3.266820e-004;
n=66; farx(n+1)=1.130424e+001; foe(n+1)=8.157480e+001; krok(n+1)=1.208433e-005; ng(n+1)=3.266339e-004;
n=67; farx(n+1)=1.130424e+001; foe(n+1)=8.157480e+001; krok(n+1)=1.042976e-009; ng(n+1)=3.266700e-004;
 % z造 kierunek w metodzie zm - odnowa 
n=68; farx(n+1)=1.130424e+001; foe(n+1)=8.157480e+001; krok(n+1)=1.925174e-011; ng(n+1)=3.266700e-004;
 % z造 kierunek w metodzie zm - odnowa 
 % z造 kierunek w metodzie zm po wykonaniu odnowy

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
