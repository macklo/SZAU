%uczenie predyktora oe
clear all;
n=0; farx(n+1)=4.683471e+003; foe(n+1)=4.639554e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=2.796787e+003; foe(n+1)=2.835698e+003; krok(n+1)=4.854552e-004; ng(n+1)=5.767495e+003;
n=2; farx(n+1)=1.107311e+003; foe(n+1)=9.586308e+002; krok(n+1)=2.289488e-003; ng(n+1)=2.709601e+003;
n=3; farx(n+1)=1.250928e+003; foe(n+1)=5.779887e+002; krok(n+1)=2.419195e-004; ng(n+1)=6.850123e+003;
n=4; farx(n+1)=1.495709e+003; foe(n+1)=5.305001e+002; krok(n+1)=6.946998e-004; ng(n+1)=3.365594e+003;
n=5; farx(n+1)=9.348596e+002; foe(n+1)=4.396071e+002; krok(n+1)=6.543079e-003; ng(n+1)=5.680762e+002;
n=6; farx(n+1)=5.587937e+002; foe(n+1)=3.489157e+002; krok(n+1)=1.618221e-003; ng(n+1)=2.045180e+003;
n=7; farx(n+1)=4.281859e+002; foe(n+1)=3.242798e+002; krok(n+1)=4.476652e-004; ng(n+1)=1.579486e+003;
n=8; farx(n+1)=3.539493e+002; foe(n+1)=3.073706e+002; krok(n+1)=1.168511e-003; ng(n+1)=1.099950e+003;
n=9; farx(n+1)=3.410442e+002; foe(n+1)=3.021169e+002; krok(n+1)=2.064568e-004; ng(n+1)=1.966060e+003;
n=10; farx(n+1)=2.761092e+002; foe(n+1)=2.923845e+002; krok(n+1)=8.565378e-003; ng(n+1)=3.916893e+002;
n=11; farx(n+1)=2.395694e+002; foe(n+1)=2.880486e+002; krok(n+1)=2.464960e-003; ng(n+1)=1.352273e+003;
n=12; farx(n+1)=1.953902e+002; foe(n+1)=2.804381e+002; krok(n+1)=6.192369e-003; ng(n+1)=1.266106e+003;
n=13; farx(n+1)=1.814494e+002; foe(n+1)=2.767906e+002; krok(n+1)=1.193235e-003; ng(n+1)=1.216502e+003;
n=14; farx(n+1)=1.711696e+002; foe(n+1)=2.714311e+002; krok(n+1)=1.407851e-003; ng(n+1)=1.361308e+003;
n=15; farx(n+1)=1.700764e+002; foe(n+1)=2.706798e+002; krok(n+1)=7.138862e-004; ng(n+1)=1.223058e+003;
n=16; farx(n+1)=1.559520e+002; foe(n+1)=2.673078e+002; krok(n+1)=6.401705e-003; ng(n+1)=1.203758e+003;
n=17; farx(n+1)=1.511184e+002; foe(n+1)=2.548778e+002; krok(n+1)=5.608389e-003; ng(n+1)=1.167411e+003;
n=18; farx(n+1)=1.560429e+002; foe(n+1)=2.412249e+002; krok(n+1)=9.824964e-004; ng(n+1)=2.598560e+003;
n=19; farx(n+1)=1.487404e+002; foe(n+1)=2.287130e+002; krok(n+1)=1.525147e-003; ng(n+1)=2.848506e+003;
n=20; farx(n+1)=1.440233e+002; foe(n+1)=2.264376e+002; krok(n+1)=8.418412e-004; ng(n+1)=7.969968e+002;
n=21; farx(n+1)=1.396972e+002; foe(n+1)=2.176720e+002; krok(n+1)=4.815473e-003; ng(n+1)=6.330049e+002;
n=22; farx(n+1)=1.454670e+002; foe(n+1)=2.052843e+002; krok(n+1)=2.422929e-003; ng(n+1)=2.038901e+003;
n=23; farx(n+1)=1.547554e+002; foe(n+1)=1.950821e+002; krok(n+1)=1.587460e-003; ng(n+1)=3.018244e+003;
n=24; farx(n+1)=1.569529e+002; foe(n+1)=1.934055e+002; krok(n+1)=9.339144e-005; ng(n+1)=2.884549e+003;
n=25; farx(n+1)=1.557008e+002; foe(n+1)=1.922743e+002; krok(n+1)=1.229105e-003; ng(n+1)=3.294242e+003;
%odnowa zmiennej metryki
n=26; farx(n+1)=1.490321e+002; foe(n+1)=1.801977e+002; krok(n+1)=2.746916e-005; ng(n+1)=3.475457e+003;
n=27; farx(n+1)=1.409891e+002; foe(n+1)=1.487957e+002; krok(n+1)=2.509886e-005; ng(n+1)=6.662000e+003;
n=28; farx(n+1)=1.234502e+002; foe(n+1)=1.206285e+002; krok(n+1)=1.022356e-004; ng(n+1)=4.607717e+003;
n=29; farx(n+1)=1.135515e+002; foe(n+1)=1.124957e+002; krok(n+1)=6.541573e-004; ng(n+1)=1.241960e+003;
n=30; farx(n+1)=1.213292e+002; foe(n+1)=9.339424e+001; krok(n+1)=6.694872e-004; ng(n+1)=2.619484e+003;
n=31; farx(n+1)=1.043677e+002; foe(n+1)=8.976127e+001; krok(n+1)=1.130223e-003; ng(n+1)=1.351863e+003;
n=32; farx(n+1)=5.730959e+001; foe(n+1)=6.592598e+001; krok(n+1)=2.187783e-003; ng(n+1)=5.466554e+003;
n=33; farx(n+1)=4.956576e+001; foe(n+1)=5.745686e+001; krok(n+1)=1.207660e-003; ng(n+1)=2.607314e+003;
n=34; farx(n+1)=3.741524e+001; foe(n+1)=4.847981e+001; krok(n+1)=2.543628e-003; ng(n+1)=5.612723e+002;
n=35; farx(n+1)=3.066465e+001; foe(n+1)=4.214245e+001; krok(n+1)=1.099965e-003; ng(n+1)=3.300896e+003;
n=36; farx(n+1)=2.473243e+001; foe(n+1)=3.862528e+001; krok(n+1)=8.351411e-004; ng(n+1)=1.829242e+003;
n=37; farx(n+1)=1.734229e+001; foe(n+1)=3.093177e+001; krok(n+1)=7.459007e-004; ng(n+1)=2.415687e+003;
n=38; farx(n+1)=1.317641e+001; foe(n+1)=2.696913e+001; krok(n+1)=1.955550e-003; ng(n+1)=2.658412e+003;
n=39; farx(n+1)=1.056714e+001; foe(n+1)=2.308692e+001; krok(n+1)=4.101231e-003; ng(n+1)=1.511187e+003;
n=40; farx(n+1)=8.687087e+000; foe(n+1)=1.954528e+001; krok(n+1)=3.248447e-003; ng(n+1)=1.855976e+003;
n=41; farx(n+1)=5.222161e+000; foe(n+1)=1.428160e+001; krok(n+1)=9.010365e-003; ng(n+1)=8.771769e+002;
n=42; farx(n+1)=4.406716e+000; foe(n+1)=1.120559e+001; krok(n+1)=6.399091e-003; ng(n+1)=6.178410e+002;
n=43; farx(n+1)=4.122009e+000; foe(n+1)=1.021812e+001; krok(n+1)=3.128460e-003; ng(n+1)=8.124069e+002;
n=44; farx(n+1)=4.137054e+000; foe(n+1)=1.000143e+001; krok(n+1)=7.648589e-004; ng(n+1)=5.215191e+002;
n=45; farx(n+1)=3.931537e+000; foe(n+1)=9.698943e+000; krok(n+1)=2.750088e-002; ng(n+1)=1.906403e+002;
n=46; farx(n+1)=3.683492e+000; foe(n+1)=8.714332e+000; krok(n+1)=2.667694e-002; ng(n+1)=5.823688e+002;
n=47; farx(n+1)=3.366991e+000; foe(n+1)=8.116613e+000; krok(n+1)=1.297031e-002; ng(n+1)=5.987782e+002;
n=48; farx(n+1)=3.164824e+000; foe(n+1)=7.429650e+000; krok(n+1)=1.825682e-002; ng(n+1)=2.124017e+002;
n=49; farx(n+1)=3.045325e+000; foe(n+1)=7.040617e+000; krok(n+1)=1.269968e-002; ng(n+1)=4.988968e+002;
n=50; farx(n+1)=2.807593e+000; foe(n+1)=6.748726e+000; krok(n+1)=1.532510e-002; ng(n+1)=3.069470e+002;
%odnowa zmiennej metryki
n=51; farx(n+1)=2.806451e+000; foe(n+1)=6.682510e+000; krok(n+1)=1.900886e-005; ng(n+1)=2.800745e+002;
n=52; farx(n+1)=2.814766e+000; foe(n+1)=6.383251e+000; krok(n+1)=7.103937e-005; ng(n+1)=3.061535e+002;
n=53; farx(n+1)=2.717915e+000; foe(n+1)=6.111826e+000; krok(n+1)=2.836970e-004; ng(n+1)=1.522734e+002;
n=54; farx(n+1)=2.717449e+000; foe(n+1)=6.050429e+000; krok(n+1)=3.700724e-005; ng(n+1)=1.782792e+002;
n=55; farx(n+1)=2.521332e+000; foe(n+1)=5.472855e+000; krok(n+1)=5.906887e-003; ng(n+1)=4.593621e+001;
n=56; farx(n+1)=2.325087e+000; foe(n+1)=5.079472e+000; krok(n+1)=1.517118e-002; ng(n+1)=2.822234e+002;
n=57; farx(n+1)=1.976482e+000; foe(n+1)=4.565695e+000; krok(n+1)=4.653602e-003; ng(n+1)=2.324885e+002;
n=58; farx(n+1)=1.770621e+000; foe(n+1)=4.063823e+000; krok(n+1)=3.739948e-003; ng(n+1)=3.538567e+002;
n=59; farx(n+1)=1.584349e+000; foe(n+1)=3.577596e+000; krok(n+1)=3.692938e-003; ng(n+1)=4.452136e+002;
n=60; farx(n+1)=1.522338e+000; foe(n+1)=3.265106e+000; krok(n+1)=3.195712e-003; ng(n+1)=3.808826e+002;
n=61; farx(n+1)=1.499538e+000; foe(n+1)=3.194439e+000; krok(n+1)=1.358387e-003; ng(n+1)=2.199534e+002;
n=62; farx(n+1)=1.453485e+000; foe(n+1)=3.058810e+000; krok(n+1)=3.595838e-003; ng(n+1)=5.323837e+002;
n=63; farx(n+1)=1.420983e+000; foe(n+1)=2.868419e+000; krok(n+1)=8.855578e-003; ng(n+1)=3.883590e+002;
n=64; farx(n+1)=1.413039e+000; foe(n+1)=2.769591e+000; krok(n+1)=1.321526e-002; ng(n+1)=2.688691e+002;
n=65; farx(n+1)=1.381301e+000; foe(n+1)=2.591100e+000; krok(n+1)=3.404228e-002; ng(n+1)=2.057844e+002;
n=66; farx(n+1)=1.364185e+000; foe(n+1)=2.513721e+000; krok(n+1)=8.426649e-003; ng(n+1)=2.825076e+002;
n=67; farx(n+1)=1.361842e+000; foe(n+1)=2.437876e+000; krok(n+1)=2.219272e-002; ng(n+1)=2.206365e+002;
n=68; farx(n+1)=1.347042e+000; foe(n+1)=2.336511e+000; krok(n+1)=2.127270e-002; ng(n+1)=4.595082e+002;
n=69; farx(n+1)=1.342112e+000; foe(n+1)=2.274489e+000; krok(n+1)=2.753897e-002; ng(n+1)=3.385518e+002;
n=70; farx(n+1)=1.358453e+000; foe(n+1)=2.204711e+000; krok(n+1)=2.643052e-002; ng(n+1)=1.679338e+002;
n=71; farx(n+1)=1.367793e+000; foe(n+1)=2.172215e+000; krok(n+1)=5.234463e-002; ng(n+1)=7.631541e+001;
n=72; farx(n+1)=1.387671e+000; foe(n+1)=2.045135e+000; krok(n+1)=1.507961e-001; ng(n+1)=2.103075e+002;
n=73; farx(n+1)=1.399851e+000; foe(n+1)=1.992273e+000; krok(n+1)=4.880471e-002; ng(n+1)=1.908680e+002;
n=74; farx(n+1)=1.385101e+000; foe(n+1)=1.950680e+000; krok(n+1)=9.326940e-002; ng(n+1)=1.926110e+002;
n=75; farx(n+1)=1.351688e+000; foe(n+1)=1.894650e+000; krok(n+1)=3.962827e-002; ng(n+1)=2.894109e+002;
%odnowa zmiennej metryki
n=76; farx(n+1)=1.351236e+000; foe(n+1)=1.883345e+000; krok(n+1)=5.105015e-006; ng(n+1)=2.353934e+002;
n=77; farx(n+1)=1.350404e+000; foe(n+1)=1.875601e+000; krok(n+1)=1.664416e-005; ng(n+1)=1.012187e+002;
n=78; farx(n+1)=1.350955e+000; foe(n+1)=1.865001e+000; krok(n+1)=3.565361e-005; ng(n+1)=8.005947e+001;
n=79; farx(n+1)=1.348767e+000; foe(n+1)=1.844689e+000; krok(n+1)=1.265711e-003; ng(n+1)=2.013764e+001;
n=80; farx(n+1)=1.347295e+000; foe(n+1)=1.840371e+000; krok(n+1)=4.356528e-004; ng(n+1)=2.349744e+001;
n=81; farx(n+1)=1.340784e+000; foe(n+1)=1.829861e+000; krok(n+1)=2.598953e-003; ng(n+1)=2.309943e+001;
n=82; farx(n+1)=1.317592e+000; foe(n+1)=1.792800e+000; krok(n+1)=2.452306e-002; ng(n+1)=4.662195e+001;
n=83; farx(n+1)=1.289810e+000; foe(n+1)=1.761202e+000; krok(n+1)=1.256280e-002; ng(n+1)=2.296521e+002;
n=84; farx(n+1)=1.271537e+000; foe(n+1)=1.729148e+000; krok(n+1)=1.346946e-002; ng(n+1)=2.996070e+002;
n=85; farx(n+1)=1.243922e+000; foe(n+1)=1.677679e+000; krok(n+1)=1.089156e-002; ng(n+1)=2.872432e+002;
n=86; farx(n+1)=1.235104e+000; foe(n+1)=1.649085e+000; krok(n+1)=8.252113e-003; ng(n+1)=1.788919e+002;
n=87; farx(n+1)=1.224005e+000; foe(n+1)=1.616436e+000; krok(n+1)=2.876670e-002; ng(n+1)=7.688393e+001;
n=88; farx(n+1)=1.213949e+000; foe(n+1)=1.605715e+000; krok(n+1)=7.242402e-003; ng(n+1)=9.373748e+001;
n=89; farx(n+1)=1.201074e+000; foe(n+1)=1.591426e+000; krok(n+1)=1.604627e-002; ng(n+1)=1.515257e+002;
n=90; farx(n+1)=1.181185e+000; foe(n+1)=1.566225e+000; krok(n+1)=2.147336e-002; ng(n+1)=1.131711e+002;
n=91; farx(n+1)=1.156797e+000; foe(n+1)=1.544332e+000; krok(n+1)=3.389322e-002; ng(n+1)=2.022641e+002;
n=92; farx(n+1)=1.139018e+000; foe(n+1)=1.527514e+000; krok(n+1)=1.219985e-002; ng(n+1)=2.921089e+002;
n=93; farx(n+1)=1.119536e+000; foe(n+1)=1.488712e+000; krok(n+1)=2.452306e-002; ng(n+1)=1.380640e+002;
n=94; farx(n+1)=1.092431e+000; foe(n+1)=1.437488e+000; krok(n+1)=9.060490e-002; ng(n+1)=4.543342e+001;
n=95; farx(n+1)=1.103293e+000; foe(n+1)=1.417688e+000; krok(n+1)=3.911298e-002; ng(n+1)=9.703506e+001;
n=96; farx(n+1)=1.110765e+000; foe(n+1)=1.377597e+000; krok(n+1)=1.619829e-002; ng(n+1)=2.483863e+002;
n=97; farx(n+1)=1.109373e+000; foe(n+1)=1.358501e+000; krok(n+1)=4.193314e-002; ng(n+1)=2.233829e+002;
n=98; farx(n+1)=1.103449e+000; foe(n+1)=1.347826e+000; krok(n+1)=2.811708e-002; ng(n+1)=2.137767e+002;
n=99; farx(n+1)=1.097001e+000; foe(n+1)=1.318824e+000; krok(n+1)=8.316649e-002; ng(n+1)=1.774240e+002;
n=100; farx(n+1)=1.083090e+000; foe(n+1)=1.281788e+000; krok(n+1)=9.464413e-002; ng(n+1)=1.874634e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
