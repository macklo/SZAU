%uczenie predyktora oe
clear all;
n=0; farx(n+1)=4.550084e+003; foe(n+1)=4.427779e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=2.800008e+003; foe(n+1)=2.629079e+003; krok(n+1)=5.277180e-004; ng(n+1)=5.420750e+003;
n=2; farx(n+1)=1.140973e+003; foe(n+1)=8.642982e+002; krok(n+1)=1.520298e-003; ng(n+1)=4.177801e+003;
n=3; farx(n+1)=1.359795e+003; foe(n+1)=5.493043e+002; krok(n+1)=2.448449e-004; ng(n+1)=6.862253e+003;
n=4; farx(n+1)=1.066305e+003; foe(n+1)=5.304405e+002; krok(n+1)=1.869974e-003; ng(n+1)=5.231926e+002;
n=5; farx(n+1)=6.584118e+002; foe(n+1)=4.123932e+002; krok(n+1)=7.117955e-003; ng(n+1)=1.558618e+003;
n=6; farx(n+1)=5.385380e+002; foe(n+1)=3.814516e+002; krok(n+1)=1.190569e-003; ng(n+1)=1.456459e+003;
n=7; farx(n+1)=2.443560e+002; foe(n+1)=3.049934e+002; krok(n+1)=1.686590e-003; ng(n+1)=1.577265e+003;
n=8; farx(n+1)=1.951591e+002; foe(n+1)=2.897466e+002; krok(n+1)=1.300621e-004; ng(n+1)=2.370244e+003;
n=9; farx(n+1)=1.813171e+002; foe(n+1)=2.837088e+002; krok(n+1)=9.208067e-004; ng(n+1)=2.615699e+003;
n=10; farx(n+1)=1.671068e+002; foe(n+1)=2.760101e+002; krok(n+1)=2.500228e-003; ng(n+1)=1.337304e+003;
n=11; farx(n+1)=9.282447e+001; foe(n+1)=2.361323e+002; krok(n+1)=1.915230e-002; ng(n+1)=7.302825e+002;
n=12; farx(n+1)=8.339428e+001; foe(n+1)=2.319330e+002; krok(n+1)=1.479072e-004; ng(n+1)=2.256886e+003;
n=13; farx(n+1)=8.185742e+001; foe(n+1)=2.307449e+002; krok(n+1)=6.459813e-004; ng(n+1)=3.789938e+003;
n=14; farx(n+1)=5.803037e+001; foe(n+1)=2.051048e+002; krok(n+1)=1.529718e-003; ng(n+1)=3.471001e+003;
n=15; farx(n+1)=5.441167e+001; foe(n+1)=2.028517e+002; krok(n+1)=1.574580e-004; ng(n+1)=5.385092e+003;
n=16; farx(n+1)=4.531913e+001; foe(n+1)=1.968542e+002; krok(n+1)=5.269205e-003; ng(n+1)=6.330898e+003;
n=17; farx(n+1)=3.884379e+001; foe(n+1)=1.919469e+002; krok(n+1)=4.927090e-004; ng(n+1)=6.101422e+003;
n=18; farx(n+1)=3.520220e+001; foe(n+1)=1.866822e+002; krok(n+1)=6.459813e-004; ng(n+1)=3.351234e+003;
n=19; farx(n+1)=2.867083e+001; foe(n+1)=1.727471e+002; krok(n+1)=4.829711e-003; ng(n+1)=2.193403e+003;
n=20; farx(n+1)=2.152890e+001; foe(n+1)=1.528100e+002; krok(n+1)=7.839040e-004; ng(n+1)=1.754652e+003;
n=21; farx(n+1)=1.877977e+001; foe(n+1)=1.414684e+002; krok(n+1)=9.531131e-005; ng(n+1)=8.443593e+003;
n=22; farx(n+1)=1.972628e+001; foe(n+1)=1.298799e+002; krok(n+1)=8.259539e-004; ng(n+1)=7.826407e+003;
n=23; farx(n+1)=2.079401e+001; foe(n+1)=1.187530e+002; krok(n+1)=7.433745e-004; ng(n+1)=1.176373e+004;
n=24; farx(n+1)=2.537864e+001; foe(n+1)=1.087777e+002; krok(n+1)=2.749912e-004; ng(n+1)=5.599143e+003;
n=25; farx(n+1)=2.642585e+001; foe(n+1)=1.028819e+002; krok(n+1)=2.063028e-003; ng(n+1)=2.590988e+003;
%odnowa zmiennej metryki
n=26; farx(n+1)=2.615188e+001; foe(n+1)=1.005207e+002; krok(n+1)=2.488118e-006; ng(n+1)=4.150780e+003;
n=27; farx(n+1)=2.823038e+001; foe(n+1)=8.437404e+001; krok(n+1)=7.603765e-005; ng(n+1)=2.476527e+003;
n=28; farx(n+1)=2.377700e+001; foe(n+1)=6.925142e+001; krok(n+1)=2.235165e-004; ng(n+1)=1.252275e+003;
n=29; farx(n+1)=1.797841e+001; foe(n+1)=5.188964e+001; krok(n+1)=1.084602e-004; ng(n+1)=1.811542e+003;
n=30; farx(n+1)=1.493070e+001; foe(n+1)=3.885641e+001; krok(n+1)=4.689376e-004; ng(n+1)=4.316220e+003;
n=31; farx(n+1)=1.425634e+001; foe(n+1)=3.313092e+001; krok(n+1)=2.900037e-004; ng(n+1)=4.002465e+003;
n=32; farx(n+1)=1.381832e+001; foe(n+1)=3.258746e+001; krok(n+1)=5.718892e-004; ng(n+1)=9.008966e+002;
n=33; farx(n+1)=1.153608e+001; foe(n+1)=3.015552e+001; krok(n+1)=4.375565e-003; ng(n+1)=1.332036e+003;
n=34; farx(n+1)=7.565044e+000; foe(n+1)=2.155231e+001; krok(n+1)=4.150488e-003; ng(n+1)=2.465682e+003;
n=35; farx(n+1)=6.165078e+000; foe(n+1)=1.732280e+001; krok(n+1)=1.369522e-003; ng(n+1)=9.740456e+002;
n=36; farx(n+1)=6.045588e+000; foe(n+1)=1.628472e+001; krok(n+1)=1.879363e-003; ng(n+1)=1.039071e+003;
n=37; farx(n+1)=5.948973e+000; foe(n+1)=1.490571e+001; krok(n+1)=2.564143e-003; ng(n+1)=8.340612e+002;
n=38; farx(n+1)=5.523617e+000; foe(n+1)=1.103056e+001; krok(n+1)=5.915528e-003; ng(n+1)=5.949792e+002;
n=39; farx(n+1)=4.802227e+000; foe(n+1)=7.843485e+000; krok(n+1)=3.595838e-003; ng(n+1)=1.771279e+003;
n=40; farx(n+1)=4.751695e+000; foe(n+1)=7.454455e+000; krok(n+1)=1.882699e-003; ng(n+1)=3.936544e+002;
n=41; farx(n+1)=4.192303e+000; foe(n+1)=6.799733e+000; krok(n+1)=1.610734e-002; ng(n+1)=4.222702e+002;
n=42; farx(n+1)=3.979917e+000; foe(n+1)=6.313655e+000; krok(n+1)=1.316643e-002; ng(n+1)=5.111523e+002;
n=43; farx(n+1)=3.677511e+000; foe(n+1)=5.900588e+000; krok(n+1)=5.631405e-003; ng(n+1)=6.714645e+002;
n=44; farx(n+1)=3.384890e+000; foe(n+1)=5.370408e+000; krok(n+1)=1.773103e-002; ng(n+1)=4.406623e+002;
n=45; farx(n+1)=3.262518e+000; foe(n+1)=5.062933e+000; krok(n+1)=7.321912e-003; ng(n+1)=4.148961e+002;
n=46; farx(n+1)=3.084010e+000; foe(n+1)=4.711129e+000; krok(n+1)=1.825682e-002; ng(n+1)=4.913339e+002;
n=47; farx(n+1)=2.878856e+000; foe(n+1)=4.457638e+000; krok(n+1)=2.580064e-002; ng(n+1)=2.069249e+002;
n=48; farx(n+1)=2.718616e+000; foe(n+1)=4.316392e+000; krok(n+1)=1.482896e-002; ng(n+1)=1.025877e+002;
n=49; farx(n+1)=2.151523e+000; foe(n+1)=3.752611e+000; krok(n+1)=1.261335e-001; ng(n+1)=1.861762e+002;
n=50; farx(n+1)=1.979235e+000; foe(n+1)=3.555396e+000; krok(n+1)=3.172883e-002; ng(n+1)=3.922897e+002;
%odnowa zmiennej metryki
n=51; farx(n+1)=1.977412e+000; foe(n+1)=3.508521e+000; krok(n+1)=1.028980e-005; ng(n+1)=3.435538e+002;
n=52; farx(n+1)=1.983959e+000; foe(n+1)=3.464122e+000; krok(n+1)=2.078166e-005; ng(n+1)=1.863519e+002;
n=53; farx(n+1)=1.985449e+000; foe(n+1)=3.443946e+000; krok(n+1)=4.073759e-005; ng(n+1)=1.040969e+002;
n=54; farx(n+1)=1.945361e+000; foe(n+1)=3.284746e+000; krok(n+1)=1.342085e-003; ng(n+1)=5.887632e+001;
n=55; farx(n+1)=1.932899e+000; foe(n+1)=3.212158e+000; krok(n+1)=7.648589e-004; ng(n+1)=5.243588e+001;
n=56; farx(n+1)=1.875071e+000; foe(n+1)=3.049718e+000; krok(n+1)=7.566741e-003; ng(n+1)=5.723735e+001;
n=57; farx(n+1)=1.673871e+000; foe(n+1)=2.772535e+000; krok(n+1)=8.625805e-003; ng(n+1)=9.577287e+001;
n=58; farx(n+1)=1.607736e+000; foe(n+1)=2.634691e+000; krok(n+1)=1.330026e-003; ng(n+1)=3.330689e+002;
n=59; farx(n+1)=1.599083e+000; foe(n+1)=2.567738e+000; krok(n+1)=1.196180e-002; ng(n+1)=1.880938e+002;
n=60; farx(n+1)=1.560279e+000; foe(n+1)=2.511346e+000; krok(n+1)=6.950337e-003; ng(n+1)=1.456004e+002;
n=61; farx(n+1)=1.484726e+000; foe(n+1)=2.327326e+000; krok(n+1)=6.669234e-003; ng(n+1)=3.044677e+002;
n=62; farx(n+1)=1.479559e+000; foe(n+1)=2.298866e+000; krok(n+1)=1.071180e-002; ng(n+1)=1.669608e+002;
n=63; farx(n+1)=1.509185e+000; foe(n+1)=2.159690e+000; krok(n+1)=4.879939e-002; ng(n+1)=2.695762e+002;
n=64; farx(n+1)=1.514617e+000; foe(n+1)=2.077052e+000; krok(n+1)=2.502768e-002; ng(n+1)=1.743267e+002;
n=65; farx(n+1)=1.524788e+000; foe(n+1)=1.985909e+000; krok(n+1)=1.957572e-002; ng(n+1)=2.887002e+002;
n=66; farx(n+1)=1.539889e+000; foe(n+1)=1.945032e+000; krok(n+1)=1.076348e-002; ng(n+1)=2.804080e+002;
n=67; farx(n+1)=1.556618e+000; foe(n+1)=1.895982e+000; krok(n+1)=3.731451e-002; ng(n+1)=7.918305e+001;
n=68; farx(n+1)=1.533828e+000; foe(n+1)=1.776233e+000; krok(n+1)=7.262643e-002; ng(n+1)=2.568611e+002;
n=69; farx(n+1)=1.502131e+000; foe(n+1)=1.750719e+000; krok(n+1)=1.363659e-002; ng(n+1)=7.233449e+001;
n=70; farx(n+1)=1.457498e+000; foe(n+1)=1.718093e+000; krok(n+1)=3.361391e-002; ng(n+1)=6.271715e+001;
n=71; farx(n+1)=1.390873e+000; foe(n+1)=1.660863e+000; krok(n+1)=2.223039e-002; ng(n+1)=2.435016e+002;
n=72; farx(n+1)=1.337132e+000; foe(n+1)=1.610311e+000; krok(n+1)=3.557944e-002; ng(n+1)=2.357997e+002;
n=73; farx(n+1)=1.285339e+000; foe(n+1)=1.543772e+000; krok(n+1)=5.536470e-002; ng(n+1)=5.731029e+001;
n=74; farx(n+1)=1.258515e+000; foe(n+1)=1.470579e+000; krok(n+1)=9.048247e-002; ng(n+1)=1.962702e+002;
n=75; farx(n+1)=1.239268e+000; foe(n+1)=1.422517e+000; krok(n+1)=3.854743e-002; ng(n+1)=2.921208e+002;
%odnowa zmiennej metryki
n=76; farx(n+1)=1.239106e+000; foe(n+1)=1.418939e+000; krok(n+1)=1.061240e-005; ng(n+1)=9.313637e+001;
n=77; farx(n+1)=1.238883e+000; foe(n+1)=1.417550e+000; krok(n+1)=1.384553e-005; ng(n+1)=5.173483e+001;
n=78; farx(n+1)=1.237700e+000; foe(n+1)=1.413461e+000; krok(n+1)=1.731546e-005; ng(n+1)=6.803886e+001;
n=79; farx(n+1)=1.238073e+000; foe(n+1)=1.387219e+000; krok(n+1)=5.097061e-004; ng(n+1)=3.258788e+001;
n=80; farx(n+1)=1.238859e+000; foe(n+1)=1.379982e+000; krok(n+1)=4.748903e-004; ng(n+1)=2.219628e+001;
n=81; farx(n+1)=1.235116e+000; foe(n+1)=1.376524e+000; krok(n+1)=1.602367e-003; ng(n+1)=1.644054e+001;
n=82; farx(n+1)=1.222793e+000; foe(n+1)=1.367205e+000; krok(n+1)=1.803262e-002; ng(n+1)=1.531827e+001;
n=83; farx(n+1)=1.191367e+000; foe(n+1)=1.346960e+000; krok(n+1)=9.630946e-003; ng(n+1)=1.410293e+001;
n=84; farx(n+1)=1.177337e+000; foe(n+1)=1.333837e+000; krok(n+1)=3.450322e-002; ng(n+1)=1.121988e+002;
n=85; farx(n+1)=1.174868e+000; foe(n+1)=1.319271e+000; krok(n+1)=9.397462e-003; ng(n+1)=4.630411e+001;
n=86; farx(n+1)=1.164160e+000; foe(n+1)=1.306629e+000; krok(n+1)=1.927372e-002; ng(n+1)=7.498125e+001;
n=87; farx(n+1)=1.163678e+000; foe(n+1)=1.282715e+000; krok(n+1)=3.065020e-002; ng(n+1)=1.095847e+002;
n=88; farx(n+1)=1.156005e+000; foe(n+1)=1.264042e+000; krok(n+1)=1.517118e-002; ng(n+1)=1.846695e+002;
n=89; farx(n+1)=1.143052e+000; foe(n+1)=1.250115e+000; krok(n+1)=3.026697e-002; ng(n+1)=1.567772e+002;
n=90; farx(n+1)=1.130026e+000; foe(n+1)=1.237205e+000; krok(n+1)=1.779884e-002; ng(n+1)=8.309468e+001;
n=91; farx(n+1)=1.106027e+000; foe(n+1)=1.212565e+000; krok(n+1)=5.851700e-002; ng(n+1)=1.713146e+002;
n=92; farx(n+1)=1.088889e+000; foe(n+1)=1.185424e+000; krok(n+1)=5.793922e-002; ng(n+1)=1.144435e+002;
n=93; farx(n+1)=1.082254e+000; foe(n+1)=1.170494e+000; krok(n+1)=3.001201e-002; ng(n+1)=1.941841e+002;
n=94; farx(n+1)=1.066465e+000; foe(n+1)=1.139845e+000; krok(n+1)=8.388517e-002; ng(n+1)=1.342323e+002;
n=95; farx(n+1)=1.062309e+000; foe(n+1)=1.117964e+000; krok(n+1)=8.509079e-002; ng(n+1)=1.893241e+002;
n=96; farx(n+1)=1.047833e+000; foe(n+1)=1.088397e+000; krok(n+1)=1.020821e-001; ng(n+1)=2.488248e+002;
n=97; farx(n+1)=1.044840e+000; foe(n+1)=1.058288e+000; krok(n+1)=1.392689e-001; ng(n+1)=1.716339e+002;
n=98; farx(n+1)=1.057101e+000; foe(n+1)=1.031467e+000; krok(n+1)=6.722782e-002; ng(n+1)=1.660005e+002;
n=99; farx(n+1)=1.063473e+000; foe(n+1)=1.011828e+000; krok(n+1)=4.305393e-002; ng(n+1)=3.074513e+002;
n=100; farx(n+1)=1.071774e+000; foe(n+1)=9.998568e-001; krok(n+1)=3.786424e-002; ng(n+1)=1.196987e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
