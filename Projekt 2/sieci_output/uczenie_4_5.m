%uczenie predyktora oe
clear all;
n=0; farx(n+1)=4.780175e+003; foe(n+1)=4.640242e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=2.970683e+003; foe(n+1)=2.947622e+003; krok(n+1)=5.127695e-004; ng(n+1)=3.570163e+003;
n=2; farx(n+1)=1.027649e+003; foe(n+1)=9.403581e+002; krok(n+1)=3.657312e-003; ng(n+1)=1.165646e+003;
n=3; farx(n+1)=1.055655e+003; foe(n+1)=7.227238e+002; krok(n+1)=1.112345e-004; ng(n+1)=4.574301e+003;
n=4; farx(n+1)=1.735419e+003; foe(n+1)=5.579688e+002; krok(n+1)=7.740461e-004; ng(n+1)=4.866576e+003;
n=5; farx(n+1)=1.023928e+003; foe(n+1)=4.313016e+002; krok(n+1)=7.692316e-003; ng(n+1)=7.557971e+002;
n=6; farx(n+1)=8.127985e+002; foe(n+1)=4.042344e+002; krok(n+1)=6.791933e-004; ng(n+1)=1.930184e+003;
n=7; farx(n+1)=5.856048e+002; foe(n+1)=3.818806e+002; krok(n+1)=5.440767e-004; ng(n+1)=2.107624e+003;
n=8; farx(n+1)=4.677447e+002; foe(n+1)=3.683879e+002; krok(n+1)=1.307219e-003; ng(n+1)=2.362028e+003;
n=9; farx(n+1)=4.150407e+002; foe(n+1)=3.621981e+002; krok(n+1)=1.612540e-003; ng(n+1)=1.453748e+003;
n=10; farx(n+1)=3.571098e+002; foe(n+1)=3.555540e+002; krok(n+1)=4.027729e-003; ng(n+1)=8.496387e+002;
n=11; farx(n+1)=3.008085e+002; foe(n+1)=3.464524e+002; krok(n+1)=4.126056e-003; ng(n+1)=7.895546e+002;
n=12; farx(n+1)=2.804541e+002; foe(n+1)=3.412834e+002; krok(n+1)=5.167850e-003; ng(n+1)=1.037719e+003;
n=13; farx(n+1)=3.003773e+002; foe(n+1)=3.343742e+002; krok(n+1)=5.548179e-003; ng(n+1)=1.477025e+003;
n=14; farx(n+1)=3.119452e+002; foe(n+1)=3.148650e+002; krok(n+1)=2.096657e-002; ng(n+1)=1.310707e+003;
n=15; farx(n+1)=3.088336e+002; foe(n+1)=3.057731e+002; krok(n+1)=8.806488e-003; ng(n+1)=8.370943e+002;
n=16; farx(n+1)=2.921546e+002; foe(n+1)=3.041000e+002; krok(n+1)=4.065324e-003; ng(n+1)=4.219907e+002;
n=17; farx(n+1)=2.050279e+002; foe(n+1)=2.831656e+002; krok(n+1)=6.563449e-002; ng(n+1)=8.236071e+002;
n=18; farx(n+1)=1.846302e+002; foe(n+1)=2.620697e+002; krok(n+1)=2.768352e-002; ng(n+1)=1.115059e+003;
n=19; farx(n+1)=1.565159e+002; foe(n+1)=2.479904e+002; krok(n+1)=1.703693e-002; ng(n+1)=1.834438e+003;
n=20; farx(n+1)=1.365667e+002; foe(n+1)=2.403125e+002; krok(n+1)=2.721013e-002; ng(n+1)=1.356653e+003;
n=21; farx(n+1)=3.966805e+001; foe(n+1)=1.670981e+002; krok(n+1)=1.512759e-001; ng(n+1)=2.591840e+003;
n=22; farx(n+1)=4.973845e+001; foe(n+1)=1.545939e+002; krok(n+1)=1.468412e-002; ng(n+1)=1.778368e+003;
n=23; farx(n+1)=5.569496e+001; foe(n+1)=1.401356e+002; krok(n+1)=5.915258e-003; ng(n+1)=3.032779e+003;
n=24; farx(n+1)=5.697717e+001; foe(n+1)=1.241006e+002; krok(n+1)=1.046893e-001; ng(n+1)=4.265621e+003;
n=25; farx(n+1)=3.530801e+001; foe(n+1)=9.045637e+001; krok(n+1)=1.362644e-001; ng(n+1)=1.638293e+003;
%odnowa zmiennej metryki
n=26; farx(n+1)=3.471401e+001; foe(n+1)=8.243758e+001; krok(n+1)=3.168396e-005; ng(n+1)=1.727332e+003;
n=27; farx(n+1)=2.613580e+001; foe(n+1)=6.905317e+001; krok(n+1)=6.491660e-005; ng(n+1)=1.445150e+003;
n=28; farx(n+1)=1.992570e+001; foe(n+1)=5.739156e+001; krok(n+1)=2.967298e-004; ng(n+1)=8.659980e+002;
n=29; farx(n+1)=1.861341e+001; foe(n+1)=5.202157e+001; krok(n+1)=1.046887e-004; ng(n+1)=2.151275e+003;
n=30; farx(n+1)=1.119371e+001; foe(n+1)=3.299204e+001; krok(n+1)=3.795826e-003; ng(n+1)=6.016271e+002;
n=31; farx(n+1)=1.133196e+001; foe(n+1)=3.078160e+001; krok(n+1)=1.751967e-003; ng(n+1)=1.005008e+003;
n=32; farx(n+1)=1.018194e+001; foe(n+1)=2.521057e+001; krok(n+1)=2.339724e-003; ng(n+1)=7.754878e+002;
n=33; farx(n+1)=9.369006e+000; foe(n+1)=2.069497e+001; krok(n+1)=3.207202e-003; ng(n+1)=5.374673e+002;
n=34; farx(n+1)=8.689098e+000; foe(n+1)=1.834360e+001; krok(n+1)=2.338404e-002; ng(n+1)=4.306092e+002;
n=35; farx(n+1)=8.506980e+000; foe(n+1)=1.790864e+001; krok(n+1)=9.222377e-003; ng(n+1)=2.134914e+002;
n=36; farx(n+1)=7.846619e+000; foe(n+1)=1.660559e+001; krok(n+1)=1.423801e-002; ng(n+1)=4.494987e+002;
n=37; farx(n+1)=7.602196e+000; foe(n+1)=1.576615e+001; krok(n+1)=4.857442e-002; ng(n+1)=3.160841e+002;
n=38; farx(n+1)=7.351899e+000; foe(n+1)=1.501384e+001; krok(n+1)=3.276344e-002; ng(n+1)=4.455713e+002;
n=39; farx(n+1)=7.264944e+000; foe(n+1)=1.489998e+001; krok(n+1)=1.142218e-002; ng(n+1)=3.230443e+002;
n=40; farx(n+1)=7.165674e+000; foe(n+1)=1.450656e+001; krok(n+1)=4.086147e-002; ng(n+1)=4.869410e+002;
n=41; farx(n+1)=7.241229e+000; foe(n+1)=1.386042e+001; krok(n+1)=7.660919e-002; ng(n+1)=3.205387e+002;
n=42; farx(n+1)=6.078586e+000; foe(n+1)=1.141045e+001; krok(n+1)=3.372291e-001; ng(n+1)=2.297801e+002;
n=43; farx(n+1)=5.863068e+000; foe(n+1)=1.089631e+001; krok(n+1)=6.864555e-002; ng(n+1)=4.560619e+002;
n=44; farx(n+1)=5.107031e+000; foe(n+1)=9.483009e+000; krok(n+1)=5.065776e-001; ng(n+1)=1.310086e+002;
n=45; farx(n+1)=4.251500e+000; foe(n+1)=8.218149e+000; krok(n+1)=4.112198e-001; ng(n+1)=2.391329e+002;
n=46; farx(n+1)=4.116617e+000; foe(n+1)=7.965388e+000; krok(n+1)=2.921091e-001; ng(n+1)=3.315059e+002;
n=47; farx(n+1)=3.927111e+000; foe(n+1)=7.633379e+000; krok(n+1)=3.691454e-001; ng(n+1)=3.047367e+002;
n=48; farx(n+1)=3.269697e+000; foe(n+1)=7.022322e+000; krok(n+1)=7.011953e-001; ng(n+1)=9.143975e+001;
n=49; farx(n+1)=3.197608e+000; foe(n+1)=6.914372e+000; krok(n+1)=1.434696e-001; ng(n+1)=1.087212e+002;
n=50; farx(n+1)=2.987677e+000; foe(n+1)=6.507575e+000; krok(n+1)=7.203499e-001; ng(n+1)=8.082193e+001;
%odnowa zmiennej metryki
n=51; farx(n+1)=2.978295e+000; foe(n+1)=6.443986e+000; krok(n+1)=1.249822e-005; ng(n+1)=2.607632e+002;
n=52; farx(n+1)=2.982775e+000; foe(n+1)=6.432546e+000; krok(n+1)=8.683747e-005; ng(n+1)=4.490767e+001;
n=53; farx(n+1)=2.983505e+000; foe(n+1)=6.415447e+000; krok(n+1)=3.812868e-004; ng(n+1)=2.123710e+001;
n=54; farx(n+1)=2.973139e+000; foe(n+1)=6.399303e+000; krok(n+1)=1.858107e-004; ng(n+1)=3.275899e+001;
n=55; farx(n+1)=2.875014e+000; foe(n+1)=6.283091e+000; krok(n+1)=1.726346e-003; ng(n+1)=3.017056e+001;
n=56; farx(n+1)=2.794779e+000; foe(n+1)=6.122756e+000; krok(n+1)=3.936758e-003; ng(n+1)=2.837187e+001;
n=57; farx(n+1)=2.658041e+000; foe(n+1)=5.950758e+000; krok(n+1)=1.376894e-002; ng(n+1)=8.661635e+001;
n=58; farx(n+1)=2.570934e+000; foe(n+1)=5.796788e+000; krok(n+1)=3.120433e-002; ng(n+1)=1.513969e+002;
n=59; farx(n+1)=2.517179e+000; foe(n+1)=5.700167e+000; krok(n+1)=2.452306e-002; ng(n+1)=2.716283e+002;
n=60; farx(n+1)=2.481034e+000; foe(n+1)=5.647213e+000; krok(n+1)=1.596372e-002; ng(n+1)=2.456064e+002;
n=61; farx(n+1)=2.459788e+000; foe(n+1)=5.626867e+000; krok(n+1)=1.669856e-002; ng(n+1)=1.945321e+002;
n=62; farx(n+1)=2.446507e+000; foe(n+1)=5.608333e+000; krok(n+1)=6.450159e-003; ng(n+1)=1.905637e+002;
n=63; farx(n+1)=2.429382e+000; foe(n+1)=5.563871e+000; krok(n+1)=2.489395e-002; ng(n+1)=1.005508e+002;
n=64; farx(n+1)=2.353982e+000; foe(n+1)=5.481285e+000; krok(n+1)=4.973429e-002; ng(n+1)=1.249428e+002;
n=65; farx(n+1)=2.272251e+000; foe(n+1)=5.405190e+000; krok(n+1)=4.242564e-002; ng(n+1)=1.335469e+002;
n=66; farx(n+1)=2.222633e+000; foe(n+1)=5.327866e+000; krok(n+1)=9.909413e-002; ng(n+1)=1.704526e+002;
n=67; farx(n+1)=2.103960e+000; foe(n+1)=5.091914e+000; krok(n+1)=2.153023e-001; ng(n+1)=2.702524e+002;
n=68; farx(n+1)=1.967146e+000; foe(n+1)=4.870035e+000; krok(n+1)=7.926233e-001; ng(n+1)=8.070723e+001;
n=69; farx(n+1)=1.857768e+000; foe(n+1)=4.637677e+000; krok(n+1)=5.732413e-001; ng(n+1)=3.577485e+002;
n=70; farx(n+1)=1.803075e+000; foe(n+1)=4.476465e+000; krok(n+1)=5.076613e-001; ng(n+1)=1.604673e+002;
n=71; farx(n+1)=1.748299e+000; foe(n+1)=4.293358e+000; krok(n+1)=2.507212e-001; ng(n+1)=1.821891e+002;
n=72; farx(n+1)=1.719522e+000; foe(n+1)=4.067137e+000; krok(n+1)=1.752988e-001; ng(n+1)=1.462514e+002;
n=73; farx(n+1)=1.688214e+000; foe(n+1)=3.924020e+000; krok(n+1)=2.031949e-001; ng(n+1)=1.769970e+002;
n=74; farx(n+1)=1.665762e+000; foe(n+1)=3.735410e+000; krok(n+1)=4.485036e-001; ng(n+1)=8.025404e+001;
n=75; farx(n+1)=1.628721e+000; foe(n+1)=3.567194e+000; krok(n+1)=3.003510e-001; ng(n+1)=1.978962e+002;
%odnowa zmiennej metryki
n=76; farx(n+1)=1.624057e+000; foe(n+1)=3.515616e+000; krok(n+1)=4.679790e-006; ng(n+1)=3.439903e+002;
n=77; farx(n+1)=1.626372e+000; foe(n+1)=3.492290e+000; krok(n+1)=1.675717e-005; ng(n+1)=1.396975e+002;
n=78; farx(n+1)=1.622589e+000; foe(n+1)=3.475752e+000; krok(n+1)=5.445660e-005; ng(n+1)=6.394959e+001;
n=79; farx(n+1)=1.623700e+000; foe(n+1)=3.461868e+000; krok(n+1)=2.456241e-004; ng(n+1)=3.227765e+001;
n=80; farx(n+1)=1.611987e+000; foe(n+1)=3.424131e+000; krok(n+1)=5.927846e-004; ng(n+1)=3.451555e+001;
n=81; farx(n+1)=1.583292e+000; foe(n+1)=3.283679e+000; krok(n+1)=4.440041e-003; ng(n+1)=5.415560e+001;
n=82; farx(n+1)=1.581676e+000; foe(n+1)=3.237728e+000; krok(n+1)=5.627734e-003; ng(n+1)=2.523042e+002;
n=83; farx(n+1)=1.586360e+000; foe(n+1)=3.118743e+000; krok(n+1)=1.349272e-002; ng(n+1)=4.020816e+002;
n=84; farx(n+1)=1.586893e+000; foe(n+1)=3.034063e+000; krok(n+1)=5.662806e-003; ng(n+1)=2.965062e+002;
n=85; farx(n+1)=1.578606e+000; foe(n+1)=2.977429e+000; krok(n+1)=1.904592e-002; ng(n+1)=3.257888e+002;
n=86; farx(n+1)=1.579337e+000; foe(n+1)=2.967880e+000; krok(n+1)=4.702595e-003; ng(n+1)=3.415949e+002;
n=87; farx(n+1)=1.583162e+000; foe(n+1)=2.933595e+000; krok(n+1)=1.586357e-002; ng(n+1)=2.845179e+002;
n=88; farx(n+1)=1.569983e+000; foe(n+1)=2.884744e+000; krok(n+1)=2.643052e-002; ng(n+1)=2.509108e+002;
n=89; farx(n+1)=1.578793e+000; foe(n+1)=2.864441e+000; krok(n+1)=2.606552e-002; ng(n+1)=1.202122e+002;
n=90; farx(n+1)=1.603665e+000; foe(n+1)=2.818511e+000; krok(n+1)=6.754317e-002; ng(n+1)=1.195552e+002;
n=91; farx(n+1)=1.642896e+000; foe(n+1)=2.724251e+000; krok(n+1)=3.435737e-001; ng(n+1)=1.528491e+002;
n=92; farx(n+1)=1.559290e+000; foe(n+1)=2.596999e+000; krok(n+1)=2.343012e-001; ng(n+1)=2.155685e+002;
n=93; farx(n+1)=1.546208e+000; foe(n+1)=2.564794e+000; krok(n+1)=6.863735e-002; ng(n+1)=1.641010e+002;
n=94; farx(n+1)=1.540838e+000; foe(n+1)=2.456381e+000; krok(n+1)=2.045255e-001; ng(n+1)=2.769494e+002;
n=95; farx(n+1)=1.525993e+000; foe(n+1)=2.341084e+000; krok(n+1)=5.631821e-001; ng(n+1)=1.174254e+002;
n=96; farx(n+1)=1.524352e+000; foe(n+1)=2.331582e+000; krok(n+1)=4.235232e-002; ng(n+1)=2.533213e+002;
n=97; farx(n+1)=1.512167e+000; foe(n+1)=2.275476e+000; krok(n+1)=5.467184e-001; ng(n+1)=1.968078e+002;
n=98; farx(n+1)=1.498442e+000; foe(n+1)=2.238569e+000; krok(n+1)=3.056660e-001; ng(n+1)=1.348587e+002;
n=99; farx(n+1)=1.499997e+000; foe(n+1)=2.212959e+000; krok(n+1)=4.859246e-001; ng(n+1)=8.834148e+001;
n=100; farx(n+1)=1.508013e+000; foe(n+1)=2.199590e+000; krok(n+1)=2.489869e-001; ng(n+1)=1.698205e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
