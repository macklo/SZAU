%uczenie predyktora oe
clear all;
n=0; farx(n+1)=4.775930e+003; foe(n+1)=4.902803e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=3.756565e+003; foe(n+1)=3.813589e+003; krok(n+1)=3.347436e-004; ng(n+1)=4.454465e+003;
n=2; farx(n+1)=9.314595e+002; foe(n+1)=9.305332e+002; krok(n+1)=2.341941e-003; ng(n+1)=2.614033e+003;
n=3; farx(n+1)=1.039420e+003; foe(n+1)=8.263300e+002; krok(n+1)=1.999716e-004; ng(n+1)=3.580748e+003;
n=4; farx(n+1)=9.992456e+002; foe(n+1)=7.773000e+002; krok(n+1)=1.730220e-003; ng(n+1)=1.223290e+003;
n=5; farx(n+1)=6.719633e+002; foe(n+1)=7.046475e+002; krok(n+1)=5.440767e-004; ng(n+1)=1.902189e+003;
n=6; farx(n+1)=1.156559e+002; foe(n+1)=2.986172e+002; krok(n+1)=3.888965e-003; ng(n+1)=3.271038e+003;
n=7; farx(n+1)=1.041528e+002; foe(n+1)=2.928735e+002; krok(n+1)=1.535151e-005; ng(n+1)=4.367544e+003;
n=8; farx(n+1)=9.233331e+001; foe(n+1)=2.857048e+002; krok(n+1)=9.481841e-004; ng(n+1)=4.565219e+003;
n=9; farx(n+1)=7.930496e+001; foe(n+1)=2.565792e+002; krok(n+1)=1.985787e-003; ng(n+1)=5.476576e+003;
n=10; farx(n+1)=7.712460e+001; foe(n+1)=2.543240e+002; krok(n+1)=1.912125e-004; ng(n+1)=3.504870e+003;
n=11; farx(n+1)=7.306600e+001; foe(n+1)=2.497563e+002; krok(n+1)=2.141893e-004; ng(n+1)=3.046132e+003;
n=12; farx(n+1)=2.424609e+001; foe(n+1)=1.360846e+002; krok(n+1)=9.428457e-003; ng(n+1)=1.889698e+003;
n=13; farx(n+1)=2.453330e+001; foe(n+1)=1.337849e+002; krok(n+1)=2.656342e-005; ng(n+1)=4.777878e+003;
n=14; farx(n+1)=2.603191e+001; foe(n+1)=1.322197e+002; krok(n+1)=2.045351e-004; ng(n+1)=6.416460e+003;
n=15; farx(n+1)=2.523524e+001; foe(n+1)=1.294889e+002; krok(n+1)=1.050435e-003; ng(n+1)=4.837509e+003;
n=16; farx(n+1)=2.467966e+001; foe(n+1)=1.284751e+002; krok(n+1)=1.413318e-004; ng(n+1)=4.490334e+003;
n=17; farx(n+1)=2.729167e+001; foe(n+1)=1.156428e+002; krok(n+1)=2.348414e-003; ng(n+1)=5.526828e+003;
n=18; farx(n+1)=3.201621e+001; foe(n+1)=1.117009e+002; krok(n+1)=7.559922e-004; ng(n+1)=4.732561e+003;
n=19; farx(n+1)=2.798032e+001; foe(n+1)=1.072609e+002; krok(n+1)=2.855949e-003; ng(n+1)=3.985552e+003;
n=20; farx(n+1)=2.664565e+001; foe(n+1)=1.027181e+002; krok(n+1)=3.870231e-004; ng(n+1)=7.610366e+003;
n=21; farx(n+1)=2.751695e+001; foe(n+1)=9.850894e+001; krok(n+1)=2.586841e-003; ng(n+1)=2.853165e+003;
n=22; farx(n+1)=2.551152e+001; foe(n+1)=8.687471e+001; krok(n+1)=8.360316e-003; ng(n+1)=2.951811e+003;
n=23; farx(n+1)=2.594389e+001; foe(n+1)=8.339112e+001; krok(n+1)=2.359135e-003; ng(n+1)=2.804863e+003;
n=24; farx(n+1)=2.920845e+001; foe(n+1)=7.777432e+001; krok(n+1)=2.701093e-003; ng(n+1)=7.758703e+003;
n=25; farx(n+1)=2.839256e+001; foe(n+1)=7.555513e+001; krok(n+1)=9.816978e-003; ng(n+1)=7.369612e+003;
%odnowa zmiennej metryki
n=26; farx(n+1)=2.851678e+001; foe(n+1)=7.310968e+001; krok(n+1)=1.368547e-006; ng(n+1)=6.035053e+003;
n=27; farx(n+1)=2.537840e+001; foe(n+1)=6.446070e+001; krok(n+1)=6.596013e-005; ng(n+1)=1.660265e+003;
n=28; farx(n+1)=2.547057e+001; foe(n+1)=5.998458e+001; krok(n+1)=1.895397e-004; ng(n+1)=7.540382e+002;
n=29; farx(n+1)=2.435739e+001; foe(n+1)=5.404608e+001; krok(n+1)=8.233132e-005; ng(n+1)=1.304412e+003;
n=30; farx(n+1)=2.189525e+001; foe(n+1)=4.660909e+001; krok(n+1)=8.522871e-004; ng(n+1)=1.846085e+003;
n=31; farx(n+1)=2.062135e+001; foe(n+1)=4.340426e+001; krok(n+1)=1.479072e-004; ng(n+1)=3.691901e+003;
n=32; farx(n+1)=1.769826e+001; foe(n+1)=3.050998e+001; krok(n+1)=1.271814e-003; ng(n+1)=5.181261e+003;
n=33; farx(n+1)=1.750640e+001; foe(n+1)=2.816455e+001; krok(n+1)=7.663457e-004; ng(n+1)=9.648420e+002;
n=34; farx(n+1)=1.512930e+001; foe(n+1)=2.407300e+001; krok(n+1)=1.899561e-003; ng(n+1)=1.315694e+003;
n=35; farx(n+1)=1.453193e+001; foe(n+1)=2.241638e+001; krok(n+1)=7.010487e-004; ng(n+1)=8.347865e+002;
n=36; farx(n+1)=1.224539e+001; foe(n+1)=2.012629e+001; krok(n+1)=5.852382e-003; ng(n+1)=1.111690e+003;
n=37; farx(n+1)=1.090150e+001; foe(n+1)=1.856641e+001; krok(n+1)=4.101231e-003; ng(n+1)=4.137961e+002;
n=38; farx(n+1)=8.309598e+000; foe(n+1)=1.614208e+001; krok(n+1)=7.860345e-003; ng(n+1)=4.081580e+002;
n=39; farx(n+1)=7.077432e+000; foe(n+1)=1.498135e+001; krok(n+1)=1.193441e-002; ng(n+1)=1.367397e+003;
n=40; farx(n+1)=5.899592e+000; foe(n+1)=1.332966e+001; krok(n+1)=8.346822e-003; ng(n+1)=6.238244e+002;
n=41; farx(n+1)=4.037542e+000; foe(n+1)=1.184020e+001; krok(n+1)=2.550930e-002; ng(n+1)=4.183608e+002;
n=42; farx(n+1)=3.306209e+000; foe(n+1)=1.070622e+001; krok(n+1)=5.107684e-003; ng(n+1)=1.019962e+003;
n=43; farx(n+1)=3.032413e+000; foe(n+1)=1.029787e+001; krok(n+1)=5.445782e-003; ng(n+1)=8.684502e+002;
n=44; farx(n+1)=2.788106e+000; foe(n+1)=1.003305e+001; krok(n+1)=1.473291e-002; ng(n+1)=6.441406e+002;
n=45; farx(n+1)=2.435397e+000; foe(n+1)=9.346355e+000; krok(n+1)=5.753341e-002; ng(n+1)=4.838114e+002;
n=46; farx(n+1)=2.199833e+000; foe(n+1)=8.681209e+000; krok(n+1)=4.000365e-002; ng(n+1)=5.425625e+002;
n=47; farx(n+1)=2.172174e+000; foe(n+1)=8.499933e+000; krok(n+1)=5.381741e-003; ng(n+1)=4.974568e+002;
n=48; farx(n+1)=2.027674e+000; foe(n+1)=8.053676e+000; krok(n+1)=2.610641e-002; ng(n+1)=5.440228e+002;
n=49; farx(n+1)=1.948094e+000; foe(n+1)=7.716515e+000; krok(n+1)=5.019954e-002; ng(n+1)=3.470108e+002;
n=50; farx(n+1)=1.912783e+000; foe(n+1)=6.773456e+000; krok(n+1)=6.528949e-002; ng(n+1)=5.727205e+002;
%odnowa zmiennej metryki
n=51; farx(n+1)=1.893407e+000; foe(n+1)=6.702552e+000; krok(n+1)=5.356044e-006; ng(n+1)=5.133028e+002;
n=52; farx(n+1)=1.866922e+000; foe(n+1)=6.647711e+000; krok(n+1)=1.251675e-005; ng(n+1)=2.664729e+002;
n=53; farx(n+1)=1.854174e+000; foe(n+1)=6.624075e+000; krok(n+1)=4.135969e-005; ng(n+1)=1.192420e+002;
n=54; farx(n+1)=1.812179e+000; foe(n+1)=6.301362e+000; krok(n+1)=2.167321e-003; ng(n+1)=5.558858e+001;
n=55; farx(n+1)=1.807248e+000; foe(n+1)=6.229583e+000; krok(n+1)=9.208067e-004; ng(n+1)=6.963822e+001;
n=56; farx(n+1)=1.692077e+000; foe(n+1)=5.755660e+000; krok(n+1)=1.333847e-002; ng(n+1)=6.691118e+001;
n=57; farx(n+1)=1.628069e+000; foe(n+1)=5.483865e+000; krok(n+1)=1.638929e-003; ng(n+1)=4.083482e+002;
n=58; farx(n+1)=1.539833e+000; foe(n+1)=4.783062e+000; krok(n+1)=6.390530e-003; ng(n+1)=6.022330e+002;
n=59; farx(n+1)=1.546224e+000; foe(n+1)=4.535060e+000; krok(n+1)=2.752027e-004; ng(n+1)=1.222511e+003;
n=60; farx(n+1)=1.557097e+000; foe(n+1)=4.399069e+000; krok(n+1)=2.840497e-003; ng(n+1)=4.591070e+002;
n=61; farx(n+1)=1.557543e+000; foe(n+1)=4.323522e+000; krok(n+1)=1.881817e-003; ng(n+1)=4.721592e+002;
n=62; farx(n+1)=1.468242e+000; foe(n+1)=4.170786e+000; krok(n+1)=1.214360e-002; ng(n+1)=3.654311e+002;
n=63; farx(n+1)=1.451571e+000; foe(n+1)=4.127401e+000; krok(n+1)=5.060913e-003; ng(n+1)=4.376986e+002;
n=64; farx(n+1)=1.359501e+000; foe(n+1)=4.008330e+000; krok(n+1)=1.932256e-002; ng(n+1)=4.035837e+002;
n=65; farx(n+1)=1.280709e+000; foe(n+1)=3.893625e+000; krok(n+1)=7.385876e-003; ng(n+1)=5.184265e+002;
n=66; farx(n+1)=1.245191e+000; foe(n+1)=3.833782e+000; krok(n+1)=7.100804e-003; ng(n+1)=2.144876e+002;
n=67; farx(n+1)=1.176645e+000; foe(n+1)=3.760379e+000; krok(n+1)=2.024365e-002; ng(n+1)=4.337790e+002;
n=68; farx(n+1)=1.116055e+000; foe(n+1)=3.685501e+000; krok(n+1)=2.618049e-002; ng(n+1)=3.378573e+002;
n=69; farx(n+1)=1.123389e+000; foe(n+1)=3.600523e+000; krok(n+1)=2.011176e-002; ng(n+1)=3.838383e+002;
n=70; farx(n+1)=1.098319e+000; foe(n+1)=3.380851e+000; krok(n+1)=9.464413e-002; ng(n+1)=1.181515e+002;
n=71; farx(n+1)=1.022657e+000; foe(n+1)=2.881142e+000; krok(n+1)=1.031518e-001; ng(n+1)=3.726370e+002;
n=72; farx(n+1)=1.034727e+000; foe(n+1)=2.734545e+000; krok(n+1)=7.882375e-002; ng(n+1)=2.861196e+002;
n=73; farx(n+1)=9.822962e-001; foe(n+1)=2.605447e+000; krok(n+1)=1.178633e-001; ng(n+1)=3.991257e+001;
n=74; farx(n+1)=9.012667e-001; foe(n+1)=2.431204e+000; krok(n+1)=4.366353e-002; ng(n+1)=6.721708e+002;
n=75; farx(n+1)=8.828257e-001; foe(n+1)=2.284902e+000; krok(n+1)=5.576355e-002; ng(n+1)=5.289443e+002;
%odnowa zmiennej metryki
n=76; farx(n+1)=8.809696e-001; foe(n+1)=2.258440e+000; krok(n+1)=3.137219e-006; ng(n+1)=4.280474e+002;
n=77; farx(n+1)=8.830567e-001; foe(n+1)=2.242349e+000; krok(n+1)=3.845212e-006; ng(n+1)=2.862911e+002;
n=78; farx(n+1)=8.852725e-001; foe(n+1)=2.225499e+000; krok(n+1)=1.572983e-005; ng(n+1)=1.554808e+002;
n=79; farx(n+1)=8.752666e-001; foe(n+1)=2.172853e+000; krok(n+1)=1.654720e-004; ng(n+1)=8.670265e+001;
n=80; farx(n+1)=8.629046e-001; foe(n+1)=2.132666e+000; krok(n+1)=8.456028e-004; ng(n+1)=3.095864e+001;
n=81; farx(n+1)=8.359499e-001; foe(n+1)=2.042378e+000; krok(n+1)=4.312903e-003; ng(n+1)=2.801025e+001;
n=82; farx(n+1)=8.487080e-001; foe(n+1)=1.972800e+000; krok(n+1)=8.204311e-003; ng(n+1)=1.742203e+002;
n=83; farx(n+1)=8.597876e-001; foe(n+1)=1.939078e+000; krok(n+1)=1.772228e-003; ng(n+1)=4.689809e+001;
n=84; farx(n+1)=8.559332e-001; foe(n+1)=1.920283e+000; krok(n+1)=3.065383e-003; ng(n+1)=2.845204e+002;
n=85; farx(n+1)=8.207276e-001; foe(n+1)=1.882074e+000; krok(n+1)=9.907068e-003; ng(n+1)=1.168119e+002;
n=86; farx(n+1)=8.001134e-001; foe(n+1)=1.843929e+000; krok(n+1)=3.390416e-003; ng(n+1)=3.439502e+002;
n=87; farx(n+1)=7.848355e-001; foe(n+1)=1.804196e+000; krok(n+1)=1.136409e-002; ng(n+1)=3.844529e+002;
n=88; farx(n+1)=7.765505e-001; foe(n+1)=1.760387e+000; krok(n+1)=1.438335e-002; ng(n+1)=5.179200e+002;
n=89; farx(n+1)=7.591884e-001; foe(n+1)=1.718880e+000; krok(n+1)=9.127324e-003; ng(n+1)=6.197372e+002;
n=90; farx(n+1)=7.347581e-001; foe(n+1)=1.686873e+000; krok(n+1)=1.285062e-002; ng(n+1)=1.455094e+002;
n=91; farx(n+1)=6.899212e-001; foe(n+1)=1.620070e+000; krok(n+1)=3.497807e-002; ng(n+1)=3.934778e+002;
n=92; farx(n+1)=6.706637e-001; foe(n+1)=1.583672e+000; krok(n+1)=4.620452e-003; ng(n+1)=3.533768e+002;
n=93; farx(n+1)=6.263717e-001; foe(n+1)=1.530342e+000; krok(n+1)=2.854877e-002; ng(n+1)=2.850889e+002;
n=94; farx(n+1)=6.052125e-001; foe(n+1)=1.488365e+000; krok(n+1)=1.505130e-002; ng(n+1)=3.741184e+002;
n=95; farx(n+1)=5.700706e-001; foe(n+1)=1.448420e+000; krok(n+1)=4.215364e-002; ng(n+1)=1.851131e+002;
n=96; farx(n+1)=5.750748e-001; foe(n+1)=1.403884e+000; krok(n+1)=7.542765e-002; ng(n+1)=1.000115e+002;
n=97; farx(n+1)=5.327064e-001; foe(n+1)=1.342127e+000; krok(n+1)=4.256083e-002; ng(n+1)=4.553871e+002;
n=98; farx(n+1)=4.533041e-001; foe(n+1)=1.258141e+000; krok(n+1)=1.660195e-002; ng(n+1)=1.880273e+002;
n=99; farx(n+1)=4.440608e-001; foe(n+1)=1.231359e+000; krok(n+1)=8.073226e-003; ng(n+1)=3.081490e+002;
n=100; farx(n+1)=4.150522e-001; foe(n+1)=1.170500e+000; krok(n+1)=4.781642e-002; ng(n+1)=3.086850e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
