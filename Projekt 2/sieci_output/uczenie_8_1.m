%uczenie predyktora oe
clear all;
n=0; farx(n+1)=4.136170e+003; foe(n+1)=3.932403e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=2.791370e+003; foe(n+1)=2.708200e+003; krok(n+1)=5.405350e-004; ng(n+1)=4.195918e+003;
n=2; farx(n+1)=1.304541e+003; foe(n+1)=1.110854e+003; krok(n+1)=1.469853e-003; ng(n+1)=3.524468e+003;
n=3; farx(n+1)=1.675509e+003; foe(n+1)=5.888758e+002; krok(n+1)=2.560416e-004; ng(n+1)=8.762879e+003;
n=4; farx(n+1)=2.034815e+003; foe(n+1)=5.641676e+002; krok(n+1)=1.143778e-003; ng(n+1)=2.942906e+003;
n=5; farx(n+1)=1.754369e+003; foe(n+1)=4.975112e+002; krok(n+1)=4.529996e-003; ng(n+1)=7.377658e+002;
n=6; farx(n+1)=5.299745e+002; foe(n+1)=3.354237e+002; krok(n+1)=1.321526e-002; ng(n+1)=7.155050e+002;
n=7; farx(n+1)=4.349760e+002; foe(n+1)=3.261880e+002; krok(n+1)=4.089425e-004; ng(n+1)=8.766170e+002;
n=8; farx(n+1)=3.978316e+002; foe(n+1)=3.188611e+002; krok(n+1)=3.473499e-004; ng(n+1)=1.185482e+003;
n=9; farx(n+1)=3.559450e+002; foe(n+1)=3.027093e+002; krok(n+1)=1.581052e-003; ng(n+1)=6.097410e+002;
n=10; farx(n+1)=3.503488e+002; foe(n+1)=3.019364e+002; krok(n+1)=2.418465e-004; ng(n+1)=8.633448e+002;
n=11; farx(n+1)=3.312826e+002; foe(n+1)=2.970465e+002; krok(n+1)=2.336140e-003; ng(n+1)=3.027099e+003;
n=12; farx(n+1)=3.162194e+002; foe(n+1)=2.931300e+002; krok(n+1)=4.267031e-003; ng(n+1)=5.528829e+002;
n=13; farx(n+1)=2.970827e+002; foe(n+1)=2.893219e+002; krok(n+1)=2.275225e-003; ng(n+1)=2.128596e+003;
n=14; farx(n+1)=1.478169e+002; foe(n+1)=2.656588e+002; krok(n+1)=1.097075e-002; ng(n+1)=1.750349e+003;
n=15; farx(n+1)=1.301630e+002; foe(n+1)=2.556337e+002; krok(n+1)=2.852289e-004; ng(n+1)=4.499654e+003;
n=16; farx(n+1)=1.157315e+002; foe(n+1)=2.523418e+002; krok(n+1)=3.184791e-004; ng(n+1)=4.121149e+003;
n=17; farx(n+1)=1.130196e+002; foe(n+1)=2.513141e+002; krok(n+1)=1.845902e-004; ng(n+1)=2.557705e+003;
n=18; farx(n+1)=1.183473e+002; foe(n+1)=2.445305e+002; krok(n+1)=2.840497e-003; ng(n+1)=4.990001e+003;
n=19; farx(n+1)=1.110186e+002; foe(n+1)=2.379598e+002; krok(n+1)=1.198792e-003; ng(n+1)=3.531616e+003;
n=20; farx(n+1)=9.847646e+001; foe(n+1)=2.088521e+002; krok(n+1)=9.722192e-004; ng(n+1)=8.989353e+003;
n=21; farx(n+1)=9.778682e+001; foe(n+1)=2.080045e+002; krok(n+1)=1.209645e-005; ng(n+1)=9.525369e+003;
n=22; farx(n+1)=9.730880e+001; foe(n+1)=2.075802e+002; krok(n+1)=1.525061e-004; ng(n+1)=1.082133e+004;
n=23; farx(n+1)=9.975242e+001; foe(n+1)=2.053101e+002; krok(n+1)=1.002892e-003; ng(n+1)=9.884338e+003;
n=24; farx(n+1)=9.491684e+001; foe(n+1)=1.882036e+002; krok(n+1)=2.077331e-003; ng(n+1)=1.209069e+004;
n=25; farx(n+1)=9.600138e+001; foe(n+1)=1.750160e+002; krok(n+1)=2.273260e-003; ng(n+1)=1.080258e+004;
%odnowa zmiennej metryki
n=26; farx(n+1)=1.085195e+002; foe(n+1)=1.526153e+002; krok(n+1)=3.728860e-005; ng(n+1)=4.327631e+003;
n=27; farx(n+1)=7.603217e+001; foe(n+1)=1.130425e+002; krok(n+1)=3.255217e-004; ng(n+1)=1.319736e+003;
n=28; farx(n+1)=5.786474e+001; foe(n+1)=9.972036e+001; krok(n+1)=5.658127e-005; ng(n+1)=2.482572e+003;
n=29; farx(n+1)=1.794172e+001; foe(n+1)=5.503548e+001; krok(n+1)=3.569431e-004; ng(n+1)=1.894154e+003;
n=30; farx(n+1)=1.701351e+001; foe(n+1)=4.955960e+001; krok(n+1)=1.152797e-003; ng(n+1)=1.350958e+003;
n=31; farx(n+1)=1.619462e+001; foe(n+1)=4.544400e+001; krok(n+1)=4.352222e-004; ng(n+1)=1.573478e+003;
n=32; farx(n+1)=1.705996e+001; foe(n+1)=3.770554e+001; krok(n+1)=5.909215e-004; ng(n+1)=2.673817e+003;
n=33; farx(n+1)=2.001682e+001; foe(n+1)=2.994036e+001; krok(n+1)=2.186130e-003; ng(n+1)=2.403799e+003;
n=34; farx(n+1)=1.804220e+001; foe(n+1)=2.504438e+001; krok(n+1)=4.548255e-003; ng(n+1)=5.965876e+002;
n=35; farx(n+1)=1.476011e+001; foe(n+1)=2.124146e+001; krok(n+1)=5.548179e-003; ng(n+1)=6.262109e+002;
n=36; farx(n+1)=1.495618e+001; foe(n+1)=1.942762e+001; krok(n+1)=2.431442e-003; ng(n+1)=5.785661e+002;
n=37; farx(n+1)=1.514134e+001; foe(n+1)=1.834447e+001; krok(n+1)=2.158539e-003; ng(n+1)=8.589961e+002;
n=38; farx(n+1)=1.451207e+001; foe(n+1)=1.738999e+001; krok(n+1)=1.428969e-002; ng(n+1)=1.576096e+002;
n=39; farx(n+1)=1.179790e+001; foe(n+1)=1.582711e+001; krok(n+1)=2.243356e-002; ng(n+1)=2.084421e+002;
n=40; farx(n+1)=1.115004e+001; foe(n+1)=1.496648e+001; krok(n+1)=5.478088e-003; ng(n+1)=5.188120e+002;
n=41; farx(n+1)=1.098186e+001; foe(n+1)=1.362731e+001; krok(n+1)=5.829338e-003; ng(n+1)=2.888955e+002;
n=42; farx(n+1)=1.074718e+001; foe(n+1)=1.320483e+001; krok(n+1)=4.207904e-003; ng(n+1)=5.190796e+002;
n=43; farx(n+1)=1.057534e+001; foe(n+1)=1.242153e+001; krok(n+1)=1.506159e-002; ng(n+1)=2.790559e+002;
n=44; farx(n+1)=1.064113e+001; foe(n+1)=1.201616e+001; krok(n+1)=1.142218e-002; ng(n+1)=2.419875e+002;
n=45; farx(n+1)=1.039881e+001; foe(n+1)=1.171429e+001; krok(n+1)=3.281725e-002; ng(n+1)=3.111344e+002;
n=46; farx(n+1)=9.646959e+000; foe(n+1)=1.136935e+001; krok(n+1)=3.620221e-002; ng(n+1)=2.499307e+002;
n=47; farx(n+1)=9.111000e+000; foe(n+1)=1.108517e+001; krok(n+1)=1.097075e-002; ng(n+1)=2.208160e+002;
n=48; farx(n+1)=8.051940e+000; foe(n+1)=1.039544e+001; krok(n+1)=5.716001e-002; ng(n+1)=2.741554e+002;
n=49; farx(n+1)=7.234605e+000; foe(n+1)=9.759758e+000; krok(n+1)=5.184392e-002; ng(n+1)=1.779520e+002;
n=50; farx(n+1)=6.105225e+000; foe(n+1)=9.154227e+000; krok(n+1)=7.700420e-002; ng(n+1)=1.956687e+002;
%odnowa zmiennej metryki
n=51; farx(n+1)=6.130556e+000; foe(n+1)=8.797537e+000; krok(n+1)=1.085468e-005; ng(n+1)=7.916409e+002;
n=52; farx(n+1)=6.150075e+000; foe(n+1)=8.694546e+000; krok(n+1)=6.158863e-005; ng(n+1)=1.646664e+002;
n=53; farx(n+1)=6.139603e+000; foe(n+1)=8.659334e+000; krok(n+1)=2.619761e-004; ng(n+1)=6.400686e+001;
n=54; farx(n+1)=5.945762e+000; foe(n+1)=8.518272e+000; krok(n+1)=9.413494e-004; ng(n+1)=7.279273e+001;
n=55; farx(n+1)=5.846909e+000; foe(n+1)=8.432915e+000; krok(n+1)=1.050435e-003; ng(n+1)=6.359974e+001;
n=56; farx(n+1)=5.954682e+000; foe(n+1)=8.101090e+000; krok(n+1)=9.299198e-003; ng(n+1)=5.496185e+001;
n=57; farx(n+1)=5.652006e+000; foe(n+1)=7.836195e+000; krok(n+1)=6.274942e-003; ng(n+1)=6.825638e+001;
n=58; farx(n+1)=5.542659e+000; foe(n+1)=7.628980e+000; krok(n+1)=6.256921e-003; ng(n+1)=2.306921e+002;
n=59; farx(n+1)=5.252030e+000; foe(n+1)=6.946672e+000; krok(n+1)=1.704362e-002; ng(n+1)=4.264024e+002;
n=60; farx(n+1)=5.028164e+000; foe(n+1)=6.784798e+000; krok(n+1)=6.905382e-003; ng(n+1)=1.655838e+002;
n=61; farx(n+1)=4.808649e+000; foe(n+1)=6.574985e+000; krok(n+1)=1.861441e-002; ng(n+1)=3.118416e+002;
n=62; farx(n+1)=4.725053e+000; foe(n+1)=6.508582e+000; krok(n+1)=2.435962e-003; ng(n+1)=2.562001e+002;
n=63; farx(n+1)=3.572133e+000; foe(n+1)=5.400410e+000; krok(n+1)=9.431389e-002; ng(n+1)=4.502326e+002;
n=64; farx(n+1)=3.108127e+000; foe(n+1)=5.132470e+000; krok(n+1)=1.897240e-002; ng(n+1)=4.959833e+002;
n=65; farx(n+1)=2.798889e+000; foe(n+1)=4.867159e+000; krok(n+1)=8.161186e-003; ng(n+1)=4.025526e+002;
n=66; farx(n+1)=2.578411e+000; foe(n+1)=4.668698e+000; krok(n+1)=7.632150e-003; ng(n+1)=6.620139e+002;
n=67; farx(n+1)=2.346791e+000; foe(n+1)=4.373950e+000; krok(n+1)=1.205272e-002; ng(n+1)=5.212647e+002;
n=68; farx(n+1)=2.324167e+000; foe(n+1)=4.301156e+000; krok(n+1)=4.952046e-003; ng(n+1)=6.305930e+002;
n=69; farx(n+1)=2.280729e+000; foe(n+1)=4.015876e+000; krok(n+1)=2.900728e-002; ng(n+1)=6.568260e+002;
n=70; farx(n+1)=2.086649e+000; foe(n+1)=3.759524e+000; krok(n+1)=1.693613e-002; ng(n+1)=3.118628e+002;
n=71; farx(n+1)=2.014116e+000; foe(n+1)=3.480227e+000; krok(n+1)=1.776017e-002; ng(n+1)=3.025087e+002;
n=72; farx(n+1)=1.992887e+000; foe(n+1)=3.219944e+000; krok(n+1)=1.464382e-002; ng(n+1)=1.755256e+002;
n=73; farx(n+1)=1.955185e+000; foe(n+1)=3.147673e+000; krok(n+1)=2.508493e-002; ng(n+1)=2.307467e+002;
n=74; farx(n+1)=1.804516e+000; foe(n+1)=2.905386e+000; krok(n+1)=8.877087e-002; ng(n+1)=1.464262e+002;
n=75; farx(n+1)=1.614732e+000; foe(n+1)=2.467741e+000; krok(n+1)=1.066998e-001; ng(n+1)=1.639204e+002;
%odnowa zmiennej metryki
n=76; farx(n+1)=1.613405e+000; foe(n+1)=2.450240e+000; krok(n+1)=8.245016e-006; ng(n+1)=1.794241e+002;
n=77; farx(n+1)=1.610355e+000; foe(n+1)=2.441512e+000; krok(n+1)=1.663384e-005; ng(n+1)=9.745207e+001;
n=78; farx(n+1)=1.610698e+000; foe(n+1)=2.393835e+000; krok(n+1)=3.248691e-004; ng(n+1)=5.015675e+001;
n=79; farx(n+1)=1.607790e+000; foe(n+1)=2.373134e+000; krok(n+1)=1.599927e-004; ng(n+1)=6.138790e+001;
n=80; farx(n+1)=1.606043e+000; foe(n+1)=2.309496e+000; krok(n+1)=7.893559e-004; ng(n+1)=4.115376e+001;
n=81; farx(n+1)=1.596583e+000; foe(n+1)=2.276257e+000; krok(n+1)=8.616391e-004; ng(n+1)=3.358672e+001;
n=82; farx(n+1)=1.567592e+000; foe(n+1)=2.245221e+000; krok(n+1)=6.753788e-003; ng(n+1)=4.825458e+001;
n=83; farx(n+1)=1.504816e+000; foe(n+1)=2.121392e+000; krok(n+1)=1.955649e-002; ng(n+1)=7.178414e+001;
n=84; farx(n+1)=1.470904e+000; foe(n+1)=2.056089e+000; krok(n+1)=1.071180e-002; ng(n+1)=1.064749e+002;
n=85; farx(n+1)=1.447568e+000; foe(n+1)=1.976448e+000; krok(n+1)=2.152696e-002; ng(n+1)=1.773066e+002;
n=86; farx(n+1)=1.424341e+000; foe(n+1)=1.939969e+000; krok(n+1)=1.183052e-002; ng(n+1)=1.659403e+002;
n=87; farx(n+1)=1.340512e+000; foe(n+1)=1.859698e+000; krok(n+1)=3.085098e-002; ng(n+1)=1.373725e+002;
n=88; farx(n+1)=1.261406e+000; foe(n+1)=1.791993e+000; krok(n+1)=1.285709e-002; ng(n+1)=1.069516e+002;
n=89; farx(n+1)=1.167646e+000; foe(n+1)=1.652961e+000; krok(n+1)=3.094863e-002; ng(n+1)=2.876449e+002;
n=90; farx(n+1)=1.130375e+000; foe(n+1)=1.587974e+000; krok(n+1)=1.468412e-002; ng(n+1)=1.988345e+002;
n=91; farx(n+1)=1.118391e+000; foe(n+1)=1.534918e+000; krok(n+1)=1.021537e-002; ng(n+1)=2.057613e+002;
n=92; farx(n+1)=1.114495e+000; foe(n+1)=1.496381e+000; krok(n+1)=8.744518e-003; ng(n+1)=2.499667e+002;
n=93; farx(n+1)=1.101284e+000; foe(n+1)=1.444157e+000; krok(n+1)=2.629130e-002; ng(n+1)=2.453365e+002;
n=94; farx(n+1)=1.089951e+000; foe(n+1)=1.384651e+000; krok(n+1)=2.047906e-002; ng(n+1)=3.808827e+002;
n=95; farx(n+1)=1.067842e+000; foe(n+1)=1.314851e+000; krok(n+1)=4.134280e-002; ng(n+1)=1.390352e+002;
n=96; farx(n+1)=1.039250e+000; foe(n+1)=1.276243e+000; krok(n+1)=2.732857e-002; ng(n+1)=2.464388e+002;
n=97; farx(n+1)=1.024465e+000; foe(n+1)=1.255269e+000; krok(n+1)=1.854407e-002; ng(n+1)=1.929113e+002;
n=98; farx(n+1)=9.868800e-001; foe(n+1)=1.210670e+000; krok(n+1)=6.533169e-002; ng(n+1)=1.466845e+002;
n=99; farx(n+1)=9.830325e-001; foe(n+1)=1.179368e+000; krok(n+1)=8.260442e-002; ng(n+1)=1.075828e+002;
n=100; farx(n+1)=9.846391e-001; foe(n+1)=1.128455e+000; krok(n+1)=7.689657e-002; ng(n+1)=2.394713e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
