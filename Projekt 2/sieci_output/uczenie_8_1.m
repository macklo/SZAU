%uczenie predyktora oe
clear all;
n=0; farx(n+1)=4.717837e+003; foe(n+1)=4.816224e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=3.653915e+003; foe(n+1)=3.733790e+003; krok(n+1)=3.569431e-004; ng(n+1)=4.452844e+003;
n=2; farx(n+1)=8.545140e+002; foe(n+1)=8.385939e+002; krok(n+1)=1.835515e-003; ng(n+1)=2.878751e+003;
n=3; farx(n+1)=9.259963e+002; foe(n+1)=7.462762e+002; krok(n+1)=1.864955e-004; ng(n+1)=3.005019e+003;
n=4; farx(n+1)=2.771693e+002; foe(n+1)=4.204103e+002; krok(n+1)=6.802533e-003; ng(n+1)=1.154987e+003;
n=5; farx(n+1)=2.779477e+002; foe(n+1)=3.614868e+002; krok(n+1)=1.915864e-004; ng(n+1)=4.594067e+003;
n=6; farx(n+1)=2.750123e+002; foe(n+1)=3.533526e+002; krok(n+1)=1.954789e-004; ng(n+1)=1.606308e+003;
n=7; farx(n+1)=2.893120e+002; foe(n+1)=3.483193e+002; krok(n+1)=1.721185e-003; ng(n+1)=5.139513e+002;
n=8; farx(n+1)=3.176205e+002; foe(n+1)=3.389283e+002; krok(n+1)=2.583925e-003; ng(n+1)=5.554881e+002;
n=9; farx(n+1)=2.485511e+002; foe(n+1)=3.130903e+002; krok(n+1)=7.385876e-003; ng(n+1)=4.442694e+002;
n=10; farx(n+1)=2.434974e+002; foe(n+1)=3.116737e+002; krok(n+1)=1.106947e-003; ng(n+1)=1.028096e+003;
n=11; farx(n+1)=2.145247e+002; foe(n+1)=3.037203e+002; krok(n+1)=1.243743e-003; ng(n+1)=9.074728e+002;
n=12; farx(n+1)=1.647245e+002; foe(n+1)=2.914898e+002; krok(n+1)=2.990450e-003; ng(n+1)=8.365494e+002;
n=13; farx(n+1)=1.412751e+002; foe(n+1)=2.854440e+002; krok(n+1)=1.810600e-003; ng(n+1)=8.515603e+002;
n=14; farx(n+1)=1.102248e+002; foe(n+1)=2.694555e+002; krok(n+1)=7.286945e-004; ng(n+1)=1.258707e+003;
n=15; farx(n+1)=9.269177e+001; foe(n+1)=2.611821e+002; krok(n+1)=3.276027e-004; ng(n+1)=2.505669e+003;
n=16; farx(n+1)=2.584988e+001; foe(n+1)=2.009734e+002; krok(n+1)=1.226153e-002; ng(n+1)=3.921172e+003;
n=17; farx(n+1)=2.494549e+001; foe(n+1)=1.998153e+002; krok(n+1)=1.001277e-006; ng(n+1)=1.508468e+004;
n=18; farx(n+1)=2.509785e+001; foe(n+1)=1.991071e+002; krok(n+1)=1.348719e-004; ng(n+1)=1.750781e+004;
n=19; farx(n+1)=2.150115e+001; foe(n+1)=1.969213e+002; krok(n+1)=1.066758e-003; ng(n+1)=1.594233e+004;
n=20; farx(n+1)=1.741566e+001; foe(n+1)=1.722740e+002; krok(n+1)=4.273921e-004; ng(n+1)=1.943362e+004;
n=21; farx(n+1)=1.722293e+001; foe(n+1)=1.718116e+002; krok(n+1)=2.428432e-005; ng(n+1)=1.308968e+004;
n=22; farx(n+1)=1.775916e+001; foe(n+1)=1.651426e+002; krok(n+1)=6.681129e-003; ng(n+1)=1.204379e+004;
n=23; farx(n+1)=1.901634e+001; foe(n+1)=1.627549e+002; krok(n+1)=1.192523e-004; ng(n+1)=9.188773e+003;
n=24; farx(n+1)=1.941252e+001; foe(n+1)=1.617925e+002; krok(n+1)=6.650130e-004; ng(n+1)=7.544086e+003;
n=25; farx(n+1)=1.921386e+001; foe(n+1)=1.590610e+002; krok(n+1)=1.427772e-003; ng(n+1)=7.634000e+003;
%odnowa zmiennej metryki
n=26; farx(n+1)=1.744056e+001; foe(n+1)=1.389644e+002; krok(n+1)=9.884595e-006; ng(n+1)=6.936734e+003;
n=27; farx(n+1)=1.777278e+001; foe(n+1)=1.102085e+002; krok(n+1)=1.368724e-005; ng(n+1)=6.805577e+003;
n=28; farx(n+1)=1.977957e+001; foe(n+1)=1.038425e+002; krok(n+1)=4.944182e-006; ng(n+1)=5.477939e+003;
n=29; farx(n+1)=1.806341e+001; foe(n+1)=9.278701e+001; krok(n+1)=5.538211e-005; ng(n+1)=2.409751e+003;
n=30; farx(n+1)=1.557513e+001; foe(n+1)=7.424204e+001; krok(n+1)=1.457598e-004; ng(n+1)=7.441550e+003;
n=31; farx(n+1)=1.304158e+001; foe(n+1)=6.628436e+001; krok(n+1)=8.156322e-004; ng(n+1)=5.557550e+003;
n=32; farx(n+1)=8.872281e+000; foe(n+1)=4.955189e+001; krok(n+1)=8.336543e-004; ng(n+1)=4.478460e+003;
n=33; farx(n+1)=6.269902e+000; foe(n+1)=3.771573e+001; krok(n+1)=1.568736e-003; ng(n+1)=4.757154e+003;
n=34; farx(n+1)=5.397579e+000; foe(n+1)=3.390599e+001; krok(n+1)=1.320749e-003; ng(n+1)=3.715166e+003;
n=35; farx(n+1)=5.406221e+000; foe(n+1)=3.069067e+001; krok(n+1)=2.168540e-003; ng(n+1)=4.075428e+003;
n=36; farx(n+1)=4.644307e+000; foe(n+1)=2.324004e+001; krok(n+1)=2.914778e-003; ng(n+1)=3.735288e+003;
n=37; farx(n+1)=4.543568e+000; foe(n+1)=2.061105e+001; krok(n+1)=3.503934e-003; ng(n+1)=1.459047e+003;
n=38; farx(n+1)=4.359517e+000; foe(n+1)=1.966108e+001; krok(n+1)=2.607206e-003; ng(n+1)=1.015819e+003;
n=39; farx(n+1)=3.953318e+000; foe(n+1)=1.847485e+001; krok(n+1)=5.318174e-003; ng(n+1)=8.967848e+002;
n=40; farx(n+1)=3.710145e+000; foe(n+1)=1.721808e+001; krok(n+1)=3.765398e-003; ng(n+1)=1.359249e+003;
n=41; farx(n+1)=3.290740e+000; foe(n+1)=1.636182e+001; krok(n+1)=4.372259e-003; ng(n+1)=7.791301e+002;
n=42; farx(n+1)=3.184888e+000; foe(n+1)=1.602196e+001; krok(n+1)=7.637224e-003; ng(n+1)=9.275932e+002;
n=43; farx(n+1)=2.933299e+000; foe(n+1)=1.552532e+001; krok(n+1)=2.647020e-003; ng(n+1)=1.338308e+003;
n=44; farx(n+1)=2.861553e+000; foe(n+1)=1.519578e+001; krok(n+1)=5.548179e-003; ng(n+1)=1.432106e+003;
n=45; farx(n+1)=2.583720e+000; foe(n+1)=1.393286e+001; krok(n+1)=3.126305e-002; ng(n+1)=1.356035e+003;
n=46; farx(n+1)=2.452536e+000; foe(n+1)=1.291848e+001; krok(n+1)=7.530795e-003; ng(n+1)=2.075019e+003;
n=47; farx(n+1)=2.402395e+000; foe(n+1)=1.213907e+001; krok(n+1)=1.532510e-002; ng(n+1)=9.299969e+002;
n=48; farx(n+1)=2.247959e+000; foe(n+1)=1.161655e+001; krok(n+1)=3.360874e-002; ng(n+1)=3.183216e+002;
n=49; farx(n+1)=1.988838e+000; foe(n+1)=1.078728e+001; krok(n+1)=2.113198e-002; ng(n+1)=6.518485e+002;
n=50; farx(n+1)=1.956894e+000; foe(n+1)=1.033552e+001; krok(n+1)=3.863769e-002; ng(n+1)=3.201463e+002;
%odnowa zmiennej metryki
n=51; farx(n+1)=1.942175e+000; foe(n+1)=1.012656e+001; krok(n+1)=9.340678e-006; ng(n+1)=6.335050e+002;
n=52; farx(n+1)=1.934146e+000; foe(n+1)=1.010167e+001; krok(n+1)=3.054530e-006; ng(n+1)=4.181880e+002;
n=53; farx(n+1)=1.910417e+000; foe(n+1)=1.005318e+001; krok(n+1)=5.779543e-005; ng(n+1)=1.333569e+002;
n=54; farx(n+1)=1.875212e+000; foe(n+1)=9.646740e+000; krok(n+1)=2.949750e-004; ng(n+1)=1.831123e+002;
n=55; farx(n+1)=1.879514e+000; foe(n+1)=9.498987e+000; krok(n+1)=1.367364e-004; ng(n+1)=1.403812e+002;
n=56; farx(n+1)=1.835547e+000; foe(n+1)=9.219431e+000; krok(n+1)=2.310226e-003; ng(n+1)=6.728580e+001;
n=57; farx(n+1)=1.829127e+000; foe(n+1)=8.764295e+000; krok(n+1)=2.707062e-003; ng(n+1)=1.947998e+002;
n=58; farx(n+1)=1.834714e+000; foe(n+1)=8.464889e+000; krok(n+1)=2.926191e-003; ng(n+1)=1.071751e+003;
n=59; farx(n+1)=1.891457e+000; foe(n+1)=8.156585e+000; krok(n+1)=2.583925e-003; ng(n+1)=9.733795e+002;
n=60; farx(n+1)=1.899647e+000; foe(n+1)=6.790957e+000; krok(n+1)=3.378712e-003; ng(n+1)=1.000589e+003;
n=61; farx(n+1)=1.913732e+000; foe(n+1)=6.677651e+000; krok(n+1)=8.714006e-004; ng(n+1)=1.002571e+003;
n=62; farx(n+1)=1.919439e+000; foe(n+1)=6.576672e+000; krok(n+1)=4.449709e-003; ng(n+1)=6.044399e+002;
n=63; farx(n+1)=1.866702e+000; foe(n+1)=6.084024e+000; krok(n+1)=1.501192e-002; ng(n+1)=9.037972e+002;
n=64; farx(n+1)=1.851332e+000; foe(n+1)=5.923420e+000; krok(n+1)=4.191618e-003; ng(n+1)=1.161432e+003;
n=65; farx(n+1)=1.806195e+000; foe(n+1)=5.635091e+000; krok(n+1)=1.370601e-002; ng(n+1)=8.610683e+002;
n=66; farx(n+1)=1.748982e+000; foe(n+1)=5.498657e+000; krok(n+1)=2.701093e-003; ng(n+1)=2.998959e+002;
n=67; farx(n+1)=1.670986e+000; foe(n+1)=5.351899e+000; krok(n+1)=5.042985e-003; ng(n+1)=3.444881e+002;
n=68; farx(n+1)=1.475714e+000; foe(n+1)=5.077473e+000; krok(n+1)=1.792791e-002; ng(n+1)=7.033408e+002;
n=69; farx(n+1)=1.399620e+000; foe(n+1)=4.981360e+000; krok(n+1)=6.130766e-003; ng(n+1)=3.714165e+002;
n=70; farx(n+1)=1.385182e+000; foe(n+1)=4.911678e+000; krok(n+1)=1.165759e-002; ng(n+1)=2.546933e+002;
n=71; farx(n+1)=1.286450e+000; foe(n+1)=4.695457e+000; krok(n+1)=1.354728e-002; ng(n+1)=3.488813e+002;
n=72; farx(n+1)=1.223771e+000; foe(n+1)=4.566504e+000; krok(n+1)=2.080702e-002; ng(n+1)=8.136458e+002;
n=73; farx(n+1)=1.296841e+000; foe(n+1)=4.156561e+000; krok(n+1)=7.370577e-002; ng(n+1)=9.472787e+002;
n=74; farx(n+1)=1.230944e+000; foe(n+1)=4.002269e+000; krok(n+1)=1.991120e-002; ng(n+1)=3.690595e+002;
n=75; farx(n+1)=1.302685e+000; foe(n+1)=3.910593e+000; krok(n+1)=4.953895e-002; ng(n+1)=2.585336e+002;
%odnowa zmiennej metryki
n=76; farx(n+1)=1.303089e+000; foe(n+1)=3.846056e+000; krok(n+1)=2.088415e-005; ng(n+1)=2.424372e+002;
n=77; farx(n+1)=1.304937e+000; foe(n+1)=3.840604e+000; krok(n+1)=7.204914e-006; ng(n+1)=1.358695e+002;
n=78; farx(n+1)=1.305063e+000; foe(n+1)=3.835876e+000; krok(n+1)=6.412137e-006; ng(n+1)=1.368596e+002;
n=79; farx(n+1)=1.296121e+000; foe(n+1)=3.760049e+000; krok(n+1)=9.798800e-005; ng(n+1)=1.215574e+002;
n=80; farx(n+1)=1.299306e+000; foe(n+1)=3.731636e+000; krok(n+1)=9.579321e-005; ng(n+1)=8.151671e+001;
n=81; farx(n+1)=1.294169e+000; foe(n+1)=3.673731e+000; krok(n+1)=5.067687e-004; ng(n+1)=5.495445e+001;
n=82; farx(n+1)=1.285962e+000; foe(n+1)=3.640279e+000; krok(n+1)=1.279942e-003; ng(n+1)=5.559104e+001;
n=83; farx(n+1)=1.236609e+000; foe(n+1)=3.311068e+000; krok(n+1)=1.073668e-002; ng(n+1)=6.402529e+001;
n=84; farx(n+1)=1.216365e+000; foe(n+1)=3.205583e+000; krok(n+1)=2.774090e-003; ng(n+1)=4.154937e+002;
n=85; farx(n+1)=1.198079e+000; foe(n+1)=3.108611e+000; krok(n+1)=4.505183e-003; ng(n+1)=2.722154e+002;
n=86; farx(n+1)=1.158249e+000; foe(n+1)=2.940592e+000; krok(n+1)=1.370601e-002; ng(n+1)=2.593166e+002;
n=87; farx(n+1)=1.141464e+000; foe(n+1)=2.908399e+000; krok(n+1)=1.389400e-003; ng(n+1)=4.463237e+002;
n=88; farx(n+1)=1.023930e+000; foe(n+1)=2.690490e+000; krok(n+1)=1.165911e-002; ng(n+1)=2.608977e+002;
n=89; farx(n+1)=9.803939e-001; foe(n+1)=2.597304e+000; krok(n+1)=2.220021e-003; ng(n+1)=7.358369e+002;
n=90; farx(n+1)=9.415597e-001; foe(n+1)=2.512867e+000; krok(n+1)=5.711090e-003; ng(n+1)=5.133245e+002;
n=91; farx(n+1)=9.269895e-001; foe(n+1)=2.452539e+000; krok(n+1)=6.118871e-003; ng(n+1)=4.478400e+002;
n=92; farx(n+1)=9.205469e-001; foe(n+1)=2.353744e+000; krok(n+1)=1.767909e-002; ng(n+1)=3.448163e+002;
n=93; farx(n+1)=8.585140e-001; foe(n+1)=2.208361e+000; krok(n+1)=2.556212e-002; ng(n+1)=2.580482e+002;
n=94; farx(n+1)=6.437157e-001; foe(n+1)=1.946030e+000; krok(n+1)=4.544795e-002; ng(n+1)=3.190923e+002;
n=95; farx(n+1)=6.224134e-001; foe(n+1)=1.891513e+000; krok(n+1)=4.880194e-003; ng(n+1)=5.589643e+002;
n=96; farx(n+1)=6.000846e-001; foe(n+1)=1.721293e+000; krok(n+1)=2.876670e-002; ng(n+1)=2.736688e+002;
n=97; farx(n+1)=6.074327e-001; foe(n+1)=1.602375e+000; krok(n+1)=4.674985e-002; ng(n+1)=2.616875e+002;
n=98; farx(n+1)=6.116622e-001; foe(n+1)=1.375817e+000; krok(n+1)=4.674985e-002; ng(n+1)=5.004774e+002;
n=99; farx(n+1)=6.385729e-001; foe(n+1)=1.264437e+000; krok(n+1)=1.350413e-002; ng(n+1)=4.472022e+002;
n=100; farx(n+1)=6.464252e-001; foe(n+1)=1.238612e+000; krok(n+1)=1.741045e-002; ng(n+1)=3.787520e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
