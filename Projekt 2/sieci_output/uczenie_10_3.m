%uczenie predyktora oe
clear all;
n=0; farx(n+1)=4.698293e+003; foe(n+1)=4.588809e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=3.184231e+003; foe(n+1)=2.937335e+003; krok(n+1)=5.126539e-004; ng(n+1)=5.606352e+003;
n=2; farx(n+1)=1.269514e+003; foe(n+1)=1.081741e+003; krok(n+1)=3.023969e-003; ng(n+1)=2.435565e+003;
n=3; farx(n+1)=1.445991e+003; foe(n+1)=7.172953e+002; krok(n+1)=1.945992e-004; ng(n+1)=8.900687e+003;
n=4; farx(n+1)=1.875484e+003; foe(n+1)=5.466142e+002; krok(n+1)=4.494798e-004; ng(n+1)=8.604071e+003;
n=5; farx(n+1)=1.107986e+003; foe(n+1)=4.637133e+002; krok(n+1)=6.192369e-003; ng(n+1)=6.734480e+002;
n=6; farx(n+1)=9.458434e+002; foe(n+1)=4.372557e+002; krok(n+1)=6.847610e-004; ng(n+1)=2.975314e+003;
n=7; farx(n+1)=3.263278e+002; foe(n+1)=3.878033e+002; krok(n+1)=1.276921e-003; ng(n+1)=3.073986e+003;
n=8; farx(n+1)=3.060868e+002; foe(n+1)=3.782257e+002; krok(n+1)=4.402495e-006; ng(n+1)=2.458315e+004;
n=9; farx(n+1)=2.731320e+002; foe(n+1)=3.710921e+002; krok(n+1)=4.604034e-004; ng(n+1)=1.652851e+004;
n=10; farx(n+1)=2.334270e+002; foe(n+1)=3.570300e+002; krok(n+1)=1.219108e-003; ng(n+1)=1.360531e+004;
n=11; farx(n+1)=2.244138e+002; foe(n+1)=3.512997e+002; krok(n+1)=4.270496e-004; ng(n+1)=8.512562e+003;
n=12; farx(n+1)=2.324329e+002; foe(n+1)=3.274001e+002; krok(n+1)=3.272561e-003; ng(n+1)=3.848876e+003;
n=13; farx(n+1)=2.518944e+002; foe(n+1)=3.156771e+002; krok(n+1)=2.774090e-003; ng(n+1)=1.996422e+003;
n=14; farx(n+1)=3.010814e+002; foe(n+1)=3.044884e+002; krok(n+1)=2.249238e-003; ng(n+1)=1.266522e+003;
n=15; farx(n+1)=2.864212e+002; foe(n+1)=2.928575e+002; krok(n+1)=1.220985e-003; ng(n+1)=9.352560e+002;
n=16; farx(n+1)=2.874162e+002; foe(n+1)=2.809986e+002; krok(n+1)=3.758503e-003; ng(n+1)=6.295489e+002;
n=17; farx(n+1)=2.509235e+002; foe(n+1)=2.670875e+002; krok(n+1)=7.739087e-003; ng(n+1)=6.985188e+002;
n=18; farx(n+1)=1.594243e+002; foe(n+1)=2.263227e+002; krok(n+1)=6.526603e-003; ng(n+1)=1.466294e+003;
n=19; farx(n+1)=1.204992e+002; foe(n+1)=2.140247e+002; krok(n+1)=9.701682e-004; ng(n+1)=1.279875e+003;
n=20; farx(n+1)=8.570636e+001; foe(n+1)=1.781810e+002; krok(n+1)=1.618881e-003; ng(n+1)=1.092604e+003;
n=21; farx(n+1)=8.349912e+001; foe(n+1)=1.773689e+002; krok(n+1)=4.341873e-005; ng(n+1)=2.175043e+003;
n=22; farx(n+1)=6.962560e+001; foe(n+1)=1.719441e+002; krok(n+1)=2.690870e-003; ng(n+1)=2.689644e+003;
n=23; farx(n+1)=6.864647e+001; foe(n+1)=1.656945e+002; krok(n+1)=1.127391e-003; ng(n+1)=2.794479e+003;
n=24; farx(n+1)=6.336395e+001; foe(n+1)=1.617666e+002; krok(n+1)=5.148205e-004; ng(n+1)=3.758683e+003;
n=25; farx(n+1)=5.761269e+001; foe(n+1)=1.577908e+002; krok(n+1)=2.324084e-003; ng(n+1)=5.796617e+003;
%odnowa zmiennej metryki
n=26; farx(n+1)=4.908722e+001; foe(n+1)=1.377069e+002; krok(n+1)=1.153689e-005; ng(n+1)=6.529689e+003;
n=27; farx(n+1)=4.652766e+001; foe(n+1)=1.046140e+002; krok(n+1)=2.215284e-004; ng(n+1)=1.992369e+003;
n=28; farx(n+1)=3.720907e+001; foe(n+1)=7.814324e+001; krok(n+1)=2.651075e-004; ng(n+1)=1.232257e+003;
n=29; farx(n+1)=3.683200e+001; foe(n+1)=7.434971e+001; krok(n+1)=1.024331e-004; ng(n+1)=1.615679e+003;
n=30; farx(n+1)=3.649001e+001; foe(n+1)=6.965067e+001; krok(n+1)=2.930791e-004; ng(n+1)=2.736012e+003;
n=31; farx(n+1)=2.883195e+001; foe(n+1)=5.309124e+001; krok(n+1)=4.704763e-003; ng(n+1)=6.344925e+002;
n=32; farx(n+1)=2.424762e+001; foe(n+1)=4.516762e+001; krok(n+1)=1.086571e-003; ng(n+1)=3.601431e+003;
n=33; farx(n+1)=2.408054e+001; foe(n+1)=4.335967e+001; krok(n+1)=5.747417e-004; ng(n+1)=1.660985e+003;
n=34; farx(n+1)=2.268811e+001; foe(n+1)=3.635751e+001; krok(n+1)=3.990786e-003; ng(n+1)=1.838372e+003;
n=35; farx(n+1)=2.064173e+001; foe(n+1)=3.445522e+001; krok(n+1)=6.384605e-004; ng(n+1)=1.643434e+003;
n=36; farx(n+1)=1.875657e+001; foe(n+1)=3.002990e+001; krok(n+1)=3.364099e-003; ng(n+1)=9.205088e+002;
n=37; farx(n+1)=2.029350e+001; foe(n+1)=2.631490e+001; krok(n+1)=7.799544e-003; ng(n+1)=5.353506e+002;
n=38; farx(n+1)=2.000599e+001; foe(n+1)=2.602500e+001; krok(n+1)=5.304139e-004; ng(n+1)=2.485902e+002;
n=39; farx(n+1)=1.904431e+001; foe(n+1)=2.509667e+001; krok(n+1)=5.465324e-004; ng(n+1)=1.257707e+003;
n=40; farx(n+1)=1.695501e+001; foe(n+1)=2.347941e+001; krok(n+1)=1.048565e-002; ng(n+1)=7.935264e+002;
n=41; farx(n+1)=1.436621e+001; foe(n+1)=2.169145e+001; krok(n+1)=1.132561e-002; ng(n+1)=2.048227e+003;
n=42; farx(n+1)=1.197477e+001; foe(n+1)=1.974598e+001; krok(n+1)=4.663178e-003; ng(n+1)=1.122629e+003;
n=43; farx(n+1)=9.068947e+000; foe(n+1)=1.685835e+001; krok(n+1)=1.564230e-003; ng(n+1)=2.682768e+003;
n=44; farx(n+1)=7.930957e+000; foe(n+1)=1.529894e+001; krok(n+1)=1.448033e-003; ng(n+1)=7.145935e+003;
n=45; farx(n+1)=7.651651e+000; foe(n+1)=1.473563e+001; krok(n+1)=2.472310e-003; ng(n+1)=2.655634e+003;
n=46; farx(n+1)=7.401235e+000; foe(n+1)=1.420331e+001; krok(n+1)=4.118564e-003; ng(n+1)=3.340718e+003;
n=47; farx(n+1)=7.074889e+000; foe(n+1)=1.304289e+001; krok(n+1)=1.400181e-002; ng(n+1)=2.432760e+003;
n=48; farx(n+1)=6.597483e+000; foe(n+1)=1.243728e+001; krok(n+1)=8.751130e-003; ng(n+1)=8.758497e+002;
n=49; farx(n+1)=6.210295e+000; foe(n+1)=1.182806e+001; krok(n+1)=2.008299e-002; ng(n+1)=1.028864e+003;
n=50; farx(n+1)=5.639836e+000; foe(n+1)=1.102006e+001; krok(n+1)=2.432476e-002; ng(n+1)=1.256198e+003;
%odnowa zmiennej metryki
n=51; farx(n+1)=5.639937e+000; foe(n+1)=1.096059e+001; krok(n+1)=2.444110e-005; ng(n+1)=2.338624e+002;
n=52; farx(n+1)=5.641237e+000; foe(n+1)=1.091773e+001; krok(n+1)=1.115447e-005; ng(n+1)=3.096350e+002;
n=53; farx(n+1)=5.534410e+000; foe(n+1)=1.075132e+001; krok(n+1)=1.874926e-004; ng(n+1)=1.496813e+002;
n=54; farx(n+1)=5.316553e+000; foe(n+1)=1.028642e+001; krok(n+1)=2.322394e-004; ng(n+1)=2.003060e+002;
n=55; farx(n+1)=4.709911e+000; foe(n+1)=9.506251e+000; krok(n+1)=1.406933e-003; ng(n+1)=1.479747e+002;
n=56; farx(n+1)=4.578149e+000; foe(n+1)=9.184362e+000; krok(n+1)=1.869974e-003; ng(n+1)=3.175669e+002;
n=57; farx(n+1)=3.821180e+000; foe(n+1)=8.244008e+000; krok(n+1)=2.168540e-003; ng(n+1)=3.788614e+002;
n=58; farx(n+1)=3.690262e+000; foe(n+1)=7.404614e+000; krok(n+1)=1.748904e-002; ng(n+1)=4.647113e+002;
n=59; farx(n+1)=3.640772e+000; foe(n+1)=6.828950e+000; krok(n+1)=2.818678e-003; ng(n+1)=2.750178e+002;
n=60; farx(n+1)=3.210383e+000; foe(n+1)=6.139408e+000; krok(n+1)=3.303815e-003; ng(n+1)=6.117867e+002;
n=61; farx(n+1)=2.778081e+000; foe(n+1)=5.614764e+000; krok(n+1)=4.126056e-003; ng(n+1)=3.803165e+002;
n=62; farx(n+1)=2.612129e+000; foe(n+1)=5.136003e+000; krok(n+1)=6.353015e-003; ng(n+1)=2.989748e+002;
n=63; farx(n+1)=2.571928e+000; foe(n+1)=4.875647e+000; krok(n+1)=5.355898e-003; ng(n+1)=8.058185e+002;
n=64; farx(n+1)=2.340113e+000; foe(n+1)=4.452052e+000; krok(n+1)=1.111520e-002; ng(n+1)=3.461769e+002;
n=65; farx(n+1)=2.255461e+000; foe(n+1)=4.231475e+000; krok(n+1)=2.883948e-003; ng(n+1)=3.955414e+002;
n=66; farx(n+1)=2.025790e+000; foe(n+1)=3.910196e+000; krok(n+1)=1.175824e-002; ng(n+1)=4.475798e+002;
n=67; farx(n+1)=1.893925e+000; foe(n+1)=3.585242e+000; krok(n+1)=1.785641e-002; ng(n+1)=2.085645e+002;
n=68; farx(n+1)=1.856707e+000; foe(n+1)=3.385444e+000; krok(n+1)=9.378531e-003; ng(n+1)=4.446577e+002;
n=69; farx(n+1)=1.791355e+000; foe(n+1)=3.259262e+000; krok(n+1)=2.366211e-002; ng(n+1)=1.534719e+002;
n=70; farx(n+1)=1.726392e+000; foe(n+1)=3.162941e+000; krok(n+1)=2.127270e-002; ng(n+1)=1.702921e+002;
n=71; farx(n+1)=1.659540e+000; foe(n+1)=3.064110e+000; krok(n+1)=2.991958e-002; ng(n+1)=2.852634e+002;
n=72; farx(n+1)=1.534618e+000; foe(n+1)=2.778889e+000; krok(n+1)=6.846533e-002; ng(n+1)=3.025988e+002;
n=73; farx(n+1)=1.525881e+000; foe(n+1)=2.752540e+000; krok(n+1)=1.269968e-002; ng(n+1)=1.922198e+002;
n=74; farx(n+1)=1.526236e+000; foe(n+1)=2.645401e+000; krok(n+1)=9.630670e-002; ng(n+1)=1.189284e+002;
n=75; farx(n+1)=1.520115e+000; foe(n+1)=2.595402e+000; krok(n+1)=2.607440e-002; ng(n+1)=3.524117e+002;
%odnowa zmiennej metryki
n=76; farx(n+1)=1.517512e+000; foe(n+1)=2.588633e+000; krok(n+1)=7.692286e-006; ng(n+1)=1.357776e+002;
n=77; farx(n+1)=1.512977e+000; foe(n+1)=2.576519e+000; krok(n+1)=4.888219e-005; ng(n+1)=7.407560e+001;
n=78; farx(n+1)=1.510369e+000; foe(n+1)=2.558749e+000; krok(n+1)=7.363092e-005; ng(n+1)=7.578240e+001;
n=79; farx(n+1)=1.507780e+000; foe(n+1)=2.551684e+000; krok(n+1)=5.986366e-005; ng(n+1)=5.055874e+001;
n=80; farx(n+1)=1.492583e+000; foe(n+1)=2.536865e+000; krok(n+1)=1.013537e-003; ng(n+1)=1.821067e+001;
n=81; farx(n+1)=1.477279e+000; foe(n+1)=2.519118e+000; krok(n+1)=2.141344e-003; ng(n+1)=1.614319e+001;
n=82; farx(n+1)=1.462844e+000; foe(n+1)=2.502574e+000; krok(n+1)=2.943935e-003; ng(n+1)=2.792871e+001;
n=83; farx(n+1)=1.459914e+000; foe(n+1)=2.466581e+000; krok(n+1)=6.398295e-003; ng(n+1)=4.688541e+001;
n=84; farx(n+1)=1.443502e+000; foe(n+1)=2.424418e+000; krok(n+1)=1.111520e-002; ng(n+1)=3.879163e+001;
n=85; farx(n+1)=1.410343e+000; foe(n+1)=2.357857e+000; krok(n+1)=1.183052e-002; ng(n+1)=5.081387e+001;
n=86; farx(n+1)=1.387789e+000; foe(n+1)=2.289431e+000; krok(n+1)=3.911298e-002; ng(n+1)=2.647678e+002;
n=87; farx(n+1)=1.329267e+000; foe(n+1)=2.224888e+000; krok(n+1)=1.586441e-002; ng(n+1)=1.967763e+002;
n=88; farx(n+1)=1.278105e+000; foe(n+1)=2.150734e+000; krok(n+1)=1.495979e-002; ng(n+1)=9.837315e+001;
n=89; farx(n+1)=1.236647e+000; foe(n+1)=2.018551e+000; krok(n+1)=2.243330e-002; ng(n+1)=3.510734e+002;
n=90; farx(n+1)=1.218815e+000; foe(n+1)=1.963854e+000; krok(n+1)=6.970662e-003; ng(n+1)=2.182207e+002;
n=91; farx(n+1)=1.195591e+000; foe(n+1)=1.887766e+000; krok(n+1)=2.559636e-002; ng(n+1)=2.499138e+002;
n=92; farx(n+1)=1.190026e+000; foe(n+1)=1.863803e+000; krok(n+1)=6.130766e-003; ng(n+1)=2.215514e+002;
n=93; farx(n+1)=1.163174e+000; foe(n+1)=1.828441e+000; krok(n+1)=4.030924e-002; ng(n+1)=1.069148e+002;
n=94; farx(n+1)=1.144313e+000; foe(n+1)=1.792270e+000; krok(n+1)=4.663470e-002; ng(n+1)=1.117097e+002;
n=95; farx(n+1)=1.104451e+000; foe(n+1)=1.733781e+000; krok(n+1)=6.601690e-002; ng(n+1)=6.289721e+001;
n=96; farx(n+1)=1.090885e+000; foe(n+1)=1.689772e+000; krok(n+1)=3.039298e-002; ng(n+1)=1.546975e+002;
n=97; farx(n+1)=1.083532e+000; foe(n+1)=1.657562e+000; krok(n+1)=2.117616e-002; ng(n+1)=1.242595e+002;
n=98; farx(n+1)=1.083631e+000; foe(n+1)=1.645258e+000; krok(n+1)=8.816889e-003; ng(n+1)=2.435624e+002;
n=99; farx(n+1)=1.092278e+000; foe(n+1)=1.578531e+000; krok(n+1)=6.268030e-002; ng(n+1)=1.242793e+002;
n=100; farx(n+1)=1.095479e+000; foe(n+1)=1.533460e+000; krok(n+1)=4.953895e-002; ng(n+1)=1.626242e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
