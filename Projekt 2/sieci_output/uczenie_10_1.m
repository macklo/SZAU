%uczenie predyktora oe
clear all;
n=0; farx(n+1)=4.744312e+003; foe(n+1)=4.854381e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=3.483778e+003; foe(n+1)=3.653098e+003; krok(n+1)=3.423805e-004; ng(n+1)=6.187213e+003;
n=2; farx(n+1)=8.053790e+002; foe(n+1)=1.126539e+003; krok(n+1)=1.104943e-003; ng(n+1)=4.474002e+003;
n=3; farx(n+1)=8.593523e+002; foe(n+1)=8.944430e+002; krok(n+1)=9.339144e-005; ng(n+1)=1.009768e+004;
n=4; farx(n+1)=1.135182e+003; foe(n+1)=8.387418e+002; krok(n+1)=3.254643e-004; ng(n+1)=7.845307e+003;
n=5; farx(n+1)=5.476479e+002; foe(n+1)=6.094629e+002; krok(n+1)=8.427741e-003; ng(n+1)=1.446539e+003;
n=6; farx(n+1)=5.382927e+002; foe(n+1)=6.081456e+002; krok(n+1)=5.306198e-006; ng(n+1)=2.219170e+003;
n=7; farx(n+1)=4.575240e+002; foe(n+1)=5.781503e+002; krok(n+1)=8.522221e-004; ng(n+1)=3.431785e+003;
n=8; farx(n+1)=3.485428e+002; foe(n+1)=5.483987e+002; krok(n+1)=8.861138e-004; ng(n+1)=4.547875e+003;
n=9; farx(n+1)=2.320798e+002; foe(n+1)=5.021868e+002; krok(n+1)=4.338408e-004; ng(n+1)=2.832295e+003;
n=10; farx(n+1)=1.837345e+002; foe(n+1)=4.911975e+002; krok(n+1)=9.531131e-005; ng(n+1)=4.661437e+003;
n=11; farx(n+1)=1.436411e+002; foe(n+1)=4.406214e+002; krok(n+1)=7.740461e-004; ng(n+1)=7.646135e+003;
n=12; farx(n+1)=1.094720e+002; foe(n+1)=4.064234e+002; krok(n+1)=4.630782e-004; ng(n+1)=1.201485e+004;
n=13; farx(n+1)=1.066715e+002; foe(n+1)=3.902490e+002; krok(n+1)=4.073849e-005; ng(n+1)=2.566061e+004;
n=14; farx(n+1)=1.043036e+002; foe(n+1)=3.662451e+002; krok(n+1)=3.569431e-004; ng(n+1)=2.610764e+004;
n=15; farx(n+1)=9.076556e+001; foe(n+1)=3.501816e+002; krok(n+1)=1.203557e-004; ng(n+1)=2.512545e+004;
n=16; farx(n+1)=7.448035e+001; foe(n+1)=2.820972e+002; krok(n+1)=1.002892e-003; ng(n+1)=2.684952e+004;
n=17; farx(n+1)=7.262650e+001; foe(n+1)=2.725593e+002; krok(n+1)=1.553088e-004; ng(n+1)=1.729951e+004;
n=18; farx(n+1)=7.062506e+001; foe(n+1)=2.564981e+002; krok(n+1)=2.156451e-003; ng(n+1)=1.510861e+004;
n=19; farx(n+1)=5.577168e+001; foe(n+1)=2.118229e+002; krok(n+1)=2.641497e-003; ng(n+1)=6.656080e+003;
n=20; farx(n+1)=5.514942e+001; foe(n+1)=1.892517e+002; krok(n+1)=3.383827e-004; ng(n+1)=7.362594e+003;
n=21; farx(n+1)=5.276898e+001; foe(n+1)=1.801213e+002; krok(n+1)=7.905261e-004; ng(n+1)=3.809830e+003;
n=22; farx(n+1)=5.415823e+001; foe(n+1)=1.707165e+002; krok(n+1)=3.105922e-004; ng(n+1)=3.690832e+003;
n=23; farx(n+1)=5.419268e+001; foe(n+1)=1.547145e+002; krok(n+1)=4.302795e-004; ng(n+1)=8.818996e+003;
n=24; farx(n+1)=5.249962e+001; foe(n+1)=1.422990e+002; krok(n+1)=3.505202e-004; ng(n+1)=7.314031e+003;
n=25; farx(n+1)=5.373749e+001; foe(n+1)=1.286380e+002; krok(n+1)=5.405350e-004; ng(n+1)=1.457663e+004;
%odnowa zmiennej metryki
n=26; farx(n+1)=5.356386e+001; foe(n+1)=1.274421e+002; krok(n+1)=2.056671e-006; ng(n+1)=3.256512e+003;
n=27; farx(n+1)=5.265434e+001; foe(n+1)=1.198619e+002; krok(n+1)=1.248150e-005; ng(n+1)=4.374273e+003;
n=28; farx(n+1)=5.010172e+001; foe(n+1)=1.172076e+002; krok(n+1)=1.814366e-005; ng(n+1)=1.734169e+003;
n=29; farx(n+1)=4.345184e+001; foe(n+1)=1.060973e+002; krok(n+1)=4.927090e-004; ng(n+1)=2.220271e+003;
n=30; farx(n+1)=3.996329e+001; foe(n+1)=9.528658e+001; krok(n+1)=8.176967e-005; ng(n+1)=1.874508e+003;
n=31; farx(n+1)=3.044272e+001; foe(n+1)=7.618533e+001; krok(n+1)=1.202286e-003; ng(n+1)=3.613371e+003;
n=32; farx(n+1)=1.794583e+001; foe(n+1)=4.369410e+001; krok(n+1)=1.786211e-003; ng(n+1)=5.998573e+003;
n=33; farx(n+1)=1.645097e+001; foe(n+1)=3.953999e+001; krok(n+1)=5.598060e-004; ng(n+1)=5.403008e+003;
n=34; farx(n+1)=1.200140e+001; foe(n+1)=2.884630e+001; krok(n+1)=1.037622e-003; ng(n+1)=1.707668e+003;
n=35; farx(n+1)=1.048720e+001; foe(n+1)=2.571278e+001; krok(n+1)=5.591620e-004; ng(n+1)=3.444519e+003;
n=36; farx(n+1)=6.721998e+000; foe(n+1)=1.864695e+001; krok(n+1)=1.239336e-003; ng(n+1)=1.884634e+003;
n=37; farx(n+1)=5.276189e+000; foe(n+1)=1.678573e+001; krok(n+1)=1.846469e-003; ng(n+1)=1.083004e+003;
n=38; farx(n+1)=4.234818e+000; foe(n+1)=1.545874e+001; krok(n+1)=1.047905e-003; ng(n+1)=2.959116e+003;
n=39; farx(n+1)=3.279871e+000; foe(n+1)=1.404893e+001; krok(n+1)=2.774090e-003; ng(n+1)=7.777861e+002;
n=40; farx(n+1)=2.181146e+000; foe(n+1)=1.149114e+001; krok(n+1)=4.620452e-003; ng(n+1)=9.653405e+002;
n=41; farx(n+1)=1.998320e+000; foe(n+1)=1.055256e+001; krok(n+1)=2.474886e-003; ng(n+1)=1.368309e+003;
n=42; farx(n+1)=1.803340e+000; foe(n+1)=1.009811e+001; krok(n+1)=1.597633e-003; ng(n+1)=1.044965e+003;
n=43; farx(n+1)=1.649720e+000; foe(n+1)=8.308069e+000; krok(n+1)=5.172508e-003; ng(n+1)=1.375486e+003;
n=44; farx(n+1)=1.568375e+000; foe(n+1)=7.953317e+000; krok(n+1)=3.382411e-003; ng(n+1)=9.244905e+002;
n=45; farx(n+1)=1.466796e+000; foe(n+1)=7.150028e+000; krok(n+1)=4.790962e-003; ng(n+1)=1.714162e+003;
n=46; farx(n+1)=1.467395e+000; foe(n+1)=6.939913e+000; krok(n+1)=1.970836e-003; ng(n+1)=8.118132e+002;
n=47; farx(n+1)=1.525757e+000; foe(n+1)=6.368933e+000; krok(n+1)=4.046033e-003; ng(n+1)=9.984100e+002;
n=48; farx(n+1)=1.786071e+000; foe(n+1)=5.506075e+000; krok(n+1)=1.936662e-002; ng(n+1)=6.822677e+002;
n=49; farx(n+1)=1.786454e+000; foe(n+1)=5.083817e+000; krok(n+1)=3.840117e-003; ng(n+1)=1.773285e+003;
n=50; farx(n+1)=1.875316e+000; foe(n+1)=4.689486e+000; krok(n+1)=3.367365e-003; ng(n+1)=1.092202e+003;
%odnowa zmiennej metryki
n=51; farx(n+1)=1.873809e+000; foe(n+1)=4.645029e+000; krok(n+1)=3.690681e-006; ng(n+1)=5.547953e+002;
n=52; farx(n+1)=1.861638e+000; foe(n+1)=4.588182e+000; krok(n+1)=5.807097e-006; ng(n+1)=4.953407e+002;
n=53; farx(n+1)=1.852657e+000; foe(n+1)=4.549170e+000; krok(n+1)=5.062902e-006; ng(n+1)=4.482647e+002;
n=54; farx(n+1)=1.856070e+000; foe(n+1)=4.406213e+000; krok(n+1)=1.733806e-004; ng(n+1)=1.672448e+002;
n=55; farx(n+1)=1.848171e+000; foe(n+1)=4.376968e+000; krok(n+1)=8.388029e-005; ng(n+1)=1.015119e+002;
n=56; farx(n+1)=1.742963e+000; foe(n+1)=4.120503e+000; krok(n+1)=1.427772e-003; ng(n+1)=9.769678e+001;
n=57; farx(n+1)=1.457176e+000; foe(n+1)=3.896770e+000; krok(n+1)=3.446556e-003; ng(n+1)=1.820288e+002;
n=58; farx(n+1)=1.076699e+000; foe(n+1)=3.527225e+000; krok(n+1)=2.883948e-003; ng(n+1)=1.869817e+002;
n=59; farx(n+1)=9.658239e-001; foe(n+1)=3.306658e+000; krok(n+1)=4.279083e-003; ng(n+1)=6.897158e+002;
n=60; farx(n+1)=9.831148e-001; foe(n+1)=3.193742e+000; krok(n+1)=2.257553e-003; ng(n+1)=6.403552e+002;
n=61; farx(n+1)=1.003926e+000; foe(n+1)=3.069969e+000; krok(n+1)=3.657312e-003; ng(n+1)=9.876755e+002;
n=62; farx(n+1)=1.026517e+000; foe(n+1)=2.996886e+000; krok(n+1)=3.870712e-003; ng(n+1)=7.113922e+002;
n=63; farx(n+1)=9.777533e-001; foe(n+1)=2.865802e+000; krok(n+1)=1.376948e-002; ng(n+1)=1.193597e+003;
n=64; farx(n+1)=9.442274e-001; foe(n+1)=2.752456e+000; krok(n+1)=6.907945e-003; ng(n+1)=6.507267e+002;
n=65; farx(n+1)=9.179887e-001; foe(n+1)=2.714564e+000; krok(n+1)=2.220021e-003; ng(n+1)=6.636698e+002;
n=66; farx(n+1)=8.815645e-001; foe(n+1)=2.583521e+000; krok(n+1)=8.128862e-003; ng(n+1)=9.715894e+002;
n=67; farx(n+1)=8.494259e-001; foe(n+1)=2.524716e+000; krok(n+1)=1.278285e-002; ng(n+1)=5.803622e+002;
n=68; farx(n+1)=7.843448e-001; foe(n+1)=2.383087e+000; krok(n+1)=1.680437e-002; ng(n+1)=4.841268e+002;
n=69; farx(n+1)=7.623713e-001; foe(n+1)=2.315826e+000; krok(n+1)=7.032104e-003; ng(n+1)=4.004146e+002;
n=70; farx(n+1)=7.553533e-001; foe(n+1)=2.265539e+000; krok(n+1)=1.027490e-002; ng(n+1)=3.554845e+002;
n=71; farx(n+1)=7.263976e-001; foe(n+1)=2.180573e+000; krok(n+1)=1.450364e-002; ng(n+1)=7.040282e+002;
n=72; farx(n+1)=6.810302e-001; foe(n+1)=2.099119e+000; krok(n+1)=2.128042e-002; ng(n+1)=4.148137e+002;
n=73; farx(n+1)=6.762305e-001; foe(n+1)=2.064488e+000; krok(n+1)=8.053672e-003; ng(n+1)=4.916504e+002;
n=74; farx(n+1)=6.807026e-001; foe(n+1)=1.998531e+000; krok(n+1)=2.334578e-002; ng(n+1)=5.543825e+002;
n=75; farx(n+1)=6.792983e-001; foe(n+1)=1.948684e+000; krok(n+1)=1.473291e-002; ng(n+1)=2.423702e+002;
%odnowa zmiennej metryki
n=76; farx(n+1)=6.786118e-001; foe(n+1)=1.936459e+000; krok(n+1)=1.336511e-006; ng(n+1)=4.894372e+002;
n=77; farx(n+1)=6.787785e-001; foe(n+1)=1.932773e+000; krok(n+1)=2.026605e-006; ng(n+1)=1.836798e+002;
n=78; farx(n+1)=6.792001e-001; foe(n+1)=1.924034e+000; krok(n+1)=1.552186e-005; ng(n+1)=1.197960e+002;
n=79; farx(n+1)=6.780928e-001; foe(n+1)=1.920918e+000; krok(n+1)=1.720017e-005; ng(n+1)=6.425746e+001;
n=80; farx(n+1)=6.639792e-001; foe(n+1)=1.904041e+000; krok(n+1)=9.915259e-004; ng(n+1)=2.532414e+001;
n=81; farx(n+1)=6.559957e-001; foe(n+1)=1.893931e+000; krok(n+1)=3.363588e-004; ng(n+1)=3.071439e+001;
n=82; farx(n+1)=6.040348e-001; foe(n+1)=1.834522e+000; krok(n+1)=5.214412e-003; ng(n+1)=2.846362e+001;
n=83; farx(n+1)=5.401882e-001; foe(n+1)=1.750097e+000; krok(n+1)=1.161194e-003; ng(n+1)=1.082145e+002;
n=84; farx(n+1)=5.370373e-001; foe(n+1)=1.719419e+000; krok(n+1)=2.957629e-003; ng(n+1)=5.606358e+002;
n=85; farx(n+1)=5.281334e-001; foe(n+1)=1.673209e+000; krok(n+1)=4.175393e-003; ng(n+1)=5.449490e+002;
n=86; farx(n+1)=5.489799e-001; foe(n+1)=1.607839e+000; krok(n+1)=1.131031e-002; ng(n+1)=3.658792e+002;
n=87; farx(n+1)=5.232766e-001; foe(n+1)=1.555644e+000; krok(n+1)=5.608324e-003; ng(n+1)=3.352267e+002;
n=88; farx(n+1)=5.247697e-001; foe(n+1)=1.543262e+000; krok(n+1)=4.751121e-003; ng(n+1)=5.118010e+002;
n=89; farx(n+1)=5.160396e-001; foe(n+1)=1.501829e+000; krok(n+1)=1.547432e-002; ng(n+1)=7.190616e+002;
n=90; farx(n+1)=5.034592e-001; foe(n+1)=1.485114e+000; krok(n+1)=4.483426e-003; ng(n+1)=3.629294e+002;
n=91; farx(n+1)=4.963977e-001; foe(n+1)=1.461475e+000; krok(n+1)=7.809264e-003; ng(n+1)=3.836229e+002;
n=92; farx(n+1)=4.769389e-001; foe(n+1)=1.434856e+000; krok(n+1)=1.488559e-002; ng(n+1)=4.014691e+002;
n=93; farx(n+1)=4.618513e-001; foe(n+1)=1.408364e+000; krok(n+1)=9.683632e-003; ng(n+1)=5.563402e+002;
n=94; farx(n+1)=4.411846e-001; foe(n+1)=1.369381e+000; krok(n+1)=1.270603e-002; ng(n+1)=3.233008e+002;
n=95; farx(n+1)=4.188716e-001; foe(n+1)=1.309682e+000; krok(n+1)=1.048329e-002; ng(n+1)=3.506025e+002;
n=96; farx(n+1)=4.012517e-001; foe(n+1)=1.210360e+000; krok(n+1)=1.417782e-002; ng(n+1)=6.354922e+002;
n=97; farx(n+1)=3.991751e-001; foe(n+1)=1.186110e+000; krok(n+1)=1.564230e-003; ng(n+1)=5.717629e+002;
n=98; farx(n+1)=3.999155e-001; foe(n+1)=1.134467e+000; krok(n+1)=9.267996e-003; ng(n+1)=5.164218e+002;
n=99; farx(n+1)=4.050616e-001; foe(n+1)=1.113095e+000; krok(n+1)=8.111094e-003; ng(n+1)=6.286503e+002;
n=100; farx(n+1)=4.125575e-001; foe(n+1)=1.072661e+000; krok(n+1)=2.025137e-002; ng(n+1)=2.415784e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
