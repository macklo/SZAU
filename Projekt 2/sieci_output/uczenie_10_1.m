%uczenie predyktora oe
clear all;
n=0; farx(n+1)=4.473983e+003; foe(n+1)=4.612349e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=2.713994e+003; foe(n+1)=2.847174e+003; krok(n+1)=4.636412e-004; ng(n+1)=6.217503e+003;
n=2; farx(n+1)=1.029389e+003; foe(n+1)=1.169433e+003; krok(n+1)=1.983052e-003; ng(n+1)=3.168490e+003;
n=3; farx(n+1)=1.216334e+003; foe(n+1)=8.009839e+002; krok(n+1)=1.455799e-004; ng(n+1)=1.057947e+004;
n=4; farx(n+1)=1.792565e+003; foe(n+1)=5.873473e+002; krok(n+1)=6.184156e-004; ng(n+1)=1.070044e+004;
n=5; farx(n+1)=1.375557e+003; foe(n+1)=5.209774e+002; krok(n+1)=5.637357e-003; ng(n+1)=9.484998e+002;
n=6; farx(n+1)=9.474642e+002; foe(n+1)=4.453894e+002; krok(n+1)=1.389400e-003; ng(n+1)=2.288723e+003;
n=7; farx(n+1)=9.124365e+002; foe(n+1)=4.424747e+002; krok(n+1)=3.079431e-005; ng(n+1)=2.091269e+003;
n=8; farx(n+1)=6.541773e+002; foe(n+1)=4.038752e+002; krok(n+1)=1.389400e-003; ng(n+1)=3.047998e+003;
n=9; farx(n+1)=2.815533e+002; foe(n+1)=3.061700e+002; krok(n+1)=4.812762e-003; ng(n+1)=2.954365e+003;
n=10; farx(n+1)=2.414482e+002; foe(n+1)=2.971911e+002; krok(n+1)=6.935224e-004; ng(n+1)=1.048764e+003;
n=11; farx(n+1)=2.227028e+002; foe(n+1)=2.898941e+002; krok(n+1)=2.487486e-003; ng(n+1)=8.197692e+002;
n=12; farx(n+1)=1.570326e+002; foe(n+1)=2.722982e+002; krok(n+1)=2.774090e-003; ng(n+1)=1.045803e+003;
n=13; farx(n+1)=1.412371e+002; foe(n+1)=2.626304e+002; krok(n+1)=1.926084e-003; ng(n+1)=9.842597e+002;
n=14; farx(n+1)=1.077531e+002; foe(n+1)=2.322699e+002; krok(n+1)=6.764823e-003; ng(n+1)=1.430060e+003;
n=15; farx(n+1)=4.818226e+001; foe(n+1)=2.009061e+002; krok(n+1)=6.832794e-003; ng(n+1)=6.078784e+002;
n=16; farx(n+1)=3.078613e+001; foe(n+1)=1.903277e+002; krok(n+1)=1.323622e-004; ng(n+1)=3.818221e+003;
n=17; farx(n+1)=2.740500e+001; foe(n+1)=1.777251e+002; krok(n+1)=3.766475e-004; ng(n+1)=5.568272e+003;
n=18; farx(n+1)=3.450456e+001; foe(n+1)=1.566195e+002; krok(n+1)=1.752601e-004; ng(n+1)=5.533690e+003;
n=19; farx(n+1)=3.891107e+001; foe(n+1)=1.514934e+002; krok(n+1)=4.820465e-004; ng(n+1)=5.198087e+003;
n=20; farx(n+1)=7.289749e+001; foe(n+1)=1.376826e+002; krok(n+1)=2.133311e-003; ng(n+1)=4.809827e+003;
n=21; farx(n+1)=1.234901e+002; foe(n+1)=1.253145e+002; krok(n+1)=2.469709e-004; ng(n+1)=4.046367e+003;
n=22; farx(n+1)=1.367296e+002; foe(n+1)=1.194101e+002; krok(n+1)=7.499704e-004; ng(n+1)=3.062416e+003;
n=23; farx(n+1)=1.699303e+002; foe(n+1)=1.068394e+002; krok(n+1)=5.055634e-004; ng(n+1)=4.143304e+003;
n=24; farx(n+1)=1.834457e+002; foe(n+1)=9.480789e+001; krok(n+1)=4.138691e-003; ng(n+1)=2.091766e+003;
n=25; farx(n+1)=1.853941e+002; foe(n+1)=8.105117e+001; krok(n+1)=1.667309e-003; ng(n+1)=3.902543e+003;
%odnowa zmiennej metryki
n=26; farx(n+1)=1.775602e+002; foe(n+1)=6.734866e+001; krok(n+1)=5.287230e-006; ng(n+1)=6.265080e+003;
n=27; farx(n+1)=1.439570e+002; foe(n+1)=5.447967e+001; krok(n+1)=9.108681e-005; ng(n+1)=1.251107e+003;
n=28; farx(n+1)=1.341168e+002; foe(n+1)=5.188521e+001; krok(n+1)=7.363092e-005; ng(n+1)=2.328324e+003;
n=29; farx(n+1)=9.737024e+001; foe(n+1)=4.615470e+001; krok(n+1)=2.939560e-003; ng(n+1)=2.542502e+003;
n=30; farx(n+1)=7.870282e+001; foe(n+1)=4.085487e+001; krok(n+1)=1.841613e-003; ng(n+1)=1.052434e+003;
n=31; farx(n+1)=5.319336e+001; foe(n+1)=3.334310e+001; krok(n+1)=1.601212e-003; ng(n+1)=8.926234e+002;
n=32; farx(n+1)=2.857154e+001; foe(n+1)=2.468392e+001; krok(n+1)=6.668735e-003; ng(n+1)=1.910701e+003;
n=33; farx(n+1)=1.665296e+001; foe(n+1)=2.099243e+001; krok(n+1)=2.391558e-003; ng(n+1)=5.985603e+002;
n=34; farx(n+1)=1.322909e+001; foe(n+1)=1.936934e+001; krok(n+1)=3.199854e-004; ng(n+1)=1.863126e+003;
n=35; farx(n+1)=9.384771e+000; foe(n+1)=1.726678e+001; krok(n+1)=1.908037e-003; ng(n+1)=2.502687e+003;
n=36; farx(n+1)=6.216267e+000; foe(n+1)=1.459652e+001; krok(n+1)=3.941790e-003; ng(n+1)=1.439349e+003;
n=37; farx(n+1)=4.420571e+000; foe(n+1)=1.156628e+001; krok(n+1)=2.728971e-003; ng(n+1)=2.793156e+003;
n=38; farx(n+1)=4.119865e+000; foe(n+1)=9.605139e+000; krok(n+1)=5.440190e-004; ng(n+1)=2.050595e+003;
n=39; farx(n+1)=3.365991e+000; foe(n+1)=8.196039e+000; krok(n+1)=1.793067e-003; ng(n+1)=6.112313e+002;
n=40; farx(n+1)=3.294881e+000; foe(n+1)=7.625281e+000; krok(n+1)=3.303815e-003; ng(n+1)=7.919371e+002;
n=41; farx(n+1)=2.963131e+000; foe(n+1)=6.568548e+000; krok(n+1)=3.096185e-003; ng(n+1)=6.919245e+002;
n=42; farx(n+1)=2.880496e+000; foe(n+1)=6.123832e+000; krok(n+1)=5.173682e-003; ng(n+1)=4.393242e+002;
n=43; farx(n+1)=2.933608e+000; foe(n+1)=5.936489e+000; krok(n+1)=7.931784e-003; ng(n+1)=4.104413e+002;
n=44; farx(n+1)=2.633741e+000; foe(n+1)=5.315811e+000; krok(n+1)=2.854877e-002; ng(n+1)=3.658003e+002;
n=45; farx(n+1)=2.537840e+000; foe(n+1)=5.046843e+000; krok(n+1)=3.703353e-002; ng(n+1)=5.584426e+002;
n=46; farx(n+1)=2.472870e+000; foe(n+1)=4.959627e+000; krok(n+1)=6.374691e-003; ng(n+1)=2.210512e+002;
n=47; farx(n+1)=2.235879e+000; foe(n+1)=4.517485e+000; krok(n+1)=2.900728e-002; ng(n+1)=1.355600e+002;
n=48; farx(n+1)=1.977355e+000; foe(n+1)=3.891964e+000; krok(n+1)=6.046686e-002; ng(n+1)=5.896990e+002;
n=49; farx(n+1)=1.962252e+000; foe(n+1)=3.755426e+000; krok(n+1)=1.406421e-002; ng(n+1)=4.052060e+002;
n=50; farx(n+1)=1.904551e+000; foe(n+1)=3.557866e+000; krok(n+1)=4.568872e-002; ng(n+1)=1.738261e+002;
%odnowa zmiennej metryki
n=51; farx(n+1)=1.902809e+000; foe(n+1)=3.507350e+000; krok(n+1)=1.168301e-005; ng(n+1)=2.682949e+002;
n=52; farx(n+1)=1.899648e+000; foe(n+1)=3.497998e+000; krok(n+1)=1.185899e-005; ng(n+1)=1.141282e+002;
n=53; farx(n+1)=1.885081e+000; foe(n+1)=3.425237e+000; krok(n+1)=2.552019e-004; ng(n+1)=7.658043e+001;
n=54; farx(n+1)=1.888897e+000; foe(n+1)=3.403574e+000; krok(n+1)=1.307047e-004; ng(n+1)=5.469561e+001;
n=55; farx(n+1)=1.863982e+000; foe(n+1)=3.268881e+000; krok(n+1)=2.914778e-003; ng(n+1)=3.318084e+001;
n=56; farx(n+1)=1.817524e+000; foe(n+1)=3.157595e+000; krok(n+1)=6.380132e-003; ng(n+1)=2.933551e+001;
n=57; farx(n+1)=1.767323e+000; foe(n+1)=3.017356e+000; krok(n+1)=4.337081e-003; ng(n+1)=6.125499e+001;
n=58; farx(n+1)=1.727067e+000; foe(n+1)=2.921133e+000; krok(n+1)=7.517005e-003; ng(n+1)=1.465462e+002;
n=59; farx(n+1)=1.729463e+000; foe(n+1)=2.828800e+000; krok(n+1)=2.219272e-002; ng(n+1)=3.139093e+002;
n=60; farx(n+1)=1.753924e+000; foe(n+1)=2.696102e+000; krok(n+1)=1.204622e-002; ng(n+1)=4.154925e+002;
n=61; farx(n+1)=1.717544e+000; foe(n+1)=2.605364e+000; krok(n+1)=1.333747e-002; ng(n+1)=1.878450e+002;
n=62; farx(n+1)=1.696952e+000; foe(n+1)=2.553330e+000; krok(n+1)=6.854056e-003; ng(n+1)=1.995170e+002;
n=63; farx(n+1)=1.655303e+000; foe(n+1)=2.453513e+000; krok(n+1)=1.513348e-002; ng(n+1)=1.701195e+002;
n=64; farx(n+1)=1.598094e+000; foe(n+1)=2.358583e+000; krok(n+1)=4.382471e-002; ng(n+1)=8.885804e+001;
n=65; farx(n+1)=1.532256e+000; foe(n+1)=2.265390e+000; krok(n+1)=1.299379e-002; ng(n+1)=3.562559e+002;
n=66; farx(n+1)=1.487001e+000; foe(n+1)=2.161472e+000; krok(n+1)=2.219272e-002; ng(n+1)=1.431578e+002;
n=67; farx(n+1)=1.486220e+000; foe(n+1)=2.098192e+000; krok(n+1)=2.219272e-002; ng(n+1)=1.164778e+002;
n=68; farx(n+1)=1.423818e+000; foe(n+1)=1.945162e+000; krok(n+1)=4.076532e-002; ng(n+1)=1.074648e+002;
n=69; farx(n+1)=1.392043e+000; foe(n+1)=1.892712e+000; krok(n+1)=4.568872e-002; ng(n+1)=1.005050e+002;
n=70; farx(n+1)=1.369707e+000; foe(n+1)=1.813977e+000; krok(n+1)=1.111520e-002; ng(n+1)=3.003728e+002;
n=71; farx(n+1)=1.318288e+000; foe(n+1)=1.709750e+000; krok(n+1)=8.693674e-002; ng(n+1)=2.105216e+002;
n=72; farx(n+1)=1.305894e+000; foe(n+1)=1.690549e+000; krok(n+1)=1.634950e-002; ng(n+1)=2.264727e+002;
n=73; farx(n+1)=1.240593e+000; foe(n+1)=1.587926e+000; krok(n+1)=5.466235e-002; ng(n+1)=2.063418e+002;
n=74; farx(n+1)=1.201417e+000; foe(n+1)=1.538897e+000; krok(n+1)=3.904156e-002; ng(n+1)=1.882798e+002;
n=75; farx(n+1)=1.194575e+000; foe(n+1)=1.511038e+000; krok(n+1)=5.919426e-002; ng(n+1)=7.028741e+001;
%odnowa zmiennej metryki
n=76; farx(n+1)=1.194421e+000; foe(n+1)=1.508752e+000; krok(n+1)=3.661683e-006; ng(n+1)=1.015284e+002;
n=77; farx(n+1)=1.194082e+000; foe(n+1)=1.507987e+000; krok(n+1)=1.395478e-005; ng(n+1)=3.167913e+001;
n=78; farx(n+1)=1.193296e+000; foe(n+1)=1.506782e+000; krok(n+1)=2.860122e-005; ng(n+1)=2.800414e+001;
n=79; farx(n+1)=1.193679e+000; foe(n+1)=1.502116e+000; krok(n+1)=8.160960e-004; ng(n+1)=1.154477e+001;
n=80; farx(n+1)=1.192638e+000; foe(n+1)=1.497470e+000; krok(n+1)=2.985020e-004; ng(n+1)=1.895718e+001;
n=81; farx(n+1)=1.190664e+000; foe(n+1)=1.491518e+000; krok(n+1)=1.882699e-003; ng(n+1)=9.789063e+000;
n=82; farx(n+1)=1.178943e+000; foe(n+1)=1.458879e+000; krok(n+1)=4.403244e-003; ng(n+1)=1.878782e+001;
n=83; farx(n+1)=1.172780e+000; foe(n+1)=1.449282e+000; krok(n+1)=4.494346e-003; ng(n+1)=1.519109e+002;
n=84; farx(n+1)=1.161491e+000; foe(n+1)=1.434545e+000; krok(n+1)=2.000182e-002; ng(n+1)=2.317470e+002;
n=85; farx(n+1)=1.157984e+000; foe(n+1)=1.420690e+000; krok(n+1)=1.363820e-002; ng(n+1)=2.691258e+002;
n=86; farx(n+1)=1.150695e+000; foe(n+1)=1.413834e+000; krok(n+1)=5.848770e-003; ng(n+1)=1.526852e+002;
n=87; farx(n+1)=1.143558e+000; foe(n+1)=1.404484e+000; krok(n+1)=1.598198e-002; ng(n+1)=9.554138e+001;
n=88; farx(n+1)=1.140304e+000; foe(n+1)=1.394967e+000; krok(n+1)=1.955649e-002; ng(n+1)=8.872868e+001;
n=89; farx(n+1)=1.126074e+000; foe(n+1)=1.380607e+000; krok(n+1)=5.234463e-002; ng(n+1)=7.305751e+001;
n=90; farx(n+1)=1.116569e+000; foe(n+1)=1.367287e+000; krok(n+1)=2.580064e-002; ng(n+1)=2.024632e+002;
n=91; farx(n+1)=1.113473e+000; foe(n+1)=1.358578e+000; krok(n+1)=1.000091e-002; ng(n+1)=2.198981e+002;
n=92; farx(n+1)=1.113526e+000; foe(n+1)=1.337405e+000; krok(n+1)=9.790194e-002; ng(n+1)=1.109847e+002;
n=93; farx(n+1)=1.128094e+000; foe(n+1)=1.302481e+000; krok(n+1)=4.438543e-002; ng(n+1)=1.234294e+002;
n=94; farx(n+1)=1.146931e+000; foe(n+1)=1.275724e+000; krok(n+1)=4.256083e-002; ng(n+1)=2.587786e+002;
n=95; farx(n+1)=1.142210e+000; foe(n+1)=1.250293e+000; krok(n+1)=5.483245e-002; ng(n+1)=1.323253e+002;
n=96; farx(n+1)=1.131116e+000; foe(n+1)=1.218877e+000; krok(n+1)=3.300845e-002; ng(n+1)=1.164720e+002;
n=97; farx(n+1)=1.126703e+000; foe(n+1)=1.212588e+000; krok(n+1)=3.917546e-002; ng(n+1)=5.904816e+001;
n=98; farx(n+1)=1.112689e+000; foe(n+1)=1.182572e+000; krok(n+1)=1.490738e-001; ng(n+1)=1.484649e+002;
n=99; farx(n+1)=1.083644e+000; foe(n+1)=1.146196e+000; krok(n+1)=9.464413e-002; ng(n+1)=9.791593e+001;
n=100; farx(n+1)=1.081365e+000; foe(n+1)=1.134369e+000; krok(n+1)=5.382558e-002; ng(n+1)=9.070340e+001;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
