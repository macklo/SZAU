%uczenie predyktora oe
clear all;
n=0; farx(n+1)=4.786078e+003; foe(n+1)=4.786689e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=3.765865e+003; foe(n+1)=3.708091e+003; krok(n+1)=3.604935e-004; ng(n+1)=4.749771e+003;
n=2; farx(n+1)=9.959805e+002; foe(n+1)=1.000904e+003; krok(n+1)=1.491801e-003; ng(n+1)=3.840211e+003;
n=3; farx(n+1)=1.100543e+003; foe(n+1)=8.302946e+002; krok(n+1)=1.582138e-004; ng(n+1)=6.081698e+003;
n=4; farx(n+1)=1.294681e+003; foe(n+1)=7.963932e+002; krok(n+1)=1.016108e-003; ng(n+1)=3.135165e+003;
n=5; farx(n+1)=8.550221e+002; foe(n+1)=6.708654e+002; krok(n+1)=2.130452e-003; ng(n+1)=1.040084e+003;
n=6; farx(n+1)=3.446077e+002; foe(n+1)=4.757160e+002; krok(n+1)=1.369522e-003; ng(n+1)=3.145780e+003;
n=7; farx(n+1)=2.709475e+002; foe(n+1)=4.428222e+002; krok(n+1)=1.281924e-004; ng(n+1)=4.092728e+003;
n=8; farx(n+1)=2.414568e+002; foe(n+1)=3.994527e+002; krok(n+1)=2.156451e-003; ng(n+1)=4.893266e+003;
n=9; farx(n+1)=2.448373e+002; foe(n+1)=3.911794e+002; krok(n+1)=3.831728e-004; ng(n+1)=3.237569e+003;
n=10; farx(n+1)=2.484441e+002; foe(n+1)=3.884086e+002; krok(n+1)=3.870231e-004; ng(n+1)=2.147236e+003;
n=11; farx(n+1)=2.539268e+002; foe(n+1)=3.771432e+002; krok(n+1)=1.828656e-003; ng(n+1)=1.627728e+003;
n=12; farx(n+1)=2.587086e+002; foe(n+1)=3.715548e+002; krok(n+1)=2.457623e-003; ng(n+1)=7.887364e+002;
n=13; farx(n+1)=2.304497e+002; foe(n+1)=3.611470e+002; krok(n+1)=6.113282e-003; ng(n+1)=1.049382e+003;
n=14; farx(n+1)=1.869857e+002; foe(n+1)=3.443311e+002; krok(n+1)=4.352152e-003; ng(n+1)=9.177415e+002;
n=15; farx(n+1)=1.458275e+002; foe(n+1)=2.984560e+002; krok(n+1)=2.616629e-003; ng(n+1)=2.627169e+003;
n=16; farx(n+1)=1.403227e+002; foe(n+1)=2.909626e+002; krok(n+1)=4.270496e-004; ng(n+1)=2.516976e+003;
n=17; farx(n+1)=1.197777e+002; foe(n+1)=2.773044e+002; krok(n+1)=1.239336e-003; ng(n+1)=2.947575e+003;
n=18; farx(n+1)=9.212208e+001; foe(n+1)=2.573900e+002; krok(n+1)=1.162042e-003; ng(n+1)=4.673279e+003;
n=19; farx(n+1)=8.935119e+001; foe(n+1)=2.559806e+002; krok(n+1)=2.463545e-004; ng(n+1)=5.848558e+003;
n=20; farx(n+1)=7.746114e+001; foe(n+1)=2.471354e+002; krok(n+1)=1.156009e-003; ng(n+1)=4.501434e+003;
n=21; farx(n+1)=5.975519e+001; foe(n+1)=2.370178e+002; krok(n+1)=2.804162e-003; ng(n+1)=4.447082e+003;
n=22; farx(n+1)=5.452484e+001; foe(n+1)=2.304392e+002; krok(n+1)=6.410357e-004; ng(n+1)=5.593465e+003;
n=23; farx(n+1)=5.198661e+001; foe(n+1)=2.244057e+002; krok(n+1)=8.704444e-004; ng(n+1)=5.894522e+003;
n=24; farx(n+1)=5.401714e+001; foe(n+1)=2.176318e+002; krok(n+1)=6.696507e-004; ng(n+1)=5.692511e+003;
n=25; farx(n+1)=5.554160e+001; foe(n+1)=2.143061e+002; krok(n+1)=4.129136e-004; ng(n+1)=7.176160e+003;
%odnowa zmiennej metryki
n=26; farx(n+1)=5.507096e+001; foe(n+1)=1.818700e+002; krok(n+1)=2.829063e-005; ng(n+1)=6.129509e+003;
n=27; farx(n+1)=5.523505e+001; foe(n+1)=1.720536e+002; krok(n+1)=1.877358e-005; ng(n+1)=3.549393e+003;
n=28; farx(n+1)=5.196474e+001; foe(n+1)=1.610079e+002; krok(n+1)=2.746916e-005; ng(n+1)=3.542721e+003;
n=29; farx(n+1)=4.612015e+001; foe(n+1)=1.420908e+002; krok(n+1)=6.350673e-005; ng(n+1)=3.081404e+003;
n=30; farx(n+1)=4.088119e+001; foe(n+1)=1.051377e+002; krok(n+1)=4.674935e-004; ng(n+1)=2.865165e+003;
n=31; farx(n+1)=3.271169e+001; foe(n+1)=9.280801e+001; krok(n+1)=7.543972e-004; ng(n+1)=3.937220e+003;
n=32; farx(n+1)=3.220763e+001; foe(n+1)=8.371069e+001; krok(n+1)=7.315478e-004; ng(n+1)=5.442806e+003;
n=33; farx(n+1)=2.836913e+001; foe(n+1)=6.489176e+001; krok(n+1)=8.684522e-004; ng(n+1)=4.711795e+003;
n=34; farx(n+1)=2.194780e+001; foe(n+1)=4.755859e+001; krok(n+1)=4.766449e-004; ng(n+1)=5.447440e+003;
n=35; farx(n+1)=1.586515e+001; foe(n+1)=3.846748e+001; krok(n+1)=1.323510e-003; ng(n+1)=3.160336e+003;
n=36; farx(n+1)=1.461015e+001; foe(n+1)=3.667359e+001; krok(n+1)=2.985020e-004; ng(n+1)=1.268844e+003;
n=37; farx(n+1)=1.363587e+001; foe(n+1)=3.423088e+001; krok(n+1)=7.499704e-004; ng(n+1)=1.291952e+003;
n=38; farx(n+1)=1.233728e+001; foe(n+1)=3.097546e+001; krok(n+1)=3.460293e-003; ng(n+1)=8.761548e+002;
n=39; farx(n+1)=1.159473e+001; foe(n+1)=2.850885e+001; krok(n+1)=2.586254e-003; ng(n+1)=1.357919e+003;
n=40; farx(n+1)=1.120285e+001; foe(n+1)=2.701310e+001; krok(n+1)=3.187345e-003; ng(n+1)=4.379305e+002;
n=41; farx(n+1)=1.086085e+001; foe(n+1)=2.573943e+001; krok(n+1)=1.897913e-003; ng(n+1)=1.420192e+003;
n=42; farx(n+1)=9.089227e+000; foe(n+1)=2.227389e+001; krok(n+1)=9.725768e-003; ng(n+1)=5.714197e+002;
n=43; farx(n+1)=7.745371e+000; foe(n+1)=1.992647e+001; krok(n+1)=2.849598e-003; ng(n+1)=1.815358e+003;
n=44; farx(n+1)=6.241501e+000; foe(n+1)=1.720030e+001; krok(n+1)=3.715831e-003; ng(n+1)=1.320550e+003;
n=45; farx(n+1)=5.774649e+000; foe(n+1)=1.625492e+001; krok(n+1)=2.621411e-003; ng(n+1)=7.559879e+002;
n=46; farx(n+1)=5.477135e+000; foe(n+1)=1.589379e+001; krok(n+1)=1.353531e-003; ng(n+1)=8.910665e+002;
n=47; farx(n+1)=4.847893e+000; foe(n+1)=1.461899e+001; krok(n+1)=2.500228e-003; ng(n+1)=9.157587e+002;
n=48; farx(n+1)=4.287679e+000; foe(n+1)=1.285749e+001; krok(n+1)=1.063635e-002; ng(n+1)=1.080239e+003;
n=49; farx(n+1)=4.065385e+000; foe(n+1)=1.195564e+001; krok(n+1)=6.800237e-003; ng(n+1)=7.184349e+002;
n=50; farx(n+1)=3.947316e+000; foe(n+1)=1.102302e+001; krok(n+1)=5.414124e-003; ng(n+1)=6.762619e+002;
%odnowa zmiennej metryki
n=51; farx(n+1)=3.884396e+000; foe(n+1)=1.065989e+001; krok(n+1)=6.370154e-006; ng(n+1)=1.432368e+003;
n=52; farx(n+1)=3.850371e+000; foe(n+1)=1.052370e+001; krok(n+1)=1.806265e-005; ng(n+1)=3.910928e+002;
n=53; farx(n+1)=3.795655e+000; foe(n+1)=1.033788e+001; krok(n+1)=1.858436e-004; ng(n+1)=1.721574e+002;
n=54; farx(n+1)=3.770733e+000; foe(n+1)=1.001160e+001; krok(n+1)=1.270414e-004; ng(n+1)=2.798786e+002;
n=55; farx(n+1)=3.576710e+000; foe(n+1)=9.551304e+000; krok(n+1)=7.010405e-004; ng(n+1)=1.318885e+002;
n=56; farx(n+1)=3.107592e+000; foe(n+1)=8.261824e+000; krok(n+1)=3.692938e-003; ng(n+1)=1.575956e+002;
n=57; farx(n+1)=2.840820e+000; foe(n+1)=7.491830e+000; krok(n+1)=5.767896e-003; ng(n+1)=7.576966e+002;
n=58; farx(n+1)=2.657856e+000; foe(n+1)=6.787138e+000; krok(n+1)=2.616629e-003; ng(n+1)=6.686170e+002;
n=59; farx(n+1)=2.543660e+000; foe(n+1)=6.428058e+000; krok(n+1)=3.258189e-003; ng(n+1)=3.517716e+002;
n=60; farx(n+1)=2.535497e+000; foe(n+1)=6.230718e+000; krok(n+1)=2.823736e-003; ng(n+1)=3.156041e+002;
n=61; farx(n+1)=2.542006e+000; foe(n+1)=6.039065e+000; krok(n+1)=2.293321e-003; ng(n+1)=5.972845e+002;
n=62; farx(n+1)=2.519175e+000; foe(n+1)=5.902038e+000; krok(n+1)=3.040595e-003; ng(n+1)=3.213300e+002;
n=63; farx(n+1)=2.522761e+000; foe(n+1)=5.789587e+000; krok(n+1)=5.548179e-003; ng(n+1)=1.427341e+002;
n=64; farx(n+1)=2.423667e+000; foe(n+1)=5.597012e+000; krok(n+1)=1.109636e-002; ng(n+1)=2.473927e+002;
n=65; farx(n+1)=2.303006e+000; foe(n+1)=5.339732e+000; krok(n+1)=9.683632e-003; ng(n+1)=5.218149e+002;
n=66; farx(n+1)=2.170836e+000; foe(n+1)=5.219840e+000; krok(n+1)=1.012183e-002; ng(n+1)=2.161031e+002;
n=67; farx(n+1)=2.098137e+000; foe(n+1)=5.156726e+000; krok(n+1)=1.219985e-002; ng(n+1)=3.157549e+002;
n=68; farx(n+1)=2.002199e+000; foe(n+1)=5.059833e+000; krok(n+1)=6.822948e-003; ng(n+1)=4.461630e+002;
n=69; farx(n+1)=1.928371e+000; foe(n+1)=4.939241e+000; krok(n+1)=7.796370e-003; ng(n+1)=2.314601e+002;
n=70; farx(n+1)=1.791731e+000; foe(n+1)=4.753396e+000; krok(n+1)=1.684825e-002; ng(n+1)=8.575123e+002;
n=71; farx(n+1)=1.711628e+000; foe(n+1)=4.613601e+000; krok(n+1)=1.574999e-002; ng(n+1)=7.145476e+002;
n=72; farx(n+1)=1.626603e+000; foe(n+1)=4.441339e+000; krok(n+1)=7.145002e-003; ng(n+1)=4.325172e+002;
n=73; farx(n+1)=1.611420e+000; foe(n+1)=4.387226e+000; krok(n+1)=1.238474e-002; ng(n+1)=1.252644e+002;
n=74; farx(n+1)=1.584846e+000; foe(n+1)=4.265695e+000; krok(n+1)=1.205272e-002; ng(n+1)=4.647686e+002;
n=75; farx(n+1)=1.640788e+000; foe(n+1)=4.080624e+000; krok(n+1)=1.809047e-002; ng(n+1)=2.712979e+002;
%odnowa zmiennej metryki
n=76; farx(n+1)=1.640813e+000; foe(n+1)=4.071579e+000; krok(n+1)=3.884068e-006; ng(n+1)=2.480734e+002;
n=77; farx(n+1)=1.642261e+000; foe(n+1)=4.059286e+000; krok(n+1)=1.886606e-005; ng(n+1)=1.405978e+002;
n=78; farx(n+1)=1.646396e+000; foe(n+1)=4.051943e+000; krok(n+1)=1.977673e-005; ng(n+1)=1.048556e+002;
n=79; farx(n+1)=1.637438e+000; foe(n+1)=4.033809e+000; krok(n+1)=3.070097e-004; ng(n+1)=4.210503e+001;
n=80; farx(n+1)=1.581645e+000; foe(n+1)=3.968415e+000; krok(n+1)=2.117016e-003; ng(n+1)=2.714608e+001;
n=81; farx(n+1)=1.529316e+000; foe(n+1)=3.914549e+000; krok(n+1)=1.342085e-003; ng(n+1)=6.830866e+001;
n=82; farx(n+1)=1.479863e+000; foe(n+1)=3.865894e+000; krok(n+1)=3.660956e-003; ng(n+1)=1.844100e+002;
n=83; farx(n+1)=1.382198e+000; foe(n+1)=3.690315e+000; krok(n+1)=7.191676e-003; ng(n+1)=2.538877e+002;
n=84; farx(n+1)=1.296930e+000; foe(n+1)=3.478314e+000; krok(n+1)=5.368339e-003; ng(n+1)=5.821265e+002;
n=85; farx(n+1)=1.281380e+000; foe(n+1)=3.407195e+000; krok(n+1)=1.915237e-003; ng(n+1)=4.016628e+002;
n=86; farx(n+1)=1.272116e+000; foe(n+1)=3.334257e+000; krok(n+1)=2.187783e-003; ng(n+1)=4.989016e+002;
n=87; farx(n+1)=1.333020e+000; foe(n+1)=3.117513e+000; krok(n+1)=1.680696e-002; ng(n+1)=3.448213e+002;
n=88; farx(n+1)=1.395518e+000; foe(n+1)=3.012811e+000; krok(n+1)=2.173143e-003; ng(n+1)=3.696455e+002;
n=89; farx(n+1)=1.448085e+000; foe(n+1)=2.940655e+000; krok(n+1)=4.046033e-003; ng(n+1)=4.567027e+002;
n=90; farx(n+1)=1.475490e+000; foe(n+1)=2.859366e+000; krok(n+1)=7.932207e-003; ng(n+1)=3.248245e+002;
n=91; farx(n+1)=1.478604e+000; foe(n+1)=2.825299e+000; krok(n+1)=5.557598e-003; ng(n+1)=5.823744e+002;
n=92; farx(n+1)=1.444222e+000; foe(n+1)=2.728538e+000; krok(n+1)=1.716139e-002; ng(n+1)=4.275547e+002;
n=93; farx(n+1)=1.420078e+000; foe(n+1)=2.692808e+000; krok(n+1)=3.966104e-003; ng(n+1)=7.508332e+002;
n=94; farx(n+1)=1.372550e+000; foe(n+1)=2.630704e+000; krok(n+1)=1.748904e-002; ng(n+1)=4.137668e+002;
n=95; farx(n+1)=1.346954e+000; foe(n+1)=2.586984e+000; krok(n+1)=4.403244e-003; ng(n+1)=4.090496e+002;
n=96; farx(n+1)=1.279462e+000; foe(n+1)=2.545989e+000; krok(n+1)=1.153579e-002; ng(n+1)=3.985724e+002;
n=97; farx(n+1)=1.188544e+000; foe(n+1)=2.425439e+000; krok(n+1)=1.254246e-002; ng(n+1)=4.461954e+002;
n=98; farx(n+1)=1.173676e+000; foe(n+1)=2.385029e+000; krok(n+1)=1.390246e-002; ng(n+1)=2.654554e+002;
n=99; farx(n+1)=1.123501e+000; foe(n+1)=2.320432e+000; krok(n+1)=1.064021e-002; ng(n+1)=4.158857e+002;
n=100; farx(n+1)=1.115025e+000; foe(n+1)=2.224521e+000; krok(n+1)=1.048329e-002; ng(n+1)=3.318116e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
