%uczenie predyktora oe
clear all;
n=0; farx(n+1)=4.439464e+003; foe(n+1)=4.658829e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=2.745674e+003; foe(n+1)=2.830257e+003; krok(n+1)=4.604034e-004; ng(n+1)=7.101861e+003;
n=2; farx(n+1)=1.187411e+003; foe(n+1)=1.350434e+003; krok(n+1)=1.713251e-003; ng(n+1)=2.660043e+003;
n=3; farx(n+1)=1.504648e+003; foe(n+1)=9.159934e+002; krok(n+1)=1.177463e-004; ng(n+1)=1.228177e+004;
n=4; farx(n+1)=2.457790e+003; foe(n+1)=5.959770e+002; krok(n+1)=3.902677e-004; ng(n+1)=1.385514e+004;
n=5; farx(n+1)=1.944491e+003; foe(n+1)=5.165091e+002; krok(n+1)=2.739044e-003; ng(n+1)=1.203781e+003;
n=6; farx(n+1)=1.371392e+003; foe(n+1)=4.745927e+002; krok(n+1)=2.939560e-003; ng(n+1)=7.103073e+002;
n=7; farx(n+1)=5.614480e+002; foe(n+1)=3.562223e+002; krok(n+1)=3.151553e-003; ng(n+1)=2.579059e+003;
n=8; farx(n+1)=5.065714e+002; foe(n+1)=3.455154e+002; krok(n+1)=1.675019e-003; ng(n+1)=6.838433e+002;
n=9; farx(n+1)=4.355474e+002; foe(n+1)=3.311727e+002; krok(n+1)=8.989595e-004; ng(n+1)=1.960081e+003;
n=10; farx(n+1)=2.261206e+002; foe(n+1)=2.936957e+002; krok(n+1)=1.024683e-002; ng(n+1)=2.567027e+003;
n=11; farx(n+1)=1.951271e+002; foe(n+1)=2.895463e+002; krok(n+1)=4.430569e-004; ng(n+1)=1.268543e+003;
n=12; farx(n+1)=1.063808e+002; foe(n+1)=2.669016e+002; krok(n+1)=2.480280e-003; ng(n+1)=3.044305e+003;
n=13; farx(n+1)=1.007689e+002; foe(n+1)=2.645774e+002; krok(n+1)=2.311817e-004; ng(n+1)=3.307307e+003;
n=14; farx(n+1)=6.789530e+001; foe(n+1)=2.435805e+002; krok(n+1)=4.747676e-003; ng(n+1)=2.204453e+003;
n=15; farx(n+1)=6.526397e+001; foe(n+1)=2.408488e+002; krok(n+1)=3.473499e-004; ng(n+1)=2.273864e+003;
n=16; farx(n+1)=5.713360e+001; foe(n+1)=2.371654e+002; krok(n+1)=2.799030e-004; ng(n+1)=3.198697e+003;
n=17; farx(n+1)=3.665240e+001; foe(n+1)=2.083388e+002; krok(n+1)=1.751967e-003; ng(n+1)=3.428168e+003;
n=18; farx(n+1)=3.544871e+001; foe(n+1)=2.051800e+002; krok(n+1)=9.921626e-005; ng(n+1)=4.558583e+003;
n=19; farx(n+1)=3.992077e+001; foe(n+1)=1.953579e+002; krok(n+1)=1.588254e-003; ng(n+1)=6.433228e+003;
n=20; farx(n+1)=4.244162e+001; foe(n+1)=1.798991e+002; krok(n+1)=1.259039e-003; ng(n+1)=3.505120e+003;
n=21; farx(n+1)=4.396241e+001; foe(n+1)=1.736191e+002; krok(n+1)=6.328553e-004; ng(n+1)=2.283403e+003;
n=22; farx(n+1)=5.270437e+001; foe(n+1)=1.675352e+002; krok(n+1)=1.682049e-003; ng(n+1)=2.160795e+003;
n=23; farx(n+1)=5.644294e+001; foe(n+1)=1.609212e+002; krok(n+1)=2.156451e-003; ng(n+1)=2.245279e+003;
n=24; farx(n+1)=6.826963e+001; foe(n+1)=1.473971e+002; krok(n+1)=1.441974e-003; ng(n+1)=1.254298e+003;
n=25; farx(n+1)=6.794692e+001; foe(n+1)=1.470916e+002; krok(n+1)=2.026610e-004; ng(n+1)=2.335188e+003;
%odnowa zmiennej metryki
n=26; farx(n+1)=6.786046e+001; foe(n+1)=1.465358e+002; krok(n+1)=3.128736e-007; ng(n+1)=7.084238e+003;
n=27; farx(n+1)=6.445413e+001; foe(n+1)=1.384715e+002; krok(n+1)=5.445660e-005; ng(n+1)=2.300203e+003;
n=28; farx(n+1)=6.529313e+001; foe(n+1)=1.340214e+002; krok(n+1)=2.069140e-005; ng(n+1)=2.490357e+003;
n=29; farx(n+1)=4.725541e+001; foe(n+1)=1.181616e+002; krok(n+1)=3.697205e-004; ng(n+1)=1.432245e+003;
n=30; farx(n+1)=3.306882e+001; foe(n+1)=7.810829e+001; krok(n+1)=6.453470e-004; ng(n+1)=4.784435e+003;
n=31; farx(n+1)=3.096144e+001; foe(n+1)=6.633479e+001; krok(n+1)=1.674127e-004; ng(n+1)=1.146569e+004;
n=32; farx(n+1)=2.665411e+001; foe(n+1)=5.762991e+001; krok(n+1)=9.584745e-004; ng(n+1)=3.438390e+003;
n=33; farx(n+1)=2.051608e+001; foe(n+1)=5.135001e+001; krok(n+1)=1.088038e-003; ng(n+1)=2.663263e+003;
n=34; farx(n+1)=2.044759e+001; foe(n+1)=4.546666e+001; krok(n+1)=8.011837e-004; ng(n+1)=2.542236e+003;
n=35; farx(n+1)=2.079803e+001; foe(n+1)=4.315352e+001; krok(n+1)=2.574102e-004; ng(n+1)=7.696753e+003;
n=36; farx(n+1)=1.851698e+001; foe(n+1)=3.705040e+001; krok(n+1)=2.247173e-003; ng(n+1)=1.063373e+003;
n=37; farx(n+1)=1.750068e+001; foe(n+1)=3.468423e+001; krok(n+1)=1.226860e-003; ng(n+1)=4.062511e+003;
n=38; farx(n+1)=1.488096e+001; foe(n+1)=2.641919e+001; krok(n+1)=1.457389e-003; ng(n+1)=7.913851e+003;
n=39; farx(n+1)=9.933886e+000; foe(n+1)=2.185920e+001; krok(n+1)=2.586254e-003; ng(n+1)=3.876518e+003;
n=40; farx(n+1)=7.063761e+000; foe(n+1)=1.914040e+001; krok(n+1)=1.570905e-003; ng(n+1)=1.836997e+003;
n=41; farx(n+1)=4.854221e+000; foe(n+1)=1.563993e+001; krok(n+1)=3.253129e-003; ng(n+1)=1.383848e+003;
n=42; farx(n+1)=3.039093e+000; foe(n+1)=1.162799e+001; krok(n+1)=2.173143e-003; ng(n+1)=1.392594e+003;
n=43; farx(n+1)=2.921812e+000; foe(n+1)=1.078742e+001; krok(n+1)=9.208067e-004; ng(n+1)=1.813970e+003;
n=44; farx(n+1)=2.910208e+000; foe(n+1)=1.040009e+001; krok(n+1)=3.065383e-003; ng(n+1)=1.251863e+003;
n=45; farx(n+1)=2.519517e+000; foe(n+1)=9.024614e+000; krok(n+1)=1.957572e-002; ng(n+1)=1.171255e+003;
n=46; farx(n+1)=2.417755e+000; foe(n+1)=7.927365e+000; krok(n+1)=4.718270e-003; ng(n+1)=1.334726e+003;
n=47; farx(n+1)=2.429931e+000; foe(n+1)=7.687398e+000; krok(n+1)=7.632150e-003; ng(n+1)=8.488706e+002;
n=48; farx(n+1)=2.414276e+000; foe(n+1)=6.990096e+000; krok(n+1)=3.172883e-002; ng(n+1)=1.143784e+003;
n=49; farx(n+1)=2.423663e+000; foe(n+1)=6.699330e+000; krok(n+1)=9.907068e-003; ng(n+1)=6.189433e+002;
n=50; farx(n+1)=2.357958e+000; foe(n+1)=6.412194e+000; krok(n+1)=1.632237e-002; ng(n+1)=2.396757e+002;
%odnowa zmiennej metryki
n=51; farx(n+1)=2.355335e+000; foe(n+1)=6.311910e+000; krok(n+1)=3.824968e-006; ng(n+1)=7.282023e+002;
n=52; farx(n+1)=2.347298e+000; foe(n+1)=6.263680e+000; krok(n+1)=1.133097e-004; ng(n+1)=1.116564e+002;
n=53; farx(n+1)=2.341508e+000; foe(n+1)=6.244942e+000; krok(n+1)=2.462151e-005; ng(n+1)=1.370703e+002;
n=54; farx(n+1)=2.310162e+000; foe(n+1)=6.100037e+000; krok(n+1)=1.662532e-004; ng(n+1)=1.640936e+002;
n=55; farx(n+1)=2.277889e+000; foe(n+1)=5.851481e+000; krok(n+1)=1.354575e-004; ng(n+1)=2.203464e+002;
n=56; farx(n+1)=2.235396e+000; foe(n+1)=5.491511e+000; krok(n+1)=1.250908e-003; ng(n+1)=1.336968e+002;
n=57; farx(n+1)=2.224757e+000; foe(n+1)=5.256275e+000; krok(n+1)=3.253129e-003; ng(n+1)=4.224320e+002;
n=58; farx(n+1)=2.204460e+000; foe(n+1)=4.979416e+000; krok(n+1)=2.855545e-003; ng(n+1)=3.170773e+002;
n=59; farx(n+1)=2.211784e+000; foe(n+1)=4.842445e+000; krok(n+1)=5.921158e-004; ng(n+1)=7.102748e+002;
n=60; farx(n+1)=2.103521e+000; foe(n+1)=4.357096e+000; krok(n+1)=3.621201e-003; ng(n+1)=2.097248e+002;
n=61; farx(n+1)=2.067301e+000; foe(n+1)=4.111335e+000; krok(n+1)=3.225080e-003; ng(n+1)=1.387961e+003;
n=62; farx(n+1)=2.007060e+000; foe(n+1)=3.988022e+000; krok(n+1)=6.035177e-003; ng(n+1)=3.740043e+002;
n=63; farx(n+1)=1.940814e+000; foe(n+1)=3.756977e+000; krok(n+1)=4.243311e-003; ng(n+1)=7.647186e+002;
n=64; farx(n+1)=1.876245e+000; foe(n+1)=3.638217e+000; krok(n+1)=6.607631e-003; ng(n+1)=1.216655e+003;
n=65; farx(n+1)=1.797135e+000; foe(n+1)=3.534689e+000; krok(n+1)=8.625805e-003; ng(n+1)=3.595141e+002;
n=66; farx(n+1)=1.535754e+000; foe(n+1)=3.180658e+000; krok(n+1)=8.806488e-003; ng(n+1)=1.099915e+003;
n=67; farx(n+1)=1.403603e+000; foe(n+1)=2.932041e+000; krok(n+1)=2.812841e-002; ng(n+1)=4.239948e+002;
n=68; farx(n+1)=1.298677e+000; foe(n+1)=2.728571e+000; krok(n+1)=5.478088e-003; ng(n+1)=3.328336e+002;
n=69; farx(n+1)=1.202897e+000; foe(n+1)=2.373218e+000; krok(n+1)=1.567500e-002; ng(n+1)=5.525892e+002;
n=70; farx(n+1)=1.162017e+000; foe(n+1)=2.160600e+000; krok(n+1)=8.625805e-003; ng(n+1)=8.713518e+002;
n=71; farx(n+1)=1.157528e+000; foe(n+1)=2.059502e+000; krok(n+1)=4.949772e-003; ng(n+1)=6.362281e+002;
n=72; farx(n+1)=1.142578e+000; foe(n+1)=1.877205e+000; krok(n+1)=3.413297e-002; ng(n+1)=6.521145e+002;
n=73; farx(n+1)=1.170975e+000; foe(n+1)=1.701017e+000; krok(n+1)=5.286105e-002; ng(n+1)=6.243139e+002;
n=74; farx(n+1)=1.131954e+000; foe(n+1)=1.491854e+000; krok(n+1)=9.267410e-002; ng(n+1)=4.623880e+002;
n=75; farx(n+1)=1.137632e+000; foe(n+1)=1.383130e+000; krok(n+1)=3.669314e-002; ng(n+1)=5.099047e+002;
%odnowa zmiennej metryki
n=76; farx(n+1)=1.137771e+000; foe(n+1)=1.371985e+000; krok(n+1)=1.816358e-006; ng(n+1)=3.738553e+002;
n=77; farx(n+1)=1.136598e+000; foe(n+1)=1.333334e+000; krok(n+1)=2.322634e-005; ng(n+1)=1.878861e+002;
n=78; farx(n+1)=1.135304e+000; foe(n+1)=1.320147e+000; krok(n+1)=6.202616e-006; ng(n+1)=2.007802e+002;
n=79; farx(n+1)=1.134964e+000; foe(n+1)=1.312571e+000; krok(n+1)=9.866949e-005; ng(n+1)=4.616095e+001;
n=80; farx(n+1)=1.135089e+000; foe(n+1)=1.293498e+000; krok(n+1)=1.697983e-004; ng(n+1)=5.748643e+001;
n=81; farx(n+1)=1.134324e+000; foe(n+1)=1.266026e+000; krok(n+1)=8.684522e-004; ng(n+1)=3.125065e+001;
n=82; farx(n+1)=1.135056e+000; foe(n+1)=1.253757e+000; krok(n+1)=1.631264e-003; ng(n+1)=2.543497e+001;
n=83; farx(n+1)=1.135005e+000; foe(n+1)=1.244254e+000; krok(n+1)=2.316999e-003; ng(n+1)=2.909678e+001;
n=84; farx(n+1)=1.134057e+000; foe(n+1)=1.227858e+000; krok(n+1)=7.242402e-003; ng(n+1)=7.035905e+001;
n=85; farx(n+1)=1.128965e+000; foe(n+1)=1.217398e+000; krok(n+1)=7.191676e-003; ng(n+1)=1.209380e+002;
n=86; farx(n+1)=1.123774e+000; foe(n+1)=1.191710e+000; krok(n+1)=1.027811e-002; ng(n+1)=1.098250e+002;
n=87; farx(n+1)=1.123317e+000; foe(n+1)=1.163288e+000; krok(n+1)=1.406421e-002; ng(n+1)=4.047159e+002;
n=88; farx(n+1)=1.125200e+000; foe(n+1)=1.153603e+000; krok(n+1)=7.680234e-003; ng(n+1)=1.508469e+002;
n=89; farx(n+1)=1.141381e+000; foe(n+1)=1.105084e+000; krok(n+1)=1.096649e-001; ng(n+1)=3.339771e+002;
n=90; farx(n+1)=1.153027e+000; foe(n+1)=1.077599e+000; krok(n+1)=1.703305e-002; ng(n+1)=2.711973e+002;
n=91; farx(n+1)=1.159519e+000; foe(n+1)=1.058722e+000; krok(n+1)=8.946591e-003; ng(n+1)=2.660807e+002;
n=92; farx(n+1)=1.167260e+000; foe(n+1)=1.040192e+000; krok(n+1)=6.607631e-003; ng(n+1)=3.202717e+002;
n=93; farx(n+1)=1.169750e+000; foe(n+1)=1.027651e+000; krok(n+1)=1.966568e-002; ng(n+1)=7.433913e+001;
n=94; farx(n+1)=1.178097e+000; foe(n+1)=1.006286e+000; krok(n+1)=4.331299e-002; ng(n+1)=2.159558e+002;
n=95; farx(n+1)=1.185554e+000; foe(n+1)=9.724432e-001; krok(n+1)=4.674985e-002; ng(n+1)=3.347215e+002;
n=96; farx(n+1)=1.201156e+000; foe(n+1)=9.444174e-001; krok(n+1)=3.043820e-002; ng(n+1)=5.074246e+002;
n=97; farx(n+1)=1.180826e+000; foe(n+1)=9.165003e-001; krok(n+1)=8.616836e-002; ng(n+1)=1.567539e+002;
n=98; farx(n+1)=1.174394e+000; foe(n+1)=9.023380e-001; krok(n+1)=3.350022e-002; ng(n+1)=1.933809e+002;
n=99; farx(n+1)=1.182896e+000; foe(n+1)=8.690443e-001; krok(n+1)=1.112197e-001; ng(n+1)=1.153562e+002;
n=100; farx(n+1)=1.184959e+000; foe(n+1)=8.586550e-001; krok(n+1)=1.697325e-002; ng(n+1)=5.049171e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
