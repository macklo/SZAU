%uczenie predyktora oe
clear all;
n=0; farx(n+1)=4.724093e+003; foe(n+1)=4.630486e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=2.984057e+003; foe(n+1)=2.851828e+003; krok(n+1)=5.202718e-004; ng(n+1)=4.746405e+003;
n=2; farx(n+1)=1.009065e+003; foe(n+1)=8.593560e+002; krok(n+1)=2.352381e-003; ng(n+1)=2.503544e+003;
n=3; farx(n+1)=1.078129e+003; foe(n+1)=5.594407e+002; krok(n+1)=2.125074e-004; ng(n+1)=6.132901e+003;
n=4; farx(n+1)=1.264606e+003; foe(n+1)=5.307193e+002; krok(n+1)=5.559287e-004; ng(n+1)=3.039770e+003;
n=5; farx(n+1)=7.859334e+002; foe(n+1)=4.348199e+002; krok(n+1)=1.012568e-002; ng(n+1)=5.610592e+002;
n=6; farx(n+1)=6.595492e+002; foe(n+1)=4.091338e+002; krok(n+1)=9.232346e-004; ng(n+1)=1.998591e+003;
n=7; farx(n+1)=5.789345e+002; foe(n+1)=4.003479e+002; krok(n+1)=2.681146e-004; ng(n+1)=1.972610e+003;
n=8; farx(n+1)=4.349928e+002; foe(n+1)=3.744601e+002; krok(n+1)=3.691804e-004; ng(n+1)=5.137428e+003;
n=9; farx(n+1)=2.289081e+002; foe(n+1)=3.280562e+002; krok(n+1)=1.683682e-003; ng(n+1)=2.049511e+003;
n=10; farx(n+1)=2.032607e+002; foe(n+1)=3.165162e+002; krok(n+1)=3.812452e-004; ng(n+1)=2.497478e+003;
n=11; farx(n+1)=1.793483e+002; foe(n+1)=3.063858e+002; krok(n+1)=9.745462e-004; ng(n+1)=1.873268e+003;
n=12; farx(n+1)=2.198245e+002; foe(n+1)=2.839522e+002; krok(n+1)=1.355378e-002; ng(n+1)=1.262671e+003;
n=13; farx(n+1)=2.157030e+002; foe(n+1)=2.814487e+002; krok(n+1)=1.736749e-004; ng(n+1)=1.934439e+003;
n=14; farx(n+1)=2.022553e+002; foe(n+1)=2.754180e+002; krok(n+1)=1.828656e-003; ng(n+1)=1.116106e+003;
n=15; farx(n+1)=1.761167e+002; foe(n+1)=2.662883e+002; krok(n+1)=4.712379e-003; ng(n+1)=5.509322e+002;
n=16; farx(n+1)=1.341068e+002; foe(n+1)=2.212913e+002; krok(n+1)=8.899418e-003; ng(n+1)=2.286264e+003;
n=17; farx(n+1)=1.635483e+002; foe(n+1)=1.972960e+002; krok(n+1)=3.341463e-004; ng(n+1)=1.586286e+003;
n=18; farx(n+1)=1.677848e+002; foe(n+1)=1.962120e+002; krok(n+1)=2.890345e-005; ng(n+1)=4.583633e+003;
n=19; farx(n+1)=1.673747e+002; foe(n+1)=1.947772e+002; krok(n+1)=3.248447e-003; ng(n+1)=5.655933e+003;
n=20; farx(n+1)=1.600067e+002; foe(n+1)=1.859155e+002; krok(n+1)=4.002465e-003; ng(n+1)=5.133285e+003;
n=21; farx(n+1)=1.387258e+002; foe(n+1)=1.810955e+002; krok(n+1)=2.349366e-003; ng(n+1)=2.423053e+003;
n=22; farx(n+1)=1.261101e+002; foe(n+1)=1.784343e+002; krok(n+1)=7.878882e-004; ng(n+1)=1.820973e+003;
n=23; farx(n+1)=1.106787e+002; foe(n+1)=1.751058e+002; krok(n+1)=1.093065e-003; ng(n+1)=1.677468e+003;
n=24; farx(n+1)=9.575432e+001; foe(n+1)=1.708997e+002; krok(n+1)=3.364099e-003; ng(n+1)=1.395868e+003;
n=25; farx(n+1)=7.462835e+001; foe(n+1)=1.634025e+002; krok(n+1)=7.767283e-003; ng(n+1)=1.225902e+003;
%odnowa zmiennej metryki
n=26; farx(n+1)=7.375563e+001; foe(n+1)=1.617106e+002; krok(n+1)=3.369455e-005; ng(n+1)=1.093727e+003;
n=27; farx(n+1)=6.819799e+001; foe(n+1)=1.549376e+002; krok(n+1)=9.818158e-005; ng(n+1)=1.013262e+003;
n=28; farx(n+1)=6.448098e+001; foe(n+1)=1.489791e+002; krok(n+1)=1.784968e-004; ng(n+1)=2.179505e+003;
n=29; farx(n+1)=6.339368e+001; foe(n+1)=1.326127e+002; krok(n+1)=1.185248e-004; ng(n+1)=1.715774e+003;
n=30; farx(n+1)=5.987050e+001; foe(n+1)=1.121950e+002; krok(n+1)=2.600344e-003; ng(n+1)=3.979354e+003;
n=31; farx(n+1)=4.996325e+001; foe(n+1)=9.909875e+001; krok(n+1)=6.541573e-004; ng(n+1)=1.676464e+003;
n=32; farx(n+1)=5.035378e+001; foe(n+1)=9.605708e+001; krok(n+1)=1.697983e-004; ng(n+1)=1.918076e+003;
n=33; farx(n+1)=5.506799e+001; foe(n+1)=8.739248e+001; krok(n+1)=2.739044e-003; ng(n+1)=4.185027e+002;
n=34; farx(n+1)=5.115634e+001; foe(n+1)=8.244325e+001; krok(n+1)=6.946998e-004; ng(n+1)=2.538971e+003;
n=35; farx(n+1)=4.120576e+001; foe(n+1)=7.189999e+001; krok(n+1)=2.840497e-003; ng(n+1)=6.657080e+002;
n=36; farx(n+1)=3.298962e+001; foe(n+1)=6.496793e+001; krok(n+1)=3.916767e-003; ng(n+1)=5.372899e+002;
n=37; farx(n+1)=2.804566e+001; foe(n+1)=5.809940e+001; krok(n+1)=1.841613e-003; ng(n+1)=2.726115e+003;
n=38; farx(n+1)=1.512059e+001; foe(n+1)=4.434772e+001; krok(n+1)=7.761346e-003; ng(n+1)=9.331497e+002;
n=39; farx(n+1)=1.142430e+001; foe(n+1)=3.533639e+001; krok(n+1)=4.974973e-003; ng(n+1)=1.813126e+003;
n=40; farx(n+1)=1.030632e+001; foe(n+1)=3.016216e+001; krok(n+1)=1.705737e-003; ng(n+1)=9.924307e+002;
n=41; farx(n+1)=1.082431e+001; foe(n+1)=2.782524e+001; krok(n+1)=8.456028e-004; ng(n+1)=1.459060e+003;
n=42; farx(n+1)=1.047518e+001; foe(n+1)=2.525617e+001; krok(n+1)=1.387045e-003; ng(n+1)=1.056747e+003;
n=43; farx(n+1)=9.614445e+000; foe(n+1)=2.117259e+001; krok(n+1)=8.928204e-003; ng(n+1)=9.880776e+002;
n=44; farx(n+1)=9.542456e+000; foe(n+1)=2.022567e+001; krok(n+1)=1.295158e-002; ng(n+1)=6.021951e+002;
n=45; farx(n+1)=9.526356e+000; foe(n+1)=1.952534e+001; krok(n+1)=1.389400e-003; ng(n+1)=1.124378e+003;
n=46; farx(n+1)=8.510907e+000; foe(n+1)=1.845688e+001; krok(n+1)=7.837498e-003; ng(n+1)=3.263492e+002;
n=47; farx(n+1)=7.159923e+000; foe(n+1)=1.688545e+001; krok(n+1)=1.165868e-002; ng(n+1)=4.210733e+002;
n=48; farx(n+1)=6.615380e+000; foe(n+1)=1.600479e+001; krok(n+1)=1.213054e-002; ng(n+1)=8.065196e+002;
n=49; farx(n+1)=6.405962e+000; foe(n+1)=1.471450e+001; krok(n+1)=2.339865e-002; ng(n+1)=8.388821e+002;
n=50; farx(n+1)=6.533795e+000; foe(n+1)=1.366775e+001; krok(n+1)=9.476825e-003; ng(n+1)=8.342325e+002;
%odnowa zmiennej metryki
n=51; farx(n+1)=6.317004e+000; foe(n+1)=1.324697e+001; krok(n+1)=5.560902e-005; ng(n+1)=3.692121e+002;
n=52; farx(n+1)=6.343494e+000; foe(n+1)=1.321058e+001; krok(n+1)=1.976919e-005; ng(n+1)=1.904371e+002;
n=53; farx(n+1)=6.314178e+000; foe(n+1)=1.305560e+001; krok(n+1)=3.820801e-004; ng(n+1)=1.018342e+002;
n=54; farx(n+1)=6.014872e+000; foe(n+1)=1.274914e+001; krok(n+1)=5.465324e-004; ng(n+1)=1.199365e+002;
n=55; farx(n+1)=5.569458e+000; foe(n+1)=1.148341e+001; krok(n+1)=2.722891e-003; ng(n+1)=1.345505e+002;
n=56; farx(n+1)=5.249416e+000; foe(n+1)=1.083123e+001; krok(n+1)=1.427772e-003; ng(n+1)=2.752066e+002;
n=57; farx(n+1)=5.069468e+000; foe(n+1)=1.003567e+001; krok(n+1)=3.187345e-003; ng(n+1)=3.389461e+002;
n=58; farx(n+1)=4.915762e+000; foe(n+1)=9.373651e+000; krok(n+1)=3.400118e-003; ng(n+1)=5.275048e+002;
n=59; farx(n+1)=4.871671e+000; foe(n+1)=8.795815e+000; krok(n+1)=6.734730e-003; ng(n+1)=4.889895e+002;
n=60; farx(n+1)=4.767551e+000; foe(n+1)=8.566632e+000; krok(n+1)=1.237443e-003; ng(n+1)=2.724077e+002;
n=61; farx(n+1)=4.727047e+000; foe(n+1)=8.318580e+000; krok(n+1)=2.472199e-003; ng(n+1)=2.932622e+002;
n=62; farx(n+1)=4.178204e+000; foe(n+1)=7.638399e+000; krok(n+1)=4.086147e-002; ng(n+1)=9.043907e+001;
n=63; farx(n+1)=4.083651e+000; foe(n+1)=7.517053e+000; krok(n+1)=5.711090e-003; ng(n+1)=1.694753e+002;
n=64; farx(n+1)=3.933501e+000; foe(n+1)=7.225767e+000; krok(n+1)=8.237127e-003; ng(n+1)=1.780458e+002;
n=65; farx(n+1)=3.979973e+000; foe(n+1)=7.033795e+000; krok(n+1)=1.438322e-002; ng(n+1)=2.084033e+002;
n=66; farx(n+1)=3.903441e+000; foe(n+1)=6.864165e+000; krok(n+1)=1.321526e-002; ng(n+1)=2.994918e+002;
n=67; farx(n+1)=3.839606e+000; foe(n+1)=6.736030e+000; krok(n+1)=9.195867e-003; ng(n+1)=3.893542e+002;
n=68; farx(n+1)=3.660875e+000; foe(n+1)=6.434001e+000; krok(n+1)=8.751130e-003; ng(n+1)=2.555359e+002;
n=69; farx(n+1)=3.514673e+000; foe(n+1)=6.292875e+000; krok(n+1)=6.256921e-003; ng(n+1)=3.377795e+002;
n=70; farx(n+1)=3.351046e+000; foe(n+1)=6.124087e+000; krok(n+1)=4.841302e-002; ng(n+1)=3.570535e+002;
n=71; farx(n+1)=3.087375e+000; foe(n+1)=5.861455e+000; krok(n+1)=5.285294e-002; ng(n+1)=2.405429e+002;
n=72; farx(n+1)=2.962059e+000; foe(n+1)=5.680054e+000; krok(n+1)=5.793922e-002; ng(n+1)=2.017143e+002;
n=73; farx(n+1)=2.808753e+000; foe(n+1)=5.419730e+000; krok(n+1)=5.236098e-002; ng(n+1)=9.012750e+001;
n=74; farx(n+1)=2.762634e+000; foe(n+1)=5.329794e+000; krok(n+1)=2.539936e-002; ng(n+1)=3.523923e+002;
n=75; farx(n+1)=2.650483e+000; foe(n+1)=5.177613e+000; krok(n+1)=9.515193e-002; ng(n+1)=2.143498e+002;
%odnowa zmiennej metryki
n=76; farx(n+1)=2.652849e+000; foe(n+1)=5.136527e+000; krok(n+1)=2.630754e-005; ng(n+1)=1.901838e+002;
n=77; farx(n+1)=2.639487e+000; foe(n+1)=5.091478e+000; krok(n+1)=3.034095e-005; ng(n+1)=1.862725e+002;
n=78; farx(n+1)=2.633498e+000; foe(n+1)=5.071074e+000; krok(n+1)=7.718077e-005; ng(n+1)=7.541324e+001;
n=79; farx(n+1)=2.612643e+000; foe(n+1)=4.996289e+000; krok(n+1)=3.559311e-004; ng(n+1)=6.848984e+001;
n=80; farx(n+1)=2.594283e+000; foe(n+1)=4.903971e+000; krok(n+1)=1.160015e-003; ng(n+1)=5.339338e+001;
n=81; farx(n+1)=2.529264e+000; foe(n+1)=4.818048e+000; krok(n+1)=2.634602e-003; ng(n+1)=5.415181e+001;
n=82; farx(n+1)=2.412163e+000; foe(n+1)=4.664518e+000; krok(n+1)=2.162140e-003; ng(n+1)=1.049617e+002;
n=83; farx(n+1)=2.388662e+000; foe(n+1)=4.636891e+000; krok(n+1)=3.187345e-003; ng(n+1)=3.169456e+002;
n=84; farx(n+1)=2.339614e+000; foe(n+1)=4.537851e+000; krok(n+1)=2.923886e-003; ng(n+1)=3.427805e+002;
n=85; farx(n+1)=2.272366e+000; foe(n+1)=4.415956e+000; krok(n+1)=1.205272e-002; ng(n+1)=4.009938e+002;
n=86; farx(n+1)=2.245056e+000; foe(n+1)=4.312769e+000; krok(n+1)=5.022071e-003; ng(n+1)=2.055417e+002;
n=87; farx(n+1)=2.252373e+000; foe(n+1)=4.206836e+000; krok(n+1)=7.144846e-003; ng(n+1)=3.222069e+002;
n=88; farx(n+1)=2.235767e+000; foe(n+1)=4.142040e+000; krok(n+1)=1.089156e-002; ng(n+1)=2.084728e+002;
n=89; farx(n+1)=2.244244e+000; foe(n+1)=4.081107e+000; krok(n+1)=6.130766e-003; ng(n+1)=2.340655e+002;
n=90; farx(n+1)=2.250557e+000; foe(n+1)=4.039141e+000; krok(n+1)=1.438335e-002; ng(n+1)=3.566896e+002;
n=91; farx(n+1)=2.264523e+000; foe(n+1)=3.846354e+000; krok(n+1)=1.605804e-002; ng(n+1)=3.492217e+002;
n=92; farx(n+1)=2.236630e+000; foe(n+1)=3.769455e+000; krok(n+1)=1.713076e-002; ng(n+1)=3.243446e+002;
n=93; farx(n+1)=2.241600e+000; foe(n+1)=3.679685e+000; krok(n+1)=1.321526e-002; ng(n+1)=1.546143e+002;
n=94; farx(n+1)=2.248399e+000; foe(n+1)=3.654285e+000; krok(n+1)=1.283974e-002; ng(n+1)=2.915773e+002;
n=95; farx(n+1)=2.253660e+000; foe(n+1)=3.608748e+000; krok(n+1)=9.566232e-003; ng(n+1)=2.069639e+002;
n=96; farx(n+1)=2.226900e+000; foe(n+1)=3.546745e+000; krok(n+1)=6.739301e-002; ng(n+1)=9.980890e+001;
n=97; farx(n+1)=2.170176e+000; foe(n+1)=3.446957e+000; krok(n+1)=6.004768e-002; ng(n+1)=1.591121e+002;
n=98; farx(n+1)=2.134725e+000; foe(n+1)=3.386062e+000; krok(n+1)=1.664795e-002; ng(n+1)=2.170837e+002;
n=99; farx(n+1)=2.116903e+000; foe(n+1)=3.341156e+000; krok(n+1)=4.308418e-002; ng(n+1)=2.485451e+002;
n=100; farx(n+1)=2.136247e+000; foe(n+1)=3.283214e+000; krok(n+1)=6.640781e-002; ng(n+1)=1.190221e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
