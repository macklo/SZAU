%uczenie predyktora oe
clear all;
n=0; farx(n+1)=4.619686e+003; foe(n+1)=4.581259e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=3.004532e+003; foe(n+1)=2.821688e+003; krok(n+1)=5.157570e-004; ng(n+1)=5.184939e+003;
n=2; farx(n+1)=1.144253e+003; foe(n+1)=8.815767e+002; krok(n+1)=2.171298e-003; ng(n+1)=2.777799e+003;
n=3; farx(n+1)=1.252329e+003; foe(n+1)=5.505291e+002; krok(n+1)=2.596664e-004; ng(n+1)=6.213591e+003;
n=4; farx(n+1)=1.364493e+003; foe(n+1)=5.354414e+002; krok(n+1)=1.216567e-003; ng(n+1)=1.650914e+003;
n=5; farx(n+1)=8.098246e+002; foe(n+1)=4.466961e+002; krok(n+1)=5.357205e-003; ng(n+1)=5.275126e+002;
n=6; farx(n+1)=6.351635e+002; foe(n+1)=4.097724e+002; krok(n+1)=7.304663e-004; ng(n+1)=2.151313e+003;
n=7; farx(n+1)=2.406231e+002; foe(n+1)=3.362038e+002; krok(n+1)=3.683227e-003; ng(n+1)=2.108240e+003;
n=8; farx(n+1)=2.246100e+002; foe(n+1)=3.299546e+002; krok(n+1)=2.955758e-005; ng(n+1)=4.586972e+003;
n=9; farx(n+1)=1.708735e+002; foe(n+1)=3.078688e+002; krok(n+1)=3.749852e-004; ng(n+1)=3.236567e+003;
n=10; farx(n+1)=1.525434e+002; foe(n+1)=2.938508e+002; krok(n+1)=2.530456e-003; ng(n+1)=2.034425e+003;
n=11; farx(n+1)=8.610499e+001; foe(n+1)=2.629074e+002; krok(n+1)=2.983929e-003; ng(n+1)=8.861632e+002;
n=12; farx(n+1)=6.538478e+001; foe(n+1)=2.120908e+002; krok(n+1)=2.414856e-003; ng(n+1)=1.382603e+003;
n=13; farx(n+1)=5.909689e+001; foe(n+1)=1.945108e+002; krok(n+1)=6.518015e-004; ng(n+1)=2.436318e+003;
n=14; farx(n+1)=5.895602e+001; foe(n+1)=1.931235e+002; krok(n+1)=1.714180e-004; ng(n+1)=2.821376e+003;
n=15; farx(n+1)=5.706861e+001; foe(n+1)=1.832363e+002; krok(n+1)=1.229105e-003; ng(n+1)=2.880913e+003;
n=16; farx(n+1)=5.882689e+001; foe(n+1)=1.725390e+002; krok(n+1)=4.836930e-004; ng(n+1)=3.606210e+003;
n=17; farx(n+1)=5.939995e+001; foe(n+1)=1.612809e+002; krok(n+1)=1.318183e-003; ng(n+1)=5.609991e+003;
n=18; farx(n+1)=5.845099e+001; foe(n+1)=1.583601e+002; krok(n+1)=7.102557e-004; ng(n+1)=9.879435e+003;
n=19; farx(n+1)=5.583065e+001; foe(n+1)=1.541713e+002; krok(n+1)=1.624224e-003; ng(n+1)=7.089357e+003;
n=20; farx(n+1)=3.612435e+001; foe(n+1)=1.238602e+002; krok(n+1)=4.259233e-003; ng(n+1)=3.530263e+003;
n=21; farx(n+1)=3.018708e+001; foe(n+1)=1.141978e+002; krok(n+1)=2.732662e-004; ng(n+1)=1.807078e+004;
n=22; farx(n+1)=2.013364e+001; foe(n+1)=9.443542e+001; krok(n+1)=1.667309e-003; ng(n+1)=2.111025e+004;
n=23; farx(n+1)=1.726459e+001; foe(n+1)=7.813799e+001; krok(n+1)=7.102557e-004; ng(n+1)=1.616128e+004;
n=24; farx(n+1)=1.426666e+001; foe(n+1)=5.543348e+001; krok(n+1)=1.042882e-002; ng(n+1)=1.247315e+003;
n=25; farx(n+1)=1.464727e+001; foe(n+1)=4.649131e+001; krok(n+1)=7.102557e-004; ng(n+1)=2.241290e+003;
%odnowa zmiennej metryki
n=26; farx(n+1)=1.458001e+001; foe(n+1)=4.407999e+001; krok(n+1)=5.447762e-006; ng(n+1)=2.417693e+003;
n=27; farx(n+1)=1.272869e+001; foe(n+1)=4.147570e+001; krok(n+1)=4.837788e-005; ng(n+1)=9.029851e+002;
n=28; farx(n+1)=1.259440e+001; foe(n+1)=4.004594e+001; krok(n+1)=2.084136e-004; ng(n+1)=4.929712e+002;
n=29; farx(n+1)=1.151389e+001; foe(n+1)=3.407017e+001; krok(n+1)=3.467612e-004; ng(n+1)=9.829587e+002;
n=30; farx(n+1)=9.824799e+000; foe(n+1)=2.683561e+001; krok(n+1)=1.276921e-003; ng(n+1)=1.414545e+003;
n=31; farx(n+1)=9.559617e+000; foe(n+1)=2.407924e+001; krok(n+1)=1.742666e-003; ng(n+1)=1.098026e+003;
n=32; farx(n+1)=1.012498e+001; foe(n+1)=2.093035e+001; krok(n+1)=2.600877e-003; ng(n+1)=2.974396e+003;
n=33; farx(n+1)=9.378122e+000; foe(n+1)=1.919370e+001; krok(n+1)=2.953444e-003; ng(n+1)=1.755317e+003;
n=34; farx(n+1)=9.395804e+000; foe(n+1)=1.887048e+001; krok(n+1)=1.146661e-003; ng(n+1)=4.765066e+002;
n=35; farx(n+1)=9.391869e+000; foe(n+1)=1.772370e+001; krok(n+1)=2.270713e-003; ng(n+1)=1.045648e+003;
n=36; farx(n+1)=9.524352e+000; foe(n+1)=1.675978e+001; krok(n+1)=6.819101e-003; ng(n+1)=4.645921e+002;
n=37; farx(n+1)=7.794316e+000; foe(n+1)=1.443537e+001; krok(n+1)=2.699349e-002; ng(n+1)=2.364263e+002;
n=38; farx(n+1)=6.906403e+000; foe(n+1)=1.385821e+001; krok(n+1)=8.648560e-003; ng(n+1)=4.282533e+002;
n=39; farx(n+1)=5.912691e+000; foe(n+1)=1.295973e+001; krok(n+1)=4.290347e-003; ng(n+1)=9.326562e+002;
n=40; farx(n+1)=4.806246e+000; foe(n+1)=1.170392e+001; krok(n+1)=1.881038e-002; ng(n+1)=4.296631e+002;
n=41; farx(n+1)=4.375296e+000; foe(n+1)=1.100718e+001; krok(n+1)=1.349272e-002; ng(n+1)=4.460675e+002;
n=42; farx(n+1)=4.045401e+000; foe(n+1)=1.023430e+001; krok(n+1)=2.128042e-002; ng(n+1)=3.692140e+002;
n=43; farx(n+1)=4.063880e+000; foe(n+1)=9.360132e+000; krok(n+1)=2.369912e-002; ng(n+1)=1.014474e+003;
n=44; farx(n+1)=3.733328e+000; foe(n+1)=9.042150e+000; krok(n+1)=5.022246e-003; ng(n+1)=3.776822e+002;
n=45; farx(n+1)=3.390426e+000; foe(n+1)=8.170592e+000; krok(n+1)=1.738514e-002; ng(n+1)=6.182007e+002;
n=46; farx(n+1)=3.509000e+000; foe(n+1)=7.814297e+000; krok(n+1)=3.081106e-002; ng(n+1)=8.123867e+002;
n=47; farx(n+1)=3.490252e+000; foe(n+1)=7.355688e+000; krok(n+1)=3.450322e-002; ng(n+1)=7.073099e+002;
n=48; farx(n+1)=3.248475e+000; foe(n+1)=6.297677e+000; krok(n+1)=8.373214e-002; ng(n+1)=1.130595e+003;
n=49; farx(n+1)=3.027751e+000; foe(n+1)=6.068415e+000; krok(n+1)=2.038894e-002; ng(n+1)=4.944612e+002;
n=50; farx(n+1)=2.600985e+000; foe(n+1)=4.976699e+000; krok(n+1)=6.963444e-002; ng(n+1)=1.123459e+003;
%odnowa zmiennej metryki
n=51; farx(n+1)=2.529475e+000; foe(n+1)=4.762778e+000; krok(n+1)=6.733170e-006; ng(n+1)=5.607468e+002;
n=52; farx(n+1)=2.507675e+000; foe(n+1)=4.704734e+000; krok(n+1)=4.006011e-006; ng(n+1)=4.628400e+002;
n=53; farx(n+1)=2.580151e+000; foe(n+1)=4.623300e+000; krok(n+1)=1.239407e-004; ng(n+1)=1.072628e+002;
n=54; farx(n+1)=2.630040e+000; foe(n+1)=4.512579e+000; krok(n+1)=2.612599e-004; ng(n+1)=9.578297e+001;
n=55; farx(n+1)=2.471039e+000; foe(n+1)=4.293966e+000; krok(n+1)=1.346381e-003; ng(n+1)=7.639993e+001;
n=56; farx(n+1)=2.429675e+000; foe(n+1)=4.077529e+000; krok(n+1)=6.543079e-003; ng(n+1)=6.074151e+001;
n=57; farx(n+1)=2.364923e+000; foe(n+1)=3.824851e+000; krok(n+1)=3.660956e-003; ng(n+1)=3.180161e+002;
n=58; farx(n+1)=2.123566e+000; foe(n+1)=3.453941e+000; krok(n+1)=1.704362e-002; ng(n+1)=8.129798e+002;
n=59; farx(n+1)=1.887283e+000; foe(n+1)=3.248847e+000; krok(n+1)=3.209934e-003; ng(n+1)=6.614329e+002;
n=60; farx(n+1)=1.816995e+000; foe(n+1)=3.141091e+000; krok(n+1)=3.683227e-003; ng(n+1)=8.778092e+002;
n=61; farx(n+1)=1.523587e+000; foe(n+1)=2.606184e+000; krok(n+1)=2.720095e-002; ng(n+1)=5.690136e+002;
n=62; farx(n+1)=1.498690e+000; foe(n+1)=2.434908e+000; krok(n+1)=6.699412e-003; ng(n+1)=7.903271e+002;
n=63; farx(n+1)=1.492158e+000; foe(n+1)=2.300026e+000; krok(n+1)=4.727372e-003; ng(n+1)=2.845529e+002;
n=64; farx(n+1)=1.487013e+000; foe(n+1)=2.171753e+000; krok(n+1)=1.927372e-002; ng(n+1)=3.504896e+002;
n=65; farx(n+1)=1.485155e+000; foe(n+1)=2.105286e+000; krok(n+1)=1.525264e-002; ng(n+1)=5.695719e+002;
n=66; farx(n+1)=1.446822e+000; foe(n+1)=2.066184e+000; krok(n+1)=2.386882e-002; ng(n+1)=2.037557e+002;
n=67; farx(n+1)=1.359594e+000; foe(n+1)=1.927845e+000; krok(n+1)=6.722782e-002; ng(n+1)=2.351478e+002;
n=68; farx(n+1)=1.307047e+000; foe(n+1)=1.863883e+000; krok(n+1)=8.202462e-003; ng(n+1)=3.157150e+002;
n=69; farx(n+1)=1.261305e+000; foe(n+1)=1.792438e+000; krok(n+1)=3.616714e-002; ng(n+1)=3.068919e+002;
n=70; farx(n+1)=1.248309e+000; foe(n+1)=1.752600e+000; krok(n+1)=1.594192e-002; ng(n+1)=2.007806e+002;
n=71; farx(n+1)=1.218085e+000; foe(n+1)=1.638563e+000; krok(n+1)=1.170340e-001; ng(n+1)=9.606597e+001;
n=72; farx(n+1)=1.169119e+000; foe(n+1)=1.601479e+000; krok(n+1)=6.306675e-002; ng(n+1)=1.652215e+002;
n=73; farx(n+1)=1.146004e+000; foe(n+1)=1.560383e+000; krok(n+1)=1.892883e-001; ng(n+1)=3.304318e+001;
n=74; farx(n+1)=1.110595e+000; foe(n+1)=1.523247e+000; krok(n+1)=1.380129e-001; ng(n+1)=1.155002e+002;
n=75; farx(n+1)=1.080777e+000; foe(n+1)=1.487800e+000; krok(n+1)=5.059367e-002; ng(n+1)=2.198169e+002;
%odnowa zmiennej metryki
n=76; farx(n+1)=1.080176e+000; foe(n+1)=1.479900e+000; krok(n+1)=1.904561e-006; ng(n+1)=2.335438e+002;
n=77; farx(n+1)=1.080371e+000; foe(n+1)=1.478253e+000; krok(n+1)=5.607521e-006; ng(n+1)=6.579077e+001;
n=78; farx(n+1)=1.082595e+000; foe(n+1)=1.472973e+000; krok(n+1)=1.065359e-004; ng(n+1)=2.575011e+001;
n=79; farx(n+1)=1.081117e+000; foe(n+1)=1.469659e+000; krok(n+1)=2.732662e-004; ng(n+1)=1.749501e+001;
n=80; farx(n+1)=1.079422e+000; foe(n+1)=1.462510e+000; krok(n+1)=2.802141e-004; ng(n+1)=2.219727e+001;
n=81; farx(n+1)=1.081827e+000; foe(n+1)=1.437388e+000; krok(n+1)=2.914778e-003; ng(n+1)=1.505006e+001;
n=82; farx(n+1)=1.080848e+000; foe(n+1)=1.433080e+000; krok(n+1)=3.040595e-003; ng(n+1)=3.156315e+001;
n=83; farx(n+1)=1.079767e+000; foe(n+1)=1.425882e+000; krok(n+1)=1.596002e-002; ng(n+1)=5.399513e+001;
n=84; farx(n+1)=1.081061e+000; foe(n+1)=1.424346e+000; krok(n+1)=1.524981e-003; ng(n+1)=1.061205e+002;
n=85; farx(n+1)=1.084072e+000; foe(n+1)=1.420505e+000; krok(n+1)=1.737038e-002; ng(n+1)=1.304750e+002;
n=86; farx(n+1)=1.095234e+000; foe(n+1)=1.411925e+000; krok(n+1)=1.725161e-002; ng(n+1)=1.845574e+002;
n=87; farx(n+1)=1.096077e+000; foe(n+1)=1.393763e+000; krok(n+1)=3.432277e-002; ng(n+1)=2.735852e+002;
n=88; farx(n+1)=1.082659e+000; foe(n+1)=1.367830e+000; krok(n+1)=4.194258e-002; ng(n+1)=1.836548e+002;
n=89; farx(n+1)=1.073104e+000; foe(n+1)=1.351102e+000; krok(n+1)=6.645935e-002; ng(n+1)=1.937217e+002;
n=90; farx(n+1)=1.061563e+000; foe(n+1)=1.333426e+000; krok(n+1)=1.506159e-002; ng(n+1)=2.478535e+002;
n=91; farx(n+1)=1.052736e+000; foe(n+1)=1.298400e+000; krok(n+1)=4.226038e-002; ng(n+1)=2.167113e+002;
n=92; farx(n+1)=1.066988e+000; foe(n+1)=1.227613e+000; krok(n+1)=2.193298e-001; ng(n+1)=3.628663e+002;
n=93; farx(n+1)=1.062302e+000; foe(n+1)=1.216707e+000; krok(n+1)=2.340953e-002; ng(n+1)=1.089066e+002;
n=94; farx(n+1)=1.045159e+000; foe(n+1)=1.198516e+000; krok(n+1)=5.019954e-002; ng(n+1)=1.310901e+002;
n=95; farx(n+1)=1.035817e+000; foe(n+1)=1.178625e+000; krok(n+1)=8.973318e-002; ng(n+1)=5.850567e+001;
n=96; farx(n+1)=1.036384e+000; foe(n+1)=1.150281e+000; krok(n+1)=2.205796e-001; ng(n+1)=2.083840e+002;
n=97; farx(n+1)=1.057216e+000; foe(n+1)=1.122332e+000; krok(n+1)=2.250273e-001; ng(n+1)=1.444160e+002;
n=98; farx(n+1)=1.075305e+000; foe(n+1)=1.095971e+000; krok(n+1)=1.438191e-001; ng(n+1)=8.750930e+001;
n=99; farx(n+1)=1.084532e+000; foe(n+1)=1.082238e+000; krok(n+1)=6.287977e-002; ng(n+1)=1.682504e+002;
n=100; farx(n+1)=1.087614e+000; foe(n+1)=1.067908e+000; krok(n+1)=4.815335e-002; ng(n+1)=2.537930e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
