%uczenie predyktora oe
clear all;
n=0; farx(n+1)=4.272076e+003; foe(n+1)=4.022972e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=2.749603e+003; foe(n+1)=2.791493e+003; krok(n+1)=5.157570e-004; ng(n+1)=4.990026e+003;
n=2; farx(n+1)=1.000367e+003; foe(n+1)=8.605231e+002; krok(n+1)=2.013418e-003; ng(n+1)=2.789321e+003;
n=3; farx(n+1)=1.059466e+003; foe(n+1)=5.112589e+002; krok(n+1)=2.285820e-004; ng(n+1)=6.298591e+003;
n=4; farx(n+1)=1.068020e+003; foe(n+1)=4.838019e+002; krok(n+1)=2.607264e-003; ng(n+1)=1.159612e+003;
n=5; farx(n+1)=7.091011e+002; foe(n+1)=4.256771e+002; krok(n+1)=1.600738e-003; ng(n+1)=8.140212e+002;
n=6; farx(n+1)=3.940400e+002; foe(n+1)=3.639117e+002; krok(n+1)=2.028593e-003; ng(n+1)=2.202363e+003;
n=7; farx(n+1)=3.187374e+002; foe(n+1)=3.483494e+002; krok(n+1)=1.477304e-004; ng(n+1)=1.966446e+003;
n=8; farx(n+1)=1.783511e+002; foe(n+1)=3.079885e+002; krok(n+1)=1.644128e-003; ng(n+1)=2.151904e+003;
n=9; farx(n+1)=1.692467e+002; foe(n+1)=3.037408e+002; krok(n+1)=1.107642e-004; ng(n+1)=2.216746e+003;
n=10; farx(n+1)=1.602296e+002; foe(n+1)=2.993523e+002; krok(n+1)=9.499141e-004; ng(n+1)=1.512618e+003;
n=11; farx(n+1)=1.585250e+002; foe(n+1)=2.751917e+002; krok(n+1)=2.439969e-002; ng(n+1)=1.415223e+003;
n=12; farx(n+1)=1.536571e+002; foe(n+1)=2.673029e+002; krok(n+1)=2.841023e-003; ng(n+1)=1.201730e+003;
n=13; farx(n+1)=1.554857e+002; foe(n+1)=2.453518e+002; krok(n+1)=2.118327e-003; ng(n+1)=1.881064e+003;
n=14; farx(n+1)=1.639130e+002; foe(n+1)=2.430566e+002; krok(n+1)=9.977322e-004; ng(n+1)=1.101007e+003;
n=15; farx(n+1)=1.631052e+002; foe(n+1)=2.417496e+002; krok(n+1)=1.303603e-003; ng(n+1)=8.160129e+002;
n=16; farx(n+1)=1.540546e+002; foe(n+1)=2.399188e+002; krok(n+1)=2.707062e-003; ng(n+1)=5.607797e+002;
n=17; farx(n+1)=1.261732e+002; foe(n+1)=2.330972e+002; krok(n+1)=6.905382e-003; ng(n+1)=4.264455e+002;
n=18; farx(n+1)=1.253463e+002; foe(n+1)=2.185102e+002; krok(n+1)=7.007869e-003; ng(n+1)=8.331239e+002;
n=19; farx(n+1)=1.260089e+002; foe(n+1)=2.134226e+002; krok(n+1)=3.625910e-003; ng(n+1)=3.698241e+002;
n=20; farx(n+1)=1.090503e+002; foe(n+1)=2.067870e+002; krok(n+1)=1.220118e-002; ng(n+1)=6.495574e+002;
n=21; farx(n+1)=1.120724e+002; foe(n+1)=2.004725e+002; krok(n+1)=5.400718e-003; ng(n+1)=6.307200e+002;
n=22; farx(n+1)=8.961625e+001; foe(n+1)=1.921461e+002; krok(n+1)=4.916421e-003; ng(n+1)=6.430558e+002;
n=23; farx(n+1)=7.170084e+001; foe(n+1)=1.792006e+002; krok(n+1)=7.191611e-003; ng(n+1)=8.649754e+002;
n=24; farx(n+1)=5.222030e+001; foe(n+1)=1.602329e+002; krok(n+1)=1.317301e-003; ng(n+1)=1.202991e+003;
n=25; farx(n+1)=5.038445e+001; foe(n+1)=1.590383e+002; krok(n+1)=5.406937e-005; ng(n+1)=4.583029e+003;
%odnowa zmiennej metryki
n=26; farx(n+1)=4.865507e+001; foe(n+1)=1.421032e+002; krok(n+1)=1.684728e-005; ng(n+1)=5.696013e+003;
n=27; farx(n+1)=4.558550e+001; foe(n+1)=1.222049e+002; krok(n+1)=1.269681e-004; ng(n+1)=1.489402e+003;
n=28; farx(n+1)=3.582416e+001; foe(n+1)=1.035138e+002; krok(n+1)=1.000461e-004; ng(n+1)=1.918413e+003;
n=29; farx(n+1)=3.229577e+001; foe(n+1)=9.286713e+001; krok(n+1)=9.411109e-005; ng(n+1)=4.302058e+003;
n=30; farx(n+1)=3.134904e+001; foe(n+1)=8.729496e+001; krok(n+1)=1.616409e-004; ng(n+1)=5.957410e+003;
n=31; farx(n+1)=2.779203e+001; foe(n+1)=8.200423e+001; krok(n+1)=9.921626e-005; ng(n+1)=1.938504e+003;
n=32; farx(n+1)=2.290400e+001; foe(n+1)=7.540558e+001; krok(n+1)=8.704444e-004; ng(n+1)=4.405149e+003;
n=33; farx(n+1)=1.246742e+001; foe(n+1)=4.670136e+001; krok(n+1)=2.774090e-003; ng(n+1)=4.298735e+003;
n=34; farx(n+1)=9.446334e+000; foe(n+1)=3.955616e+001; krok(n+1)=1.860699e-003; ng(n+1)=1.834944e+003;
n=35; farx(n+1)=7.196495e+000; foe(n+1)=2.781878e+001; krok(n+1)=3.340564e-003; ng(n+1)=1.780295e+003;
n=36; farx(n+1)=7.039025e+000; foe(n+1)=2.537913e+001; krok(n+1)=1.638929e-003; ng(n+1)=5.604010e+002;
n=37; farx(n+1)=6.537951e+000; foe(n+1)=2.115926e+001; krok(n+1)=5.137451e-003; ng(n+1)=1.429766e+003;
n=38; farx(n+1)=5.998850e+000; foe(n+1)=1.990557e+001; krok(n+1)=5.011162e-004; ng(n+1)=7.657698e+002;
n=39; farx(n+1)=5.705020e+000; foe(n+1)=1.952323e+001; krok(n+1)=1.221241e-003; ng(n+1)=1.200021e+003;
n=40; farx(n+1)=5.257004e+000; foe(n+1)=1.724272e+001; krok(n+1)=5.190450e-003; ng(n+1)=1.013520e+003;
n=41; farx(n+1)=4.955942e+000; foe(n+1)=1.611389e+001; krok(n+1)=6.349841e-003; ng(n+1)=7.965073e+002;
n=42; farx(n+1)=5.016431e+000; foe(n+1)=1.546707e+001; krok(n+1)=7.418259e-003; ng(n+1)=1.055792e+003;
n=43; farx(n+1)=4.813487e+000; foe(n+1)=1.460614e+001; krok(n+1)=9.899545e-003; ng(n+1)=9.980332e+002;
n=44; farx(n+1)=4.157855e+000; foe(n+1)=1.340167e+001; krok(n+1)=1.301252e-002; ng(n+1)=7.442487e+002;
n=45; farx(n+1)=4.094628e+000; foe(n+1)=1.233724e+001; krok(n+1)=3.350038e-003; ng(n+1)=1.246777e+003;
n=46; farx(n+1)=4.106511e+000; foe(n+1)=1.155843e+001; krok(n+1)=4.508154e-003; ng(n+1)=5.603723e+002;
n=47; farx(n+1)=4.145438e+000; foe(n+1)=1.128282e+001; krok(n+1)=1.417782e-002; ng(n+1)=6.410745e+002;
n=48; farx(n+1)=4.025874e+000; foe(n+1)=1.077930e+001; krok(n+1)=9.476825e-003; ng(n+1)=8.092379e+002;
n=49; farx(n+1)=3.850412e+000; foe(n+1)=1.019074e+001; krok(n+1)=2.567947e-002; ng(n+1)=1.127009e+003;
n=50; farx(n+1)=3.876829e+000; foe(n+1)=9.029115e+000; krok(n+1)=3.907153e-002; ng(n+1)=9.996106e+002;
%odnowa zmiennej metryki
n=51; farx(n+1)=3.840356e+000; foe(n+1)=8.621178e+000; krok(n+1)=5.231895e-006; ng(n+1)=1.053206e+003;
n=52; farx(n+1)=3.815396e+000; foe(n+1)=8.581799e+000; krok(n+1)=3.117913e-005; ng(n+1)=1.383724e+002;
n=53; farx(n+1)=3.743665e+000; foe(n+1)=8.430448e+000; krok(n+1)=3.930502e-004; ng(n+1)=8.192951e+001;
n=54; farx(n+1)=3.656694e+000; foe(n+1)=7.991121e+000; krok(n+1)=2.528830e-004; ng(n+1)=1.789969e+002;
n=55; farx(n+1)=3.693641e+000; foe(n+1)=7.729657e+000; krok(n+1)=4.448722e-004; ng(n+1)=1.257251e+002;
n=56; farx(n+1)=3.638421e+000; foe(n+1)=7.277432e+000; krok(n+1)=6.293742e-003; ng(n+1)=9.017680e+001;
n=57; farx(n+1)=3.379678e+000; foe(n+1)=6.588082e+000; krok(n+1)=1.177574e-002; ng(n+1)=5.049423e+002;
n=58; farx(n+1)=3.080982e+000; foe(n+1)=6.145656e+000; krok(n+1)=3.386820e-003; ng(n+1)=2.944020e+002;
n=59; farx(n+1)=2.857355e+000; foe(n+1)=5.828909e+000; krok(n+1)=2.156451e-003; ng(n+1)=6.138896e+002;
n=60; farx(n+1)=2.748681e+000; foe(n+1)=5.569954e+000; krok(n+1)=1.291963e-003; ng(n+1)=9.457479e+002;
n=61; farx(n+1)=2.629399e+000; foe(n+1)=5.281947e+000; krok(n+1)=8.625805e-003; ng(n+1)=5.949691e+002;
n=62; farx(n+1)=2.563970e+000; foe(n+1)=4.797011e+000; krok(n+1)=1.086709e-002; ng(n+1)=3.869219e+002;
n=63; farx(n+1)=2.550167e+000; foe(n+1)=4.676355e+000; krok(n+1)=4.201739e-003; ng(n+1)=4.182473e+002;
n=64; farx(n+1)=2.422082e+000; foe(n+1)=4.337653e+000; krok(n+1)=2.362755e-002; ng(n+1)=8.185797e+001;
n=65; farx(n+1)=2.352741e+000; foe(n+1)=4.148138e+000; krok(n+1)=3.263302e-003; ng(n+1)=4.790055e+002;
n=66; farx(n+1)=2.308265e+000; foe(n+1)=3.864139e+000; krok(n+1)=3.595838e-003; ng(n+1)=6.032407e+002;
n=67; farx(n+1)=2.294805e+000; foe(n+1)=3.701046e+000; krok(n+1)=4.871925e-003; ng(n+1)=3.161702e+002;
n=68; farx(n+1)=2.219933e+000; foe(n+1)=3.456900e+000; krok(n+1)=4.312259e-002; ng(n+1)=3.405923e+002;
n=69; farx(n+1)=2.109625e+000; foe(n+1)=3.103322e+000; krok(n+1)=2.339865e-002; ng(n+1)=3.650972e+002;
n=70; farx(n+1)=2.084349e+000; foe(n+1)=3.005705e+000; krok(n+1)=4.771196e-003; ng(n+1)=5.412493e+002;
n=71; farx(n+1)=2.073060e+000; foe(n+1)=2.981536e+000; krok(n+1)=9.281129e-003; ng(n+1)=2.124739e+002;
n=72; farx(n+1)=1.961179e+000; foe(n+1)=2.792058e+000; krok(n+1)=4.616585e-002; ng(n+1)=1.277207e+002;
n=73; farx(n+1)=1.866027e+000; foe(n+1)=2.641578e+000; krok(n+1)=2.606552e-002; ng(n+1)=3.942094e+002;
n=74; farx(n+1)=1.835322e+000; foe(n+1)=2.516261e+000; krok(n+1)=2.452306e-002; ng(n+1)=3.512214e+002;
n=75; farx(n+1)=1.671848e+000; foe(n+1)=2.266346e+000; krok(n+1)=1.158784e-001; ng(n+1)=2.181035e+002;
%odnowa zmiennej metryki
n=76; farx(n+1)=1.673746e+000; foe(n+1)=2.256558e+000; krok(n+1)=9.456357e-006; ng(n+1)=1.210528e+002;
n=77; farx(n+1)=1.673332e+000; foe(n+1)=2.253418e+000; krok(n+1)=1.035782e-005; ng(n+1)=8.539893e+001;
n=78; farx(n+1)=1.671561e+000; foe(n+1)=2.231489e+000; krok(n+1)=3.565361e-005; ng(n+1)=1.197995e+002;
n=79; farx(n+1)=1.663985e+000; foe(n+1)=2.186587e+000; krok(n+1)=1.554679e-004; ng(n+1)=6.115807e+001;
n=80; farx(n+1)=1.666372e+000; foe(n+1)=2.089962e+000; krok(n+1)=4.089425e-004; ng(n+1)=7.994629e+001;
n=81; farx(n+1)=1.667629e+000; foe(n+1)=2.039090e+000; krok(n+1)=3.376894e-003; ng(n+1)=5.273263e+001;
n=82; farx(n+1)=1.671071e+000; foe(n+1)=1.973704e+000; krok(n+1)=5.295103e-003; ng(n+1)=1.268598e+002;
n=83; farx(n+1)=1.669158e+000; foe(n+1)=1.943614e+000; krok(n+1)=3.833898e-003; ng(n+1)=2.835933e+002;
n=84; farx(n+1)=1.628057e+000; foe(n+1)=1.877248e+000; krok(n+1)=1.275465e-002; ng(n+1)=2.516192e+002;
n=85; farx(n+1)=1.567928e+000; foe(n+1)=1.807139e+000; krok(n+1)=1.012568e-002; ng(n+1)=2.613939e+002;
n=86; farx(n+1)=1.548202e+000; foe(n+1)=1.768022e+000; krok(n+1)=3.174920e-003; ng(n+1)=2.201259e+002;
n=87; farx(n+1)=1.509579e+000; foe(n+1)=1.713778e+000; krok(n+1)=7.692316e-003; ng(n+1)=2.513454e+002;
n=88; farx(n+1)=1.493298e+000; foe(n+1)=1.694711e+000; krok(n+1)=6.853004e-003; ng(n+1)=1.086565e+002;
n=89; farx(n+1)=1.466732e+000; foe(n+1)=1.653117e+000; krok(n+1)=2.074719e-002; ng(n+1)=2.566109e+002;
n=90; farx(n+1)=1.430283e+000; foe(n+1)=1.576864e+000; krok(n+1)=2.011176e-002; ng(n+1)=3.524209e+002;
n=91; farx(n+1)=1.418010e+000; foe(n+1)=1.499175e+000; krok(n+1)=3.377395e-002; ng(n+1)=3.099670e+002;
n=92; farx(n+1)=1.416014e+000; foe(n+1)=1.426041e+000; krok(n+1)=4.438543e-002; ng(n+1)=1.074561e+002;
n=93; farx(n+1)=1.413658e+000; foe(n+1)=1.369491e+000; krok(n+1)=4.738412e-003; ng(n+1)=6.658695e+002;
n=94; farx(n+1)=1.420806e+000; foe(n+1)=1.350253e+000; krok(n+1)=6.353015e-003; ng(n+1)=2.528187e+002;
n=95; farx(n+1)=1.417159e+000; foe(n+1)=1.339020e+000; krok(n+1)=2.610023e-002; ng(n+1)=7.290368e+001;
n=96; farx(n+1)=1.390571e+000; foe(n+1)=1.293832e+000; krok(n+1)=8.298877e-002; ng(n+1)=1.500197e+002;
n=97; farx(n+1)=1.352226e+000; foe(n+1)=1.229422e+000; krok(n+1)=9.019770e-002; ng(n+1)=1.374266e+002;
n=98; farx(n+1)=1.312776e+000; foe(n+1)=1.174709e+000; krok(n+1)=1.987790e-002; ng(n+1)=3.098662e+002;
n=99; farx(n+1)=1.275332e+000; foe(n+1)=1.124018e+000; krok(n+1)=3.751412e-002; ng(n+1)=1.162506e+002;
n=100; farx(n+1)=1.255814e+000; foe(n+1)=1.101114e+000; krok(n+1)=2.502768e-002; ng(n+1)=4.222661e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
