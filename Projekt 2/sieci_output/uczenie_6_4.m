%uczenie predyktora oe
clear all;
n=0; farx(n+1)=4.544482e+003; foe(n+1)=4.643923e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=3.000698e+003; foe(n+1)=2.868257e+003; krok(n+1)=5.061965e-004; ng(n+1)=4.257744e+003;
n=2; farx(n+1)=1.132410e+003; foe(n+1)=1.067608e+003; krok(n+1)=2.100870e-003; ng(n+1)=2.463158e+003;
n=3; farx(n+1)=1.329059e+003; foe(n+1)=6.961884e+002; krok(n+1)=1.460638e-004; ng(n+1)=8.233342e+003;
n=4; farx(n+1)=1.890465e+003; foe(n+1)=5.634753e+002; krok(n+1)=3.276764e-004; ng(n+1)=7.739597e+003;
n=5; farx(n+1)=1.543815e+003; foe(n+1)=5.135246e+002; krok(n+1)=4.736926e-003; ng(n+1)=7.446045e+002;
n=6; farx(n+1)=1.515649e+003; foe(n+1)=5.113972e+002; krok(n+1)=3.428360e-004; ng(n+1)=1.337209e+003;
n=7; farx(n+1)=5.430148e+002; foe(n+1)=3.895139e+002; krok(n+1)=7.105102e-003; ng(n+1)=1.338409e+003;
n=8; farx(n+1)=4.660612e+002; foe(n+1)=3.831365e+002; krok(n+1)=1.538085e-005; ng(n+1)=5.376983e+003;
n=9; farx(n+1)=4.659877e+002; foe(n+1)=3.800830e+002; krok(n+1)=2.915196e-004; ng(n+1)=6.071367e+003;
n=10; farx(n+1)=3.996481e+002; foe(n+1)=3.637794e+002; krok(n+1)=4.880790e-004; ng(n+1)=4.183804e+003;
n=11; farx(n+1)=1.847875e+002; foe(n+1)=2.996317e+002; krok(n+1)=4.419773e-003; ng(n+1)=2.974570e+003;
n=12; farx(n+1)=1.720553e+002; foe(n+1)=2.942223e+002; krok(n+1)=1.131625e-004; ng(n+1)=2.605466e+003;
n=13; farx(n+1)=1.721013e+002; foe(n+1)=2.931452e+002; krok(n+1)=2.858260e-004; ng(n+1)=3.386321e+003;
n=14; farx(n+1)=1.734942e+002; foe(n+1)=2.902861e+002; krok(n+1)=9.589643e-004; ng(n+1)=2.725599e+003;
n=15; farx(n+1)=2.098202e+002; foe(n+1)=2.779105e+002; krok(n+1)=4.264608e-003; ng(n+1)=2.454591e+003;
n=16; farx(n+1)=1.688667e+002; foe(n+1)=2.676994e+002; krok(n+1)=4.173411e-003; ng(n+1)=1.090580e+003;
n=17; farx(n+1)=1.657914e+002; foe(n+1)=2.441738e+002; krok(n+1)=6.700076e-003; ng(n+1)=1.584326e+003;
n=18; farx(n+1)=2.470676e+002; foe(n+1)=1.817191e+002; krok(n+1)=5.767896e-003; ng(n+1)=8.237605e+002;
n=19; farx(n+1)=2.536116e+002; foe(n+1)=1.810654e+002; krok(n+1)=2.746916e-005; ng(n+1)=2.566333e+003;
n=20; farx(n+1)=2.559929e+002; foe(n+1)=1.747915e+002; krok(n+1)=4.235590e-003; ng(n+1)=3.489908e+003;
n=21; farx(n+1)=2.367719e+002; foe(n+1)=1.699778e+002; krok(n+1)=7.286945e-004; ng(n+1)=1.548347e+003;
n=22; farx(n+1)=2.870133e+002; foe(n+1)=1.590512e+002; krok(n+1)=1.803826e-002; ng(n+1)=2.343587e+003;
n=23; farx(n+1)=2.289222e+002; foe(n+1)=1.356187e+002; krok(n+1)=1.797739e-002; ng(n+1)=1.400384e+003;
n=24; farx(n+1)=2.172374e+002; foe(n+1)=1.339908e+002; krok(n+1)=1.758026e-003; ng(n+1)=1.515422e+003;
n=25; farx(n+1)=1.068914e+002; foe(n+1)=1.025474e+002; krok(n+1)=4.974525e-003; ng(n+1)=2.494302e+003;
%odnowa zmiennej metryki
n=26; farx(n+1)=1.007721e+002; foe(n+1)=9.137907e+001; krok(n+1)=8.470861e-006; ng(n+1)=5.038079e+003;
n=27; farx(n+1)=4.927453e+001; foe(n+1)=6.012014e+001; krok(n+1)=2.896249e-004; ng(n+1)=1.572426e+003;
n=28; farx(n+1)=4.045449e+001; foe(n+1)=5.511556e+001; krok(n+1)=4.605170e-005; ng(n+1)=1.223484e+003;
n=29; farx(n+1)=3.178648e+001; foe(n+1)=5.266367e+001; krok(n+1)=2.084136e-004; ng(n+1)=6.858450e+002;
n=30; farx(n+1)=2.430838e+001; foe(n+1)=4.282964e+001; krok(n+1)=9.992456e-004; ng(n+1)=4.910907e+002;
n=31; farx(n+1)=2.111638e+001; foe(n+1)=3.685661e+001; krok(n+1)=9.053002e-004; ng(n+1)=1.521246e+003;
n=32; farx(n+1)=1.374070e+001; foe(n+1)=2.533770e+001; krok(n+1)=6.853004e-003; ng(n+1)=6.104653e+002;
n=33; farx(n+1)=1.195937e+001; foe(n+1)=2.344819e+001; krok(n+1)=3.516052e-003; ng(n+1)=5.434458e+002;
n=34; farx(n+1)=9.757424e+000; foe(n+1)=1.903317e+001; krok(n+1)=1.970895e-003; ng(n+1)=1.199766e+003;
n=35; farx(n+1)=7.483596e+000; foe(n+1)=1.598803e+001; krok(n+1)=3.350038e-003; ng(n+1)=7.821299e+002;
n=36; farx(n+1)=6.606476e+000; foe(n+1)=1.363821e+001; krok(n+1)=3.334617e-003; ng(n+1)=1.665361e+003;
n=37; farx(n+1)=6.161478e+000; foe(n+1)=1.255496e+001; krok(n+1)=2.943935e-003; ng(n+1)=6.210620e+002;
n=38; farx(n+1)=5.889793e+000; foe(n+1)=1.211835e+001; krok(n+1)=4.126268e-003; ng(n+1)=5.959086e+002;
n=39; farx(n+1)=5.416529e+000; foe(n+1)=1.157806e+001; krok(n+1)=7.251821e-003; ng(n+1)=2.709041e+002;
n=40; farx(n+1)=4.674435e+000; foe(n+1)=1.045685e+001; krok(n+1)=2.617232e-002; ng(n+1)=6.262783e+002;
n=41; farx(n+1)=4.230526e+000; foe(n+1)=9.689082e+000; krok(n+1)=1.091588e-002; ng(n+1)=6.518113e+002;
n=42; farx(n+1)=3.530161e+000; foe(n+1)=8.388575e+000; krok(n+1)=1.281894e-002; ng(n+1)=6.445483e+002;
n=43; farx(n+1)=3.296885e+000; foe(n+1)=8.023711e+000; krok(n+1)=1.980819e-002; ng(n+1)=4.941611e+002;
n=44; farx(n+1)=3.111459e+000; foe(n+1)=7.630778e+000; krok(n+1)=3.734346e-002; ng(n+1)=7.347439e+002;
n=45; farx(n+1)=2.870754e+000; foe(n+1)=6.705877e+000; krok(n+1)=1.428513e-001; ng(n+1)=6.760309e+002;
n=46; farx(n+1)=2.995337e+000; foe(n+1)=6.171271e+000; krok(n+1)=1.312394e-001; ng(n+1)=5.831607e+002;
n=47; farx(n+1)=2.950890e+000; foe(n+1)=5.991839e+000; krok(n+1)=3.616714e-002; ng(n+1)=2.687172e+002;
n=48; farx(n+1)=2.791486e+000; foe(n+1)=5.772317e+000; krok(n+1)=1.732520e-001; ng(n+1)=2.278169e+002;
n=49; farx(n+1)=2.769054e+000; foe(n+1)=5.504270e+000; krok(n+1)=2.522670e-001; ng(n+1)=2.808603e+002;
n=50; farx(n+1)=2.599779e+000; foe(n+1)=5.098372e+000; krok(n+1)=2.601807e-001; ng(n+1)=3.979458e+002;
%odnowa zmiennej metryki
n=51; farx(n+1)=2.590619e+000; foe(n+1)=5.047913e+000; krok(n+1)=6.082025e-006; ng(n+1)=3.573803e+002;
n=52; farx(n+1)=2.583811e+000; foe(n+1)=5.024393e+000; krok(n+1)=1.968224e-005; ng(n+1)=1.146642e+002;
n=53; farx(n+1)=2.583290e+000; foe(n+1)=5.013017e+000; krok(n+1)=4.554340e-005; ng(n+1)=7.074749e+001;
n=54; farx(n+1)=2.574260e+000; foe(n+1)=4.979810e+000; krok(n+1)=3.523348e-004; ng(n+1)=4.321490e+001;
n=55; farx(n+1)=2.577638e+000; foe(n+1)=4.887445e+000; krok(n+1)=3.870864e-004; ng(n+1)=6.373253e+001;
n=56; farx(n+1)=2.540186e+000; foe(n+1)=4.710014e+000; krok(n+1)=4.221744e-003; ng(n+1)=2.902956e+001;
n=57; farx(n+1)=2.480466e+000; foe(n+1)=4.638259e+000; krok(n+1)=2.614439e-003; ng(n+1)=2.494101e+002;
n=58; farx(n+1)=2.378932e+000; foe(n+1)=4.526634e+000; krok(n+1)=1.254679e-002; ng(n+1)=5.307638e+002;
n=59; farx(n+1)=2.354579e+000; foe(n+1)=4.473495e+000; krok(n+1)=9.698882e-003; ng(n+1)=4.391243e+002;
n=60; farx(n+1)=2.236340e+000; foe(n+1)=4.376833e+000; krok(n+1)=2.015462e-002; ng(n+1)=3.808694e+002;
n=61; farx(n+1)=2.189889e+000; foe(n+1)=4.299980e+000; krok(n+1)=1.473291e-002; ng(n+1)=2.409265e+002;
n=62; farx(n+1)=2.047912e+000; foe(n+1)=4.168473e+000; krok(n+1)=3.034189e-002; ng(n+1)=4.265131e+002;
n=63; farx(n+1)=1.997027e+000; foe(n+1)=4.131939e+000; krok(n+1)=4.952046e-003; ng(n+1)=6.463011e+002;
n=64; farx(n+1)=1.909930e+000; foe(n+1)=3.942682e+000; krok(n+1)=1.269153e-001; ng(n+1)=6.274125e+002;
n=65; farx(n+1)=1.898306e+000; foe(n+1)=3.873113e+000; krok(n+1)=1.184956e-002; ng(n+1)=5.694171e+002;
n=66; farx(n+1)=1.923204e+000; foe(n+1)=3.827849e+000; krok(n+1)=1.776017e-002; ng(n+1)=1.991275e+002;
n=67; farx(n+1)=1.951244e+000; foe(n+1)=3.781566e+000; krok(n+1)=4.256083e-002; ng(n+1)=2.753306e+002;
n=68; farx(n+1)=1.964275e+000; foe(n+1)=3.742488e+000; krok(n+1)=3.979978e-002; ng(n+1)=3.346720e+002;
n=69; farx(n+1)=1.865654e+000; foe(n+1)=3.466850e+000; krok(n+1)=2.393567e-001; ng(n+1)=2.632914e+002;
n=70; farx(n+1)=1.891666e+000; foe(n+1)=3.251154e+000; krok(n+1)=9.139037e-002; ng(n+1)=3.341992e+002;
n=71; farx(n+1)=1.745626e+000; foe(n+1)=2.893292e+000; krok(n+1)=6.034212e-001; ng(n+1)=1.725964e+002;
n=72; farx(n+1)=1.743857e+000; foe(n+1)=2.786469e+000; krok(n+1)=8.776600e-002; ng(n+1)=1.210717e+002;
n=73; farx(n+1)=1.648748e+000; foe(n+1)=2.604900e+000; krok(n+1)=1.080330e-001; ng(n+1)=6.261711e+001;
n=74; farx(n+1)=1.579452e+000; foe(n+1)=2.478917e+000; krok(n+1)=6.852302e-002; ng(n+1)=6.829101e+002;
n=75; farx(n+1)=1.536753e+000; foe(n+1)=2.270323e+000; krok(n+1)=1.215719e-001; ng(n+1)=3.290178e+002;
%odnowa zmiennej metryki
n=76; farx(n+1)=1.536697e+000; foe(n+1)=2.265512e+000; krok(n+1)=2.094896e-006; ng(n+1)=1.672818e+002;
n=77; farx(n+1)=1.535945e+000; foe(n+1)=2.244725e+000; krok(n+1)=6.715934e-006; ng(n+1)=2.287076e+002;
n=78; farx(n+1)=1.536257e+000; foe(n+1)=2.222374e+000; krok(n+1)=2.533263e-005; ng(n+1)=1.111268e+002;
n=79; farx(n+1)=1.538373e+000; foe(n+1)=2.210923e+000; krok(n+1)=6.197037e-005; ng(n+1)=5.846957e+001;
n=80; farx(n+1)=1.544969e+000; foe(n+1)=2.162432e+000; krok(n+1)=5.322828e-004; ng(n+1)=4.013072e+001;
n=81; farx(n+1)=1.565630e+000; foe(n+1)=2.090232e+000; krok(n+1)=4.689265e-003; ng(n+1)=2.213346e+001;
n=82; farx(n+1)=1.564962e+000; foe(n+1)=2.075595e+000; krok(n+1)=4.772940e-003; ng(n+1)=3.627812e+001;
n=83; farx(n+1)=1.566534e+000; foe(n+1)=2.065401e+000; krok(n+1)=1.588254e-003; ng(n+1)=3.319036e+001;
n=84; farx(n+1)=1.566697e+000; foe(n+1)=2.039014e+000; krok(n+1)=8.799720e-003; ng(n+1)=3.886225e+001;
n=85; farx(n+1)=1.531812e+000; foe(n+1)=1.944602e+000; krok(n+1)=1.251384e-002; ng(n+1)=6.227488e+001;
n=86; farx(n+1)=1.494250e+000; foe(n+1)=1.901593e+000; krok(n+1)=1.894771e-002; ng(n+1)=1.781829e+002;
n=87; farx(n+1)=1.442023e+000; foe(n+1)=1.833833e+000; krok(n+1)=2.847603e-002; ng(n+1)=4.503033e+002;
n=88; farx(n+1)=1.424666e+000; foe(n+1)=1.808325e+000; krok(n+1)=2.812841e-002; ng(n+1)=2.035613e+002;
n=89; farx(n+1)=1.413749e+000; foe(n+1)=1.763107e+000; krok(n+1)=4.828142e-002; ng(n+1)=3.124597e+002;
n=90; farx(n+1)=1.403354e+000; foe(n+1)=1.717307e+000; krok(n+1)=2.219272e-002; ng(n+1)=4.468035e+002;
n=91; farx(n+1)=1.367459e+000; foe(n+1)=1.635165e+000; krok(n+1)=4.686838e-002; ng(n+1)=3.800894e+002;
n=92; farx(n+1)=1.355666e+000; foe(n+1)=1.593409e+000; krok(n+1)=2.779047e-002; ng(n+1)=2.220463e+002;
n=93; farx(n+1)=1.341027e+000; foe(n+1)=1.562028e+000; krok(n+1)=3.266584e-002; ng(n+1)=1.264134e+002;
n=94; farx(n+1)=1.310697e+000; foe(n+1)=1.489979e+000; krok(n+1)=1.232694e-001; ng(n+1)=1.872722e+002;
n=95; farx(n+1)=1.350466e+000; foe(n+1)=1.360794e+000; krok(n+1)=8.662598e-002; ng(n+1)=3.140203e+002;
n=96; farx(n+1)=1.403817e+000; foe(n+1)=1.292112e+000; krok(n+1)=7.827259e-002; ng(n+1)=3.626140e+002;
n=97; farx(n+1)=1.418813e+000; foe(n+1)=1.249235e+000; krok(n+1)=5.082412e-002; ng(n+1)=2.660489e+002;
n=98; farx(n+1)=1.437847e+000; foe(n+1)=1.208458e+000; krok(n+1)=3.497807e-002; ng(n+1)=1.893513e+002;
n=99; farx(n+1)=1.471210e+000; foe(n+1)=1.169287e+000; krok(n+1)=2.513448e-002; ng(n+1)=4.730821e+002;
n=100; farx(n+1)=1.460638e+000; foe(n+1)=1.146031e+000; krok(n+1)=7.236188e-002; ng(n+1)=1.254520e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
