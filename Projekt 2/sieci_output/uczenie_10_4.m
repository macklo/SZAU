%uczenie predyktora oe
clear all;
n=0; farx(n+1)=4.527609e+003; foe(n+1)=4.726401e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=3.536796e+003; foe(n+1)=3.497268e+003; krok(n+1)=3.771986e-004; ng(n+1)=6.815713e+003;
n=2; farx(n+1)=1.085532e+003; foe(n+1)=1.006420e+003; krok(n+1)=9.671447e-004; ng(n+1)=5.663541e+003;
n=3; farx(n+1)=1.273009e+003; foe(n+1)=8.283312e+002; krok(n+1)=1.864955e-004; ng(n+1)=5.878404e+003;
n=4; farx(n+1)=1.948428e+002; foe(n+1)=4.196580e+002; krok(n+1)=1.226153e-002; ng(n+1)=8.322379e+002;
n=5; farx(n+1)=1.806226e+002; foe(n+1)=3.734055e+002; krok(n+1)=8.669030e-005; ng(n+1)=6.160134e+003;
n=6; farx(n+1)=1.521644e+002; foe(n+1)=3.438209e+002; krok(n+1)=2.045211e-004; ng(n+1)=3.093046e+003;
n=7; farx(n+1)=1.294804e+002; foe(n+1)=3.131647e+002; krok(n+1)=2.139541e-003; ng(n+1)=9.611012e+002;
n=8; farx(n+1)=1.148657e+002; foe(n+1)=2.733177e+002; krok(n+1)=5.548179e-003; ng(n+1)=1.004179e+003;
n=9; farx(n+1)=1.037197e+002; foe(n+1)=2.652073e+002; krok(n+1)=3.293253e-004; ng(n+1)=2.254956e+003;
n=10; farx(n+1)=6.064575e+001; foe(n+1)=2.199191e+002; krok(n+1)=4.652564e-004; ng(n+1)=2.407916e+003;
n=11; farx(n+1)=5.718505e+001; foe(n+1)=2.178213e+002; krok(n+1)=7.168025e-005; ng(n+1)=2.174758e+003;
n=12; farx(n+1)=5.302191e+001; foe(n+1)=2.139090e+002; krok(n+1)=2.710676e-004; ng(n+1)=2.444476e+003;
n=13; farx(n+1)=5.023650e+001; foe(n+1)=2.117144e+002; krok(n+1)=3.522699e-004; ng(n+1)=2.975465e+003;
n=14; farx(n+1)=3.162430e+001; foe(n+1)=1.816624e+002; krok(n+1)=3.803076e-003; ng(n+1)=3.808718e+003;
n=15; farx(n+1)=1.646944e+001; foe(n+1)=1.414408e+002; krok(n+1)=6.935224e-004; ng(n+1)=8.254144e+003;
n=16; farx(n+1)=1.454358e+001; foe(n+1)=1.291556e+002; krok(n+1)=2.732662e-004; ng(n+1)=1.133859e+004;
n=17; farx(n+1)=1.356106e+001; foe(n+1)=1.220601e+002; krok(n+1)=6.647718e-004; ng(n+1)=9.926144e+003;
n=18; farx(n+1)=1.386123e+001; foe(n+1)=1.167816e+002; krok(n+1)=8.616391e-004; ng(n+1)=6.629419e+003;
n=19; farx(n+1)=1.519109e+001; foe(n+1)=1.114579e+002; krok(n+1)=3.467612e-004; ng(n+1)=3.740915e+003;
n=20; farx(n+1)=1.794003e+001; foe(n+1)=9.663210e+001; krok(n+1)=1.442683e-003; ng(n+1)=4.901612e+003;
n=21; farx(n+1)=2.381130e+001; foe(n+1)=7.193199e+001; krok(n+1)=1.006709e-003; ng(n+1)=9.660786e+003;
n=22; farx(n+1)=2.188623e+001; foe(n+1)=6.767424e+001; krok(n+1)=3.930502e-004; ng(n+1)=1.543285e+003;
n=23; farx(n+1)=2.124960e+001; foe(n+1)=6.199217e+001; krok(n+1)=1.830478e-003; ng(n+1)=2.018293e+003;
n=24; farx(n+1)=2.150733e+001; foe(n+1)=4.932148e+001; krok(n+1)=4.180158e-003; ng(n+1)=1.771440e+003;
n=25; farx(n+1)=2.118478e+001; foe(n+1)=4.569216e+001; krok(n+1)=1.055362e-003; ng(n+1)=8.418595e+002;
%odnowa zmiennej metryki
n=26; farx(n+1)=2.134768e+001; foe(n+1)=4.436440e+001; krok(n+1)=2.533654e-006; ng(n+1)=3.305524e+003;
n=27; farx(n+1)=2.108840e+001; foe(n+1)=4.070044e+001; krok(n+1)=7.262761e-005; ng(n+1)=1.198279e+003;
n=28; farx(n+1)=2.073732e+001; foe(n+1)=3.863304e+001; krok(n+1)=3.555039e-005; ng(n+1)=1.469871e+003;
n=29; farx(n+1)=1.940958e+001; foe(n+1)=3.152048e+001; krok(n+1)=2.444438e-004; ng(n+1)=7.702092e+002;
n=30; farx(n+1)=1.438617e+001; foe(n+1)=2.759844e+001; krok(n+1)=9.305128e-004; ng(n+1)=5.778094e+002;
n=31; farx(n+1)=1.203929e+001; foe(n+1)=2.462179e+001; krok(n+1)=3.005716e-004; ng(n+1)=1.327355e+003;
n=32; farx(n+1)=1.025188e+001; foe(n+1)=2.029397e+001; krok(n+1)=2.607264e-003; ng(n+1)=3.865643e+003;
n=33; farx(n+1)=8.330941e+000; foe(n+1)=1.498055e+001; krok(n+1)=1.290694e-003; ng(n+1)=1.612143e+003;
n=34; farx(n+1)=8.126120e+000; foe(n+1)=1.438214e+001; krok(n+1)=8.687921e-004; ng(n+1)=5.989879e+002;
n=35; farx(n+1)=7.554933e+000; foe(n+1)=1.369830e+001; krok(n+1)=3.209934e-003; ng(n+1)=6.310479e+002;
n=36; farx(n+1)=7.338617e+000; foe(n+1)=1.286703e+001; krok(n+1)=2.241713e-003; ng(n+1)=1.428825e+003;
n=37; farx(n+1)=6.613414e+000; foe(n+1)=1.122073e+001; krok(n+1)=7.585473e-003; ng(n+1)=7.102689e+002;
n=38; farx(n+1)=6.443556e+000; foe(n+1)=1.085155e+001; krok(n+1)=2.144917e-003; ng(n+1)=1.381986e+003;
n=39; farx(n+1)=5.991654e+000; foe(n+1)=9.660548e+000; krok(n+1)=3.065383e-003; ng(n+1)=7.843595e+002;
n=40; farx(n+1)=5.326790e+000; foe(n+1)=8.694890e+000; krok(n+1)=5.478088e-003; ng(n+1)=1.278410e+003;
n=41; farx(n+1)=4.590262e+000; foe(n+1)=7.913097e+000; krok(n+1)=3.917519e-003; ng(n+1)=4.541208e+002;
n=42; farx(n+1)=4.135907e+000; foe(n+1)=7.095591e+000; krok(n+1)=1.703693e-002; ng(n+1)=5.473234e+002;
n=43; farx(n+1)=3.877395e+000; foe(n+1)=6.794302e+000; krok(n+1)=4.884963e-003; ng(n+1)=6.762920e+002;
n=44; farx(n+1)=3.635919e+000; foe(n+1)=6.478575e+000; krok(n+1)=1.750226e-002; ng(n+1)=9.696582e+001;
n=45; farx(n+1)=3.401448e+000; foe(n+1)=6.275386e+000; krok(n+1)=1.488820e-002; ng(n+1)=1.599501e+002;
n=46; farx(n+1)=2.993855e+000; foe(n+1)=5.907997e+000; krok(n+1)=2.331735e-002; ng(n+1)=4.652750e+002;
n=47; farx(n+1)=2.873605e+000; foe(n+1)=5.788085e+000; krok(n+1)=2.310226e-003; ng(n+1)=1.007874e+003;
n=48; farx(n+1)=2.648121e+000; foe(n+1)=5.586054e+000; krok(n+1)=7.637224e-003; ng(n+1)=4.642632e+002;
n=49; farx(n+1)=2.534420e+000; foe(n+1)=5.477130e+000; krok(n+1)=1.526430e-002; ng(n+1)=1.248801e+002;
n=50; farx(n+1)=2.405786e+000; foe(n+1)=5.291621e+000; krok(n+1)=2.900728e-002; ng(n+1)=4.544946e+002;
%odnowa zmiennej metryki
n=51; farx(n+1)=2.393959e+000; foe(n+1)=5.202209e+000; krok(n+1)=2.385236e-006; ng(n+1)=9.632600e+002;
n=52; farx(n+1)=2.379952e+000; foe(n+1)=5.181606e+000; krok(n+1)=1.138585e-005; ng(n+1)=2.093098e+002;
n=53; farx(n+1)=2.333878e+000; foe(n+1)=5.093114e+000; krok(n+1)=1.422016e-004; ng(n+1)=1.242790e+002;
n=54; farx(n+1)=2.289435e+000; foe(n+1)=4.757032e+000; krok(n+1)=3.909578e-004; ng(n+1)=1.401419e+002;
n=55; farx(n+1)=2.282618e+000; foe(n+1)=4.602001e+000; krok(n+1)=1.051281e-004; ng(n+1)=2.024351e+002;
n=56; farx(n+1)=2.302092e+000; foe(n+1)=4.509519e+000; krok(n+1)=4.927090e-004; ng(n+1)=1.382509e+002;
n=57; farx(n+1)=2.220834e+000; foe(n+1)=4.290646e+000; krok(n+1)=2.257553e-003; ng(n+1)=2.005055e+002;
n=58; farx(n+1)=2.169128e+000; foe(n+1)=4.216184e+000; krok(n+1)=1.045039e-003; ng(n+1)=4.985638e+002;
n=59; farx(n+1)=2.021822e+000; foe(n+1)=4.000678e+000; krok(n+1)=2.716773e-003; ng(n+1)=5.636197e+002;
n=60; farx(n+1)=1.952698e+000; foe(n+1)=3.792372e+000; krok(n+1)=7.585588e-003; ng(n+1)=6.389277e+002;
n=61; farx(n+1)=1.848196e+000; foe(n+1)=3.562222e+000; krok(n+1)=1.761298e-002; ng(n+1)=3.306800e+002;
n=62; farx(n+1)=1.810289e+000; foe(n+1)=3.331408e+000; krok(n+1)=7.479896e-003; ng(n+1)=6.181026e+002;
n=63; farx(n+1)=1.799746e+000; foe(n+1)=3.286923e+000; krok(n+1)=4.818429e-003; ng(n+1)=4.100762e+002;
n=64; farx(n+1)=1.768955e+000; foe(n+1)=3.240925e+000; krok(n+1)=8.839546e-003; ng(n+1)=6.736458e+001;
n=65; farx(n+1)=1.738581e+000; foe(n+1)=3.210248e+000; krok(n+1)=6.450159e-003; ng(n+1)=2.829797e+002;
n=66; farx(n+1)=1.665455e+000; foe(n+1)=3.083871e+000; krok(n+1)=2.741202e-002; ng(n+1)=1.372388e+002;
n=67; farx(n+1)=1.637550e+000; foe(n+1)=3.019205e+000; krok(n+1)=9.486198e-003; ng(n+1)=2.937266e+002;
n=68; farx(n+1)=1.623622e+000; foe(n+1)=2.904220e+000; krok(n+1)=1.483652e-002; ng(n+1)=6.784015e+002;
n=69; farx(n+1)=1.554900e+000; foe(n+1)=2.822034e+000; krok(n+1)=1.238474e-002; ng(n+1)=3.443626e+002;
n=70; farx(n+1)=1.468145e+000; foe(n+1)=2.714987e+000; krok(n+1)=2.788178e-002; ng(n+1)=2.500112e+002;
n=71; farx(n+1)=1.444634e+000; foe(n+1)=2.687160e+000; krok(n+1)=2.092139e-003; ng(n+1)=4.650443e+002;
n=72; farx(n+1)=1.361762e+000; foe(n+1)=2.582613e+000; krok(n+1)=2.127270e-002; ng(n+1)=2.338345e+002;
n=73; farx(n+1)=1.191452e+000; foe(n+1)=2.474588e+000; krok(n+1)=4.000365e-002; ng(n+1)=2.430206e+002;
n=74; farx(n+1)=1.115007e+000; foe(n+1)=2.420073e+000; krok(n+1)=5.711090e-003; ng(n+1)=2.831394e+002;
n=75; farx(n+1)=1.071442e+000; foe(n+1)=2.350512e+000; krok(n+1)=1.095618e-002; ng(n+1)=3.460016e+002;
%odnowa zmiennej metryki
n=76; farx(n+1)=1.071020e+000; foe(n+1)=2.347608e+000; krok(n+1)=1.497650e-006; ng(n+1)=2.259567e+002;
n=77; farx(n+1)=1.069881e+000; foe(n+1)=2.341913e+000; krok(n+1)=2.769106e-005; ng(n+1)=7.363012e+001;
n=78; farx(n+1)=1.071560e+000; foe(n+1)=2.317084e+000; krok(n+1)=2.902993e-005; ng(n+1)=1.371918e+002;
n=79; farx(n+1)=1.070164e+000; foe(n+1)=2.307225e+000; krok(n+1)=6.316544e-005; ng(n+1)=6.692529e+001;
n=80; farx(n+1)=1.068620e+000; foe(n+1)=2.303545e+000; krok(n+1)=1.248978e-004; ng(n+1)=2.834814e+001;
n=81; farx(n+1)=1.086980e+000; foe(n+1)=2.244955e+000; krok(n+1)=9.064776e-004; ng(n+1)=4.009690e+001;
n=82; farx(n+1)=1.087787e+000; foe(n+1)=2.231456e+000; krok(n+1)=1.200091e-003; ng(n+1)=3.895402e+001;
n=83; farx(n+1)=1.084142e+000; foe(n+1)=2.220247e+000; krok(n+1)=6.807228e-004; ng(n+1)=5.386016e+001;
n=84; farx(n+1)=1.094042e+000; foe(n+1)=2.195898e+000; krok(n+1)=5.062842e-003; ng(n+1)=6.244809e+001;
n=85; farx(n+1)=1.088277e+000; foe(n+1)=2.170860e+000; krok(n+1)=8.237127e-003; ng(n+1)=1.870204e+002;
n=86; farx(n+1)=1.016107e+000; foe(n+1)=2.109248e+000; krok(n+1)=1.370811e-002; ng(n+1)=3.436448e+002;
n=87; farx(n+1)=9.778995e-001; foe(n+1)=2.068834e+000; krok(n+1)=9.348086e-003; ng(n+1)=2.079837e+002;
n=88; farx(n+1)=9.325395e-001; foe(n+1)=2.038959e+000; krok(n+1)=1.095618e-002; ng(n+1)=1.734475e+002;
n=89; farx(n+1)=8.825435e-001; foe(n+1)=2.004163e+000; krok(n+1)=3.456065e-003; ng(n+1)=4.344580e+002;
n=90; farx(n+1)=8.339420e-001; foe(n+1)=1.951342e+000; krok(n+1)=8.625805e-003; ng(n+1)=2.652365e+002;
n=91; farx(n+1)=8.285155e-001; foe(n+1)=1.930822e+000; krok(n+1)=1.740861e-002; ng(n+1)=1.395773e+002;
n=92; farx(n+1)=8.295276e-001; foe(n+1)=1.908959e+000; krok(n+1)=2.154209e-002; ng(n+1)=8.898570e+001;
n=93; farx(n+1)=8.280079e-001; foe(n+1)=1.861828e+000; krok(n+1)=2.549876e-002; ng(n+1)=1.717829e+002;
n=94; farx(n+1)=8.031146e-001; foe(n+1)=1.832505e+000; krok(n+1)=1.417782e-002; ng(n+1)=2.814938e+002;
n=95; farx(n+1)=7.785483e-001; foe(n+1)=1.789970e+000; krok(n+1)=4.522618e-003; ng(n+1)=5.805382e+002;
n=96; farx(n+1)=7.395600e-001; foe(n+1)=1.734277e+000; krok(n+1)=1.027490e-002; ng(n+1)=1.752918e+002;
n=97; farx(n+1)=7.148463e-001; foe(n+1)=1.716505e+000; krok(n+1)=7.409251e-003; ng(n+1)=3.711541e+002;
n=98; farx(n+1)=6.487316e-001; foe(n+1)=1.664544e+000; krok(n+1)=2.426108e-002; ng(n+1)=4.734311e+002;
n=99; farx(n+1)=6.404538e-001; foe(n+1)=1.643816e+000; krok(n+1)=1.251384e-002; ng(n+1)=6.362716e+002;
n=100; farx(n+1)=6.332792e-001; foe(n+1)=1.577564e+000; krok(n+1)=2.959713e-002; ng(n+1)=5.294636e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
