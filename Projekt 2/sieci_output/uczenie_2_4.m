%uczenie predyktora oe
clear all;
n=0; farx(n+1)=4.050157e+003; foe(n+1)=4.042592e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=2.932254e+003; foe(n+1)=2.957580e+003; krok(n+1)=5.097061e-004; ng(n+1)=2.379039e+003;
n=2; farx(n+1)=7.727884e+002; foe(n+1)=6.367229e+002; krok(n+1)=5.357205e-003; ng(n+1)=8.622970e+002;
n=3; farx(n+1)=6.831734e+002; foe(n+1)=4.760731e+002; krok(n+1)=3.090387e-004; ng(n+1)=2.226305e+003;
n=4; farx(n+1)=6.875409e+002; foe(n+1)=4.044787e+002; krok(n+1)=1.841613e-003; ng(n+1)=1.422930e+003;
n=5; farx(n+1)=4.603644e+002; foe(n+1)=3.673576e+002; krok(n+1)=6.042575e-003; ng(n+1)=2.135778e+002;
n=6; farx(n+1)=4.011129e+002; foe(n+1)=3.488916e+002; krok(n+1)=4.372259e-003; ng(n+1)=4.044314e+002;
n=7; farx(n+1)=3.782784e+002; foe(n+1)=3.418125e+002; krok(n+1)=5.548179e-003; ng(n+1)=4.091257e+002;
n=8; farx(n+1)=3.722605e+002; foe(n+1)=3.337222e+002; krok(n+1)=1.612615e-002; ng(n+1)=3.756222e+002;
n=9; farx(n+1)=3.320537e+002; foe(n+1)=3.137900e+002; krok(n+1)=7.445763e-002; ng(n+1)=3.335057e+002;
n=10; farx(n+1)=3.255670e+002; foe(n+1)=3.121319e+002; krok(n+1)=4.995426e-002; ng(n+1)=1.599115e+002;
n=11; farx(n+1)=3.046700e+002; foe(n+1)=3.060225e+002; krok(n+1)=4.288049e-001; ng(n+1)=2.156444e+002;
n=12; farx(n+1)=2.986933e+002; foe(n+1)=3.033834e+002; krok(n+1)=5.553162e-002; ng(n+1)=1.292282e+002;
n=13; farx(n+1)=2.779972e+002; foe(n+1)=2.956829e+002; krok(n+1)=1.324162e+000; ng(n+1)=1.243127e+002;
n=14; farx(n+1)=2.742274e+002; foe(n+1)=2.934451e+002; krok(n+1)=1.599256e-001; ng(n+1)=3.347352e+002;
n=15; farx(n+1)=2.717648e+002; foe(n+1)=2.897310e+002; krok(n+1)=1.277097e-001; ng(n+1)=3.804697e+002;
n=16; farx(n+1)=2.786499e+002; foe(n+1)=2.839283e+002; krok(n+1)=3.923690e-001; ng(n+1)=4.986209e+002;
n=17; farx(n+1)=2.526384e+002; foe(n+1)=2.750996e+002; krok(n+1)=4.880844e-001; ng(n+1)=1.616203e+002;
n=18; farx(n+1)=2.121010e+002; foe(n+1)=2.667755e+002; krok(n+1)=2.701727e-001; ng(n+1)=3.675322e+002;
n=19; farx(n+1)=1.676898e+002; foe(n+1)=2.571917e+002; krok(n+1)=3.068907e-001; ng(n+1)=7.804611e+002;
n=20; farx(n+1)=1.116970e+002; foe(n+1)=2.402385e+002; krok(n+1)=1.115271e-001; ng(n+1)=1.236018e+003;
n=21; farx(n+1)=7.337350e+001; foe(n+1)=2.256206e+002; krok(n+1)=3.273628e-002; ng(n+1)=2.294909e+003;
n=22; farx(n+1)=6.276225e+001; foe(n+1)=2.206033e+002; krok(n+1)=1.333847e-002; ng(n+1)=3.976521e+003;
n=23; farx(n+1)=5.676191e+001; foe(n+1)=2.134918e+002; krok(n+1)=2.617870e-002; ng(n+1)=5.691603e+003;
n=24; farx(n+1)=5.169644e+001; foe(n+1)=2.018167e+002; krok(n+1)=4.346837e-002; ng(n+1)=6.139714e+003;
n=25; farx(n+1)=3.103585e+001; foe(n+1)=1.702120e+002; krok(n+1)=2.442288e-001; ng(n+1)=3.050032e+003;
%odnowa zmiennej metryki
n=26; farx(n+1)=3.021956e+001; foe(n+1)=1.670359e+002; krok(n+1)=2.595332e-006; ng(n+1)=2.401574e+003;
n=27; farx(n+1)=3.021093e+001; foe(n+1)=1.581322e+002; krok(n+1)=3.168396e-005; ng(n+1)=1.716370e+003;
n=28; farx(n+1)=3.105653e+001; foe(n+1)=1.297432e+002; krok(n+1)=9.315198e-005; ng(n+1)=1.989487e+003;
n=29; farx(n+1)=3.089515e+001; foe(n+1)=1.268621e+002; krok(n+1)=1.358214e-004; ng(n+1)=7.063485e+002;
n=30; farx(n+1)=2.995718e+001; foe(n+1)=1.231913e+002; krok(n+1)=6.078605e-004; ng(n+1)=2.590069e+002;
n=31; farx(n+1)=2.014423e+001; foe(n+1)=1.118248e+002; krok(n+1)=2.287557e-003; ng(n+1)=2.160364e+002;
n=32; farx(n+1)=1.734174e+001; foe(n+1)=8.995058e+001; krok(n+1)=3.516052e-003; ng(n+1)=2.065279e+003;
n=33; farx(n+1)=1.737306e+001; foe(n+1)=8.735572e+001; krok(n+1)=1.677606e-004; ng(n+1)=2.516606e+003;
n=34; farx(n+1)=1.793997e+001; foe(n+1)=7.924122e+001; krok(n+1)=2.695162e-003; ng(n+1)=3.787274e+003;
n=35; farx(n+1)=1.859322e+001; foe(n+1)=7.271189e+001; krok(n+1)=1.729712e-002; ng(n+1)=2.545023e+003;
n=36; farx(n+1)=1.644764e+001; foe(n+1)=4.784138e+001; krok(n+1)=2.301315e-001; ng(n+1)=2.590406e+003;
n=37; farx(n+1)=1.517384e+001; foe(n+1)=4.203420e+001; krok(n+1)=5.359529e-002; ng(n+1)=1.057929e+003;
n=38; farx(n+1)=1.410887e+001; foe(n+1)=4.131393e+001; krok(n+1)=8.323975e-003; ng(n+1)=1.026595e+003;
n=39; farx(n+1)=1.332644e+001; foe(n+1)=4.005754e+001; krok(n+1)=3.134036e-001; ng(n+1)=1.008694e+003;
n=40; farx(n+1)=1.194983e+001; foe(n+1)=3.675813e+001; krok(n+1)=4.726144e-001; ng(n+1)=8.855981e+002;
n=41; farx(n+1)=1.169696e+001; foe(n+1)=3.437747e+001; krok(n+1)=4.880844e-001; ng(n+1)=9.407123e+002;
n=42; farx(n+1)=1.173973e+001; foe(n+1)=3.308637e+001; krok(n+1)=3.337224e-001; ng(n+1)=1.029007e+003;
n=43; farx(n+1)=1.091933e+001; foe(n+1)=3.098965e+001; krok(n+1)=9.429061e-001; ng(n+1)=3.490668e+002;
n=44; farx(n+1)=1.049991e+001; foe(n+1)=2.987092e+001; krok(n+1)=1.241631e-001; ng(n+1)=7.321074e+002;
n=45; farx(n+1)=1.046760e+001; foe(n+1)=2.816647e+001; krok(n+1)=2.833785e-001; ng(n+1)=4.708962e+002;
n=46; farx(n+1)=9.995270e+000; foe(n+1)=2.688246e+001; krok(n+1)=2.926858e-001; ng(n+1)=4.145774e+002;
n=47; farx(n+1)=9.859316e+000; foe(n+1)=2.648892e+001; krok(n+1)=5.327583e-001; ng(n+1)=4.939261e+002;
n=48; farx(n+1)=9.864444e+000; foe(n+1)=2.612013e+001; krok(n+1)=4.923082e-001; ng(n+1)=3.864373e+002;
n=49; farx(n+1)=9.803286e+000; foe(n+1)=2.579948e+001; krok(n+1)=3.044248e-001; ng(n+1)=8.493917e+002;
n=50; farx(n+1)=9.797340e+000; foe(n+1)=2.560419e+001; krok(n+1)=2.818076e-001; ng(n+1)=7.712698e+002;
%odnowa zmiennej metryki
n=51; farx(n+1)=9.802604e+000; foe(n+1)=2.556797e+001; krok(n+1)=1.449720e-006; ng(n+1)=3.259104e+002;
n=52; farx(n+1)=9.786395e+000; foe(n+1)=2.552611e+001; krok(n+1)=5.093343e-006; ng(n+1)=2.315935e+002;
n=53; farx(n+1)=9.777250e+000; foe(n+1)=2.548766e+001; krok(n+1)=1.834698e-005; ng(n+1)=1.488086e+002;
n=54; farx(n+1)=9.807518e+000; foe(n+1)=2.546956e+001; krok(n+1)=1.261878e-004; ng(n+1)=4.746208e+001;
n=55; farx(n+1)=9.876240e+000; foe(n+1)=2.542103e+001; krok(n+1)=7.476124e-004; ng(n+1)=3.865610e+001;
n=56; farx(n+1)=9.991945e+000; foe(n+1)=2.534313e+001; krok(n+1)=1.812955e-003; ng(n+1)=2.040089e+001;
n=57; farx(n+1)=1.023621e+001; foe(n+1)=2.518771e+001; krok(n+1)=3.868579e-003; ng(n+1)=4.389551e+001;
n=58; farx(n+1)=1.032030e+001; foe(n+1)=2.517444e+001; krok(n+1)=8.092065e-003; ng(n+1)=2.577617e+002;
n=59; farx(n+1)=1.029081e+001; foe(n+1)=2.516105e+001; krok(n+1)=2.340953e-002; ng(n+1)=3.086192e+002;
n=60; farx(n+1)=1.029290e+001; foe(n+1)=2.515131e+001; krok(n+1)=2.946581e-002; ng(n+1)=3.376177e+002;
n=61; farx(n+1)=1.025950e+001; foe(n+1)=2.513756e+001; krok(n+1)=1.488820e-002; ng(n+1)=2.974998e+002;
n=62; farx(n+1)=1.014015e+001; foe(n+1)=2.510756e+001; krok(n+1)=8.388517e-002; ng(n+1)=2.268559e+002;
n=63; farx(n+1)=9.893667e+000; foe(n+1)=2.495601e+001; krok(n+1)=1.280929e+000; ng(n+1)=2.874841e+002;
n=64; farx(n+1)=9.902923e+000; foe(n+1)=2.489080e+001; krok(n+1)=3.103642e-001; ng(n+1)=5.477337e+002;
n=65; farx(n+1)=9.547221e+000; foe(n+1)=2.462440e+001; krok(n+1)=4.187571e-001; ng(n+1)=4.433934e+002;
n=66; farx(n+1)=9.417097e+000; foe(n+1)=2.452686e+001; krok(n+1)=2.064051e-001; ng(n+1)=6.434720e+002;
n=67; farx(n+1)=9.462894e+000; foe(n+1)=2.423925e+001; krok(n+1)=5.856145e-001; ng(n+1)=4.972570e+002;
n=68; farx(n+1)=9.580020e+000; foe(n+1)=2.405605e+001; krok(n+1)=2.640812e-001; ng(n+1)=2.740168e+002;
n=69; farx(n+1)=9.557076e+000; foe(n+1)=2.388774e+001; krok(n+1)=3.167854e-001; ng(n+1)=2.331375e+002;
n=70; farx(n+1)=9.531205e+000; foe(n+1)=2.347959e+001; krok(n+1)=1.111368e+000; ng(n+1)=4.170290e+002;
n=71; farx(n+1)=9.364425e+000; foe(n+1)=2.320416e+001; krok(n+1)=5.772243e-001; ng(n+1)=5.250525e+002;
n=72; farx(n+1)=9.384166e+000; foe(n+1)=2.308899e+001; krok(n+1)=2.401907e-001; ng(n+1)=4.845494e+002;
n=73; farx(n+1)=9.116120e+000; foe(n+1)=2.270516e+001; krok(n+1)=1.133514e+000; ng(n+1)=3.755861e+002;
n=74; farx(n+1)=8.992218e+000; foe(n+1)=2.244430e+001; krok(n+1)=1.150553e+000; ng(n+1)=5.460334e+002;
n=75; farx(n+1)=8.986439e+000; foe(n+1)=2.233269e+001; krok(n+1)=5.779250e-001; ng(n+1)=1.326346e+002;
%odnowa zmiennej metryki
n=76; farx(n+1)=8.983131e+000; foe(n+1)=2.227317e+001; krok(n+1)=4.416619e-006; ng(n+1)=2.841454e+002;
n=77; farx(n+1)=8.986528e+000; foe(n+1)=2.226745e+001; krok(n+1)=1.230140e-006; ng(n+1)=1.699803e+002;
n=78; farx(n+1)=8.998547e+000; foe(n+1)=2.225413e+001; krok(n+1)=7.999634e-005; ng(n+1)=4.054553e+001;
n=79; farx(n+1)=8.988374e+000; foe(n+1)=2.224174e+001; krok(n+1)=4.135969e-005; ng(n+1)=5.748171e+001;
n=80; farx(n+1)=8.998121e+000; foe(n+1)=2.220930e+001; krok(n+1)=1.055848e-004; ng(n+1)=6.480966e+001;
n=81; farx(n+1)=8.797686e+000; foe(n+1)=2.207064e+001; krok(n+1)=5.906887e-003; ng(n+1)=7.399124e+001;
n=82; farx(n+1)=8.803706e+000; foe(n+1)=2.203197e+001; krok(n+1)=1.353531e-003; ng(n+1)=1.853448e+002;
n=83; farx(n+1)=8.776231e+000; foe(n+1)=2.198093e+001; krok(n+1)=3.941672e-003; ng(n+1)=2.184295e+002;
n=84; farx(n+1)=8.682755e+000; foe(n+1)=2.194440e+001; krok(n+1)=2.392360e-002; ng(n+1)=3.284475e+002;
n=85; farx(n+1)=8.715412e+000; foe(n+1)=2.192663e+001; krok(n+1)=6.543079e-003; ng(n+1)=3.758223e+002;
n=86; farx(n+1)=8.695728e+000; foe(n+1)=2.191972e+001; krok(n+1)=1.389524e-002; ng(n+1)=3.937222e+002;
n=87; farx(n+1)=8.681978e+000; foe(n+1)=2.190123e+001; krok(n+1)=1.016482e-001; ng(n+1)=3.528612e+002;
n=88; farx(n+1)=8.775738e+000; foe(n+1)=2.175426e+001; krok(n+1)=1.845727e-001; ng(n+1)=3.740559e+002;
n=89; farx(n+1)=8.728879e+000; foe(n+1)=2.149726e+001; krok(n+1)=2.485026e+000; ng(n+1)=4.659390e+002;
n=90; farx(n+1)=8.506250e+000; foe(n+1)=2.130707e+001; krok(n+1)=1.514375e+000; ng(n+1)=1.988640e+002;
n=91; farx(n+1)=8.454804e+000; foe(n+1)=2.124432e+001; krok(n+1)=1.545805e-001; ng(n+1)=5.647805e+002;
n=92; farx(n+1)=8.410128e+000; foe(n+1)=2.111567e+001; krok(n+1)=7.657245e-001; ng(n+1)=1.481362e+002;
n=93; farx(n+1)=8.343722e+000; foe(n+1)=2.104429e+001; krok(n+1)=2.701916e-001; ng(n+1)=8.023261e+002;
n=94; farx(n+1)=8.335085e+000; foe(n+1)=2.093473e+001; krok(n+1)=9.469203e-001; ng(n+1)=7.480989e+002;
n=95; farx(n+1)=8.240212e+000; foe(n+1)=2.081889e+001; krok(n+1)=8.847528e-001; ng(n+1)=1.968900e+002;
n=96; farx(n+1)=8.054592e+000; foe(n+1)=2.063247e+001; krok(n+1)=1.660199e+000; ng(n+1)=5.275618e+002;
n=97; farx(n+1)=7.947969e+000; foe(n+1)=2.050734e+001; krok(n+1)=8.728449e-001; ng(n+1)=8.153499e+002;
n=98; farx(n+1)=7.817010e+000; foe(n+1)=2.013776e+001; krok(n+1)=1.269080e+000; ng(n+1)=2.626321e+002;
n=99; farx(n+1)=7.823168e+000; foe(n+1)=2.003530e+001; krok(n+1)=8.877087e-002; ng(n+1)=7.503773e+002;
n=100; farx(n+1)=7.791081e+000; foe(n+1)=1.991788e+001; krok(n+1)=6.826594e-002; ng(n+1)=6.026311e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
