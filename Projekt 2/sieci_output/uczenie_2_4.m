%uczenie predyktora oe
clear all;
n=0; farx(n+1)=3.989972e+003; foe(n+1)=3.966902e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=2.976271e+003; foe(n+1)=2.943235e+003; krok(n+1)=5.188110e-004; ng(n+1)=2.084929e+003;
n=2; farx(n+1)=9.968008e+002; foe(n+1)=8.285342e+002; krok(n+1)=3.941672e-003; ng(n+1)=1.169084e+003;
n=3; farx(n+1)=1.025460e+003; foe(n+1)=6.376438e+002; krok(n+1)=1.915864e-004; ng(n+1)=3.357010e+003;
n=4; farx(n+1)=1.540989e+003; foe(n+1)=5.346648e+002; krok(n+1)=1.859950e-003; ng(n+1)=3.253924e+003;
n=5; farx(n+1)=1.129288e+003; foe(n+1)=4.984842e+002; krok(n+1)=8.111094e-003; ng(n+1)=6.827537e+002;
n=6; farx(n+1)=7.744158e+002; foe(n+1)=4.732902e+002; krok(n+1)=1.175824e-002; ng(n+1)=7.439440e+002;
n=7; farx(n+1)=6.703403e+002; foe(n+1)=4.542916e+002; krok(n+1)=1.350546e-003; ng(n+1)=1.231940e+003;
n=8; farx(n+1)=5.134534e+002; foe(n+1)=4.295010e+002; krok(n+1)=3.096691e-003; ng(n+1)=1.262322e+003;
n=9; farx(n+1)=3.736194e+002; foe(n+1)=3.541582e+002; krok(n+1)=6.583213e-003; ng(n+1)=1.251029e+003;
n=10; farx(n+1)=3.859973e+002; foe(n+1)=3.479839e+002; krok(n+1)=4.183102e-002; ng(n+1)=2.956879e+002;
n=11; farx(n+1)=3.744893e+002; foe(n+1)=3.445535e+002; krok(n+1)=1.980819e-002; ng(n+1)=2.757288e+002;
n=12; farx(n+1)=3.041244e+002; foe(n+1)=3.355363e+002; krok(n+1)=1.278902e-001; ng(n+1)=2.764379e+002;
n=13; farx(n+1)=3.237735e+002; foe(n+1)=3.146493e+002; krok(n+1)=4.177026e-001; ng(n+1)=2.869377e+002;
n=14; farx(n+1)=3.269900e+002; foe(n+1)=3.067216e+002; krok(n+1)=9.251671e-003; ng(n+1)=6.366476e+002;
n=15; farx(n+1)=3.013170e+002; foe(n+1)=3.031227e+002; krok(n+1)=1.125137e-001; ng(n+1)=3.648677e+002;
n=16; farx(n+1)=2.273851e+002; foe(n+1)=2.833661e+002; krok(n+1)=9.809225e-002; ng(n+1)=7.907801e+002;
n=17; farx(n+1)=5.587884e+001; foe(n+1)=2.380713e+002; krok(n+1)=1.152651e+000; ng(n+1)=2.178789e+002;
n=18; farx(n+1)=5.188830e+001; foe(n+1)=2.370684e+002; krok(n+1)=6.681129e-003; ng(n+1)=8.881101e+002;
n=19; farx(n+1)=4.873825e+001; foe(n+1)=1.940366e+002; krok(n+1)=6.051036e-001; ng(n+1)=1.068191e+003;
n=20; farx(n+1)=1.954481e+001; foe(n+1)=1.339946e+002; krok(n+1)=1.037206e+000; ng(n+1)=1.421886e+003;
n=21; farx(n+1)=1.864946e+001; foe(n+1)=1.189992e+002; krok(n+1)=1.142254e-001; ng(n+1)=1.527892e+003;
n=22; farx(n+1)=2.057647e+001; foe(n+1)=8.388073e+001; krok(n+1)=5.055608e-002; ng(n+1)=6.905925e+003;
n=23; farx(n+1)=2.074953e+001; foe(n+1)=7.587772e+001; krok(n+1)=1.414327e-001; ng(n+1)=9.173080e+002;
n=24; farx(n+1)=2.007395e+001; foe(n+1)=6.367187e+001; krok(n+1)=6.477968e-001; ng(n+1)=4.928315e+002;
n=25; farx(n+1)=2.052645e+001; foe(n+1)=5.731320e+001; krok(n+1)=6.871474e-001; ng(n+1)=4.072942e+002;
%odnowa zmiennej metryki
n=26; farx(n+1)=1.980095e+001; foe(n+1)=5.656498e+001; krok(n+1)=1.328171e-005; ng(n+1)=6.820046e+002;
n=27; farx(n+1)=1.828773e+001; foe(n+1)=5.476143e+001; krok(n+1)=2.778542e-004; ng(n+1)=2.197438e+002;
n=28; farx(n+1)=1.484840e+001; foe(n+1)=4.469915e+001; krok(n+1)=7.841746e-004; ng(n+1)=3.432565e+002;
n=29; farx(n+1)=1.518029e+001; foe(n+1)=4.335995e+001; krok(n+1)=2.266194e-004; ng(n+1)=2.410802e+002;
n=30; farx(n+1)=1.279105e+001; foe(n+1)=4.077675e+001; krok(n+1)=6.583213e-003; ng(n+1)=2.997601e+002;
n=31; farx(n+1)=1.349457e+001; foe(n+1)=3.904080e+001; krok(n+1)=1.964993e-003; ng(n+1)=2.244751e+002;
n=32; farx(n+1)=1.124655e+001; foe(n+1)=3.569033e+001; krok(n+1)=7.981858e-003; ng(n+1)=3.124456e+002;
n=33; farx(n+1)=9.261105e+000; foe(n+1)=3.232100e+001; krok(n+1)=5.003630e-003; ng(n+1)=7.731642e+002;
n=34; farx(n+1)=8.907480e+000; foe(n+1)=3.159052e+001; krok(n+1)=1.204927e-001; ng(n+1)=4.274874e+002;
n=35; farx(n+1)=8.126697e+000; foe(n+1)=3.102709e+001; krok(n+1)=1.452529e-001; ng(n+1)=2.633062e+002;
n=36; farx(n+1)=8.864177e+000; foe(n+1)=2.980306e+001; krok(n+1)=6.674595e-001; ng(n+1)=1.562787e+002;
n=37; farx(n+1)=9.421333e+000; foe(n+1)=2.949415e+001; krok(n+1)=2.818076e-001; ng(n+1)=3.616629e+002;
n=38; farx(n+1)=7.667967e+000; foe(n+1)=2.726781e+001; krok(n+1)=2.380747e+000; ng(n+1)=6.037205e+001;
n=39; farx(n+1)=7.339784e+000; foe(n+1)=2.645258e+001; krok(n+1)=5.231840e-001; ng(n+1)=1.360038e+002;
n=40; farx(n+1)=6.791125e+000; foe(n+1)=2.602289e+001; krok(n+1)=4.164005e-001; ng(n+1)=4.085989e+002;
n=41; farx(n+1)=6.772560e+000; foe(n+1)=2.530830e+001; krok(n+1)=9.961132e-001; ng(n+1)=1.307033e+002;
n=42; farx(n+1)=5.859512e+000; foe(n+1)=2.453477e+001; krok(n+1)=2.050450e+000; ng(n+1)=4.834135e+001;
n=43; farx(n+1)=5.383168e+000; foe(n+1)=2.364666e+001; krok(n+1)=9.709405e-001; ng(n+1)=3.858938e+002;
n=44; farx(n+1)=5.616115e+000; foe(n+1)=2.312567e+001; krok(n+1)=5.548341e-001; ng(n+1)=7.118582e+001;
n=45; farx(n+1)=5.241486e+000; foe(n+1)=2.280518e+001; krok(n+1)=9.073805e-001; ng(n+1)=4.147251e+001;
n=46; farx(n+1)=5.060575e+000; foe(n+1)=2.250086e+001; krok(n+1)=1.065469e+000; ng(n+1)=2.939032e+002;
n=47; farx(n+1)=4.832415e+000; foe(n+1)=2.229552e+001; krok(n+1)=4.884576e-001; ng(n+1)=3.269976e+002;
n=48; farx(n+1)=4.892255e+000; foe(n+1)=2.214597e+001; krok(n+1)=6.564205e-001; ng(n+1)=1.953051e+002;
n=49; farx(n+1)=4.747932e+000; foe(n+1)=2.206976e+001; krok(n+1)=5.316748e-001; ng(n+1)=1.075323e+002;
n=50; farx(n+1)=4.666341e+000; foe(n+1)=2.200512e+001; krok(n+1)=4.498732e-001; ng(n+1)=1.234670e+002;
%odnowa zmiennej metryki
n=51; farx(n+1)=4.663608e+000; foe(n+1)=2.199633e+001; krok(n+1)=1.899935e-006; ng(n+1)=1.841372e+002;
n=52; farx(n+1)=4.677104e+000; foe(n+1)=2.199167e+001; krok(n+1)=3.287905e-005; ng(n+1)=3.189824e+001;
n=53; farx(n+1)=4.744611e+000; foe(n+1)=2.196662e+001; krok(n+1)=4.325367e-004; ng(n+1)=2.263620e+001;
n=54; farx(n+1)=4.806976e+000; foe(n+1)=2.192038e+001; krok(n+1)=1.997320e-004; ng(n+1)=3.907912e+001;
n=55; farx(n+1)=4.785037e+000; foe(n+1)=2.188492e+001; krok(n+1)=5.504055e-004; ng(n+1)=2.714552e+001;
n=56; farx(n+1)=4.668569e+000; foe(n+1)=2.173077e+001; krok(n+1)=2.489395e-002; ng(n+1)=3.686886e+001;
n=57; farx(n+1)=4.661511e+000; foe(n+1)=2.171070e+001; krok(n+1)=2.079162e-002; ng(n+1)=3.365874e+002;
n=58; farx(n+1)=4.548246e+000; foe(n+1)=2.167946e+001; krok(n+1)=7.092411e-002; ng(n+1)=3.628781e+002;
n=59; farx(n+1)=4.527703e+000; foe(n+1)=2.166601e+001; krok(n+1)=4.774286e-002; ng(n+1)=3.896820e+002;
n=60; farx(n+1)=4.353934e+000; foe(n+1)=2.156447e+001; krok(n+1)=1.109668e+000; ng(n+1)=4.021906e+002;
n=61; farx(n+1)=4.359315e+000; foe(n+1)=2.156159e+001; krok(n+1)=1.771116e-002; ng(n+1)=7.522981e+001;
n=62; farx(n+1)=4.331133e+000; foe(n+1)=2.148595e+001; krok(n+1)=1.114269e+000; ng(n+1)=6.425223e+001;
n=63; farx(n+1)=4.256188e+000; foe(n+1)=2.145481e+001; krok(n+1)=1.311594e+000; ng(n+1)=1.609527e+002;
n=64; farx(n+1)=4.219088e+000; foe(n+1)=2.143575e+001; krok(n+1)=7.101669e-001; ng(n+1)=1.547774e+002;
n=65; farx(n+1)=4.111463e+000; foe(n+1)=2.140867e+001; krok(n+1)=1.462039e+000; ng(n+1)=1.287117e+002;
n=66; farx(n+1)=4.042727e+000; foe(n+1)=2.138393e+001; krok(n+1)=1.659005e+000; ng(n+1)=4.552869e+001;
n=67; farx(n+1)=3.911796e+000; foe(n+1)=2.134969e+001; krok(n+1)=6.620810e-001; ng(n+1)=2.572154e+001;
n=68; farx(n+1)=3.824774e+000; foe(n+1)=2.132197e+001; krok(n+1)=5.249576e-001; ng(n+1)=8.757266e+001;
n=69; farx(n+1)=3.791660e+000; foe(n+1)=2.128151e+001; krok(n+1)=1.168436e+000; ng(n+1)=1.862289e+002;
n=70; farx(n+1)=3.668313e+000; foe(n+1)=2.124627e+001; krok(n+1)=5.636152e-001; ng(n+1)=2.555450e+002;
n=71; farx(n+1)=3.528474e+000; foe(n+1)=2.120481e+001; krok(n+1)=9.073805e-001; ng(n+1)=5.921286e+001;
n=72; farx(n+1)=3.514425e+000; foe(n+1)=2.118207e+001; krok(n+1)=6.480438e-001; ng(n+1)=1.419530e+002;
n=73; farx(n+1)=3.391020e+000; foe(n+1)=2.114591e+001; krok(n+1)=1.001603e+000; ng(n+1)=7.010875e+001;
n=74; farx(n+1)=3.283516e+000; foe(n+1)=2.110985e+001; krok(n+1)=2.172520e+000; ng(n+1)=1.044747e+002;
n=75; farx(n+1)=3.264839e+000; foe(n+1)=2.107575e+001; krok(n+1)=6.577988e-001; ng(n+1)=1.303709e+002;
%odnowa zmiennej metryki
n=76; farx(n+1)=3.264820e+000; foe(n+1)=2.107534e+001; krok(n+1)=9.419256e-007; ng(n+1)=5.401111e+001;
n=77; farx(n+1)=3.267103e+000; foe(n+1)=2.107420e+001; krok(n+1)=6.627791e-006; ng(n+1)=2.786836e+001;
n=78; farx(n+1)=3.270426e+000; foe(n+1)=2.107372e+001; krok(n+1)=7.765442e-005; ng(n+1)=6.223396e+000;
n=79; farx(n+1)=3.309099e+000; foe(n+1)=2.106197e+001; krok(n+1)=1.093065e-003; ng(n+1)=7.510255e+000;
n=80; farx(n+1)=3.302753e+000; foe(n+1)=2.105967e+001; krok(n+1)=3.505202e-004; ng(n+1)=6.597456e+000;
n=81; farx(n+1)=3.314024e+000; foe(n+1)=2.105118e+001; krok(n+1)=1.183106e-002; ng(n+1)=2.960533e+000;
n=82; farx(n+1)=3.334428e+000; foe(n+1)=2.104613e+001; krok(n+1)=3.002384e-002; ng(n+1)=1.158054e+001;
n=83; farx(n+1)=3.353736e+000; foe(n+1)=2.104301e+001; krok(n+1)=6.826594e-002; ng(n+1)=3.822543e+001;
n=84; farx(n+1)=3.372440e+000; foe(n+1)=2.104216e+001; krok(n+1)=2.763178e-002; ng(n+1)=8.501787e+001;
n=85; farx(n+1)=3.428101e+000; foe(n+1)=2.103603e+001; krok(n+1)=1.827549e-001; ng(n+1)=9.406798e+001;
n=86; farx(n+1)=3.527655e+000; foe(n+1)=2.099488e+001; krok(n+1)=1.355546e+000; ng(n+1)=7.589195e+001;
n=87; farx(n+1)=3.553817e+000; foe(n+1)=2.095677e+001; krok(n+1)=6.212565e-001; ng(n+1)=2.952635e+002;
n=88; farx(n+1)=3.708148e+000; foe(n+1)=2.091393e+001; krok(n+1)=1.046368e+000; ng(n+1)=2.643995e+002;
n=89; farx(n+1)=4.082865e+000; foe(n+1)=2.066364e+001; krok(n+1)=4.881108e+000; ng(n+1)=9.036630e+001;
n=90; farx(n+1)=4.103238e+000; foe(n+1)=2.062108e+001; krok(n+1)=3.654252e-002; ng(n+1)=2.528901e+002;
n=91; farx(n+1)=3.986345e+000; foe(n+1)=2.050730e+001; krok(n+1)=2.587256e-001; ng(n+1)=3.698887e+002;
n=92; farx(n+1)=3.985586e+000; foe(n+1)=2.042342e+001; krok(n+1)=1.730260e-001; ng(n+1)=2.119476e+002;
n=93; farx(n+1)=3.985235e+000; foe(n+1)=2.042271e+001; krok(n+1)=7.034667e-004; ng(n+1)=2.084003e+004;
n=94; farx(n+1)=3.948267e+000; foe(n+1)=2.035688e+001; krok(n+1)=8.000730e-002; ng(n+1)=2.395380e+004;
n=95; farx(n+1)=3.895162e+000; foe(n+1)=2.026144e+001; krok(n+1)=1.129119e-001; ng(n+1)=3.317774e+003;
n=96; farx(n+1)=3.895162e+000; foe(n+1)=2.026144e+001; krok(n+1)=5.411454e-011; ng(n+1)=3.384649e+005;
n=97; farx(n+1)=3.895588e+000; foe(n+1)=2.026084e+001; krok(n+1)=9.661282e-003; ng(n+1)=3.384649e+005;
n=98; farx(n+1)=3.927917e+000; foe(n+1)=2.024156e+001; krok(n+1)=2.343012e-001; ng(n+1)=1.001528e+004;
n=99; farx(n+1)=3.937851e+000; foe(n+1)=2.023564e+001; krok(n+1)=4.156331e-005; ng(n+1)=1.551591e+006;
n=100; farx(n+1)=3.937851e+000; foe(n+1)=2.023564e+001; krok(n+1)=1.575382e-009; ng(n+1)=1.373660e+006;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
