%uczenie predyktora oe
clear all;
n=0; farx(n+1)=3.883083e+003; foe(n+1)=3.890146e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=2.635077e+003; foe(n+1)=2.687688e+003; krok(n+1)=5.202718e-004; ng(n+1)=4.194332e+003;
n=2; farx(n+1)=1.227608e+003; foe(n+1)=1.058267e+003; krok(n+1)=1.510644e-003; ng(n+1)=3.469566e+003;
n=3; farx(n+1)=1.632562e+003; foe(n+1)=5.628587e+002; krok(n+1)=2.930791e-004; ng(n+1)=7.567786e+003;
n=4; farx(n+1)=1.948512e+003; foe(n+1)=5.487753e+002; krok(n+1)=4.372259e-003; ng(n+1)=1.599738e+003;
n=5; farx(n+1)=1.852736e+003; foe(n+1)=5.264084e+002; krok(n+1)=2.133242e-003; ng(n+1)=4.568089e+002;
n=6; farx(n+1)=1.267267e+003; foe(n+1)=4.757349e+002; krok(n+1)=1.841334e-002; ng(n+1)=4.243210e+002;
n=7; farx(n+1)=1.176834e+003; foe(n+1)=4.691288e+002; krok(n+1)=5.587912e-005; ng(n+1)=3.155976e+003;
n=8; farx(n+1)=7.631579e+002; foe(n+1)=4.376456e+002; krok(n+1)=9.349870e-004; ng(n+1)=2.902463e+003;
n=9; farx(n+1)=5.904556e+002; foe(n+1)=4.197018e+002; krok(n+1)=8.616391e-004; ng(n+1)=3.798611e+003;
n=10; farx(n+1)=5.261579e+002; foe(n+1)=4.116707e+002; krok(n+1)=1.198792e-003; ng(n+1)=3.379243e+003;
n=11; farx(n+1)=5.086936e+002; foe(n+1)=4.066123e+002; krok(n+1)=1.624224e-003; ng(n+1)=2.834597e+003;
n=12; farx(n+1)=5.013166e+002; foe(n+1)=3.940730e+002; krok(n+1)=5.608324e-003; ng(n+1)=2.043193e+003;
n=13; farx(n+1)=4.157250e+002; foe(n+1)=3.603175e+002; krok(n+1)=1.321161e-002; ng(n+1)=1.033608e+003;
n=14; farx(n+1)=3.917941e+002; foe(n+1)=3.567842e+002; krok(n+1)=4.854552e-004; ng(n+1)=1.730092e+003;
n=15; farx(n+1)=2.546558e+002; foe(n+1)=3.332513e+002; krok(n+1)=2.090079e-003; ng(n+1)=1.946555e+003;
n=16; farx(n+1)=2.093645e+002; foe(n+1)=3.173779e+002; krok(n+1)=1.875750e-003; ng(n+1)=2.729327e+003;
n=17; farx(n+1)=1.884009e+002; foe(n+1)=2.920798e+002; krok(n+1)=6.543079e-003; ng(n+1)=2.318330e+003;
n=18; farx(n+1)=1.753964e+002; foe(n+1)=2.833002e+002; krok(n+1)=1.002232e-003; ng(n+1)=1.651285e+003;
n=19; farx(n+1)=1.467822e+002; foe(n+1)=2.683824e+002; krok(n+1)=3.049962e-003; ng(n+1)=2.375621e+003;
n=20; farx(n+1)=1.421899e+002; foe(n+1)=2.559919e+002; krok(n+1)=1.265711e-003; ng(n+1)=3.379006e+003;
n=21; farx(n+1)=1.435529e+002; foe(n+1)=2.481392e+002; krok(n+1)=3.157006e-004; ng(n+1)=1.772802e+003;
n=22; farx(n+1)=1.449840e+002; foe(n+1)=2.173891e+002; krok(n+1)=4.446059e-003; ng(n+1)=2.260459e+003;
n=23; farx(n+1)=1.446797e+002; foe(n+1)=2.170063e+002; krok(n+1)=5.256405e-005; ng(n+1)=2.863159e+003;
n=24; farx(n+1)=1.337387e+002; foe(n+1)=2.093709e+002; krok(n+1)=3.184791e-004; ng(n+1)=2.687868e+003;
n=25; farx(n+1)=1.284529e+002; foe(n+1)=2.060894e+002; krok(n+1)=8.594024e-004; ng(n+1)=6.810219e+003;
%odnowa zmiennej metryki
n=26; farx(n+1)=1.279982e+002; foe(n+1)=2.018040e+002; krok(n+1)=1.475238e-006; ng(n+1)=7.023204e+003;
n=27; farx(n+1)=1.203388e+002; foe(n+1)=1.898099e+002; krok(n+1)=5.210339e-005; ng(n+1)=2.128402e+003;
n=28; farx(n+1)=1.134599e+002; foe(n+1)=1.721485e+002; krok(n+1)=1.039083e-005; ng(n+1)=2.332137e+004;
n=29; farx(n+1)=8.744561e+001; foe(n+1)=1.315768e+002; krok(n+1)=1.802468e-004; ng(n+1)=4.680881e+003;
n=30; farx(n+1)=8.311609e+001; foe(n+1)=1.164177e+002; krok(n+1)=3.363588e-004; ng(n+1)=5.811280e+003;
n=31; farx(n+1)=7.160569e+001; foe(n+1)=1.048838e+002; krok(n+1)=2.964437e-004; ng(n+1)=4.289015e+003;
n=32; farx(n+1)=4.851137e+001; foe(n+1)=8.671050e+001; krok(n+1)=1.516318e-003; ng(n+1)=3.473595e+003;
n=33; farx(n+1)=3.440705e+001; foe(n+1)=7.258615e+001; krok(n+1)=9.272824e-004; ng(n+1)=1.797992e+003;
n=34; farx(n+1)=2.814559e+001; foe(n+1)=6.312144e+001; krok(n+1)=4.866267e-003; ng(n+1)=6.456906e+003;
n=35; farx(n+1)=2.361647e+001; foe(n+1)=5.434100e+001; krok(n+1)=2.456077e-003; ng(n+1)=1.785493e+003;
n=36; farx(n+1)=1.895258e+001; foe(n+1)=4.720885e+001; krok(n+1)=2.305594e-003; ng(n+1)=4.309744e+003;
n=37; farx(n+1)=1.871833e+001; foe(n+1)=3.792997e+001; krok(n+1)=4.483426e-003; ng(n+1)=4.505504e+003;
n=38; farx(n+1)=1.890380e+001; foe(n+1)=3.520749e+001; krok(n+1)=1.567808e-003; ng(n+1)=1.497603e+003;
n=39; farx(n+1)=1.926135e+001; foe(n+1)=3.271133e+001; krok(n+1)=3.400118e-003; ng(n+1)=1.882142e+003;
n=40; farx(n+1)=1.648317e+001; foe(n+1)=2.958116e+001; krok(n+1)=6.607631e-003; ng(n+1)=3.591118e+002;
n=41; farx(n+1)=1.328662e+001; foe(n+1)=2.756166e+001; krok(n+1)=3.477029e-002; ng(n+1)=6.868234e+002;
n=42; farx(n+1)=1.170366e+001; foe(n+1)=2.631440e+001; krok(n+1)=1.131031e-002; ng(n+1)=5.395515e+002;
n=43; farx(n+1)=9.670118e+000; foe(n+1)=2.421953e+001; krok(n+1)=1.803262e-002; ng(n+1)=1.021330e+003;
n=44; farx(n+1)=9.531864e+000; foe(n+1)=2.393867e+001; krok(n+1)=1.457334e-003; ng(n+1)=6.387734e+002;
n=45; farx(n+1)=9.542080e+000; foe(n+1)=2.269558e+001; krok(n+1)=4.939569e-003; ng(n+1)=9.026989e+002;
n=46; farx(n+1)=9.119756e+000; foe(n+1)=2.106898e+001; krok(n+1)=1.214548e-002; ng(n+1)=4.436157e+002;
n=47; farx(n+1)=8.011266e+000; foe(n+1)=1.926966e+001; krok(n+1)=1.226153e-002; ng(n+1)=6.179970e+002;
n=48; farx(n+1)=7.656975e+000; foe(n+1)=1.877519e+001; krok(n+1)=6.400909e-003; ng(n+1)=8.525530e+002;
n=49; farx(n+1)=7.315546e+000; foe(n+1)=1.772432e+001; krok(n+1)=1.631060e-002; ng(n+1)=5.502663e+002;
n=50; farx(n+1)=6.807244e+000; foe(n+1)=1.641329e+001; krok(n+1)=2.194150e-002; ng(n+1)=9.578212e+002;
%odnowa zmiennej metryki
n=51; farx(n+1)=6.828806e+000; foe(n+1)=1.620495e+001; krok(n+1)=9.849580e-006; ng(n+1)=6.752974e+002;
n=52; farx(n+1)=6.806213e+000; foe(n+1)=1.602736e+001; krok(n+1)=1.344623e-005; ng(n+1)=4.403844e+002;
n=53; farx(n+1)=6.848347e+000; foe(n+1)=1.555742e+001; krok(n+1)=7.502023e-005; ng(n+1)=3.286567e+002;
n=54; farx(n+1)=6.127467e+000; foe(n+1)=1.462407e+001; krok(n+1)=3.968650e-004; ng(n+1)=2.071752e+002;
n=55; farx(n+1)=5.761210e+000; foe(n+1)=1.383131e+001; krok(n+1)=7.138862e-004; ng(n+1)=6.550624e+002;
n=56; farx(n+1)=5.566495e+000; foe(n+1)=1.324308e+001; krok(n+1)=5.465324e-004; ng(n+1)=1.438516e+002;
n=57; farx(n+1)=5.228490e+000; foe(n+1)=1.236287e+001; krok(n+1)=1.693410e-003; ng(n+1)=6.008014e+002;
n=58; farx(n+1)=3.607260e+000; foe(n+1)=1.045876e+001; krok(n+1)=1.352965e-002; ng(n+1)=3.863650e+002;
n=59; farx(n+1)=3.409931e+000; foe(n+1)=9.786686e+000; krok(n+1)=3.487800e-003; ng(n+1)=4.872019e+002;
n=60; farx(n+1)=3.404006e+000; foe(n+1)=9.628350e+000; krok(n+1)=4.150488e-003; ng(n+1)=2.370312e+002;
n=61; farx(n+1)=3.467324e+000; foe(n+1)=9.437219e+000; krok(n+1)=1.469853e-003; ng(n+1)=3.505200e+002;
n=62; farx(n+1)=3.549137e+000; foe(n+1)=9.092941e+000; krok(n+1)=5.139053e-003; ng(n+1)=7.741544e+002;
n=63; farx(n+1)=3.620004e+000; foe(n+1)=8.629492e+000; krok(n+1)=6.353015e-003; ng(n+1)=1.074001e+003;
n=64; farx(n+1)=3.652061e+000; foe(n+1)=8.279611e+000; krok(n+1)=9.289554e-003; ng(n+1)=2.630980e+002;
n=65; farx(n+1)=3.712164e+000; foe(n+1)=8.026242e+000; krok(n+1)=2.128042e-002; ng(n+1)=3.290414e+002;
n=66; farx(n+1)=3.599818e+000; foe(n+1)=7.669406e+000; krok(n+1)=1.205272e-002; ng(n+1)=4.400967e+002;
n=67; farx(n+1)=3.373742e+000; foe(n+1)=7.023981e+000; krok(n+1)=1.468412e-002; ng(n+1)=1.053905e+003;
n=68; farx(n+1)=3.350708e+000; foe(n+1)=6.866867e+000; krok(n+1)=6.192369e-003; ng(n+1)=3.283440e+002;
n=69; farx(n+1)=3.367286e+000; foe(n+1)=6.790151e+000; krok(n+1)=2.707062e-003; ng(n+1)=5.909993e+002;
n=70; farx(n+1)=3.332115e+000; foe(n+1)=6.373336e+000; krok(n+1)=7.689657e-002; ng(n+1)=1.250307e+002;
n=71; farx(n+1)=2.774172e+000; foe(n+1)=5.236920e+000; krok(n+1)=7.173481e-002; ng(n+1)=8.709425e+002;
n=72; farx(n+1)=2.751679e+000; foe(n+1)=5.069370e+000; krok(n+1)=3.106913e-002; ng(n+1)=4.588822e+002;
n=73; farx(n+1)=2.619214e+000; foe(n+1)=4.636110e+000; krok(n+1)=6.240867e-002; ng(n+1)=6.381767e+002;
n=74; farx(n+1)=2.364305e+000; foe(n+1)=4.167069e+000; krok(n+1)=2.762177e-001; ng(n+1)=2.959526e+002;
n=75; farx(n+1)=2.297205e+000; foe(n+1)=4.045149e+000; krok(n+1)=4.505124e-002; ng(n+1)=6.222429e+002;
%odnowa zmiennej metryki
n=76; farx(n+1)=2.289029e+000; foe(n+1)=3.972391e+000; krok(n+1)=1.298681e-006; ng(n+1)=1.011038e+003;
n=77; farx(n+1)=2.287662e+000; foe(n+1)=3.935673e+000; krok(n+1)=2.031935e-005; ng(n+1)=1.864028e+002;
n=78; farx(n+1)=2.275014e+000; foe(n+1)=3.902707e+000; krok(n+1)=3.290674e-005; ng(n+1)=1.319174e+002;
n=79; farx(n+1)=2.254243e+000; foe(n+1)=3.846471e+000; krok(n+1)=9.247269e-004; ng(n+1)=3.770907e+001;
n=80; farx(n+1)=2.232489e+000; foe(n+1)=3.803425e+000; krok(n+1)=6.328553e-004; ng(n+1)=3.975282e+001;
n=81; farx(n+1)=2.109998e+000; foe(n+1)=3.570899e+000; krok(n+1)=2.348414e-003; ng(n+1)=4.384847e+001;
n=82; farx(n+1)=1.973410e+000; foe(n+1)=3.369259e+000; krok(n+1)=4.841816e-003; ng(n+1)=2.428241e+002;
n=83; farx(n+1)=1.835172e+000; foe(n+1)=3.122327e+000; krok(n+1)=3.108393e-003; ng(n+1)=3.359030e+002;
n=84; farx(n+1)=1.769148e+000; foe(n+1)=2.985999e+000; krok(n+1)=1.749592e-003; ng(n+1)=1.036073e+003;
n=85; farx(n+1)=1.725166e+000; foe(n+1)=2.875076e+000; krok(n+1)=4.841655e-003; ng(n+1)=5.023315e+002;
n=86; farx(n+1)=1.675920e+000; foe(n+1)=2.805145e+000; krok(n+1)=6.193383e-003; ng(n+1)=9.017706e+002;
n=87; farx(n+1)=1.643884e+000; foe(n+1)=2.731620e+000; krok(n+1)=9.375382e-003; ng(n+1)=7.851797e+002;
n=88; farx(n+1)=1.578892e+000; foe(n+1)=2.600136e+000; krok(n+1)=1.589439e-002; ng(n+1)=8.656394e+002;
n=89; farx(n+1)=1.569414e+000; foe(n+1)=2.526341e+000; krok(n+1)=2.117616e-002; ng(n+1)=4.882644e+002;
n=90; farx(n+1)=1.534422e+000; foe(n+1)=2.399589e+000; krok(n+1)=3.172883e-002; ng(n+1)=2.501398e+002;
n=91; farx(n+1)=1.547356e+000; foe(n+1)=2.270523e+000; krok(n+1)=1.945154e-002; ng(n+1)=1.126534e+002;
n=92; farx(n+1)=1.550271e+000; foe(n+1)=2.259714e+000; krok(n+1)=2.027075e-003; ng(n+1)=3.932056e+002;
n=93; farx(n+1)=1.542971e+000; foe(n+1)=2.240943e+000; krok(n+1)=9.748751e-003; ng(n+1)=1.638444e+002;
n=94; farx(n+1)=1.496207e+000; foe(n+1)=2.147169e+000; krok(n+1)=2.191235e-002; ng(n+1)=1.805061e+002;
n=95; farx(n+1)=1.494527e+000; foe(n+1)=2.115809e+000; krok(n+1)=4.904612e-002; ng(n+1)=1.650415e+002;
n=96; farx(n+1)=1.496767e+000; foe(n+1)=2.081040e+000; krok(n+1)=6.918848e-002; ng(n+1)=1.698190e+002;
n=97; farx(n+1)=1.501475e+000; foe(n+1)=2.006825e+000; krok(n+1)=1.107341e-001; ng(n+1)=5.112544e+002;
n=98; farx(n+1)=1.495731e+000; foe(n+1)=1.952240e+000; krok(n+1)=5.138140e-002; ng(n+1)=2.994287e+002;
n=99; farx(n+1)=1.492431e+000; foe(n+1)=1.931151e+000; krok(n+1)=3.786424e-002; ng(n+1)=2.579464e+002;
n=100; farx(n+1)=1.517912e+000; foe(n+1)=1.866761e+000; krok(n+1)=8.277891e-002; ng(n+1)=5.261329e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
