%uczenie predyktora oe
clear all;
n=0; farx(n+1)=4.993993e+003; foe(n+1)=4.886795e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=3.912298e+003; foe(n+1)=3.787728e+003; krok(n+1)=3.473499e-004; ng(n+1)=3.843953e+003;
n=2; farx(n+1)=1.038504e+003; foe(n+1)=9.252049e+002; krok(n+1)=2.145173e-003; ng(n+1)=2.290861e+003;
n=3; farx(n+1)=1.125060e+003; foe(n+1)=8.119209e+002; krok(n+1)=1.874926e-004; ng(n+1)=3.675237e+003;
n=4; farx(n+1)=1.256171e+003; foe(n+1)=7.913885e+002; krok(n+1)=9.382450e-004; ng(n+1)=1.605756e+003;
n=5; farx(n+1)=9.973942e+002; foe(n+1)=7.150680e+002; krok(n+1)=1.353531e-003; ng(n+1)=8.834429e+002;
n=6; farx(n+1)=3.844847e+002; foe(n+1)=4.747797e+002; krok(n+1)=7.969359e-003; ng(n+1)=2.712797e+003;
n=7; farx(n+1)=3.503066e+002; foe(n+1)=4.539295e+002; krok(n+1)=3.098339e-004; ng(n+1)=2.587596e+003;
n=8; farx(n+1)=3.234843e+002; foe(n+1)=4.280637e+002; krok(n+1)=1.299476e-003; ng(n+1)=2.364390e+003;
n=9; farx(n+1)=2.515991e+002; foe(n+1)=3.759133e+002; krok(n+1)=6.710424e-004; ng(n+1)=1.201419e+003;
n=10; farx(n+1)=2.428071e+002; foe(n+1)=3.664241e+002; krok(n+1)=3.055278e-005; ng(n+1)=4.122489e+003;
n=11; farx(n+1)=2.451008e+002; foe(n+1)=3.574618e+002; krok(n+1)=4.347668e-004; ng(n+1)=2.468175e+003;
n=12; farx(n+1)=2.380854e+002; foe(n+1)=3.413138e+002; krok(n+1)=2.480280e-003; ng(n+1)=1.786341e+003;
n=13; farx(n+1)=2.458145e+002; foe(n+1)=3.246486e+002; krok(n+1)=5.711898e-003; ng(n+1)=5.914914e+002;
n=14; farx(n+1)=1.139792e+002; foe(n+1)=2.608060e+002; krok(n+1)=5.445782e-003; ng(n+1)=5.895702e+002;
n=15; farx(n+1)=9.634400e+001; foe(n+1)=2.562259e+002; krok(n+1)=1.764835e-004; ng(n+1)=4.551844e+003;
n=16; farx(n+1)=9.705940e+001; foe(n+1)=2.548610e+002; krok(n+1)=2.583925e-003; ng(n+1)=7.304304e+003;
n=17; farx(n+1)=8.984124e+001; foe(n+1)=2.314870e+002; krok(n+1)=9.251671e-003; ng(n+1)=7.194085e+003;
n=18; farx(n+1)=8.825053e+001; foe(n+1)=2.294934e+002; krok(n+1)=9.855289e-004; ng(n+1)=1.194119e+003;
n=19; farx(n+1)=8.450684e+001; foe(n+1)=2.271396e+002; krok(n+1)=3.722051e-003; ng(n+1)=2.538773e+003;
n=20; farx(n+1)=8.274658e+001; foe(n+1)=2.224383e+002; krok(n+1)=5.414124e-003; ng(n+1)=2.738264e+003;
n=21; farx(n+1)=7.163435e+001; foe(n+1)=2.127700e+002; krok(n+1)=1.725161e-002; ng(n+1)=2.722340e+003;
n=22; farx(n+1)=5.428464e+001; foe(n+1)=1.867045e+002; krok(n+1)=4.857442e-002; ng(n+1)=5.127333e+003;
n=23; farx(n+1)=5.373023e+001; foe(n+1)=1.477989e+002; krok(n+1)=5.344903e-002; ng(n+1)=6.632167e+003;
n=24; farx(n+1)=5.533102e+001; foe(n+1)=1.455034e+002; krok(n+1)=1.043660e-003; ng(n+1)=5.166634e+003;
n=25; farx(n+1)=5.359476e+001; foe(n+1)=1.111673e+002; krok(n+1)=1.802050e-001; ng(n+1)=5.495560e+003;
%odnowa zmiennej metryki
n=26; farx(n+1)=5.240061e+001; foe(n+1)=1.042999e+002; krok(n+1)=3.743093e-006; ng(n+1)=4.691375e+003;
n=27; farx(n+1)=5.008306e+001; foe(n+1)=9.601557e+001; krok(n+1)=3.909086e-005; ng(n+1)=1.569163e+003;
n=28; farx(n+1)=4.927548e+001; foe(n+1)=9.404940e+001; krok(n+1)=6.263953e-005; ng(n+1)=7.787616e+002;
n=29; farx(n+1)=4.402918e+001; foe(n+1)=7.123260e+001; krok(n+1)=8.178849e-004; ng(n+1)=8.146966e+002;
n=30; farx(n+1)=4.149875e+001; foe(n+1)=6.578064e+001; krok(n+1)=6.682927e-004; ng(n+1)=1.691871e+003;
n=31; farx(n+1)=3.276279e+001; foe(n+1)=5.677470e+001; krok(n+1)=3.262529e-003; ng(n+1)=2.048748e+003;
n=32; farx(n+1)=3.018156e+001; foe(n+1)=5.297581e+001; krok(n+1)=2.144917e-003; ng(n+1)=1.074423e+003;
n=33; farx(n+1)=2.915439e+001; foe(n+1)=5.088474e+001; krok(n+1)=1.358387e-003; ng(n+1)=1.093005e+003;
n=34; farx(n+1)=2.722088e+001; foe(n+1)=4.791086e+001; krok(n+1)=3.303815e-003; ng(n+1)=1.105716e+003;
n=35; farx(n+1)=2.594166e+001; foe(n+1)=4.473644e+001; krok(n+1)=5.269205e-003; ng(n+1)=1.053039e+003;
n=36; farx(n+1)=2.432302e+001; foe(n+1)=4.227315e+001; krok(n+1)=3.128460e-003; ng(n+1)=4.878223e+002;
n=37; farx(n+1)=2.333257e+001; foe(n+1)=3.879084e+001; krok(n+1)=5.915528e-003; ng(n+1)=6.788034e+002;
n=38; farx(n+1)=2.226099e+001; foe(n+1)=3.620992e+001; krok(n+1)=5.269205e-003; ng(n+1)=3.593123e+002;
n=39; farx(n+1)=1.930152e+001; foe(n+1)=3.318740e+001; krok(n+1)=3.135616e-003; ng(n+1)=8.485836e+002;
n=40; farx(n+1)=1.788686e+001; foe(n+1)=3.181444e+001; krok(n+1)=1.085320e-003; ng(n+1)=5.425619e+002;
n=41; farx(n+1)=1.560090e+001; foe(n+1)=2.906811e+001; krok(n+1)=5.320104e-003; ng(n+1)=1.412700e+003;
n=42; farx(n+1)=1.449632e+001; foe(n+1)=2.823781e+001; krok(n+1)=2.894086e-003; ng(n+1)=2.090977e+003;
n=43; farx(n+1)=1.334569e+001; foe(n+1)=2.699168e+001; krok(n+1)=6.511197e-003; ng(n+1)=2.300032e+003;
n=44; farx(n+1)=1.155396e+001; foe(n+1)=2.469731e+001; krok(n+1)=1.153579e-002; ng(n+1)=2.281300e+003;
n=45; farx(n+1)=1.006547e+001; foe(n+1)=2.279733e+001; krok(n+1)=2.954351e-002; ng(n+1)=9.635857e+002;
n=46; farx(n+1)=9.417487e+000; foe(n+1)=2.205974e+001; krok(n+1)=1.263902e-002; ng(n+1)=1.027827e+003;
n=47; farx(n+1)=3.563331e+000; foe(n+1)=1.174956e+001; krok(n+1)=1.802050e-001; ng(n+1)=9.595841e+002;
n=48; farx(n+1)=2.879235e+000; foe(n+1)=1.056174e+001; krok(n+1)=4.208968e-001; ng(n+1)=7.316903e+002;
n=49; farx(n+1)=2.565195e+000; foe(n+1)=8.677555e+000; krok(n+1)=3.114411e-001; ng(n+1)=7.466802e+002;
n=50; farx(n+1)=2.538117e+000; foe(n+1)=8.543151e+000; krok(n+1)=7.601794e-002; ng(n+1)=6.841047e+002;
%odnowa zmiennej metryki
n=51; farx(n+1)=2.493370e+000; foe(n+1)=8.324556e+000; krok(n+1)=1.925750e-005; ng(n+1)=4.093599e+002;
n=52; farx(n+1)=2.494190e+000; foe(n+1)=8.298052e+000; krok(n+1)=7.258975e-006; ng(n+1)=1.964651e+002;
n=53; farx(n+1)=2.490421e+000; foe(n+1)=8.225373e+000; krok(n+1)=5.734420e-004; ng(n+1)=5.211459e+001;
n=54; farx(n+1)=2.418859e+000; foe(n+1)=7.841806e+000; krok(n+1)=1.992091e-004; ng(n+1)=1.718413e+002;
n=55; farx(n+1)=2.312261e+000; foe(n+1)=7.459720e+000; krok(n+1)=3.157424e-003; ng(n+1)=6.869716e+001;
n=56; farx(n+1)=2.288444e+000; foe(n+1)=7.290813e+000; krok(n+1)=1.358387e-003; ng(n+1)=3.606655e+002;
n=57; farx(n+1)=2.196574e+000; foe(n+1)=7.018728e+000; krok(n+1)=2.543628e-003; ng(n+1)=6.440536e+002;
n=58; farx(n+1)=2.110937e+000; foe(n+1)=6.341197e+000; krok(n+1)=5.699196e-003; ng(n+1)=9.507373e+002;
n=59; farx(n+1)=2.125768e+000; foe(n+1)=6.167754e+000; krok(n+1)=5.680993e-003; ng(n+1)=3.563072e+002;
n=60; farx(n+1)=2.117211e+000; foe(n+1)=5.935570e+000; krok(n+1)=1.025657e-002; ng(n+1)=2.170816e+002;
n=61; farx(n+1)=2.036783e+000; foe(n+1)=5.702553e+000; krok(n+1)=5.627734e-003; ng(n+1)=2.907425e+002;
n=62; farx(n+1)=1.939750e+000; foe(n+1)=5.524856e+000; krok(n+1)=2.284436e-002; ng(n+1)=2.177873e+002;
n=63; farx(n+1)=1.671963e+000; foe(n+1)=4.990611e+000; krok(n+1)=3.696362e-002; ng(n+1)=1.748211e+002;
n=64; farx(n+1)=1.638252e+000; foe(n+1)=4.870438e+000; krok(n+1)=1.525264e-002; ng(n+1)=1.905856e+002;
n=65; farx(n+1)=1.605839e+000; foe(n+1)=4.750413e+000; krok(n+1)=4.838350e-002; ng(n+1)=2.648397e+002;
n=66; farx(n+1)=1.619829e+000; foe(n+1)=4.651404e+000; krok(n+1)=2.279678e-002; ng(n+1)=3.937036e+002;
n=67; farx(n+1)=1.682242e+000; foe(n+1)=4.458431e+000; krok(n+1)=7.173481e-002; ng(n+1)=3.836379e+002;
n=68; farx(n+1)=1.616220e+000; foe(n+1)=4.247690e+000; krok(n+1)=1.160291e-001; ng(n+1)=4.071123e+002;
n=69; farx(n+1)=1.505677e+000; foe(n+1)=4.059631e+000; krok(n+1)=2.427388e-001; ng(n+1)=4.026047e+002;
n=70; farx(n+1)=1.271901e+000; foe(n+1)=3.815696e+000; krok(n+1)=6.384007e-002; ng(n+1)=2.579280e+002;
n=71; farx(n+1)=1.117758e+000; foe(n+1)=3.606385e+000; krok(n+1)=8.732707e-002; ng(n+1)=4.539287e+002;
n=72; farx(n+1)=1.120939e+000; foe(n+1)=3.395820e+000; krok(n+1)=8.260442e-002; ng(n+1)=3.393226e+002;
n=73; farx(n+1)=1.155754e+000; foe(n+1)=3.135560e+000; krok(n+1)=2.488881e-001; ng(n+1)=5.963656e+002;
n=74; farx(n+1)=1.111316e+000; foe(n+1)=2.958455e+000; krok(n+1)=5.560270e-002; ng(n+1)=2.798575e+002;
n=75; farx(n+1)=1.042738e+000; foe(n+1)=2.894210e+000; krok(n+1)=1.347359e-001; ng(n+1)=2.003845e+002;
%odnowa zmiennej metryki
n=76; farx(n+1)=1.044068e+000; foe(n+1)=2.847901e+000; krok(n+1)=5.123959e-006; ng(n+1)=3.038362e+002;
n=77; farx(n+1)=1.041756e+000; foe(n+1)=2.814567e+000; krok(n+1)=5.846756e-006; ng(n+1)=2.370761e+002;
n=78; farx(n+1)=1.036673e+000; foe(n+1)=2.793277e+000; krok(n+1)=1.791657e-005; ng(n+1)=1.165758e+002;
n=79; farx(n+1)=1.023625e+000; foe(n+1)=2.767912e+000; krok(n+1)=7.432430e-004; ng(n+1)=2.579136e+001;
n=80; farx(n+1)=1.002059e+000; foe(n+1)=2.737713e+000; krok(n+1)=8.523876e-004; ng(n+1)=2.768272e+001;
n=81; farx(n+1)=9.951198e-001; foe(n+1)=2.722912e+000; krok(n+1)=2.383354e-003; ng(n+1)=1.564006e+001;
n=82; farx(n+1)=9.956620e-001; foe(n+1)=2.686782e+000; krok(n+1)=4.323984e-003; ng(n+1)=4.219400e+001;
n=83; farx(n+1)=9.998898e-001; foe(n+1)=2.669905e+000; krok(n+1)=3.801047e-003; ng(n+1)=1.913689e+002;
n=84; farx(n+1)=1.007842e+000; foe(n+1)=2.633224e+000; krok(n+1)=2.928765e-002; ng(n+1)=3.807118e+002;
n=85; farx(n+1)=1.004644e+000; foe(n+1)=2.624054e+000; krok(n+1)=5.485375e-003; ng(n+1)=5.212111e+002;
n=86; farx(n+1)=9.758246e-001; foe(n+1)=2.601226e+000; krok(n+1)=1.567500e-002; ng(n+1)=5.366484e+002;
n=87; farx(n+1)=9.500847e-001; foe(n+1)=2.546908e+000; krok(n+1)=2.428721e-002; ng(n+1)=5.295557e+002;
n=88; farx(n+1)=9.412397e-001; foe(n+1)=2.524175e+000; krok(n+1)=1.953985e-002; ng(n+1)=5.291582e+002;
n=89; farx(n+1)=9.039158e-001; foe(n+1)=2.474728e+000; krok(n+1)=3.979978e-002; ng(n+1)=3.847214e+002;
n=90; farx(n+1)=8.921753e-001; foe(n+1)=2.440473e+000; krok(n+1)=6.193139e-002; ng(n+1)=2.452944e+002;
n=91; farx(n+1)=9.110008e-001; foe(n+1)=2.428529e+000; krok(n+1)=1.763378e-002; ng(n+1)=2.263269e+002;
n=92; farx(n+1)=9.771149e-001; foe(n+1)=2.384134e+000; krok(n+1)=7.911391e-002; ng(n+1)=2.300403e+002;
n=93; farx(n+1)=9.815215e-001; foe(n+1)=2.209745e+000; krok(n+1)=1.752988e-001; ng(n+1)=1.574184e+002;
n=94; farx(n+1)=1.022868e+000; foe(n+1)=2.107295e+000; krok(n+1)=1.417782e-002; ng(n+1)=5.238720e+002;
n=95; farx(n+1)=8.992482e-001; foe(n+1)=1.789553e+000; krok(n+1)=2.601807e-001; ng(n+1)=9.713158e+001;
n=96; farx(n+1)=8.242235e-001; foe(n+1)=1.575608e+000; krok(n+1)=2.561181e-002; ng(n+1)=4.956504e+002;
n=97; farx(n+1)=7.727865e-001; foe(n+1)=1.522298e+000; krok(n+1)=5.625683e-002; ng(n+1)=3.725632e+002;
n=98; farx(n+1)=6.784487e-001; foe(n+1)=1.438764e+000; krok(n+1)=4.879939e-002; ng(n+1)=3.389395e+002;
n=99; farx(n+1)=6.212542e-001; foe(n+1)=1.341958e+000; krok(n+1)=1.234039e-001; ng(n+1)=3.929131e+002;
n=100; farx(n+1)=5.783084e-001; foe(n+1)=1.248442e+000; krok(n+1)=1.230771e-001; ng(n+1)=1.856068e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
