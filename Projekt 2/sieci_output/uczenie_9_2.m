%uczenie predyktora oe
clear all;
n=0; farx(n+1)=5.198620e+003; foe(n+1)=4.781273e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=3.892544e+003; foe(n+1)=3.550951e+003; krok(n+1)=3.970634e-004; ng(n+1)=6.216252e+003;
n=2; farx(n+1)=1.358701e+003; foe(n+1)=1.089121e+003; krok(n+1)=1.072459e-003; ng(n+1)=4.984659e+003;
n=3; farx(n+1)=1.605023e+003; foe(n+1)=8.416526e+002; krok(n+1)=2.370496e-004; ng(n+1)=6.385949e+003;
n=4; farx(n+1)=4.248941e+002; foe(n+1)=6.842688e+002; krok(n+1)=9.328627e-003; ng(n+1)=7.413484e+002;
n=5; farx(n+1)=3.275627e+002; foe(n+1)=6.579532e+002; krok(n+1)=2.832743e-005; ng(n+1)=1.008075e+004;
n=6; farx(n+1)=1.781668e+002; foe(n+1)=4.716439e+002; krok(n+1)=7.102557e-004; ng(n+1)=1.088842e+004;
n=7; farx(n+1)=2.426734e+002; foe(n+1)=4.304829e+002; krok(n+1)=6.459813e-004; ng(n+1)=8.078343e+003;
n=8; farx(n+1)=2.433864e+002; foe(n+1)=4.298466e+002; krok(n+1)=1.023758e-005; ng(n+1)=5.839101e+003;
n=9; farx(n+1)=1.722872e+002; foe(n+1)=3.793592e+002; krok(n+1)=3.426502e-003; ng(n+1)=3.773791e+003;
n=10; farx(n+1)=1.668169e+002; foe(n+1)=3.442599e+002; krok(n+1)=6.355479e-004; ng(n+1)=3.832016e+003;
n=11; farx(n+1)=1.657149e+002; foe(n+1)=3.374555e+002; krok(n+1)=2.302017e-004; ng(n+1)=1.188909e+003;
n=12; farx(n+1)=1.637504e+002; foe(n+1)=3.216004e+002; krok(n+1)=3.604935e-004; ng(n+1)=1.004203e+004;
n=13; farx(n+1)=1.671246e+002; foe(n+1)=3.147199e+002; krok(n+1)=1.050435e-003; ng(n+1)=2.987965e+003;
n=14; farx(n+1)=1.692949e+002; foe(n+1)=3.137667e+002; krok(n+1)=9.152390e-004; ng(n+1)=5.101212e+003;
n=15; farx(n+1)=1.370817e+002; foe(n+1)=2.933042e+002; krok(n+1)=7.366454e-003; ng(n+1)=1.791444e+003;
n=16; farx(n+1)=1.267377e+002; foe(n+1)=2.874054e+002; krok(n+1)=6.541573e-004; ng(n+1)=2.384685e+003;
n=17; farx(n+1)=1.017545e+002; foe(n+1)=2.748878e+002; krok(n+1)=1.402081e-003; ng(n+1)=3.401857e+003;
n=18; farx(n+1)=8.429381e+001; foe(n+1)=2.625907e+002; krok(n+1)=3.310624e-004; ng(n+1)=2.569823e+003;
n=19; farx(n+1)=6.285197e+001; foe(n+1)=2.429419e+002; krok(n+1)=3.047770e-004; ng(n+1)=3.923985e+003;
n=20; farx(n+1)=6.249638e+001; foe(n+1)=2.425665e+002; krok(n+1)=6.596475e-005; ng(n+1)=4.798341e+003;
n=21; farx(n+1)=4.515615e+001; foe(n+1)=1.960789e+002; krok(n+1)=1.679351e-002; ng(n+1)=3.594336e+003;
n=22; farx(n+1)=4.528376e+001; foe(n+1)=1.952227e+002; krok(n+1)=6.240680e-006; ng(n+1)=9.192473e+003;
n=23; farx(n+1)=4.472712e+001; foe(n+1)=1.944576e+002; krok(n+1)=8.683747e-005; ng(n+1)=6.208095e+003;
n=24; farx(n+1)=6.045834e+001; foe(n+1)=1.831604e+002; krok(n+1)=1.013537e-003; ng(n+1)=1.304926e+004;
n=25; farx(n+1)=5.773546e+001; foe(n+1)=1.761116e+002; krok(n+1)=1.667309e-003; ng(n+1)=9.539234e+003;
%odnowa zmiennej metryki
n=26; farx(n+1)=5.713961e+001; foe(n+1)=1.755355e+002; krok(n+1)=1.251494e-006; ng(n+1)=2.603828e+003;
n=27; farx(n+1)=3.592969e+001; foe(n+1)=1.500600e+002; krok(n+1)=2.323045e-005; ng(n+1)=4.407086e+003;
n=28; farx(n+1)=3.418342e+001; foe(n+1)=1.378786e+002; krok(n+1)=1.001480e-004; ng(n+1)=7.830898e+003;
n=29; farx(n+1)=3.114017e+001; foe(n+1)=1.112730e+002; krok(n+1)=3.079053e-004; ng(n+1)=2.032807e+003;
n=30; farx(n+1)=2.480581e+001; foe(n+1)=8.570034e+001; krok(n+1)=4.079127e-004; ng(n+1)=3.436012e+003;
n=31; farx(n+1)=2.675891e+001; foe(n+1)=8.157701e+001; krok(n+1)=4.302795e-004; ng(n+1)=1.050328e+003;
n=32; farx(n+1)=2.378069e+001; foe(n+1)=6.682479e+001; krok(n+1)=1.111857e-003; ng(n+1)=3.339279e+003;
n=33; farx(n+1)=2.073101e+001; foe(n+1)=5.910452e+001; krok(n+1)=1.726986e-003; ng(n+1)=1.593748e+003;
n=34; farx(n+1)=1.971704e+001; foe(n+1)=4.789798e+001; krok(n+1)=1.345435e-003; ng(n+1)=2.641279e+003;
n=35; farx(n+1)=1.478936e+001; foe(n+1)=3.640435e+001; krok(n+1)=2.894086e-003; ng(n+1)=2.657131e+003;
n=36; farx(n+1)=8.381725e+000; foe(n+1)=2.474542e+001; krok(n+1)=1.323776e-003; ng(n+1)=3.437276e+003;
n=37; farx(n+1)=8.127336e+000; foe(n+1)=2.007717e+001; krok(n+1)=1.812955e-003; ng(n+1)=8.975998e+002;
n=38; farx(n+1)=7.663204e+000; foe(n+1)=1.833252e+001; krok(n+1)=2.032662e-003; ng(n+1)=1.225754e+003;
n=39; farx(n+1)=7.366088e+000; foe(n+1)=1.797177e+001; krok(n+1)=9.289576e-004; ng(n+1)=4.849501e+002;
n=40; farx(n+1)=6.321911e+000; foe(n+1)=1.642261e+001; krok(n+1)=5.967206e-003; ng(n+1)=3.034199e+002;
n=41; farx(n+1)=4.632246e+000; foe(n+1)=1.411626e+001; krok(n+1)=3.140700e-003; ng(n+1)=7.515928e+002;
n=42; farx(n+1)=3.932534e+000; foe(n+1)=1.254890e+001; krok(n+1)=8.300976e-003; ng(n+1)=8.814377e+002;
n=43; farx(n+1)=3.108340e+000; foe(n+1)=1.086499e+001; krok(n+1)=2.561940e-002; ng(n+1)=3.569542e+002;
n=44; farx(n+1)=2.884748e+000; foe(n+1)=1.019776e+001; krok(n+1)=1.898143e-003; ng(n+1)=1.132029e+003;
n=45; farx(n+1)=2.475577e+000; foe(n+1)=9.211632e+000; krok(n+1)=7.442795e-003; ng(n+1)=1.003728e+003;
n=46; farx(n+1)=2.411340e+000; foe(n+1)=9.023674e+000; krok(n+1)=6.371455e-003; ng(n+1)=4.825177e+002;
n=47; farx(n+1)=2.360875e+000; foe(n+1)=8.572149e+000; krok(n+1)=3.625910e-003; ng(n+1)=4.003533e+002;
n=48; farx(n+1)=2.244102e+000; foe(n+1)=8.066902e+000; krok(n+1)=2.254943e-002; ng(n+1)=2.541127e+002;
n=49; farx(n+1)=2.157975e+000; foe(n+1)=7.843674e+000; krok(n+1)=1.574999e-002; ng(n+1)=2.359910e+002;
n=50; farx(n+1)=1.993820e+000; foe(n+1)=7.381072e+000; krok(n+1)=3.178877e-002; ng(n+1)=4.054907e+002;
%odnowa zmiennej metryki
n=51; farx(n+1)=2.002284e+000; foe(n+1)=7.295817e+000; krok(n+1)=8.106422e-006; ng(n+1)=4.500413e+002;
n=52; farx(n+1)=1.991592e+000; foe(n+1)=7.269319e+000; krok(n+1)=1.817813e-005; ng(n+1)=1.546133e+002;
n=53; farx(n+1)=1.985597e+000; foe(n+1)=7.246843e+000; krok(n+1)=5.111781e-005; ng(n+1)=8.690265e+001;
n=54; farx(n+1)=1.976989e+000; foe(n+1)=7.171906e+000; krok(n+1)=2.493753e-004; ng(n+1)=8.613881e+001;
n=55; farx(n+1)=1.919141e+000; foe(n+1)=7.020476e+000; krok(n+1)=1.271814e-003; ng(n+1)=4.903874e+001;
n=56; farx(n+1)=1.932513e+000; foe(n+1)=6.908423e+000; krok(n+1)=1.442683e-003; ng(n+1)=4.164694e+001;
n=57; farx(n+1)=1.841333e+000; foe(n+1)=6.619386e+000; krok(n+1)=4.800362e-003; ng(n+1)=3.835989e+001;
n=58; farx(n+1)=1.835492e+000; foe(n+1)=6.453115e+000; krok(n+1)=8.751130e-003; ng(n+1)=8.975269e+001;
n=59; farx(n+1)=1.734667e+000; foe(n+1)=6.280446e+000; krok(n+1)=1.321526e-002; ng(n+1)=3.280835e+002;
n=60; farx(n+1)=1.679637e+000; foe(n+1)=5.915008e+000; krok(n+1)=1.513348e-002; ng(n+1)=3.431374e+002;
n=61; farx(n+1)=1.630340e+000; foe(n+1)=5.788983e+000; krok(n+1)=4.929920e-003; ng(n+1)=3.409765e+002;
n=62; farx(n+1)=1.565261e+000; foe(n+1)=5.725838e+000; krok(n+1)=5.060913e-003; ng(n+1)=1.228159e+002;
n=63; farx(n+1)=1.537130e+000; foe(n+1)=5.499121e+000; krok(n+1)=9.146433e-003; ng(n+1)=3.415604e+002;
n=64; farx(n+1)=1.529916e+000; foe(n+1)=5.301558e+000; krok(n+1)=5.945944e-003; ng(n+1)=2.163038e+002;
n=65; farx(n+1)=1.564201e+000; foe(n+1)=5.212006e+000; krok(n+1)=6.271232e-003; ng(n+1)=4.217268e+002;
n=66; farx(n+1)=1.589876e+000; foe(n+1)=4.877509e+000; krok(n+1)=1.589439e-002; ng(n+1)=5.261890e+002;
n=67; farx(n+1)=1.584704e+000; foe(n+1)=4.599881e+000; krok(n+1)=5.945944e-003; ng(n+1)=4.402181e+002;
n=68; farx(n+1)=1.523136e+000; foe(n+1)=4.221568e+000; krok(n+1)=2.812841e-002; ng(n+1)=2.530052e+002;
n=69; farx(n+1)=1.572307e+000; foe(n+1)=3.824622e+000; krok(n+1)=1.308935e-002; ng(n+1)=4.727181e+002;
n=70; farx(n+1)=1.586578e+000; foe(n+1)=3.702925e+000; krok(n+1)=9.344559e-003; ng(n+1)=2.310622e+002;
n=71; farx(n+1)=1.592386e+000; foe(n+1)=3.645283e+000; krok(n+1)=3.473809e-003; ng(n+1)=2.438917e+002;
n=72; farx(n+1)=1.478983e+000; foe(n+1)=3.429907e+000; krok(n+1)=1.563153e-002; ng(n+1)=1.929790e+002;
n=73; farx(n+1)=1.354028e+000; foe(n+1)=3.158537e+000; krok(n+1)=2.011176e-002; ng(n+1)=4.730341e+002;
n=74; farx(n+1)=1.204128e+000; foe(n+1)=2.800968e+000; krok(n+1)=6.539800e-002; ng(n+1)=3.519983e+002;
n=75; farx(n+1)=1.113813e+000; foe(n+1)=2.570372e+000; krok(n+1)=1.660195e-002; ng(n+1)=1.467630e+002;
%odnowa zmiennej metryki
n=76; farx(n+1)=1.107909e+000; foe(n+1)=2.490450e+000; krok(n+1)=6.164510e-006; ng(n+1)=4.722864e+002;
n=77; farx(n+1)=1.109693e+000; foe(n+1)=2.479978e+000; krok(n+1)=5.637963e-006; ng(n+1)=1.887478e+002;
n=78; farx(n+1)=1.113457e+000; foe(n+1)=2.463223e+000; krok(n+1)=1.904168e-005; ng(n+1)=1.312347e+002;
n=79; farx(n+1)=1.111182e+000; foe(n+1)=2.451306e+000; krok(n+1)=2.189959e-004; ng(n+1)=3.708396e+001;
n=80; farx(n+1)=1.121433e+000; foe(n+1)=2.347786e+000; krok(n+1)=1.387045e-003; ng(n+1)=4.549917e+001;
n=81; farx(n+1)=1.067305e+000; foe(n+1)=2.097569e+000; krok(n+1)=5.282995e-003; ng(n+1)=4.878928e+001;
n=82; farx(n+1)=1.053374e+000; foe(n+1)=2.038167e+000; krok(n+1)=5.981703e-003; ng(n+1)=2.411455e+002;
n=83; farx(n+1)=1.014056e+000; foe(n+1)=1.979223e+000; krok(n+1)=5.548179e-003; ng(n+1)=2.998018e+002;
n=84; farx(n+1)=9.638591e-001; foe(n+1)=1.902145e+000; krok(n+1)=6.349841e-003; ng(n+1)=2.718112e+002;
n=85; farx(n+1)=9.447618e-001; foe(n+1)=1.873640e+000; krok(n+1)=1.742611e-003; ng(n+1)=3.407439e+002;
n=86; farx(n+1)=9.271011e-001; foe(n+1)=1.843867e+000; krok(n+1)=1.830478e-003; ng(n+1)=3.737939e+002;
n=87; farx(n+1)=9.092515e-001; foe(n+1)=1.796484e+000; krok(n+1)=1.111520e-002; ng(n+1)=2.636744e+002;
n=88; farx(n+1)=8.476852e-001; foe(n+1)=1.678987e+000; krok(n+1)=1.071180e-002; ng(n+1)=4.645620e+002;
n=89; farx(n+1)=8.410698e-001; foe(n+1)=1.652311e+000; krok(n+1)=1.000091e-002; ng(n+1)=5.341330e+002;
n=90; farx(n+1)=7.828446e-001; foe(n+1)=1.469269e+000; krok(n+1)=1.405854e-002; ng(n+1)=6.223685e+002;
n=91; farx(n+1)=7.581379e-001; foe(n+1)=1.439651e+000; krok(n+1)=5.414124e-003; ng(n+1)=1.488948e+002;
n=92; farx(n+1)=7.327134e-001; foe(n+1)=1.400264e+000; krok(n+1)=2.327615e-002; ng(n+1)=1.592260e+002;
n=93; farx(n+1)=7.257067e-001; foe(n+1)=1.388859e+000; krok(n+1)=7.632150e-003; ng(n+1)=2.429263e+002;
n=94; farx(n+1)=7.035899e-001; foe(n+1)=1.351087e+000; krok(n+1)=4.171530e-002; ng(n+1)=7.154936e+001;
n=95; farx(n+1)=6.831057e-001; foe(n+1)=1.329899e+000; krok(n+1)=2.835241e-002; ng(n+1)=1.451335e+002;
n=96; farx(n+1)=6.221944e-001; foe(n+1)=1.289649e+000; krok(n+1)=3.126305e-002; ng(n+1)=2.289397e+002;
n=97; farx(n+1)=6.009632e-001; foe(n+1)=1.244454e+000; krok(n+1)=5.285294e-002; ng(n+1)=1.244349e+002;
n=98; farx(n+1)=5.961376e-001; foe(n+1)=1.223728e+000; krok(n+1)=3.266584e-002; ng(n+1)=1.875697e+002;
n=99; farx(n+1)=5.693185e-001; foe(n+1)=1.137968e+000; krok(n+1)=1.372747e-001; ng(n+1)=2.204311e+002;
n=100; farx(n+1)=5.697793e-001; foe(n+1)=1.120684e+000; krok(n+1)=1.012568e-002; ng(n+1)=1.541434e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
