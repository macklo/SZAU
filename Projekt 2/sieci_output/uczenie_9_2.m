%uczenie predyktora oe
clear all;
n=0; farx(n+1)=4.609288e+003; foe(n+1)=4.590452e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=2.996308e+003; foe(n+1)=2.894642e+003; krok(n+1)=5.067687e-004; ng(n+1)=5.066774e+003;
n=2; farx(n+1)=1.049050e+003; foe(n+1)=7.824841e+002; krok(n+1)=3.199545e-003; ng(n+1)=2.407834e+003;
n=3; farx(n+1)=1.142341e+003; foe(n+1)=5.141291e+002; krok(n+1)=3.179535e-004; ng(n+1)=5.441557e+003;
n=4; farx(n+1)=9.236884e+002; foe(n+1)=4.710893e+002; krok(n+1)=3.929986e-003; ng(n+1)=6.815100e+002;
n=5; farx(n+1)=5.561517e+002; foe(n+1)=4.121781e+002; krok(n+1)=1.020148e-003; ng(n+1)=1.579346e+003;
n=6; farx(n+1)=3.529095e+002; foe(n+1)=3.521713e+002; krok(n+1)=2.349366e-003; ng(n+1)=3.022784e+003;
n=7; farx(n+1)=3.391644e+002; foe(n+1)=3.506147e+002; krok(n+1)=2.382783e-005; ng(n+1)=3.248782e+003;
n=8; farx(n+1)=3.013054e+002; foe(n+1)=3.441711e+002; krok(n+1)=3.534472e-004; ng(n+1)=3.760353e+003;
n=9; farx(n+1)=2.143534e+002; foe(n+1)=3.106300e+002; krok(n+1)=2.883948e-003; ng(n+1)=3.414567e+003;
n=10; farx(n+1)=1.967671e+002; foe(n+1)=2.983793e+002; krok(n+1)=1.141051e-003; ng(n+1)=2.691262e+003;
n=11; farx(n+1)=1.976566e+002; foe(n+1)=2.937358e+002; krok(n+1)=1.563831e-003; ng(n+1)=1.060107e+003;
n=12; farx(n+1)=1.985450e+002; foe(n+1)=2.759731e+002; krok(n+1)=1.226153e-002; ng(n+1)=1.258332e+003;
n=13; farx(n+1)=1.862737e+002; foe(n+1)=2.707363e+002; krok(n+1)=1.940336e-003; ng(n+1)=8.540666e+002;
n=14; farx(n+1)=1.735277e+002; foe(n+1)=2.645679e+002; krok(n+1)=8.713055e-004; ng(n+1)=1.024035e+003;
n=15; farx(n+1)=1.585962e+002; foe(n+1)=2.544893e+002; krok(n+1)=1.174683e-003; ng(n+1)=1.578418e+003;
n=16; farx(n+1)=1.500965e+002; foe(n+1)=2.418414e+002; krok(n+1)=2.885366e-003; ng(n+1)=1.490430e+003;
n=17; farx(n+1)=1.500254e+002; foe(n+1)=2.377898e+002; krok(n+1)=1.059163e-003; ng(n+1)=8.476115e+002;
n=18; farx(n+1)=1.159903e+002; foe(n+1)=2.269784e+002; krok(n+1)=3.096185e-003; ng(n+1)=6.172636e+002;
n=19; farx(n+1)=8.481653e+001; foe(n+1)=2.100746e+002; krok(n+1)=5.208348e-003; ng(n+1)=1.778399e+003;
n=20; farx(n+1)=7.561855e+001; foe(n+1)=2.037806e+002; krok(n+1)=5.027101e-004; ng(n+1)=3.633787e+003;
n=21; farx(n+1)=7.261244e+001; foe(n+1)=2.017092e+002; krok(n+1)=5.391128e-004; ng(n+1)=5.103314e+003;
n=22; farx(n+1)=7.569886e+001; foe(n+1)=1.963139e+002; krok(n+1)=3.334617e-003; ng(n+1)=5.654481e+003;
n=23; farx(n+1)=7.655957e+001; foe(n+1)=1.928533e+002; krok(n+1)=6.459813e-004; ng(n+1)=7.221912e+003;
n=24; farx(n+1)=7.595663e+001; foe(n+1)=1.922003e+002; krok(n+1)=3.968650e-004; ng(n+1)=8.646386e+003;
n=25; farx(n+1)=8.013397e+001; foe(n+1)=1.909766e+002; krok(n+1)=1.495225e-003; ng(n+1)=9.183767e+003;
%odnowa zmiennej metryki
n=26; farx(n+1)=3.836720e+001; foe(n+1)=1.212149e+002; krok(n+1)=2.936505e-005; ng(n+1)=9.154173e+003;
n=27; farx(n+1)=3.204666e+001; foe(n+1)=1.137637e+002; krok(n+1)=1.007837e-004; ng(n+1)=1.282192e+003;
n=28; farx(n+1)=2.307649e+001; foe(n+1)=8.805923e+001; krok(n+1)=5.692926e-006; ng(n+1)=8.160102e+003;
n=29; farx(n+1)=2.071520e+001; foe(n+1)=7.916343e+001; krok(n+1)=1.529326e-004; ng(n+1)=1.941584e+003;
n=30; farx(n+1)=1.987885e+001; foe(n+1)=7.565903e+001; krok(n+1)=3.870231e-004; ng(n+1)=3.600544e+003;
n=31; farx(n+1)=1.102824e+001; foe(n+1)=4.775284e+001; krok(n+1)=3.400118e-003; ng(n+1)=1.184868e+003;
n=32; farx(n+1)=1.025486e+001; foe(n+1)=4.229161e+001; krok(n+1)=9.229511e-005; ng(n+1)=5.675420e+003;
n=33; farx(n+1)=1.010974e+001; foe(n+1)=3.830002e+001; krok(n+1)=1.441974e-003; ng(n+1)=1.859702e+003;
n=34; farx(n+1)=1.123829e+001; foe(n+1)=3.215575e+001; krok(n+1)=1.812955e-003; ng(n+1)=2.133633e+003;
n=35; farx(n+1)=1.117360e+001; foe(n+1)=2.812606e+001; krok(n+1)=1.265711e-003; ng(n+1)=1.131833e+003;
n=36; farx(n+1)=9.810764e+000; foe(n+1)=2.494255e+001; krok(n+1)=1.389400e-003; ng(n+1)=1.961797e+003;
n=37; farx(n+1)=8.586745e+000; foe(n+1)=2.275012e+001; krok(n+1)=2.444561e-003; ng(n+1)=1.073109e+003;
n=38; farx(n+1)=8.008142e+000; foe(n+1)=1.981717e+001; krok(n+1)=1.273916e-003; ng(n+1)=1.603226e+003;
n=39; farx(n+1)=6.806434e+000; foe(n+1)=1.755473e+001; krok(n+1)=2.840497e-003; ng(n+1)=7.615525e+002;
n=40; farx(n+1)=4.951578e+000; foe(n+1)=1.304706e+001; krok(n+1)=1.660195e-002; ng(n+1)=1.013833e+003;
n=41; farx(n+1)=4.627093e+000; foe(n+1)=1.241097e+001; krok(n+1)=3.259080e-004; ng(n+1)=9.615819e+002;
n=42; farx(n+1)=4.407873e+000; foe(n+1)=1.158724e+001; krok(n+1)=1.779752e-003; ng(n+1)=1.305234e+003;
n=43; farx(n+1)=3.988269e+000; foe(n+1)=1.058286e+001; krok(n+1)=3.977286e-003; ng(n+1)=9.193123e+002;
n=44; farx(n+1)=3.865923e+000; foe(n+1)=9.735979e+000; krok(n+1)=3.349706e-003; ng(n+1)=1.214305e+003;
n=45; farx(n+1)=3.689110e+000; foe(n+1)=8.147691e+000; krok(n+1)=9.267996e-003; ng(n+1)=1.357421e+003;
n=46; farx(n+1)=3.512528e+000; foe(n+1)=7.638874e+000; krok(n+1)=2.045232e-003; ng(n+1)=5.512026e+002;
n=47; farx(n+1)=3.056657e+000; foe(n+1)=6.858245e+000; krok(n+1)=1.023953e-002; ng(n+1)=5.655212e+002;
n=48; farx(n+1)=2.741190e+000; foe(n+1)=6.203929e+000; krok(n+1)=1.516106e-002; ng(n+1)=5.189896e+002;
n=49; farx(n+1)=2.358048e+000; foe(n+1)=5.413138e+000; krok(n+1)=1.589439e-002; ng(n+1)=5.668507e+002;
n=50; farx(n+1)=2.277992e+000; foe(n+1)=5.202105e+000; krok(n+1)=5.137451e-003; ng(n+1)=3.249947e+002;
%odnowa zmiennej metryki
n=51; farx(n+1)=2.257743e+000; foe(n+1)=5.115954e+000; krok(n+1)=9.456357e-006; ng(n+1)=5.308635e+002;
n=52; farx(n+1)=2.244139e+000; foe(n+1)=5.083178e+000; krok(n+1)=2.036880e-005; ng(n+1)=1.903070e+002;
n=53; farx(n+1)=2.257319e+000; foe(n+1)=4.969086e+000; krok(n+1)=1.465395e-004; ng(n+1)=1.475029e+002;
n=54; farx(n+1)=2.172057e+000; foe(n+1)=4.505157e+000; krok(n+1)=2.630324e-004; ng(n+1)=2.110335e+002;
n=55; farx(n+1)=1.972445e+000; foe(n+1)=3.985816e+000; krok(n+1)=6.734730e-003; ng(n+1)=9.763204e+001;
n=56; farx(n+1)=1.962044e+000; foe(n+1)=3.953398e+000; krok(n+1)=4.220039e-004; ng(n+1)=1.293596e+002;
n=57; farx(n+1)=1.830686e+000; foe(n+1)=3.711195e+000; krok(n+1)=5.557598e-003; ng(n+1)=1.101516e+002;
n=58; farx(n+1)=1.632495e+000; foe(n+1)=3.297112e+000; krok(n+1)=5.829556e-003; ng(n+1)=3.854197e+002;
n=59; farx(n+1)=1.539242e+000; foe(n+1)=3.091071e+000; krok(n+1)=1.926084e-003; ng(n+1)=7.947521e+002;
n=60; farx(n+1)=1.444783e+000; foe(n+1)=2.947806e+000; krok(n+1)=2.983603e-003; ng(n+1)=6.270310e+002;
n=61; farx(n+1)=1.373503e+000; foe(n+1)=2.838592e+000; krok(n+1)=7.704335e-003; ng(n+1)=3.337583e+002;
n=62; farx(n+1)=1.284470e+000; foe(n+1)=2.653122e+000; krok(n+1)=8.166461e-003; ng(n+1)=3.647184e+002;
n=63; farx(n+1)=1.255480e+000; foe(n+1)=2.532421e+000; krok(n+1)=1.243357e-002; ng(n+1)=1.418299e+002;
n=64; farx(n+1)=1.201805e+000; foe(n+1)=2.355573e+000; krok(n+1)=2.567947e-002; ng(n+1)=3.995868e+002;
n=65; farx(n+1)=1.200162e+000; foe(n+1)=2.127060e+000; krok(n+1)=2.398987e-002; ng(n+1)=5.159878e+002;
n=66; farx(n+1)=1.185811e+000; foe(n+1)=2.039766e+000; krok(n+1)=7.385876e-003; ng(n+1)=3.208642e+002;
n=67; farx(n+1)=1.182696e+000; foe(n+1)=1.994196e+000; krok(n+1)=6.065270e-003; ng(n+1)=2.416263e+002;
n=68; farx(n+1)=1.180614e+000; foe(n+1)=1.967852e+000; krok(n+1)=2.990450e-003; ng(n+1)=3.054282e+002;
n=69; farx(n+1)=1.177122e+000; foe(n+1)=1.869689e+000; krok(n+1)=3.338729e-002; ng(n+1)=1.403569e+002;
n=70; farx(n+1)=1.210615e+000; foe(n+1)=1.710605e+000; krok(n+1)=1.432529e-002; ng(n+1)=1.818796e+002;
n=71; farx(n+1)=1.225406e+000; foe(n+1)=1.635750e+000; krok(n+1)=1.308616e-002; ng(n+1)=4.691504e+002;
n=72; farx(n+1)=1.185532e+000; foe(n+1)=1.579092e+000; krok(n+1)=2.643052e-002; ng(n+1)=1.703685e+002;
n=73; farx(n+1)=1.154411e+000; foe(n+1)=1.500237e+000; krok(n+1)=2.331822e-002; ng(n+1)=2.022484e+002;
n=74; farx(n+1)=1.163553e+000; foe(n+1)=1.402212e+000; krok(n+1)=5.335388e-002; ng(n+1)=2.427719e+002;
n=75; farx(n+1)=1.164469e+000; foe(n+1)=1.341693e+000; krok(n+1)=4.320574e-002; ng(n+1)=2.616191e+002;
%odnowa zmiennej metryki
n=76; farx(n+1)=1.163457e+000; foe(n+1)=1.329537e+000; krok(n+1)=5.288329e-006; ng(n+1)=2.359278e+002;
n=77; farx(n+1)=1.163317e+000; foe(n+1)=1.328019e+000; krok(n+1)=5.082078e-006; ng(n+1)=7.395667e+001;
n=78; farx(n+1)=1.163408e+000; foe(n+1)=1.325995e+000; krok(n+1)=4.116566e-005; ng(n+1)=3.357534e+001;
n=79; farx(n+1)=1.154287e+000; foe(n+1)=1.309221e+000; krok(n+1)=6.465635e-004; ng(n+1)=2.686610e+001;
n=80; farx(n+1)=1.151268e+000; foe(n+1)=1.303280e+000; krok(n+1)=2.881152e-004; ng(n+1)=2.840561e+001;
n=81; farx(n+1)=1.129922e+000; foe(n+1)=1.287477e+000; krok(n+1)=2.660052e-003; ng(n+1)=2.766502e+001;
n=82; farx(n+1)=1.103883e+000; foe(n+1)=1.269715e+000; krok(n+1)=2.304922e-003; ng(n+1)=3.942044e+001;
n=83; farx(n+1)=1.047377e+000; foe(n+1)=1.218455e+000; krok(n+1)=9.093040e-003; ng(n+1)=6.270722e+001;
n=84; farx(n+1)=1.023067e+000; foe(n+1)=1.192881e+000; krok(n+1)=6.071802e-003; ng(n+1)=2.489947e+002;
n=85; farx(n+1)=9.868811e-001; foe(n+1)=1.150668e+000; krok(n+1)=1.448480e-002; ng(n+1)=1.731715e+002;
n=86; farx(n+1)=9.825000e-001; foe(n+1)=1.114111e+000; krok(n+1)=2.812841e-002; ng(n+1)=1.961994e+002;
n=87; farx(n+1)=9.798337e-001; foe(n+1)=1.101001e+000; krok(n+1)=6.757425e-003; ng(n+1)=1.515955e+002;
n=88; farx(n+1)=9.805877e-001; foe(n+1)=1.085716e+000; krok(n+1)=1.333847e-002; ng(n+1)=1.350934e+002;
n=89; farx(n+1)=9.984691e-001; foe(n+1)=1.064335e+000; krok(n+1)=3.556534e-002; ng(n+1)=6.093658e+001;
n=90; farx(n+1)=1.000523e+000; foe(n+1)=1.051256e+000; krok(n+1)=2.691279e-002; ng(n+1)=1.852117e+002;
n=91; farx(n+1)=9.954324e-001; foe(n+1)=1.036438e+000; krok(n+1)=1.867645e-002; ng(n+1)=2.228125e+002;
n=92; farx(n+1)=9.946634e-001; foe(n+1)=1.023811e+000; krok(n+1)=2.272397e-002; ng(n+1)=2.254176e+002;
n=93; farx(n+1)=9.863345e-001; foe(n+1)=1.002394e+000; krok(n+1)=2.331518e-002; ng(n+1)=1.364093e+002;
n=94; farx(n+1)=9.881477e-001; foe(n+1)=9.832396e-001; krok(n+1)=3.687875e-002; ng(n+1)=1.030711e+002;
n=95; farx(n+1)=9.897855e-001; foe(n+1)=9.775091e-001; krok(n+1)=1.400181e-002; ng(n+1)=1.188122e+002;
n=96; farx(n+1)=9.921864e-001; foe(n+1)=9.663305e-001; krok(n+1)=3.696362e-002; ng(n+1)=1.447431e+002;
n=97; farx(n+1)=1.006197e+000; foe(n+1)=9.467250e-001; krok(n+1)=3.149998e-002; ng(n+1)=2.009845e+002;
n=98; farx(n+1)=1.010311e+000; foe(n+1)=9.393687e-001; krok(n+1)=8.855578e-003; ng(n+1)=2.767842e+002;
n=99; farx(n+1)=1.025773e+000; foe(n+1)=9.206844e-001; krok(n+1)=3.830459e-002; ng(n+1)=2.441951e+002;
n=100; farx(n+1)=1.026592e+000; foe(n+1)=9.035985e-001; krok(n+1)=7.173481e-002; ng(n+1)=1.125595e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
