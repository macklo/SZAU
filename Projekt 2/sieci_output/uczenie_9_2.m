%uczenie predyktora oe
clear all;
n=0; farx(n+1)=4.667275e+003; foe(n+1)=4.635315e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=3.073611e+003; foe(n+1)=2.928898e+003; krok(n+1)=4.987505e-004; ng(n+1)=6.155779e+003;
n=2; farx(n+1)=1.472341e+003; foe(n+1)=1.108452e+003; krok(n+1)=2.972972e-003; ng(n+1)=2.238790e+003;
n=3; farx(n+1)=1.996710e+003; foe(n+1)=7.392554e+002; krok(n+1)=1.935115e-004; ng(n+1)=9.137387e+003;
n=4; farx(n+1)=2.626075e+003; foe(n+1)=6.218984e+002; krok(n+1)=3.192302e-004; ng(n+1)=8.082941e+003;
n=5; farx(n+1)=2.460223e+003; foe(n+1)=5.550674e+002; krok(n+1)=2.621411e-003; ng(n+1)=1.431272e+003;
n=6; farx(n+1)=2.206182e+003; foe(n+1)=5.316226e+002; krok(n+1)=4.498477e-003; ng(n+1)=6.826002e+002;
n=7; farx(n+1)=1.740907e+003; foe(n+1)=5.045660e+002; krok(n+1)=4.047370e-004; ng(n+1)=1.985932e+003;
n=8; farx(n+1)=1.000367e+003; foe(n+1)=4.517583e+002; krok(n+1)=1.142218e-002; ng(n+1)=1.688899e+003;
n=9; farx(n+1)=1.451869e+002; foe(n+1)=2.592801e+002; krok(n+1)=1.713514e-003; ng(n+1)=4.394723e+003;
n=10; farx(n+1)=1.357238e+002; foe(n+1)=2.581558e+002; krok(n+1)=3.298006e-005; ng(n+1)=5.476057e+003;
n=11; farx(n+1)=1.574410e+002; foe(n+1)=2.491176e+002; krok(n+1)=8.468065e-003; ng(n+1)=4.678417e+003;
n=12; farx(n+1)=1.665351e+002; foe(n+1)=2.450294e+002; krok(n+1)=2.619761e-004; ng(n+1)=3.604500e+003;
n=13; farx(n+1)=1.603346e+002; foe(n+1)=2.416884e+002; krok(n+1)=7.068943e-004; ng(n+1)=2.110273e+003;
n=14; farx(n+1)=1.571386e+002; foe(n+1)=2.354232e+002; krok(n+1)=1.945533e-003; ng(n+1)=6.098914e+002;
n=15; farx(n+1)=1.478290e+002; foe(n+1)=2.305108e+002; krok(n+1)=6.767654e-004; ng(n+1)=1.875920e+003;
n=16; farx(n+1)=1.337616e+002; foe(n+1)=2.243535e+002; krok(n+1)=1.201509e-003; ng(n+1)=2.261703e+003;
n=17; farx(n+1)=8.630625e+001; foe(n+1)=2.052191e+002; krok(n+1)=3.259300e-003; ng(n+1)=7.067630e+002;
n=18; farx(n+1)=6.016369e+001; foe(n+1)=1.791573e+002; krok(n+1)=5.823131e-004; ng(n+1)=5.091954e+003;
n=19; farx(n+1)=4.871319e+001; foe(n+1)=1.668752e+002; krok(n+1)=6.384605e-004; ng(n+1)=4.043609e+003;
n=20; farx(n+1)=4.578502e+001; foe(n+1)=1.555957e+002; krok(n+1)=2.011450e-004; ng(n+1)=5.054231e+003;
n=21; farx(n+1)=4.473982e+001; foe(n+1)=1.547406e+002; krok(n+1)=1.351337e-004; ng(n+1)=4.371524e+003;
n=22; farx(n+1)=4.396134e+001; foe(n+1)=1.533183e+002; krok(n+1)=1.532716e-004; ng(n+1)=4.098516e+003;
n=23; farx(n+1)=4.201456e+001; foe(n+1)=1.459867e+002; krok(n+1)=8.566255e-004; ng(n+1)=5.967464e+003;
n=24; farx(n+1)=4.165578e+001; foe(n+1)=1.454208e+002; krok(n+1)=2.436365e-004; ng(n+1)=5.720511e+003;
n=25; farx(n+1)=4.127099e+001; foe(n+1)=1.425917e+002; krok(n+1)=5.604282e-004; ng(n+1)=6.811398e+003;
%odnowa zmiennej metryki
n=26; farx(n+1)=4.074467e+001; foe(n+1)=1.379014e+002; krok(n+1)=2.875755e-006; ng(n+1)=6.005132e+003;
n=27; farx(n+1)=4.107550e+001; foe(n+1)=1.327451e+002; krok(n+1)=2.502989e-006; ng(n+1)=8.642549e+003;
n=28; farx(n+1)=4.089646e+001; foe(n+1)=1.307598e+002; krok(n+1)=2.689353e-006; ng(n+1)=3.407826e+003;
n=29; farx(n+1)=3.740005e+001; foe(n+1)=1.137392e+002; krok(n+1)=1.523885e-004; ng(n+1)=2.008705e+003;
n=30; farx(n+1)=3.339462e+001; foe(n+1)=8.757939e+001; krok(n+1)=1.387045e-003; ng(n+1)=4.634385e+003;
n=31; farx(n+1)=3.299045e+001; foe(n+1)=8.623622e+001; krok(n+1)=6.673233e-005; ng(n+1)=2.885285e+003;
n=32; farx(n+1)=3.031112e+001; foe(n+1)=7.371812e+001; krok(n+1)=4.752267e-004; ng(n+1)=5.703071e+003;
n=33; farx(n+1)=2.961365e+001; foe(n+1)=6.872763e+001; krok(n+1)=2.148506e-004; ng(n+1)=3.225558e+004;
n=34; farx(n+1)=2.890585e+001; foe(n+1)=6.689798e+001; krok(n+1)=1.501886e-004; ng(n+1)=5.118046e+003;
n=35; farx(n+1)=2.590716e+001; foe(n+1)=5.983567e+001; krok(n+1)=1.442683e-003; ng(n+1)=3.646825e+003;
n=36; farx(n+1)=2.519534e+001; foe(n+1)=5.351773e+001; krok(n+1)=9.802182e-005; ng(n+1)=7.657566e+003;
n=37; farx(n+1)=2.217647e+001; foe(n+1)=4.947793e+001; krok(n+1)=1.573435e-003; ng(n+1)=8.333534e+003;
n=38; farx(n+1)=1.601080e+001; foe(n+1)=4.158987e+001; krok(n+1)=6.459813e-004; ng(n+1)=7.814341e+003;
n=39; farx(n+1)=8.280188e+000; foe(n+1)=3.032655e+001; krok(n+1)=1.587460e-003; ng(n+1)=7.876193e+003;
n=40; farx(n+1)=6.892225e+000; foe(n+1)=2.711161e+001; krok(n+1)=1.869031e-004; ng(n+1)=1.280593e+004;
n=41; farx(n+1)=6.806327e+000; foe(n+1)=2.351630e+001; krok(n+1)=5.362933e-004; ng(n+1)=8.590987e+003;
n=42; farx(n+1)=5.008566e+000; foe(n+1)=2.120139e+001; krok(n+1)=2.511123e-003; ng(n+1)=5.252276e+003;
n=43; farx(n+1)=4.158107e+000; foe(n+1)=1.888474e+001; krok(n+1)=3.456065e-003; ng(n+1)=2.997311e+003;
n=44; farx(n+1)=3.518228e+000; foe(n+1)=1.643655e+001; krok(n+1)=1.986798e-003; ng(n+1)=3.467187e+003;
n=45; farx(n+1)=3.023636e+000; foe(n+1)=1.171193e+001; krok(n+1)=4.633174e-003; ng(n+1)=5.861432e+003;
n=46; farx(n+1)=2.866798e+000; foe(n+1)=1.039766e+001; krok(n+1)=3.683227e-003; ng(n+1)=1.804049e+003;
n=47; farx(n+1)=2.804206e+000; foe(n+1)=1.002841e+001; krok(n+1)=1.358387e-003; ng(n+1)=2.157770e+003;
n=48; farx(n+1)=2.682541e+000; foe(n+1)=8.449882e+000; krok(n+1)=8.252113e-003; ng(n+1)=1.723916e+003;
n=49; farx(n+1)=2.312516e+000; foe(n+1)=6.053629e+000; krok(n+1)=1.109636e-002; ng(n+1)=3.463493e+003;
n=50; farx(n+1)=2.237845e+000; foe(n+1)=5.555739e+000; krok(n+1)=1.621660e-002; ng(n+1)=9.373636e+002;
%odnowa zmiennej metryki
n=51; farx(n+1)=2.225215e+000; foe(n+1)=5.509047e+000; krok(n+1)=1.552737e-006; ng(n+1)=7.591173e+002;
n=52; farx(n+1)=2.229048e+000; foe(n+1)=5.344745e+000; krok(n+1)=1.757217e-005; ng(n+1)=4.571221e+002;
n=53; farx(n+1)=2.240894e+000; foe(n+1)=5.085405e+000; krok(n+1)=1.558957e-005; ng(n+1)=5.959292e+002;
n=54; farx(n+1)=2.233882e+000; foe(n+1)=4.890532e+000; krok(n+1)=5.445660e-005; ng(n+1)=2.833336e+002;
n=55; farx(n+1)=2.174960e+000; foe(n+1)=4.562971e+000; krok(n+1)=2.548531e-004; ng(n+1)=1.685595e+002;
n=56; farx(n+1)=2.049492e+000; foe(n+1)=4.010535e+000; krok(n+1)=3.544455e-003; ng(n+1)=1.484687e+002;
n=57; farx(n+1)=2.005899e+000; foe(n+1)=3.760165e+000; krok(n+1)=2.118327e-003; ng(n+1)=4.034579e+002;
n=58; farx(n+1)=1.999571e+000; foe(n+1)=3.571309e+000; krok(n+1)=4.478448e-003; ng(n+1)=1.767904e+002;
n=59; farx(n+1)=1.822533e+000; foe(n+1)=3.322017e+000; krok(n+1)=5.608324e-003; ng(n+1)=2.626934e+002;
n=60; farx(n+1)=1.737673e+000; foe(n+1)=3.226969e+000; krok(n+1)=6.042575e-003; ng(n+1)=3.902167e+002;
n=61; farx(n+1)=1.685478e+000; foe(n+1)=3.155020e+000; krok(n+1)=3.904632e-003; ng(n+1)=6.471273e+002;
n=62; farx(n+1)=1.561137e+000; foe(n+1)=2.947353e+000; krok(n+1)=1.470844e-002; ng(n+1)=5.367401e+002;
n=63; farx(n+1)=1.482403e+000; foe(n+1)=2.778621e+000; krok(n+1)=1.333847e-002; ng(n+1)=8.730583e+002;
n=64; farx(n+1)=1.436464e+000; foe(n+1)=2.696579e+000; krok(n+1)=5.557598e-003; ng(n+1)=5.053980e+002;
n=65; farx(n+1)=1.406172e+000; foe(n+1)=2.611384e+000; krok(n+1)=2.069473e-002; ng(n+1)=4.809557e+002;
n=66; farx(n+1)=1.398969e+000; foe(n+1)=2.561176e+000; krok(n+1)=9.899545e-003; ng(n+1)=2.893794e+002;
n=67; farx(n+1)=1.362062e+000; foe(n+1)=2.475319e+000; krok(n+1)=2.254943e-002; ng(n+1)=4.054253e+002;
n=68; farx(n+1)=1.301645e+000; foe(n+1)=2.373298e+000; krok(n+1)=1.438335e-002; ng(n+1)=5.637006e+002;
n=69; farx(n+1)=1.265122e+000; foe(n+1)=2.252597e+000; krok(n+1)=1.540867e-002; ng(n+1)=3.470810e+002;
n=70; farx(n+1)=1.275952e+000; foe(n+1)=2.179453e+000; krok(n+1)=1.750226e-002; ng(n+1)=3.479881e+002;
n=71; farx(n+1)=1.418446e+000; foe(n+1)=1.983942e+000; krok(n+1)=2.049366e-002; ng(n+1)=2.584414e+002;
n=72; farx(n+1)=1.228223e+000; foe(n+1)=1.654201e+000; krok(n+1)=3.685289e-002; ng(n+1)=4.011990e+002;
n=73; farx(n+1)=1.175141e+000; foe(n+1)=1.557704e+000; krok(n+1)=2.539936e-002; ng(n+1)=2.734039e+002;
n=74; farx(n+1)=1.210735e+000; foe(n+1)=1.484017e+000; krok(n+1)=3.794479e-002; ng(n+1)=1.934693e+002;
n=75; farx(n+1)=1.193606e+000; foe(n+1)=1.423075e+000; krok(n+1)=8.704305e-003; ng(n+1)=5.379710e+002;
%odnowa zmiennej metryki
n=76; farx(n+1)=1.192893e+000; foe(n+1)=1.383072e+000; krok(n+1)=5.552069e-007; ng(n+1)=1.245590e+003;
n=77; farx(n+1)=1.190976e+000; foe(n+1)=1.373595e+000; krok(n+1)=5.377097e-006; ng(n+1)=2.066795e+002;
n=78; farx(n+1)=1.190821e+000; foe(n+1)=1.361646e+000; krok(n+1)=4.273013e-006; ng(n+1)=2.264580e+002;
n=79; farx(n+1)=1.188101e+000; foe(n+1)=1.336045e+000; krok(n+1)=4.073759e-005; ng(n+1)=1.296924e+002;
n=80; farx(n+1)=1.184878e+000; foe(n+1)=1.270965e+000; krok(n+1)=2.710039e-004; ng(n+1)=6.008754e+001;
n=81; farx(n+1)=1.185113e+000; foe(n+1)=1.252095e+000; krok(n+1)=2.178264e-004; ng(n+1)=5.098546e+001;
n=82; farx(n+1)=1.146558e+000; foe(n+1)=1.208222e+000; krok(n+1)=4.563662e-003; ng(n+1)=3.375377e+001;
n=83; farx(n+1)=1.146150e+000; foe(n+1)=1.200762e+000; krok(n+1)=1.674853e-003; ng(n+1)=7.020324e+001;
n=84; farx(n+1)=1.145227e+000; foe(n+1)=1.165933e+000; krok(n+1)=1.160327e-002; ng(n+1)=5.728668e+001;
n=85; farx(n+1)=1.132875e+000; foe(n+1)=1.134039e+000; krok(n+1)=6.081190e-003; ng(n+1)=8.860289e+001;
n=86; farx(n+1)=1.128207e+000; foe(n+1)=1.119732e+000; krok(n+1)=2.261309e-003; ng(n+1)=4.347627e+002;
n=87; farx(n+1)=1.134212e+000; foe(n+1)=1.108135e+000; krok(n+1)=4.437686e-003; ng(n+1)=1.988661e+002;
n=88; farx(n+1)=1.160647e+000; foe(n+1)=1.082060e+000; krok(n+1)=1.270603e-002; ng(n+1)=2.545201e+002;
n=89; farx(n+1)=1.160956e+000; foe(n+1)=1.035937e+000; krok(n+1)=5.266571e-002; ng(n+1)=4.411104e+002;
n=90; farx(n+1)=1.170233e+000; foe(n+1)=1.013085e+000; krok(n+1)=5.699196e-003; ng(n+1)=5.528325e+002;
n=91; farx(n+1)=1.170525e+000; foe(n+1)=1.003179e+000; krok(n+1)=1.664870e-002; ng(n+1)=1.648353e+002;
n=92; farx(n+1)=1.167443e+000; foe(n+1)=9.921006e-001; krok(n+1)=3.400118e-003; ng(n+1)=3.267199e+002;
n=93; farx(n+1)=1.169321e+000; foe(n+1)=9.874530e-001; krok(n+1)=6.700076e-003; ng(n+1)=1.665575e+002;
n=94; farx(n+1)=1.163560e+000; foe(n+1)=9.564076e-001; krok(n+1)=7.765706e-002; ng(n+1)=3.107396e+002;
n=95; farx(n+1)=1.167885e+000; foe(n+1)=9.264570e-001; krok(n+1)=7.431643e-002; ng(n+1)=2.813279e+002;
n=96; farx(n+1)=1.152070e+000; foe(n+1)=9.029062e-001; krok(n+1)=5.140248e-002; ng(n+1)=5.602514e+002;
n=97; farx(n+1)=1.155249e+000; foe(n+1)=8.970993e-001; krok(n+1)=1.270603e-002; ng(n+1)=1.105218e+002;
n=98; farx(n+1)=1.162540e+000; foe(n+1)=8.900925e-001; krok(n+1)=3.951655e-002; ng(n+1)=3.210858e+002;
n=99; farx(n+1)=1.168777e+000; foe(n+1)=8.667590e-001; krok(n+1)=1.225752e-001; ng(n+1)=1.601820e+002;
n=100; farx(n+1)=1.171962e+000; foe(n+1)=8.594276e-001; krok(n+1)=4.757597e-002; ng(n+1)=2.198584e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
