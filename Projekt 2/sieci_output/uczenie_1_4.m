%uczenie predyktora oe
clear all;
n=0; farx(n+1)=4.031207e+003; foe(n+1)=4.049689e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=3.043345e+003; foe(n+1)=3.044896e+003; krok(n+1)=5.033545e-004; ng(n+1)=1.635557e+003;
n=2; farx(n+1)=3.120969e+003; foe(n+1)=3.026307e+003; krok(n+1)=2.855545e-003; ng(n+1)=9.581288e+001;
n=3; farx(n+1)=5.824830e+002; foe(n+1)=4.853587e+002; krok(n+1)=1.757317e-003; ng(n+1)=6.950466e+002;
n=4; farx(n+1)=5.762782e+002; foe(n+1)=4.802027e+002; krok(n+1)=3.773212e-005; ng(n+1)=6.526563e+002;
n=5; farx(n+1)=5.876183e+002; foe(n+1)=4.798928e+002; krok(n+1)=3.031326e-005; ng(n+1)=5.718647e+002;
n=6; farx(n+1)=6.287383e+002; foe(n+1)=4.672002e+002; krok(n+1)=6.222704e-004; ng(n+1)=4.081081e+002;
n=7; farx(n+1)=6.320806e+002; foe(n+1)=4.660115e+002; krok(n+1)=3.544455e-003; ng(n+1)=3.605710e+002;
n=8; farx(n+1)=1.402236e+002; foe(n+1)=3.480009e+002; krok(n+1)=1.202388e+000; ng(n+1)=3.599688e+002;
n=9; farx(n+1)=1.030965e+002; foe(n+1)=3.317895e+002; krok(n+1)=1.400181e-001; ng(n+1)=2.948867e+003;
n=10; farx(n+1)=5.233701e+001; foe(n+1)=2.417524e+002; krok(n+1)=3.206354e-001; ng(n+1)=4.236998e+003;
n=11; farx(n+1)=1.555681e+001; foe(n+1)=1.130795e+002; krok(n+1)=1.357350e-001; ng(n+1)=4.207113e+003;
n=12; farx(n+1)=1.151080e+001; foe(n+1)=9.635371e+001; krok(n+1)=1.961845e-001; ng(n+1)=3.654788e+003;
n=13; farx(n+1)=1.212247e+001; foe(n+1)=9.140694e+001; krok(n+1)=2.833785e-001; ng(n+1)=7.025697e+002;
n=14; farx(n+1)=1.231658e+001; foe(n+1)=9.029516e+001; krok(n+1)=5.896462e-001; ng(n+1)=3.358180e+002;
n=15; farx(n+1)=9.713227e+000; foe(n+1)=8.454068e+001; krok(n+1)=1.120145e+000; ng(n+1)=4.698647e+002;
n=16; farx(n+1)=9.706177e+000; foe(n+1)=8.363459e+001; krok(n+1)=1.312841e+000; ng(n+1)=9.273322e+002;
n=17; farx(n+1)=9.371350e+000; foe(n+1)=8.326072e+001; krok(n+1)=4.193720e+000; ng(n+1)=8.782601e+001;
n=18; farx(n+1)=9.243062e+000; foe(n+1)=8.311487e+001; krok(n+1)=2.034481e+000; ng(n+1)=2.085837e+002;
n=19; farx(n+1)=9.318477e+000; foe(n+1)=8.309071e+001; krok(n+1)=1.355274e+000; ng(n+1)=5.777886e+001;
n=20; farx(n+1)=9.329328e+000; foe(n+1)=8.307530e+001; krok(n+1)=4.970052e+000; ng(n+1)=2.687500e+001;
n=21; farx(n+1)=9.333969e+000; foe(n+1)=8.302264e+001; krok(n+1)=4.602211e+000; ng(n+1)=5.152208e+001;
n=22; farx(n+1)=9.360628e+000; foe(n+1)=8.301050e+001; krok(n+1)=1.157348e+000; ng(n+1)=6.963490e+001;
n=23; farx(n+1)=9.361643e+000; foe(n+1)=8.301004e+001; krok(n+1)=1.003200e+000; ng(n+1)=8.888301e+000;
n=24; farx(n+1)=9.359450e+000; foe(n+1)=8.301002e+001; krok(n+1)=2.172575e+000; ng(n+1)=2.112215e+000;
n=25; farx(n+1)=9.347607e+000; foe(n+1)=8.300976e+001; krok(n+1)=2.758545e+001; ng(n+1)=2.027772e+000;
%odnowa zmiennej metryki
n=26; farx(n+1)=9.348439e+000; foe(n+1)=8.300972e+001; krok(n+1)=3.720187e-006; ng(n+1)=7.984790e+000;
n=27; farx(n+1)=9.346255e+000; foe(n+1)=8.300966e+001; krok(n+1)=2.468559e-005; ng(n+1)=3.718107e+000;
n=28; farx(n+1)=9.342774e+000; foe(n+1)=8.300959e+001; krok(n+1)=8.923578e-005; ng(n+1)=2.033268e+000;
n=29; farx(n+1)=9.331763e+000; foe(n+1)=8.300911e+001; krok(n+1)=5.381741e-003; ng(n+1)=6.789482e-001;
n=30; farx(n+1)=9.269912e+000; foe(n+1)=8.300834e+001; krok(n+1)=2.113019e-002; ng(n+1)=4.777545e-001;
n=31; farx(n+1)=9.167329e+000; foe(n+1)=8.300610e+001; krok(n+1)=1.966568e-002; ng(n+1)=8.806524e-001;
n=32; farx(n+1)=9.141561e+000; foe(n+1)=8.300565e+001; krok(n+1)=3.497807e-002; ng(n+1)=7.417801e-001;
n=33; farx(n+1)=9.136110e+000; foe(n+1)=8.300561e+001; krok(n+1)=1.180464e+000; ng(n+1)=1.768310e+000;
n=34; farx(n+1)=9.134782e+000; foe(n+1)=8.300561e+001; krok(n+1)=1.056325e+000; ng(n+1)=4.268507e-001;
n=35; farx(n+1)=9.134782e+000; foe(n+1)=8.300561e+001; krok(n+1)=1.046074e-005; ng(n+1)=2.226192e-002;
n=36; farx(n+1)=9.134782e+000; foe(n+1)=8.300561e+001; krok(n+1)=1.026472e-005; ng(n+1)=2.226169e-002;
n=37; farx(n+1)=9.134782e+000; foe(n+1)=8.300561e+001; krok(n+1)=2.709072e-006; ng(n+1)=2.226146e-002;
n=38; farx(n+1)=9.134782e+000; foe(n+1)=8.300561e+001; krok(n+1)=8.288613e-006; ng(n+1)=2.226140e-002;
n=39; farx(n+1)=9.134812e+000; foe(n+1)=8.300561e+001; krok(n+1)=9.976977e-001; ng(n+1)=2.226122e-002;
n=40; farx(n+1)=9.134812e+000; foe(n+1)=8.300561e+001; krok(n+1)=3.712708e-006; ng(n+1)=5.213891e-005;
n=41; farx(n+1)=9.134812e+000; foe(n+1)=8.300561e+001; krok(n+1)=2.674848e-006; ng(n+1)=5.213873e-005;
n=42; farx(n+1)=9.134812e+000; foe(n+1)=8.300561e+001; krok(n+1)=3.532738e-007; ng(n+1)=5.213859e-005;
n=43; farx(n+1)=9.134812e+000; foe(n+1)=8.300561e+001; krok(n+1)=7.967685e-008; ng(n+1)=5.213857e-005;
n=44; farx(n+1)=9.134812e+000; foe(n+1)=8.300561e+001; krok(n+1)=6.150701e-007; ng(n+1)=5.213859e-005;
n=45; farx(n+1)=9.134812e+000; foe(n+1)=8.300561e+001; krok(n+1)=1.547404e-009; ng(n+1)=5.213853e-005;
n=46; farx(n+1)=9.134812e+000; foe(n+1)=8.300561e+001; krok(n+1)=3.579121e-009; ng(n+1)=5.213855e-005;
n=47; farx(n+1)=9.134812e+000; foe(n+1)=8.300561e+001; krok(n+1)=1.239956e-006; ng(n+1)=5.213856e-005;
n=48; farx(n+1)=9.134812e+000; foe(n+1)=8.300561e+001; krok(n+1)=6.978174e-008; ng(n+1)=5.213769e-005;
n=49; farx(n+1)=9.134812e+000; foe(n+1)=8.300561e+001; krok(n+1)=1.331493e-006; ng(n+1)=5.213770e-005;
n=50; farx(n+1)=9.134812e+000; foe(n+1)=8.300561e+001; krok(n+1)=8.809319e-006; ng(n+1)=5.232917e-005;
%odnowa zmiennej metryki
n=51; farx(n+1)=9.134812e+000; foe(n+1)=8.300561e+001; krok(n+1)=1.065195e-005; ng(n+1)=5.232868e-005;
n=52; farx(n+1)=9.134812e+000; foe(n+1)=8.300561e+001; krok(n+1)=2.391621e-010; ng(n+1)=1.421873e-004;
n=53; farx(n+1)=9.134812e+000; foe(n+1)=8.300561e+001; krok(n+1)=3.670517e-011; ng(n+1)=1.421873e-004;
n=54; farx(n+1)=9.134812e+000; foe(n+1)=8.300561e+001; krok(n+1)=6.902750e-009; ng(n+1)=1.421873e-004;
n=55; farx(n+1)=9.134812e+000; foe(n+1)=8.300561e+001; krok(n+1)=1.775919e-005; ng(n+1)=1.421867e-004;
n=56; farx(n+1)=9.134812e+000; foe(n+1)=8.300561e+001; krok(n+1)=5.940441e-007; ng(n+1)=1.420485e-004;
n=57; farx(n+1)=9.134812e+000; foe(n+1)=8.300561e+001; krok(n+1)=5.586175e-008; ng(n+1)=1.420475e-004;
n=58; farx(n+1)=9.134812e+000; foe(n+1)=8.300561e+001; krok(n+1)=2.016489e-007; ng(n+1)=1.420474e-004;
n=59; farx(n+1)=9.134812e+000; foe(n+1)=8.300561e+001; krok(n+1)=1.408452e-005; ng(n+1)=1.420473e-004;
n=60; farx(n+1)=9.134812e+000; foe(n+1)=8.300561e+001; krok(n+1)=1.337424e-006; ng(n+1)=1.420418e-004;
n=61; farx(n+1)=9.134812e+000; foe(n+1)=8.300561e+001; krok(n+1)=8.383669e-008; ng(n+1)=1.420415e-004;
 % z³y kierunek w metodzie zm - odnowa 
n=62; farx(n+1)=9.134812e+000; foe(n+1)=8.300561e+001; krok(n+1)=3.605271e-011; ng(n+1)=1.420415e-004;
 % z³y kierunek w metodzie zm - odnowa 
 % z³y kierunek w metodzie zm po wykonaniu odnowy

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
