%uczenie predyktora oe
clear all;
n=0; farx(n+1)=4.138966e+003; foe(n+1)=4.071252e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=3.111409e+003; foe(n+1)=2.993114e+003; krok(n+1)=5.216764e-004; ng(n+1)=2.859221e+003;
n=2; farx(n+1)=1.114497e+003; foe(n+1)=7.880328e+002; krok(n+1)=5.414124e-003; ng(n+1)=1.060926e+003;
n=3; farx(n+1)=1.217743e+003; foe(n+1)=6.608290e+002; krok(n+1)=1.112180e-004; ng(n+1)=4.241964e+003;
n=4; farx(n+1)=1.811597e+003; foe(n+1)=5.722307e+002; krok(n+1)=4.957630e-004; ng(n+1)=4.922841e+003;
n=5; farx(n+1)=1.536424e+003; foe(n+1)=5.223712e+002; krok(n+1)=5.843731e-003; ng(n+1)=7.128329e+002;
n=6; farx(n+1)=1.359730e+003; foe(n+1)=5.123643e+002; krok(n+1)=1.015069e-003; ng(n+1)=5.946335e+002;
n=7; farx(n+1)=8.666605e+001; foe(n+1)=2.376835e+002; krok(n+1)=8.389306e-004; ng(n+1)=1.871686e+003;
n=8; farx(n+1)=8.140318e+001; foe(n+1)=2.366041e+002; krok(n+1)=1.666649e-005; ng(n+1)=2.453116e+003;
n=9; farx(n+1)=7.737338e+001; foe(n+1)=2.348141e+002; krok(n+1)=8.989513e-004; ng(n+1)=2.273237e+003;
n=10; farx(n+1)=6.687116e+001; foe(n+1)=2.282601e+002; krok(n+1)=3.683227e-003; ng(n+1)=2.707820e+003;
n=11; farx(n+1)=5.229619e+001; foe(n+1)=2.092483e+002; krok(n+1)=1.191677e-003; ng(n+1)=2.866759e+003;
n=12; farx(n+1)=4.908546e+001; foe(n+1)=2.066721e+002; krok(n+1)=8.790130e-004; ng(n+1)=1.821895e+003;
n=13; farx(n+1)=4.808787e+001; foe(n+1)=2.058372e+002; krok(n+1)=2.157932e-004; ng(n+1)=1.823291e+003;
n=14; farx(n+1)=4.927340e+001; foe(n+1)=1.884390e+002; krok(n+1)=1.189399e-002; ng(n+1)=1.925409e+003;
n=15; farx(n+1)=4.530921e+001; foe(n+1)=1.824864e+002; krok(n+1)=4.187528e-003; ng(n+1)=1.364496e+003;
n=16; farx(n+1)=3.328303e+001; foe(n+1)=1.650407e+002; krok(n+1)=9.127324e-003; ng(n+1)=9.979680e+002;
n=17; farx(n+1)=3.299746e+001; foe(n+1)=1.631384e+002; krok(n+1)=1.940336e-003; ng(n+1)=1.297958e+003;
n=18; farx(n+1)=2.926584e+001; foe(n+1)=1.566261e+002; krok(n+1)=1.076348e-002; ng(n+1)=1.763633e+003;
n=19; farx(n+1)=2.753972e+001; foe(n+1)=1.527816e+002; krok(n+1)=1.464637e-003; ng(n+1)=2.835158e+003;
n=20; farx(n+1)=2.971966e+001; foe(n+1)=1.450212e+002; krok(n+1)=4.953895e-002; ng(n+1)=3.804796e+003;
n=21; farx(n+1)=2.367269e+001; foe(n+1)=1.350588e+002; krok(n+1)=2.630605e-002; ng(n+1)=3.144471e+003;
n=22; farx(n+1)=1.952095e+001; foe(n+1)=1.226517e+002; krok(n+1)=1.165868e-002; ng(n+1)=3.467307e+003;
n=23; farx(n+1)=1.733801e+001; foe(n+1)=1.154831e+002; krok(n+1)=3.452721e-002; ng(n+1)=4.593618e+003;
n=24; farx(n+1)=1.676770e+001; foe(n+1)=8.762704e+001; krok(n+1)=6.141269e-002; ng(n+1)=3.604112e+003;
n=25; farx(n+1)=1.402088e+001; foe(n+1)=6.683477e+001; krok(n+1)=7.936896e-002; ng(n+1)=6.019153e+003;
%odnowa zmiennej metryki
n=26; farx(n+1)=1.323597e+001; foe(n+1)=6.452888e+001; krok(n+1)=1.392631e-006; ng(n+1)=4.756726e+003;
n=27; farx(n+1)=1.223957e+001; foe(n+1)=6.255779e+001; krok(n+1)=8.379583e-006; ng(n+1)=1.943994e+003;
n=28; farx(n+1)=1.163269e+001; foe(n+1)=5.950411e+001; krok(n+1)=3.009506e-005; ng(n+1)=1.100438e+003;
n=29; farx(n+1)=1.156660e+001; foe(n+1)=4.969336e+001; krok(n+1)=3.656039e-004; ng(n+1)=8.319119e+002;
n=30; farx(n+1)=1.146503e+001; foe(n+1)=4.026638e+001; krok(n+1)=1.427772e-003; ng(n+1)=1.325335e+003;
n=31; farx(n+1)=1.136011e+001; foe(n+1)=3.716658e+001; krok(n+1)=3.096185e-003; ng(n+1)=2.659899e+003;
n=32; farx(n+1)=1.069405e+001; foe(n+1)=3.397162e+001; krok(n+1)=3.721397e-003; ng(n+1)=1.311247e+003;
n=33; farx(n+1)=1.026815e+001; foe(n+1)=3.315342e+001; krok(n+1)=1.163400e-003; ng(n+1)=2.642076e+003;
n=34; farx(n+1)=8.239252e+000; foe(n+1)=3.182699e+001; krok(n+1)=2.107682e-002; ng(n+1)=2.250219e+003;
n=35; farx(n+1)=7.367965e+000; foe(n+1)=3.127822e+001; krok(n+1)=2.778799e-003; ng(n+1)=2.426461e+002;
n=36; farx(n+1)=6.781700e+000; foe(n+1)=3.098580e+001; krok(n+1)=3.174920e-003; ng(n+1)=8.467072e+002;
n=37; farx(n+1)=5.968791e+000; foe(n+1)=3.040195e+001; krok(n+1)=1.299379e-002; ng(n+1)=4.215637e+002;
n=38; farx(n+1)=5.853467e+000; foe(n+1)=3.012624e+001; krok(n+1)=6.353015e-003; ng(n+1)=5.702812e+002;
n=39; farx(n+1)=5.436809e+000; foe(n+1)=2.923386e+001; krok(n+1)=2.804731e-002; ng(n+1)=6.203062e+002;
n=40; farx(n+1)=5.526017e+000; foe(n+1)=2.894246e+001; krok(n+1)=1.204622e-002; ng(n+1)=7.703733e+002;
n=41; farx(n+1)=5.365305e+000; foe(n+1)=2.792647e+001; krok(n+1)=7.266281e-002; ng(n+1)=1.012903e+003;
n=42; farx(n+1)=5.253912e+000; foe(n+1)=2.680882e+001; krok(n+1)=2.069473e-002; ng(n+1)=8.699226e+002;
n=43; farx(n+1)=4.953078e+000; foe(n+1)=2.630666e+001; krok(n+1)=8.300976e-003; ng(n+1)=3.136278e+003;
n=44; farx(n+1)=4.964693e+000; foe(n+1)=2.580459e+001; krok(n+1)=3.607652e-002; ng(n+1)=2.305554e+003;
n=45; farx(n+1)=4.950592e+000; foe(n+1)=2.390848e+001; krok(n+1)=1.019950e-001; ng(n+1)=1.944066e+003;
n=46; farx(n+1)=4.797221e+000; foe(n+1)=2.184102e+001; krok(n+1)=2.515191e-001; ng(n+1)=4.697674e+002;
n=47; farx(n+1)=5.592510e+000; foe(n+1)=1.922474e+001; krok(n+1)=2.078285e-001; ng(n+1)=3.334941e+003;
n=48; farx(n+1)=5.605053e+000; foe(n+1)=1.903018e+001; krok(n+1)=2.587965e-002; ng(n+1)=1.068793e+003;
n=49; farx(n+1)=5.621019e+000; foe(n+1)=1.892952e+001; krok(n+1)=1.207035e-002; ng(n+1)=1.053838e+003;
n=50; farx(n+1)=5.556990e+000; foe(n+1)=1.865352e+001; krok(n+1)=1.139839e-002; ng(n+1)=7.567358e+003;
%odnowa zmiennej metryki
n=51; farx(n+1)=5.557201e+000; foe(n+1)=1.862294e+001; krok(n+1)=1.705704e-009; ng(n+1)=1.157266e+004;
n=52; farx(n+1)=5.564639e+000; foe(n+1)=1.859872e+001; krok(n+1)=2.775761e-006; ng(n+1)=2.408206e+002;
n=53; farx(n+1)=5.548490e+000; foe(n+1)=1.858914e+001; krok(n+1)=4.554340e-005; ng(n+1)=1.270604e+003;
n=54; farx(n+1)=5.547166e+000; foe(n+1)=1.841977e+001; krok(n+1)=1.697983e-004; ng(n+1)=9.332832e+002;
n=55; farx(n+1)=5.020907e+000; foe(n+1)=1.803558e+001; krok(n+1)=4.483426e-003; ng(n+1)=3.406528e+003;
n=56; farx(n+1)=5.022803e+000; foe(n+1)=1.792396e+001; krok(n+1)=1.667309e-003; ng(n+1)=3.192344e+002;
n=57; farx(n+1)=4.899536e+000; foe(n+1)=1.772083e+001; krok(n+1)=1.345435e-003; ng(n+1)=2.652303e+003;
n=58; farx(n+1)=4.637914e+000; foe(n+1)=1.744264e+001; krok(n+1)=6.607631e-003; ng(n+1)=1.804846e+003;
n=59; farx(n+1)=4.575878e+000; foe(n+1)=1.737419e+001; krok(n+1)=1.302087e-003; ng(n+1)=2.443041e+003;
n=60; farx(n+1)=4.575755e+000; foe(n+1)=1.721433e+001; krok(n+1)=7.444102e-003; ng(n+1)=6.211360e+002;
n=61; farx(n+1)=4.557066e+000; foe(n+1)=1.708003e+001; krok(n+1)=4.042588e-003; ng(n+1)=1.003372e+003;
n=62; farx(n+1)=4.524919e+000; foe(n+1)=1.681774e+001; krok(n+1)=2.219272e-002; ng(n+1)=1.239387e+003;
n=63; farx(n+1)=4.488273e+000; foe(n+1)=1.665362e+001; krok(n+1)=9.677825e-003; ng(n+1)=2.251520e+003;
n=64; farx(n+1)=4.360264e+000; foe(n+1)=1.648349e+001; krok(n+1)=1.189399e-002; ng(n+1)=7.188166e+002;
n=65; farx(n+1)=4.262167e+000; foe(n+1)=1.640327e+001; krok(n+1)=1.196341e-002; ng(n+1)=1.296821e+003;
n=66; farx(n+1)=4.218582e+000; foe(n+1)=1.627476e+001; krok(n+1)=1.053841e-002; ng(n+1)=2.777653e+003;
n=67; farx(n+1)=4.235763e+000; foe(n+1)=1.619335e+001; krok(n+1)=1.763378e-002; ng(n+1)=1.311723e+003;
n=68; farx(n+1)=4.236583e+000; foe(n+1)=1.572787e+001; krok(n+1)=8.512166e-002; ng(n+1)=2.767351e+003;
n=69; farx(n+1)=3.877122e+000; foe(n+1)=1.500984e+001; krok(n+1)=1.400181e-001; ng(n+1)=5.261579e+003;
n=70; farx(n+1)=3.374120e+000; foe(n+1)=1.405160e+001; krok(n+1)=1.752988e-001; ng(n+1)=1.148557e+003;
n=71; farx(n+1)=3.351207e+000; foe(n+1)=1.339617e+001; krok(n+1)=2.134155e-001; ng(n+1)=1.611535e+003;
n=72; farx(n+1)=2.991495e+000; foe(n+1)=1.251989e+001; krok(n+1)=2.997685e-001; ng(n+1)=1.284272e+003;
n=73; farx(n+1)=2.767382e+000; foe(n+1)=1.176974e+001; krok(n+1)=1.827549e-001; ng(n+1)=1.412686e+003;
n=74; farx(n+1)=2.677494e+000; foe(n+1)=1.158420e+001; krok(n+1)=1.495129e-001; ng(n+1)=7.313034e+002;
n=75; farx(n+1)=2.530183e+000; foe(n+1)=1.120626e+001; krok(n+1)=4.188878e-001; ng(n+1)=1.132007e+003;
%odnowa zmiennej metryki
n=76; farx(n+1)=2.531503e+000; foe(n+1)=1.117055e+001; krok(n+1)=2.368223e-007; ng(n+1)=1.084885e+003;
n=77; farx(n+1)=2.550857e+000; foe(n+1)=1.103441e+001; krok(n+1)=3.430845e-006; ng(n+1)=6.802235e+002;
n=78; farx(n+1)=2.586311e+000; foe(n+1)=1.085847e+001; krok(n+1)=6.975132e-006; ng(n+1)=5.250875e+002;
n=79; farx(n+1)=2.551567e+000; foe(n+1)=1.080816e+001; krok(n+1)=5.202718e-004; ng(n+1)=5.963458e+001;
n=80; farx(n+1)=2.498322e+000; foe(n+1)=1.072932e+001; krok(n+1)=1.194415e-003; ng(n+1)=7.002632e+001;
n=81; farx(n+1)=2.425456e+000; foe(n+1)=1.064935e+001; krok(n+1)=3.792794e-003; ng(n+1)=3.502010e+002;
n=82; farx(n+1)=2.382814e+000; foe(n+1)=1.056761e+001; krok(n+1)=2.501815e-003; ng(n+1)=3.095274e+002;
n=83; farx(n+1)=2.320024e+000; foe(n+1)=1.048627e+001; krok(n+1)=6.727259e-003; ng(n+1)=8.834735e+002;
n=84; farx(n+1)=2.309300e+000; foe(n+1)=1.026854e+001; krok(n+1)=1.496365e-002; ng(n+1)=3.731688e+002;
n=85; farx(n+1)=2.290758e+000; foe(n+1)=1.023314e+001; krok(n+1)=1.626130e-002; ng(n+1)=5.106309e+002;
n=86; farx(n+1)=2.262954e+000; foe(n+1)=1.016654e+001; krok(n+1)=1.638172e-002; ng(n+1)=1.106214e+003;
n=87; farx(n+1)=2.222969e+000; foe(n+1)=1.001638e+001; krok(n+1)=9.213222e-003; ng(n+1)=4.225322e+002;
n=88; farx(n+1)=2.196201e+000; foe(n+1)=9.887593e+000; krok(n+1)=1.729712e-002; ng(n+1)=3.669166e+002;
n=89; farx(n+1)=2.080616e+000; foe(n+1)=9.809387e+000; krok(n+1)=2.440235e-002; ng(n+1)=1.050082e+003;
n=90; farx(n+1)=2.023152e+000; foe(n+1)=9.737248e+000; krok(n+1)=1.012183e-002; ng(n+1)=1.579776e+003;
n=91; farx(n+1)=1.983843e+000; foe(n+1)=9.648891e+000; krok(n+1)=1.565005e-002; ng(n+1)=1.874903e+003;
n=92; farx(n+1)=1.970093e+000; foe(n+1)=9.498835e+000; krok(n+1)=1.232694e-001; ng(n+1)=3.394857e+002;
n=93; farx(n+1)=1.976445e+000; foe(n+1)=9.321285e+000; krok(n+1)=1.005379e-001; ng(n+1)=3.221486e+002;
n=94; farx(n+1)=1.977232e+000; foe(n+1)=8.888082e+000; krok(n+1)=1.057059e-001; ng(n+1)=8.894412e+002;
n=95; farx(n+1)=1.973119e+000; foe(n+1)=8.732027e+000; krok(n+1)=1.111619e-001; ng(n+1)=6.748086e+002;
n=96; farx(n+1)=2.005556e+000; foe(n+1)=8.355129e+000; krok(n+1)=1.607119e-001; ng(n+1)=2.227678e+003;
n=97; farx(n+1)=1.967940e+000; foe(n+1)=7.855019e+000; krok(n+1)=1.919924e-001; ng(n+1)=1.024249e+003;
n=98; farx(n+1)=1.937680e+000; foe(n+1)=7.688198e+000; krok(n+1)=5.680644e-002; ng(n+1)=8.120185e+002;
n=99; farx(n+1)=1.945090e+000; foe(n+1)=7.427738e+000; krok(n+1)=3.224739e-001; ng(n+1)=1.279044e+003;
n=100; farx(n+1)=1.924177e+000; foe(n+1)=7.021114e+000; krok(n+1)=5.154350e-001; ng(n+1)=2.488488e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
