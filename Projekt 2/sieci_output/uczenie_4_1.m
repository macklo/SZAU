%uczenie predyktora oe
clear all;
n=0; farx(n+1)=3.913774e+003; foe(n+1)=3.932461e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=2.782016e+003; foe(n+1)=2.894697e+003; krok(n+1)=4.966995e-004; ng(n+1)=2.805515e+003;
n=2; farx(n+1)=1.052569e+003; foe(n+1)=9.588299e+002; krok(n+1)=2.855545e-003; ng(n+1)=1.828235e+003;
n=3; farx(n+1)=1.227842e+003; foe(n+1)=6.653138e+002; krok(n+1)=2.087853e-004; ng(n+1)=5.561037e+003;
n=4; farx(n+1)=1.781039e+003; foe(n+1)=5.382554e+002; krok(n+1)=1.178095e-003; ng(n+1)=4.783450e+003;
n=5; farx(n+1)=9.451703e+002; foe(n+1)=4.212828e+002; krok(n+1)=9.832841e-003; ng(n+1)=6.992194e+002;
n=6; farx(n+1)=7.105212e+002; foe(n+1)=3.745763e+002; krok(n+1)=1.029474e-003; ng(n+1)=9.675399e+002;
n=7; farx(n+1)=5.554518e+002; foe(n+1)=3.464320e+002; krok(n+1)=9.825431e-004; ng(n+1)=9.584926e+002;
n=8; farx(n+1)=4.567330e+002; foe(n+1)=3.331788e+002; krok(n+1)=5.557598e-003; ng(n+1)=3.328743e+002;
n=9; farx(n+1)=4.109582e+002; foe(n+1)=3.280267e+002; krok(n+1)=2.104259e-003; ng(n+1)=3.032768e+002;
n=10; farx(n+1)=3.542722e+002; foe(n+1)=3.199100e+002; krok(n+1)=1.126281e-002; ng(n+1)=1.663508e+002;
n=11; farx(n+1)=3.089529e+002; foe(n+1)=3.093028e+002; krok(n+1)=3.625910e-003; ng(n+1)=2.355894e+002;
n=12; farx(n+1)=2.830790e+002; foe(n+1)=3.045386e+002; krok(n+1)=2.284436e-002; ng(n+1)=3.605386e+002;
n=13; farx(n+1)=2.539053e+002; foe(n+1)=3.010579e+002; krok(n+1)=5.557598e-003; ng(n+1)=5.336703e+002;
n=14; farx(n+1)=2.410602e+002; foe(n+1)=2.928488e+002; krok(n+1)=1.850334e-002; ng(n+1)=5.747256e+002;
n=15; farx(n+1)=2.396462e+002; foe(n+1)=2.854323e+002; krok(n+1)=2.835564e-002; ng(n+1)=6.745854e+002;
n=16; farx(n+1)=2.157024e+002; foe(n+1)=2.783889e+002; krok(n+1)=3.222183e-002; ng(n+1)=6.614272e+002;
n=17; farx(n+1)=1.790419e+002; foe(n+1)=2.667971e+002; krok(n+1)=2.331822e-002; ng(n+1)=8.147857e+002;
n=18; farx(n+1)=1.561313e+002; foe(n+1)=2.517443e+002; krok(n+1)=1.360047e-002; ng(n+1)=1.157775e+003;
n=19; farx(n+1)=1.512489e+002; foe(n+1)=2.454764e+002; krok(n+1)=1.142218e-002; ng(n+1)=2.580720e+003;
n=20; farx(n+1)=1.462838e+002; foe(n+1)=2.346003e+002; krok(n+1)=1.131000e-002; ng(n+1)=1.826560e+003;
n=21; farx(n+1)=1.465381e+002; foe(n+1)=2.327829e+002; krok(n+1)=2.080994e-003; ng(n+1)=4.637697e+003;
n=22; farx(n+1)=1.204723e+002; foe(n+1)=2.164659e+002; krok(n+1)=6.722782e-002; ng(n+1)=5.495941e+003;
n=23; farx(n+1)=1.068822e+002; foe(n+1)=1.650989e+002; krok(n+1)=7.859447e-002; ng(n+1)=4.092641e+003;
n=24; farx(n+1)=9.434054e+001; foe(n+1)=1.434215e+002; krok(n+1)=1.143200e-001; ng(n+1)=1.628222e+003;
n=25; farx(n+1)=5.835996e+001; foe(n+1)=1.222352e+002; krok(n+1)=2.349459e-001; ng(n+1)=1.264205e+003;
%odnowa zmiennej metryki
n=26; farx(n+1)=5.608847e+001; foe(n+1)=1.160604e+002; krok(n+1)=1.355752e-005; ng(n+1)=1.872148e+003;
n=27; farx(n+1)=5.534730e+001; foe(n+1)=9.531310e+001; krok(n+1)=6.047987e-005; ng(n+1)=1.908355e+003;
n=28; farx(n+1)=5.216777e+001; foe(n+1)=8.126115e+001; krok(n+1)=5.119287e-004; ng(n+1)=8.540911e+002;
n=29; farx(n+1)=4.337499e+001; foe(n+1)=7.157112e+001; krok(n+1)=1.022616e-003; ng(n+1)=5.294829e+002;
n=30; farx(n+1)=4.571139e+001; foe(n+1)=6.928158e+001; krok(n+1)=1.688016e-003; ng(n+1)=1.752695e+003;
n=31; farx(n+1)=3.660699e+001; foe(n+1)=6.218779e+001; krok(n+1)=8.625805e-003; ng(n+1)=8.557014e+002;
n=32; farx(n+1)=3.216870e+001; foe(n+1)=5.868531e+001; krok(n+1)=3.240245e-003; ng(n+1)=1.138420e+003;
n=33; farx(n+1)=2.734874e+001; foe(n+1)=5.425699e+001; krok(n+1)=3.262529e-003; ng(n+1)=7.404315e+002;
n=34; farx(n+1)=2.479587e+001; foe(n+1)=5.248611e+001; krok(n+1)=9.100900e-003; ng(n+1)=5.254015e+002;
n=35; farx(n+1)=2.356633e+001; foe(n+1)=5.015051e+001; krok(n+1)=3.251545e-002; ng(n+1)=4.242715e+002;
n=36; farx(n+1)=2.101148e+001; foe(n+1)=4.804383e+001; krok(n+1)=1.750226e-002; ng(n+1)=4.496920e+002;
n=37; farx(n+1)=2.083597e+001; foe(n+1)=4.695008e+001; krok(n+1)=1.270603e-002; ng(n+1)=5.988905e+002;
n=38; farx(n+1)=2.051990e+001; foe(n+1)=4.657210e+001; krok(n+1)=1.082825e-002; ng(n+1)=3.563775e+002;
n=39; farx(n+1)=2.050182e+001; foe(n+1)=4.212518e+001; krok(n+1)=2.658984e-001; ng(n+1)=4.043639e+002;
n=40; farx(n+1)=2.069450e+001; foe(n+1)=4.170553e+001; krok(n+1)=3.294851e-002; ng(n+1)=3.178032e+002;
n=41; farx(n+1)=1.919338e+001; foe(n+1)=4.019551e+001; krok(n+1)=1.460372e-001; ng(n+1)=2.794443e+002;
n=42; farx(n+1)=2.098976e+001; foe(n+1)=3.652645e+001; krok(n+1)=2.176076e-001; ng(n+1)=5.986346e+002;
n=43; farx(n+1)=2.065502e+001; foe(n+1)=3.451432e+001; krok(n+1)=8.536620e-001; ng(n+1)=8.848155e+001;
n=44; farx(n+1)=2.084186e+001; foe(n+1)=3.385330e+001; krok(n+1)=1.601162e-001; ng(n+1)=9.616981e+001;
n=45; farx(n+1)=2.064987e+001; foe(n+1)=3.224050e+001; krok(n+1)=5.872046e-001; ng(n+1)=3.446479e+002;
n=46; farx(n+1)=1.898208e+001; foe(n+1)=3.049347e+001; krok(n+1)=3.307424e-001; ng(n+1)=2.362194e+002;
n=47; farx(n+1)=1.778400e+001; foe(n+1)=2.944529e+001; krok(n+1)=2.695720e-001; ng(n+1)=1.440091e+002;
n=48; farx(n+1)=1.551635e+001; foe(n+1)=2.807894e+001; krok(n+1)=4.706699e-001; ng(n+1)=3.024041e+002;
n=49; farx(n+1)=1.512233e+001; foe(n+1)=2.732147e+001; krok(n+1)=3.904377e-001; ng(n+1)=1.885662e+002;
n=50; farx(n+1)=1.381214e+001; foe(n+1)=2.627130e+001; krok(n+1)=9.270274e-001; ng(n+1)=2.299256e+002;
%odnowa zmiennej metryki
n=51; farx(n+1)=1.388464e+001; foe(n+1)=2.613578e+001; krok(n+1)=1.384553e-005; ng(n+1)=2.857143e+002;
n=52; farx(n+1)=1.387067e+001; foe(n+1)=2.587582e+001; krok(n+1)=5.279238e-005; ng(n+1)=2.141116e+002;
n=53; farx(n+1)=1.397550e+001; foe(n+1)=2.580936e+001; krok(n+1)=6.856719e-004; ng(n+1)=3.909859e+001;
n=54; farx(n+1)=1.382893e+001; foe(n+1)=2.559817e+001; krok(n+1)=6.369581e-004; ng(n+1)=6.647721e+001;
n=55; farx(n+1)=1.256340e+001; foe(n+1)=2.479892e+001; krok(n+1)=3.516052e-003; ng(n+1)=5.862423e+001;
n=56; farx(n+1)=1.174838e+001; foe(n+1)=2.412134e+001; krok(n+1)=2.659087e-003; ng(n+1)=6.573373e+001;
n=57; farx(n+1)=9.849266e+000; foe(n+1)=2.185380e+001; krok(n+1)=3.174920e-003; ng(n+1)=1.444393e+002;
n=58; farx(n+1)=9.671704e+000; foe(n+1)=2.151056e+001; krok(n+1)=3.374936e-003; ng(n+1)=2.475877e+002;
n=59; farx(n+1)=9.386139e+000; foe(n+1)=2.103267e+001; krok(n+1)=1.333847e-002; ng(n+1)=2.804329e+002;
n=60; farx(n+1)=9.178187e+000; foe(n+1)=2.044630e+001; krok(n+1)=6.669234e-003; ng(n+1)=3.881795e+002;
n=61; farx(n+1)=8.738459e+000; foe(n+1)=1.887610e+001; krok(n+1)=1.261335e-001; ng(n+1)=2.437181e+002;
n=62; farx(n+1)=8.751227e+000; foe(n+1)=1.828231e+001; krok(n+1)=1.816570e-002; ng(n+1)=2.986495e+002;
n=63; farx(n+1)=8.637336e+000; foe(n+1)=1.776110e+001; krok(n+1)=3.854743e-002; ng(n+1)=3.868462e+002;
n=64; farx(n+1)=8.388415e+000; foe(n+1)=1.737933e+001; krok(n+1)=2.410544e-002; ng(n+1)=2.669878e+002;
n=65; farx(n+1)=8.342781e+000; foe(n+1)=1.725009e+001; krok(n+1)=1.614645e-002; ng(n+1)=1.797244e+002;
n=66; farx(n+1)=7.978638e+000; foe(n+1)=1.609984e+001; krok(n+1)=2.522670e-001; ng(n+1)=2.166317e+002;
n=67; farx(n+1)=7.871966e+000; foe(n+1)=1.502055e+001; krok(n+1)=1.522124e-001; ng(n+1)=4.253233e+002;
n=68; farx(n+1)=7.238153e+000; foe(n+1)=1.346287e+001; krok(n+1)=3.550835e-001; ng(n+1)=3.256906e+002;
n=69; farx(n+1)=6.772176e+000; foe(n+1)=1.293542e+001; krok(n+1)=1.865458e-001; ng(n+1)=1.917062e+002;
n=70; farx(n+1)=6.097520e+000; foe(n+1)=1.177458e+001; krok(n+1)=5.461800e-001; ng(n+1)=2.299617e+002;
n=71; farx(n+1)=5.932544e+000; foe(n+1)=1.134871e+001; krok(n+1)=2.583432e-001; ng(n+1)=1.735921e+002;
n=72; farx(n+1)=5.957666e+000; foe(n+1)=1.062285e+001; krok(n+1)=2.781623e-001; ng(n+1)=3.192707e+002;
n=73; farx(n+1)=5.793843e+000; foe(n+1)=1.014379e+001; krok(n+1)=3.477470e-001; ng(n+1)=1.216315e+002;
n=74; farx(n+1)=5.413356e+000; foe(n+1)=9.681400e+000; krok(n+1)=7.679697e-001; ng(n+1)=1.508348e+002;
n=75; farx(n+1)=4.652677e+000; foe(n+1)=8.708414e+000; krok(n+1)=1.462039e+000; ng(n+1)=2.183381e+002;
%odnowa zmiennej metryki
n=76; farx(n+1)=4.559697e+000; foe(n+1)=8.432546e+000; krok(n+1)=2.639619e-005; ng(n+1)=3.250980e+002;
n=77; farx(n+1)=4.512917e+000; foe(n+1)=8.285774e+000; krok(n+1)=2.979031e-005; ng(n+1)=2.155812e+002;
n=78; farx(n+1)=4.507688e+000; foe(n+1)=8.253490e+000; krok(n+1)=7.457719e-005; ng(n+1)=7.715476e+001;
n=79; farx(n+1)=4.404873e+000; foe(n+1)=8.073290e+000; krok(n+1)=1.083660e-003; ng(n+1)=4.022630e+001;
n=80; farx(n+1)=4.421426e+000; foe(n+1)=8.046741e+000; krok(n+1)=7.581588e-004; ng(n+1)=2.332533e+001;
n=81; farx(n+1)=4.401488e+000; foe(n+1)=7.990106e+000; krok(n+1)=6.607631e-003; ng(n+1)=1.940331e+001;
n=82; farx(n+1)=4.343734e+000; foe(n+1)=7.910912e+000; krok(n+1)=5.829556e-003; ng(n+1)=2.012908e+001;
n=83; farx(n+1)=4.315586e+000; foe(n+1)=7.750353e+000; krok(n+1)=2.307159e-002; ng(n+1)=2.613764e+001;
n=84; farx(n+1)=4.304088e+000; foe(n+1)=7.687810e+000; krok(n+1)=2.344633e-003; ng(n+1)=8.672660e+001;
n=85; farx(n+1)=4.268891e+000; foe(n+1)=7.600953e+000; krok(n+1)=2.580064e-002; ng(n+1)=1.741167e+002;
n=86; farx(n+1)=4.269773e+000; foe(n+1)=7.554784e+000; krok(n+1)=4.194258e-002; ng(n+1)=2.023234e+002;
n=87; farx(n+1)=4.141605e+000; foe(n+1)=7.291854e+000; krok(n+1)=7.322178e-002; ng(n+1)=2.353613e+002;
n=88; farx(n+1)=4.080359e+000; foe(n+1)=7.188620e+000; krok(n+1)=5.214527e-003; ng(n+1)=1.591747e+002;
n=89; farx(n+1)=3.998491e+000; foe(n+1)=7.102797e+000; krok(n+1)=5.985461e-002; ng(n+1)=3.117745e+002;
n=90; farx(n+1)=3.953552e+000; foe(n+1)=6.866489e+000; krok(n+1)=4.486659e-002; ng(n+1)=3.750230e+002;
n=91; farx(n+1)=3.374189e+000; foe(n+1)=6.324668e+000; krok(n+1)=2.601236e-001; ng(n+1)=3.692805e+002;
n=92; farx(n+1)=3.184495e+000; foe(n+1)=5.904019e+000; krok(n+1)=3.839848e-001; ng(n+1)=1.805423e+002;
n=93; farx(n+1)=3.029143e+000; foe(n+1)=5.600485e+000; krok(n+1)=2.268451e-001; ng(n+1)=2.912783e+002;
n=94; farx(n+1)=2.849051e+000; foe(n+1)=5.333724e+000; krok(n+1)=2.640812e-001; ng(n+1)=1.039274e+002;
n=95; farx(n+1)=2.609080e+000; foe(n+1)=5.148869e+000; krok(n+1)=3.743784e-001; ng(n+1)=1.284042e+002;
n=96; farx(n+1)=2.412513e+000; foe(n+1)=4.891963e+000; krok(n+1)=7.273018e-001; ng(n+1)=1.091150e+002;
n=97; farx(n+1)=2.370587e+000; foe(n+1)=4.708914e+000; krok(n+1)=5.945315e-001; ng(n+1)=8.639142e+001;
n=98; farx(n+1)=2.299991e+000; foe(n+1)=4.553691e+000; krok(n+1)=2.442288e-001; ng(n+1)=1.349818e+002;
n=99; farx(n+1)=2.282829e+000; foe(n+1)=4.466314e+000; krok(n+1)=1.067078e-001; ng(n+1)=1.874233e+002;
n=100; farx(n+1)=2.249665e+000; foe(n+1)=4.380412e+000; krok(n+1)=1.276801e-001; ng(n+1)=1.380460e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
